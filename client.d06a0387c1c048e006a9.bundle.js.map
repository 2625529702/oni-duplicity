{"version":3,"sources":["webpack:///./src/theme/index.ts","webpack:///./src/components/Text.tsx","webpack:///./src/selectors/oni-save.ts","webpack:///./src/selectors/selected-path.ts","webpack:///./src/utils.ts","webpack:///./src/theme/styled.ts","webpack:///./src/components/FormGroup.ts","webpack:///./src/pages/SaveEditor/components/fields/NumericField.tsx","webpack:///./src/pages/SaveEditor/components/fields/connect-field/index.ts","webpack:///./src/components/Input.tsx","webpack:///./src/components/SaveStructureLink/index.ts","webpack:///./src/services/save-structure/index.ts","webpack:///./src/components/Flex.tsx","webpack:///./src/selectors/selected-value.ts","webpack:///./src/actions/receive-onisave.ts","webpack:///./src/pages/SaveEditor/components/editors/components/EditorHeader.ts","webpack:///./src/pages/SaveEditor/components/editors/components/EditorContainer.ts","webpack:///./src/components/Box.ts","webpack:///./src/state/index.ts","webpack:///./src/theme/theme.ts","webpack:///./src/keys.ts","webpack:///./src/components/Portrait/index.ts","webpack:///./src/services/save-structure/structure/gameObjects/behaviors/default.ts","webpack:///./src/services/save-structure/structure/matchers.ts","webpack:///./src/services/save-structure/structure/root.ts","webpack:///./src/actions/select-path.ts","webpack:///./src/actions/modify-onisave.ts","webpack:///./src/theme/stylers/intent-color.ts","webpack:///./src/selectors/edit-mode.ts","webpack:///./src/components/EditModeCondition/index.ts","webpack:///./src/pages/SaveEditor/components/editors/game-objects/components/GameObjectHeader/index.ts","webpack:///./src/components/TextInput.tsx","webpack:///./src/components/Select.tsx","webpack:///./src/components/NumericInput.tsx","webpack:///./src/pages/SaveEditor/components/fields/from-typeinfo.tsx","webpack:///./src/services/save-structure/structure/gameObjects/gameObjectTypes/default.ts","webpack:///./src/components/Button.ts","webpack:///./src/actions/save-onisave.ts","webpack:///./src/actions/load-onisave.ts","webpack:///./src/services/save-serializer/worker-instance.ts","webpack:///./src/services/save-serializer/sagas/index.ts","webpack:///./src/actions/set-editmode.ts","webpack:///./src/actions/set-accessory.ts","webpack:///./src/actions/dismiss-error.ts","webpack:///./src/theme/stylers/intent-fill.ts","webpack:///./src/theme/stylers/text.ts","webpack:///./src/App/components/NavBar/components/NavBarTitleText.ts","webpack:///./src/App/components/NavBar/components/NavBarGroup.tsx","webpack:///./src/App/components/NavBar/components/NavBarContainer.tsx","webpack:///./src/App/components/NavBar/events.ts","webpack:///./src/App/components/NavBar/NavBar.tsx","webpack:///./src/App/components/NavBar/index.ts","webpack:///./src/App/components/AppContent.tsx","webpack:///./src/App/components/AppContainer.tsx","webpack:///./src/components/Separator.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemContent.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemHeader/components/ItemText.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemHeader/components/Expander.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemHeader/SaveStructureItemHeader.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemHeader/index.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemContainer.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/events.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/derived-state.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/SaveStructureItem.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/index.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureTreeContainer.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/SaveStructureTree.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/index.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/EditorModeSelector/events.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/EditorModeSelector/EditorModeSelector.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/EditorModeSelector/index.ts","webpack:///./src/components/Panel.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SidebarContainer.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/Sidebar.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/index.ts","webpack:///./src/pages/SaveEditor/components/EditorContainer.ts","webpack:///./src/pages/SaveEditor/components/ContentContainer.tsx","webpack:///./src/pages/SaveEditor/components/SaveEditorContainer.tsx","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/components/MinionPositionTab.tsx","webpack:///./src/components/SelectInput.tsx","webpack:///./src/pages/SaveEditor/components/fields/SelectField.tsx","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/components/MinionHealthTab/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/components/MinionHealthTab/MinionHealthTab.tsx","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/components/MinionHealthTab/index.ts","webpack:///./src/components/Autocomplete.tsx","webpack:///./src/components/TextAutocompleteInput.tsx","webpack:///./src/components/EditModeCondition/derived-state.ts","webpack:///./src/components/EditModeCondition/EditModeCondition.tsx","webpack:///./src/components/CheckInput.tsx","webpack:///./src/components/NullableInput.tsx","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/components/MinionAppearanceTab/events.ts","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/components/MinionAppearanceTab/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/components/MinionAppearanceTab/accessories-by-type.ts","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/components/MinionAppearanceTab/MinionAppearanceTab.tsx","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/components/MinionAppearanceTab/index.ts","webpack:///./src/components/EditableText/components/EditableTextInput.tsx","webpack:///./src/components/EditableText/EditableText.tsx","webpack:///./src/components/EditableText/index.ts","webpack:///./src/pages/SaveEditor/components/fields/EditableTextField.tsx","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/components/MinionEditableName.tsx","webpack:///./src/components/VerticalTabs/components/Tab.tsx","webpack:///./src/components/VerticalTabs/components/VerticalTabItem.ts","webpack:///./src/components/VerticalTabs/components/TabContent.tsx","webpack:///./src/components/VerticalTabs/VerticalTabs.tsx","webpack:///./src/components/VerticalTabs/index.ts","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/MinionEditor.tsx","webpack:///./src/pages/SaveEditor/components/editors/game-objects/MinionEditor/index.ts","webpack:///./src/pages/SaveEditor/components/editors/game-objects/components/GameObjectHeader/components/GameObjectHeaderContainer.tsx","webpack:///./src/components/Toolbar.ts","webpack:///./src/pages/SaveEditor/components/editors/game-objects/components/GameObjectHeader/derived-state.ts","webpack:///./src/format.ts","webpack:///./src/pages/SaveEditor/components/editors/game-objects/components/GameObjectHeader/GameObjectHeader.tsx","webpack:///./src/pages/SaveEditor/components/editors/game-objects/DefaultGameObjectEditor/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/game-objects/DefaultGameObjectEditor/DefaultGameObjectEditor.tsx","webpack:///./src/pages/SaveEditor/components/editors/game-objects/DefaultGameObjectEditor/index.ts","webpack:///./src/pages/SaveEditor/components/editors/GameObjectList/components/GameObjectListContent.tsx","webpack:///./src/pages/SaveEditor/components/editors/GameObjectList/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/GameObjectList/GameObjectList.tsx","webpack:///./src/pages/SaveEditor/components/editors/GameObjectList/index.ts","webpack:///./src/pages/SaveEditor/components/editors/GameObjectGroupList/components/GameObjectGroupListContent.tsx","webpack:///./src/pages/SaveEditor/components/editors/GameObjectGroupList/derived-state.tsx","webpack:///./src/pages/SaveEditor/components/editors/GameObjectGroupList/GameObjectGroupList.tsx","webpack:///./src/pages/SaveEditor/components/editors/GameObjectGroupList/index.ts","webpack:///./src/pages/SaveEditor/components/fields/Vector3Field.tsx","webpack:///./src/pages/SaveEditor/components/fields/Vector2IField.tsx","webpack:///./src/pages/SaveEditor/components/fields/Vector2Field.tsx","webpack:///./src/pages/SaveEditor/components/fields/TextField.tsx","webpack:///./src/math.ts","webpack:///./src/pages/SaveEditor/components/fields/EnumerationField.tsx","webpack:///./src/pages/SaveEditor/components/fields/BooleanField.tsx","webpack:///./src/pages/SaveEditor/components/fields/connect-field/events.ts","webpack:///./src/pages/SaveEditor/components/fields/connect-field/derived-state.tsx","webpack:///./src/pages/SaveEditor/components/fields/ArrayLikeField.tsx","webpack:///./src/pages/SaveEditor/components/editors/TemplateObjectEditor/components/TemplateObjectEditorContainer.ts","webpack:///./src/pages/SaveEditor/components/editors/TemplateObjectEditor/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/TemplateObjectEditor/TemplateObjectEditor.tsx","webpack:///./src/pages/SaveEditor/components/editors/TemplateObjectEditor/index.ts","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/components/DuplicantsListContent.ts","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/components/DuplicantsListContainer.ts","webpack:///./src/components/Portrait/PortraitFooter.ts","webpack:///./src/components/Portrait/PortraitHeader.ts","webpack:///./src/components/Portrait/Portrait.ts","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/components/DuplicantPortrait/derived-state.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/components/DuplicantPortrait/DuplicantPortrait.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/components/DuplicantPortrait/index.ts","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/DuplicantsList.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/index.ts","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/SaveGameTitle.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/SaveRootEditorContainer.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/derived-state.ts","webpack:///./src/components/InfoText.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/SaveRootEditor.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/index.ts","webpack:///./src/pages/SaveEditor/components/editors/DefaultObjectEditor/events.ts","webpack:///./src/pages/SaveEditor/components/editors/DefaultObjectEditor/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/DefaultObjectEditor/components/EditorField.tsx","webpack:///./src/pages/SaveEditor/components/editors/DefaultObjectEditor/components/Container.tsx","webpack:///./src/pages/SaveEditor/components/editors/DefaultObjectEditor/DefaultObjectEditor.tsx","webpack:///./src/pages/SaveEditor/components/editors/DefaultObjectEditor/index.ts","webpack:///./src/pages/SaveEditor/components/editors/index.ts","webpack:///./src/components/ResizePanel/components/ResizeHandleVisual.tsx","webpack:///./src/components/ResizePanel/components/ResizeHandle.tsx","webpack:///./src/components/ResizePanel/ResizePanel.tsx","webpack:///./src/components/ResizePanel/index.ts","webpack:///./src/components/SelectedPathBreadcrumb/components/BreadcrumbContainer.ts","webpack:///./src/components/SaveStructureLink/events.ts","webpack:///./src/components/SaveStructureLink/SaveStructureLink.tsx","webpack:///./src/selectors/selected-path-breadcrumb.ts","webpack:///./src/components/SelectedPathBreadcrumb/derived-state.ts","webpack:///./src/components/SelectedPathBreadcrumb/SelectedPathBreadcrumb.tsx","webpack:///./src/components/SelectedPathBreadcrumb/index.ts","webpack:///./src/services/save-structure/structure/utils.ts","webpack:///./src/services/save-structure/structure/gameObjects/behaviors/storage.ts","webpack:///./src/services/save-structure/structure/gameObjects/behaviors/primary-element.ts","webpack:///./src/services/save-structure/structure/gameObjects/behaviors/index.ts","webpack:///./src/services/save-structure/structure/gameObjects/gameObjectTypes/minion.ts","webpack:///./src/services/save-structure/structure/gameObjects/gameObjectTypes/index.ts","webpack:///./src/services/save-structure/structure/gameObjects/index.ts","webpack:///./src/services/save-structure/structure/index.ts","webpack:///./src/services/save-structure/utils.ts","webpack:///./src/pages/SaveEditor/derived-state.ts","webpack:///./src/pages/SaveEditor/SaveEditor.tsx","webpack:///./src/pages/SaveEditor/index.ts","webpack:///./src/pages/Saving/Saving.tsx","webpack:///./src/pages/Saving/index.ts","webpack:///./src/pages/Loading/Loading.tsx","webpack:///./src/pages/Loading/index.ts","webpack:///./src/pages/Error/Error.tsx","webpack:///./src/pages/Error/index.ts","webpack:///./src/pages/NoSave/NoSave.tsx","webpack:///./src/pages/NoSave/index.ts","webpack:///./src/App/events.ts","webpack:///./src/selectors/loading-state.ts","webpack:///./src/selectors/error.ts","webpack:///./src/App/derived-state.ts","webpack:///./src/App/App.tsx","webpack:///./src/App/index.ts","webpack:///./src/store/devtool-sanitizer.ts","webpack:///./src/saga/save-onisave.ts","webpack:///./src/services/save-serializer/sagas/write-savegame.ts","webpack:///./src/services/save-serializer/save-serializer.worker.ts","webpack:///./src/services/save-serializer/worker-messages.ts","webpack:///./src/services/save-serializer/sagas/read-savegame.ts","webpack:///./src/saga/load-onisave.ts","webpack:///./src/saga/index.ts","webpack:///./src/reducer/set-editmode.ts","webpack:///./src/reducer/set-accessory.ts","webpack:///./src/reducer/select-path.ts","webpack:///./src/reducer/receive-onisave.ts","webpack:///./src/reducer/modify-onisave.ts","webpack:///./src/reducer/dismiss-error.ts","webpack:///./src/reducer/index.ts","webpack:///./src/store/store.ts","webpack:///./src/store/index.ts","webpack:///./src/theme/stylers/intent.ts","webpack:///./src/theme/stylers/link.ts","webpack:///./src/theme/stylers/background.ts","webpack:///./src/theme/stylers/index.ts","webpack:///./src/root.tsx","webpack:///./src/style/style.css","webpack:///./src/style/style.css?c716","webpack:///./src/style/index.ts","webpack:///./src/index.tsx"],"names":["styled_1","__importDefault","__webpack_require__","exports","default","styled_2","ThemeProvider","injectGlobal","css","__export","styled_system_1","theme_1","theme_2","utils_1","Text","text","alignSelf","justifySelf","space","displayName","attachProps","Label","withComponent","oniSaveSelector","state","oniSave","selectedPathSelector","selectedPath","lodash_es_1","component","subComponents","c","forEach","key","styledComponents","__importStar","styled","keyframes","Box_1","props","getTheme","Content","extend","FormGroup","div","NumericInput_1","connect_field_1","react_redux_1","derived_state_1","events_1","connectEditorField","connect","Input","input","colors","bg","panel","borders","intent","secondary","primary","dangerous","SaveStructureLink_1","FlexItem","grow","shrink","Flex","direction","Item","reselect_1","save_structure_1","selected_path_1","oni_save_1","selectedValueSelector","createSelector","saveGame","length","getSaveItemEditValue","ACTION_RECEIVE_ONISAVE_BEGIN","receiveOniSaveBegin","operation","clearExisting","type","payload","ACTION_RECEIVE_ONISAVE_ERROR","receiveOniSaveError","error","ACTION_RECEIVE_ONISAVE_SUCCESS","receiveOniSaveSuccess","Text_1","EditorHeader","attrs","fontSize","fontWeight","EditorContainer","Box","width","height","background","withDefault","defaultProps","intentIsBg","defaultAppState","loadingState","editMode","Object","freeze","Intent","Background","isIntent","str","includes","isBackground","intentColors","hint","textIntentContrastColors","backgroundColors","navbar","separator","textIntentContrast","fontSizes","radii","theme","Keys","Enter","Esc","Portrait_1","defaultTemplateDataObj","$editor","$uiPathName","[object Object]","value","keys","isObject","filter","x","map","_","path","behavior","get","slice","templatePath","templateName","name","valuePathHack","defaultBehavior","children","templateData","push","extraData","$advanced","*","gameObjectIs","obj","behaviorIs","gameObjects_1","defaultAdvancedField","saveStructure","header","gameInfo","baseName","templates","world","settings","version","gameObjects","gameData","$editorProps","gasConduitFlow","liquidConduitFlow","simActiveRegionMin","simActiveRegionMax","fallingWater","unstableGround","worldDetail","customGameSettings","ACTION_SELECT_PATH","selectPath","ACTION_ONISAVE_MODIFY","modifyOniSave","intentColorOf","intentColorFromProps","Default","intentColor","of","editModeSelector","EditModeCondition_1","GameObjectHeader_1","React","core_decorators_1","keys_1","Input_1","TextInput","Component","super","this","_inputRef","createRef","editValue","isValid","minLength","maxLength","currentValue","createElement","innerRef","onChange","_onValueChange","onKeyPress","_onInputKeyPress","onBlur","_onInputBlur","e","target","_setEditValue","_commitEdit","validation","_validate","current","setCustomValidity","setState","onCommit","code","eval","__decorate","autobind","react_select_1","Creatable","Select","math_1","NumericInput","minValue","maxValue","min","max","valueAsNumber","clampValue","_clamp","precision","clamp","Math","oni_save_parser_1","ArrayLikeField_1","BooleanField_1","EnumerationField_1","NumericField_1","TextField_1","Vector2Field_1","Vector2IField_1","Vector3Field_1","getFieldElementClass","typeInfo","getTypeCode","info","SerializationTypeCode","Array","assign","subType","subTypes","Boolean","Byte","Colour","Dangerous","Dictionary","Double","Enumeration","enumerationName","HashSet","Int16","Int32","Int64","List","Pair","SByte","Single","String","UInt16","UInt32","UInt64","UserDefined","Primary","Vector2","Vector2I","Vector3","handleUnknownType","Error","behaviors_1","defaultGameObject","idBehavior","getBehavior","KPrefabIDBehavior","InstanceID","position","toFixed","y","gameObject","behaviors","i","Button","intentFill","ACTION_ONISAVE_SAVE","saveOniSave","fileName","ACTION_ONISAVE_LOAD","loadOniSave","file","worker_messages_1","save_serializer_worker_1","worker","parseSave","data","promise","Promise","accept","reject","unhook","onerror","onmessage","message","jsonToError","postMessage","writeSave","ACTION_SET_EDITMODE","setEditMode","ACTION_SET_ACCESSORY","setAccessory","gameObjectPath","ACTION_DISMISS_ERROR","dismissError","intentFillOf","intentFillFromProps","intent_color_1","wordWrap","style","prop","cssProperty","wordBreak","whiteSpace","NavBarTitleText","span","NavBarGroup","NavBarContainer","save_game_json_1","load_onisave_1","save_onisave_1","receive_onisave_1","mapDispatchToProps","onLoad","onLoadTestData","onSave","Button_1","NavBarContainer_1","NavBarGroup_1","NavBarTitleText_1","NavBar","_input","ref","el","display","_onLoadFileInput","onClick","_onLoadFileClick","_onSaveFileClick","click","files","withExtension","ext","endsWith","NavBar_1","AppContainer","Separator","SaveStructureItemContent","ItemText","Expander","className","expanded","viewBox","d","fill","Expander_1","ItemText_1","SaveStructureItemHeaderContainer","SaveStructureItemHeader","expandable","onExpandToggle","undefined","SaveStructureItemHeader_1","SaveStructureItemContainer","re_reselect_1","edit_mode_1","cacheKeyGenerator","saveItemPath","join","itemPathSelector","title","getSaveItemTitle","selectionStatus","itemPath","every","childPaths","getSaveItemChildPaths","mapStateToProps","SaveStructureItemContainer_1","SaveStructureItemContent_1","SaveStructureItemComponent","_ref","isExpanded","_scrollIntoView","oldProps","isExpandable","titleIntent","Secondary","valueElement","childPath","SaveStructureItem","_onClick","_onExpandToggle","SaveStructureItem_1","SaveStructureTreeContainer","SaveStructureTreeContainer_1","SaveStructureTree","SaveStructureTree_1","EditorModeSelector","htmlFor","id","_onAdvancedModeChange","checked","EditorModeSelector_1","Panel","Panel_1","SidebarContainer","SidebarContainer_1","Sidebar","Sidebar_1","ContentContainer","SaveEditorContainer","FormGroup_1","MinionPositionTab","Fragment","Select_1","SelectInput","_a","options","__rest","clearable","SelectInput_1","SelectField","selected_value_1","healthBehavior","HealthBehavior","healthStatePath","healthBehaviorIndex","findIndex","structuredSelector","createStructuredSelector","SelectField_1","MinionHealthTab","HealthState","isNaN","parseInt","label","MinionHealthTab_1","react_autocomplete_1","AutocompleteItem","Autocomplete","renderInput","inputProps","convertProps","renderItem","item","isHighlighted","defaultRenderItem","renderMenu","bind","AutocompleteMenu","items","styles","elements","Autocomplete_1","TextAutocompleteInput","getItemValue","onSelect","_onValueSelect","selectOnBlur","currentEditMode","EditModeCondition","CheckInput","Flex_1","CheckInput_1","NullableInput","isNotNull","renderNull","element","defaultValue","resolve","_onNotNullChecked","onSetAccessory","AccessorizerBehavior","createAccessorySelector","accessoryType","accessories","accessory","getAccessoryOfType","getAccessoryName","ACCESSORY_TYPES","ACCESSORIES_BY_TYPE","body","ACCESSORY_BODY_NAMES","hat","hat_hair","hair_always","hair","ACCESSORY_HAIR_NAMES","headshape","ACCESSORY_HEAD_NAMES","eyes","ACCESSORY_EYE_NAMES","mouth","ACCESSORY_MOUTH_NAMES","neck","arm","accessories_by_type_1","NullableInput_1","TextInput_1","TextAutocompleteInput_1","TDText","NoAccessory","NoAccessoryMouth","MinionAppearanceTab","fields","_renderAccessoryField","editGroup","_renderAccessorySelector","accessoryNames","MinionAppearanceTab_1","EditableTextInput","EditableTextInput_1","EditableText","autoFocus","_onEditableChange","onKeyUp","_onEditableKeyUp","onFocus","_onEditableFocus","_onEditableBlur","_onTextClick","_commit","_reset","select","EditableText_1","EditableTextField_1","EditorHeader_1","MinionHeader","minionNamePath","mr","Tab","VerticalTabItem","isSelected","TabContent","pl","p","TabContent_1","VerticalTabItem_1","Tab_1","VerticalTabs","selectedKey","tabs","Children","isValidElement","tabKey","tabItems","tab","_onTabItemClick","content","find","VerticalTabs_1","behaviorIndex","MinionIdentityBehavior","EditorContainer_1","MinionEditableName_1","MinionPositionTab_1","DuplicantEditor","MinionEditor_1","GameObjectHeaderContainer","toolbarItem","align","alignContent","ToolbarLabel","ToolbarGroup","Toolbar","Group","primaryElementBehavior","PrimaryElementBehavior","primaryElement","ElementID","POSITION_PRECISION","formatPositionValue","v","toPrecision","formatPosition","formatSimHash","hash","SimHashes","formatDisease","diseaseId","format_1","Toolbar_1","GameObjectHeaderContainer_1","GameObjectHeader","gameObjectName","selectedValue","prefabIdBehavior","prefabId","group","getPathGameObjectGroup","DefaultGameObjectEditor","DefaultGameObjectEditor_1","GroupListContent","gameObjectItems","GameObjectListContent_1","GameObjectList","portraits","Header","GameObjectList_1","GameObjectGroupListContent","gameObjectGroups","count","GameObjectGroupListContent_1","GameObjectGroupList","Footer","GameObjectGroupList_1","Vector3Field","Vector2IField","Vector2Field","createClamp","clampArray","clampInt8","Int8Array","clampUInt8","Uint8Array","clampInt16","Int16Array","clampUInt16","Uint16Array","clampInt32","Int32Array","clampUInt32","Uint32Array","clampSingle","Float32Array","clampDouble","Float64Array","CLAMPS_BY_PRECISION","int8","uint8","int16","uint16","int32","uint32","single","double","clamper","EnumerationField","enumeration","getEnumeration","searchable","_onSelectInputChange","Hint","prototype","hasOwnProperty","call","EnumerationsByName","BooleanField","modify_onisave_1","dispatch","itemValue","from_typeinfo_1","ArrayLikeField","ValueElement","TemplateObjectEditorContainer","valuePath","template","part","member","properties","typeCode","LIST_TYPES","indexOf","H4","TD","TemplateObjectEditorContainer_1","TemplateObjectEditor","fieldRows","FieldEditor","TemplateObjectEditor_1","DuplicantsListContent","DuplicantsListContainer","PortraitFooter","PortraitHeader","PortraitHeader_1","PortraitFooter_1","Portrait","gameObjectIndex","generateCacheKey","duplicants","duplicantIdentity","identBehavior","gameSave","groupIndex","ident","gender","genderStringKey","arrivalCycle","arrivalTime","DuplicantPortrait","DuplicantPortrait_1","duplicantsSetPath","index","duplicantIndexes","minionSet","range","DuplicantsListContainer_1","DuplicantsListContent_1","DuplicantsList","duplicantPortraits","DuplicantsList_1","SaveGameTitle","SaveRootEditorContainer","InfoText","InfoText_1","SaveRootEditorContainer_1","SaveGameTitle_1","SaveRootEditor","_renderContent","numGameObjects","reduce","set","numberOfCycles","numberOfDuplicants","SaveRootEditor_1","onModify","isPrimitive","structuredSelectors","primitiveTypes","val","valType","EditorField","_onChange","JSON","stringify","propKey","parse","Container","Container_1","EditorField_1","TH","DefaultObjectEditor","fieldElements","field","_renderFieldRow","_onFieldChange","DefaultObjectEditor_1","editors","save-root","game-object-group-list","game-object-list","template-object","game-object-default","game-object-minion","getEditor","editorType","ResizeHandleVisual","isResizing","react_draggable_1","ResizeHandleVisual_1","ResizeHandle","DraggableCore","onStart","_onStart","onStop","_onStop","onDrag","_onDrag","onResize","deltaX","ResizeHandle_1","ResizePanel","defaultWidth","_onResize","delta","s","ResizePanel_1","BreadcrumbContainer","SaveStructureLink","Link","link","selectedPathBreadcrumbSelector","getSaveItemBreadcrumb","selected_path_breadcrumb_1","breadcrumb","BreadcrumbContainer_1","SelectedPathBreadcrumb","links","isFinal","SelectedPathBreadcrumb_1","root_1","getSaveStructureDef","saveGamePath","save","iter","walkSaveStructurePath","result","next","done","structure","def","subStructure","$variants","variant","$match","matchers_1","default_1","storageBehaviorExtraData","storageBehavior","StorageBehavior","primary_element_1","minionGameObject","identityBehavior","gameObjectStructure","minion","gameObjectVariantInfo","createGameObjectVariants","defaultVariant","setStructure","variants","rootVariant","gameObjectGroupsStructure","$uiChildren","gameObjectsStructure","structure_1","GAME_OBJECT_GROUP_PATH_ROOT","comparePathMatch","GAME_OBJECT_PATH_ROOT","getPathGameObject","GAME_OBJECT_BEHAVIOR_PATH_ROOT","getPathBehavior","match","nameSource","nameProducer","breadcrumbs","structurePath","defPath","collectChildPaths","getSaveItemEditor","getSaveItemEditorProps","propFactory","uiChildren","defKeys","collectAutoChildPaths","checkEditMode","advanced","advancedProducer","isImplicitChild","isArray","stateSelectors","editorProps","editors_1","SaveEditorContainer_1","ContentContainer_1","Separator_1","SaveEditor","ObjectEditor","SaveEditor_1","Saving","Saving_1","Loading","Loading_1","onDismiss","stack","Error_1","NoSave","NoSave_1","onDismissError","loadingStateSelector","errorSelector","error_1","loading_state_1","AppContainer_1","AppContent_1","App","App_1","actionSanitizer","action","sanitizeSave","stateSanitizer","streamed","effects_1","sagas_1","file_saver_1","saveEditorSaga","takeEvery","handleOniSaveLoad","saveName","blob","put","writeSaveGame","saveAs","worker_instance_1","Blob","module","Worker","parseSaveSuccess","parseSaveError","errorToJson","writeSaveSuccess","writeSaveError","readSaveGame","readFile","reader","FileReader","onload","readAsArrayBuffer","saga","fork","set_editmode_1","state_1","immer_1","set_accessory_1","setAccessoryReducer","accessoryIndex","getIndexOfAccessoryType","splice","newAccessory","Accessory","select_path_1","selectPathReducer","receiveOniSaveReducer","modifyOniSaveReducer","draft","dismiss_error_1","dismissErrorReducer","reduce_reducers_1","reducers","redux_1","redux_saga_1","reducer_1","saga_1","devtool_sanitizer_1","createStore","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","sagaMiddleware","store","applyMiddleware","run","intent_fill_1","intentDefault","defaultIntent","intentOf","isBg","intentFromProps","text_1","backgroundOf","backgroundFromProps","react_hot_loader_1","store_1","Root","Provider","hot","hmr","transform","insertInto","locals","ReactDOM","react_modal_1","rootEl","document","getElementById","setAppElement","render"],"mappings":"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","file":"client.d06a0387c1c048e006a9.bundle.js","sourcesContent":["import styled from \"./styled\";\r\nexport default styled;\r\nexport { ThemeProvider, injectGlobal, css } from \"./styled\";\r\n\r\nexport * from \"./theme\";\r\n\r\nexport * from \"./stylers\";\r\n","import {\r\n  AlignSelfProps,\r\n  JustifySelfProps,\r\n  SpaceProps,\r\n  alignSelf,\r\n  justifySelf,\r\n  space\r\n} from \"styled-system\";\r\n\r\nimport styled from \"@/theme\";\r\n\r\nimport { TextProps as ThemeTextProps, text } from \"@/theme\";\r\n\r\nimport { attachProps } from \"@/utils\";\r\n\r\nexport type TextProps = ThemeTextProps &\r\n  AlignSelfProps &\r\n  JustifySelfProps &\r\n  SpaceProps;\r\nconst Text = styled<TextProps, \"span\">(\"span\")`\r\n  ${text};\r\n  ${alignSelf};\r\n  ${justifySelf};\r\n  ${space};\r\n`;\r\nText.displayName = \"Text\";\r\nexport default attachProps(Text, {\r\n  Label: Text.withComponent(\"label\") as StyledWithComponentTag<\r\n    \"label\",\r\n    TextProps\r\n  >\r\n});\r\n","import { AppState } from \"@/state\";\r\n\r\nconst oniSaveSelector = (state: AppState) => state.oniSave;\r\nexport default oniSaveSelector;\r\n","import { AppState } from \"@/state\";\r\n\r\nconst selectedPathSelector = (state: AppState) => state.selectedPath;\r\nexport default selectedPathSelector;\r\n","import { forEach } from \"lodash-es\";\r\n\r\nexport function attachProps<\r\n  TTarget,\r\n  TSubComponents extends Record<string, any>\r\n>(component: TTarget, subComponents: TSubComponents): TTarget & TSubComponents {\r\n  const c = component as any;\r\n  forEach(subComponents, (component, key) => {\r\n    c[key] = component;\r\n  });\r\n  return c as any;\r\n}\r\n","import * as styledComponents from \"styled-components\";\r\nimport { ThemedStyledComponentsModule } from \"styled-components\";\r\n\r\nimport { Theme } from \"./theme\";\r\n\r\nconst {\r\n  default: styled,\r\n  css,\r\n  injectGlobal,\r\n  keyframes,\r\n  ThemeProvider\r\n} = styledComponents as ThemedStyledComponentsModule<Theme>;\r\n\r\nexport { css, injectGlobal, keyframes, ThemeProvider };\r\nexport default styled;\r\n","import styled from \"@/theme\";\r\n\r\nimport { TextProps, text, getTheme } from \"@/theme\";\r\n\r\nimport { attachProps } from \"@/utils\";\r\n\r\nimport Box, { BoxProps } from \"@/components/Box\";\r\n\r\nexport type FormLabelProps = TextProps;\r\nconst Label = styled<FormLabelProps, \"label\">(\"label\")`\r\n  ${text};\r\n  margin-right: ${props => getTheme(props).space[1]}px;\r\n`;\r\nLabel.displayName = \"FormGroup.Label\";\r\n\r\nexport type FormContentProps = BoxProps;\r\nconst Content = Box.extend`\r\n  flex-grow: 1;\r\n  flex-shrink: 1;\r\n  flex-basis: auto;\r\n`;\r\nContent.displayName = \"FormGroup.Content\";\r\n\r\nconst FormGroup = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-start;\r\n  margin-bottom: ${props => getTheme(props).space[1]}px;\r\n`;\r\nFormGroup.displayName = \"FormGroup\";\r\n\r\nexport default attachProps(FormGroup, {\r\n  Label,\r\n  Content\r\n});\r\n","import NumericInput from \"@/components/NumericInput\";\r\n\r\nimport connectEditorField from \"./connect-field\";\r\n\r\nexport default connectEditorField()(NumericInput);\r\n","import { connect } from \"react-redux\";\r\n\r\nexport * from \"./props\";\r\n\r\nimport { EditorFieldProps } from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\nimport { AppState } from \"@/state\";\r\n\r\nexport type InjectedProps = StateProps & DispatchProps;\r\n\r\nexport default function connectEditorField() {\r\n  return connect<StateProps, DispatchProps, EditorFieldProps, AppState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  );\r\n}\r\n","import styled, { getTheme, text } from \"@/theme\";\r\n\r\nexport interface InputProps {}\r\nconst Input = styled.input`\r\n  ${text};\r\n  padding: 2px;\r\n  background-color: ${props => getTheme(props).colors.bg.panel};\r\n  border: ${props => getTheme(props).borders[1]};\r\n  border-color: ${props => getTheme(props).colors.intent.secondary};\r\n  &:focus {\r\n    border-color: ${props => getTheme(props).colors.intent.primary};\r\n    outline: none;\r\n  }\r\n  &:invalid {\r\n    border-color: ${props => getTheme(props).colors.intent.dangerous};\r\n  }\r\n`;\r\nInput.displayName = \"Input\";\r\nexport default Input;\r\n","export * from \"./props\";\r\nimport SaveStructureLink from \"./SaveStructureLink\";\r\nexport default SaveStructureLink;\r\n","export * from \"./utils\";\r\nexport * from \"./types\";\r\n","import { attachProps } from \"@/utils\";\r\n\r\nimport Box, { BoxProps } from \"./Box\";\r\n\r\nexport interface FlexItemProps extends BoxProps {\r\n  grow?: boolean;\r\n  shrink?: boolean;\r\n}\r\n\r\nconst FlexItem = Box.extend<FlexItemProps>`\r\n  flex-grow: ${props => (props.grow ? 1 : 0)};\r\n  flex-shrink: ${props => (props.shrink ? 1 : 0)};\r\n  flex-basis: auto;\r\n  box-sizing: border-box;\r\n`;\r\nFlexItem.displayName = \"FlexItem\";\r\n\r\nexport interface FlexProps extends BoxProps {\r\n  direction: \"row\" | \"column\";\r\n}\r\n\r\nconst Flex = Box.extend<FlexProps>`\r\n  display: flex;\r\n  flex-direction: ${props => props.direction};\r\n  align-items: stretch;\r\n`;\r\nFlex.displayName = \"Flex\";\r\n\r\nexport default attachProps(Flex, {\r\n  Item: FlexItem\r\n});\r\n","import { createSelector } from \"reselect\";\r\n\r\nimport { getSaveItemEditValue } from \"@/services/save-structure\";\r\n\r\nimport selectedPath from \"./selected-path\";\r\nimport oniSave from \"./oni-save\";\r\n\r\nconst selectedValueSelector = createSelector(\r\n  oniSave,\r\n  selectedPath,\r\n  (saveGame, selectedPath) => {\r\n    if (!saveGame) {\r\n      return null;\r\n    }\r\n\r\n    if (selectedPath.length === 0) {\r\n      return saveGame;\r\n    }\r\n\r\n    return getSaveItemEditValue(selectedPath, saveGame);\r\n  }\r\n);\r\nexport default selectedValueSelector;\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nexport const ACTION_RECEIVE_ONISAVE_BEGIN = \"oni-save/receive:begin\";\r\nexport const receiveOniSaveBegin = (\r\n  operation: \"loading\" | \"saving\",\r\n  clearExisting?: boolean\r\n) => ({\r\n  type: ACTION_RECEIVE_ONISAVE_BEGIN as typeof ACTION_RECEIVE_ONISAVE_BEGIN,\r\n  payload: { operation, clearExisting }\r\n});\r\nexport type ReceiveOniSaveBeginAction = ReturnType<typeof receiveOniSaveBegin>;\r\n\r\nexport const ACTION_RECEIVE_ONISAVE_ERROR = \"oni-save/receive:error\";\r\nexport const receiveOniSaveError = (error: Error) => ({\r\n  type: ACTION_RECEIVE_ONISAVE_ERROR as typeof ACTION_RECEIVE_ONISAVE_ERROR,\r\n  payload: error\r\n});\r\nexport type ReceiveOniSaveErrorAction = ReturnType<typeof receiveOniSaveError>;\r\n\r\nexport const ACTION_RECEIVE_ONISAVE_SUCCESS = \"oni-save/receive:success\";\r\nexport const receiveOniSaveSuccess = (oniSave: SaveGame) => ({\r\n  type: ACTION_RECEIVE_ONISAVE_SUCCESS as typeof ACTION_RECEIVE_ONISAVE_SUCCESS,\r\n  payload: oniSave\r\n});\r\nexport type ReceiveOniSaveSuccessAction = ReturnType<\r\n  typeof receiveOniSaveSuccess\r\n>;\r\n\r\nexport type ReceiveOniSaveAction =\r\n  | ReceiveOniSaveBeginAction\r\n  | ReceiveOniSaveErrorAction\r\n  | ReceiveOniSaveSuccessAction;\r\n","import Text from \"@/components/Text\";\r\n\r\nconst EditorHeader = Text.extend.attrs({\r\n  fontSize: 4,\r\n  fontWeight: \"bold\"\r\n})`\r\n  align-self: baseline;\r\n`;\r\nEditorHeader.displayName = \"EditorHeader\";\r\nexport default EditorHeader;\r\n","import styled from \"@/theme\";\r\n\r\nconst EditorContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\nEditorContainer.displayName = \"EditorContainer\";\r\nexport default EditorContainer;\r\n","import styled, {\r\n  BackgroundProps,\r\n  IntentProps,\r\n  background,\r\n  intent\r\n} from \"@/theme\";\r\n\r\nimport {\r\n  WidthProps,\r\n  HeightProps,\r\n  SpaceProps,\r\n  width,\r\n  height,\r\n  space\r\n} from \"styled-system\";\r\n\r\nexport type BoxProps = WidthProps &\r\n  HeightProps &\r\n  SpaceProps &\r\n  BackgroundProps &\r\n  IntentProps;\r\n\r\nconst Box = styled<BoxProps, \"div\">(\"div\")`\r\n  ${width};\r\n  ${height};\r\n  ${space} ${background};\r\n  ${intent.withDefault(null)};\r\n`;\r\nBox.displayName = \"Box\";\r\nBox.defaultProps = {\r\n  intentIsBg: true\r\n};\r\nexport default Box;\r\n","import { SaveGame } from \"oni-save-parser\";\r\nimport { EditMode } from \"@/services/save-structure\";\r\n\r\nexport type LoadingState = \"idle\" | \"loading\" | \"saving\" | \"ready\";\r\n\r\nexport interface AppState {\r\n  loadingState: LoadingState;\r\n  error: Error | null;\r\n  oniSave: SaveGame | null;\r\n  selectedPath: string[];\r\n  editMode: EditMode;\r\n}\r\nexport const defaultAppState: Readonly<AppState> = {\r\n  loadingState: \"idle\" as \"idle\",\r\n  error: null,\r\n  oniSave: null,\r\n  selectedPath: [],\r\n  editMode: \"normal\"\r\n};\r\nObject.freeze(defaultAppState);\r\n","import { includes } from \"lodash-es\";\r\n\r\nexport enum Intent {\r\n  Primary = \"primary\",\r\n  Secondary = \"secondary\",\r\n  Default = \"default\",\r\n  Dangerous = \"dangerous\",\r\n  Hint = \"hint\"\r\n}\r\n\r\nexport function isIntent(str: string | null | undefined): str is Intent {\r\n  return includes(Intent, str);\r\n}\r\n\r\nexport enum Background {\r\n  Default = \"default\",\r\n  Navbar = \"navbar\",\r\n  Panel = \"panel\",\r\n  Separator = \"separator\"\r\n}\r\n\r\nexport function isBackground(\r\n  str: string | null | undefined\r\n): str is Background {\r\n  return includes(Background, str);\r\n}\r\n\r\n// https://coolors.co/33658a-ffb238-86bbd8-f34213-758e4f\r\nconst intentColors: Record<Intent, string> = {\r\n  default: \"#86BBD8\",\r\n  primary: \"#FFB238\",\r\n  secondary: \"#658E27\",\r\n  dangerous: \"#F34213\",\r\n  hint: \"#86BBD8\"\r\n};\r\n\r\n/**\r\n * Colors to use when the background is an intent.\r\n */\r\nconst textIntentContrastColors: Record<Intent, string> = {\r\n  default: \"black\",\r\n  primary: \"black\",\r\n  secondary: \"black\",\r\n  dangerous: \"white\",\r\n  hint: \"black\"\r\n};\r\n\r\n// https://coolors.co/313e50-3a435e-455561-5c6672-6c6f7f\r\nconst backgroundColors: Record<Background, string> = {\r\n  default: \"#3A435E\",\r\n  navbar: \"#313E50\",\r\n  panel: \"#455561\",\r\n  separator: \"#6C6F7F\"\r\n};\r\n\r\nconst colors = {\r\n  text: intentColors.default,\r\n  intent: intentColors,\r\n  textIntentContrast: textIntentContrastColors,\r\n  bg: backgroundColors\r\n};\r\n\r\nconst space = [0, 4, 8, 12];\r\n\r\nconst fontSizes = [12, 14, 16, 20, 24, 32, 48, 64, 96, 128];\r\n\r\n// border-radius\r\nconst radii = [0, 2, 4, 8];\r\n\r\nconst borders = [0, \"1px solid\", \"2px solid\"];\r\n\r\nexport const theme = {\r\n  colors,\r\n  space,\r\n  fontSizes,\r\n  radii,\r\n  borders\r\n};\r\n\r\nexport type Theme = typeof theme;\r\n\r\nexport function getTheme(props: any): Theme {\r\n  return props.theme || theme;\r\n}\r\n","const Keys = {\r\n  Enter: \"Enter\",\r\n  Esc: \"Escape\"\r\n};\r\n\r\nexport default Keys;\r\n","import Portrait from \"./Portrait\";\r\nexport default Portrait;\r\n","import { GameObjectBehavior, SaveGame } from \"oni-save-parser\";\r\n\r\nimport { get, forEach, isObject } from \"lodash-es\";\r\n\r\nimport { SaveStructureDef } from \"../../types\";\r\n\r\nconst defaultTemplateDataObj: SaveStructureDef<{}> = {\r\n  $editor: \"template-object\",\r\n  $uiPathName: false,\r\n\r\n  $uiChildren(value: any) {\r\n    let keys = (isObject(value) && Object.keys(value)) || [];\r\n    keys = keys.filter(x => isObject(value[x]));\r\n    if (keys.length === 0) {\r\n      return false;\r\n    }\r\n    return keys.map(x => [x]);\r\n  },\r\n\r\n  $editorProps(_: any, path: string[], saveGame: SaveGame) {\r\n    // 'gameObjects', '1', 'gameObjects', '6', 'behaviors', '4'\r\n    // 6 items deep\r\n    const behavior = get(saveGame, path.slice(0, 6));\r\n    const templatePath = path.slice(7);\r\n    if (!behavior) {\r\n      return {};\r\n    }\r\n    return {\r\n      templateName: behavior.name,\r\n      templatePath,\r\n      valuePathHack: path\r\n    };\r\n  }\r\n};\r\ndefaultTemplateDataObj[\"*\"] = defaultTemplateDataObj;\r\n\r\nexport const defaultBehavior: SaveStructureDef<GameObjectBehavior> = {\r\n  $uiPathName(behavior: GameObjectBehavior) {\r\n    return behavior.name;\r\n  },\r\n\r\n  $uiChildren(behavior: GameObjectBehavior) {\r\n    const children: string[][] = [];\r\n    if (\r\n      behavior.templateData &&\r\n      Object.keys(behavior.templateData).length > 0\r\n    ) {\r\n      // children.push([\"templateData\"]);\r\n      forEach(behavior.templateData, (_, key) => {\r\n        if (isObject(behavior.templateData[key])) {\r\n          children.push([\"templateData\", key]);\r\n        }\r\n      });\r\n    }\r\n    if (behavior.extraData) {\r\n      children.push([\"extraData\"]);\r\n    }\r\n    return children.length > 0 ? children : false;\r\n  },\r\n\r\n  $advanced(behavior: GameObjectBehavior) {\r\n    return true;\r\n\r\n    // const { templateData, extraData } = behavior;\r\n    // const hasTemplateData =\r\n    //   templateData && Object.keys(templateData).length > 0;\r\n    // const hasExtraData = extraData != null;\r\n    // const hasData = hasTemplateData || hasExtraData;\r\n    // // We are only 'advanced' (hidden) if we do not have any data to show\r\n    // return !hasData;\r\n  },\r\n\r\n  $editor: \"template-object\",\r\n  $editorProps(_: any, path: string[], saveGame: SaveGame) {\r\n    // 'gameObjects', '1', 'gameObjects', '6', 'behaviors', '4'\r\n    // 6 items deep\r\n    const behavior = get(saveGame, path);\r\n    if (!behavior) {\r\n      return {};\r\n    }\r\n    return {\r\n      templateName: behavior.name,\r\n      templatePath: [],\r\n      valuePathHack: [...path, \"templateData\"]\r\n    };\r\n  },\r\n\r\n  templateData: {\r\n    $uiPathName: false,\r\n\r\n    \"*\": defaultTemplateDataObj\r\n\r\n    // TODO: Handle '*' with an object that gets the template editor\r\n    //  set up with the correct template path, and references itself\r\n    //  for its own '*' recursively.\r\n  } as SaveStructureDef<{}>\r\n};\r\n","import { isObject } from \"lodash-es\";\r\nimport { GameObjectBehavior, GameObjectGroup } from \"oni-save-parser\";\r\n\r\nexport function gameObjectIs(type: string): (obj: GameObjectGroup) => boolean {\r\n  return obj => isObject(obj) && obj.name === type;\r\n}\r\n\r\nexport function behaviorIs(type: string): (obj: GameObjectBehavior) => boolean {\r\n  return obj => isObject(obj) && obj.name === type;\r\n}\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nimport gameObjectsStructure from \"./gameObjects\";\r\nimport { SaveStructureDef } from \"./types\";\r\n\r\n// The default 'any' makes this useful for variables, but useless for asignment.\r\n//  This is because type 'any' includes all fields, and overrides our selective\r\n//  exclusion of $-prefix fields\r\nconst defaultAdvancedField: SaveStructureDef<{}> = { $advanced: true };\r\n\r\nconst saveStructure: SaveStructureDef<SaveGame> = {\r\n  $editor: \"save-root\",\r\n  $uiPathName: (obj: SaveGame) => obj.header.gameInfo.baseName || \"Save Game\",\r\n\r\n  /**\r\n   * Version info and precalculated values.\r\n   * Changing this stuff can confuse the game or display bad data\r\n   * for the loading screen.\r\n   */\r\n  header: defaultAdvancedField,\r\n\r\n  /**\r\n   * Data templates for the rest of the save.  Changing anything in here\r\n   * is guarenteed to result in a corrupt save.\r\n   */\r\n  templates: defaultAdvancedField,\r\n\r\n  /**\r\n   * World width and height, and opaque engine data we do not understand.\r\n   * Contents of the worldmap and state of the fluid/gas/electrical networks\r\n   * live in here.\r\n   */\r\n  world: defaultAdvancedField,\r\n\r\n  /**\r\n   * Settings for the master game object handler.\r\n   * None of these are related to user-settings, and changing them\r\n   * will most likely result in an immediately or eventually corrupt save.\r\n   */\r\n  settings: defaultAdvancedField,\r\n\r\n  /**\r\n   * Game version info.  Should mirror the same data\r\n   * stored in header.\r\n   * Should never be touched, as ONI makes decisions on how to load the file\r\n   * based on this.\r\n   */\r\n  version: defaultAdvancedField,\r\n\r\n  /**\r\n   * Game objects.  These are the interesting bits\r\n   */\r\n  gameObjects: gameObjectsStructure,\r\n\r\n  /**\r\n   * Another blob of generalized non-object-specific game data\r\n   */\r\n  gameData: {\r\n    $editor: \"template-object\",\r\n    $editorProps() {\r\n      return {\r\n        templateName: \"Game+GameSaveData\"\r\n      };\r\n    },\r\n\r\n    /**\r\n     * Presumably tracks the flow of material through the gas conduits.\r\n     * I am reasonably sure this also ties into native game data,\r\n     * and changing this will probably get the engine into an\r\n     * inconsistant state.\r\n     */\r\n    gasConduitFlow: defaultAdvancedField,\r\n\r\n    /**\r\n     * Presumably tracks the flow of material through the loquid conduits.\r\n     * I am reasonably sure this also ties into native game data,\r\n     * and changing this will probably get the engine into an\r\n     * inconsistant state.\r\n     */\r\n    liquidConduitFlow: defaultAdvancedField,\r\n\r\n    /**\r\n     * Probably deals with limiting the area of the map that the game is running logic for.\r\n     */\r\n    simActiveRegionMin: defaultAdvancedField,\r\n\r\n    /**\r\n     * Probably deals with limiting the area of the map that the game is running logic for.\r\n     */\r\n    simActiveRegionMax: defaultAdvancedField,\r\n\r\n    fallingWater: defaultAdvancedField,\r\n\r\n    unstableGround: defaultAdvancedField,\r\n\r\n    /**\r\n     * While this does contain (multiple) worldgen seeds,\r\n     *  all seeds are the same and reflect the definitivie chosen seed in customGameSettings.\r\n     * It also has a bunch of polygons indicating regions of the overworld.  Not sure what it represents,\r\n     *  might be biome regions.\r\n     */\r\n    worldDetail: defaultAdvancedField,\r\n\r\n    customGameSettings: defaultAdvancedField\r\n  }\r\n};\r\nexport default saveStructure;\r\n","export const ACTION_SELECT_PATH = \"editor/select-path\";\r\nexport const selectPath = (path: string[]) => ({\r\n  type: ACTION_SELECT_PATH as typeof ACTION_SELECT_PATH,\r\n  payload: path\r\n});\r\nexport type SelectPathAction = ReturnType<typeof selectPath>;\r\n","export const ACTION_ONISAVE_MODIFY = \"oni-save/modify\";\r\nexport const modifyOniSave = (path: string[], value: any) => ({\r\n  type: ACTION_ONISAVE_MODIFY as typeof ACTION_ONISAVE_MODIFY,\r\n  payload: { path, value }\r\n});\r\nexport type ModifyOniSaveAction = ReturnType<typeof modifyOniSave>;\r\n","import { css } from \"../styled\";\r\nimport { Intent, getTheme } from \"../theme\";\r\n\r\nimport { attachProps } from \"@/utils\";\r\n\r\nexport interface IntentColorProps {\r\n  intent?: Intent;\r\n}\r\n\r\nconst intentColorOf = (intent: Intent) => css`\r\n  ${props => getTheme(props).colors.intent[intent]};\r\n`;\r\n\r\nconst intentColorFromProps = css<IntentColorProps>`\r\n  color: ${props => intentColorOf(props.intent || Intent.Default)};\r\n`;\r\n\r\nexport const intentColor = attachProps(intentColorFromProps, {\r\n  of: intentColorOf\r\n});\r\n","import { AppState } from \"@/state\";\r\n\r\nconst editModeSelector = (state: AppState) => state.editMode;\r\nexport default editModeSelector;\r\n","import EditModeCondition from \"./EditModeCondition\";\r\nexport default EditModeCondition;\r\n","import GameObjectHeader from \"./GameObjectHeader\";\r\nexport default GameObjectHeader;\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Keys from \"@/keys\";\r\n\r\nimport Input from \"@/components/Input\";\r\n\r\nexport interface TextInputProps {\r\n  value: string;\r\n  minLength?: number;\r\n  maxLength?: number;\r\n  onCommit(value: string): void;\r\n}\r\n\r\ntype Props = TextInputProps;\r\ninterface State {\r\n  editValue: string | null;\r\n  isValid: boolean;\r\n}\r\nexport default class TextInput extends React.Component<Props, State> {\r\n  private _inputRef = React.createRef<HTMLInputElement>();\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      editValue: null,\r\n      isValid: true\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { value, minLength, maxLength } = this.props;\r\n    const { editValue } = this.state;\r\n\r\n    const currentValue = editValue != null ? editValue : value;\r\n\r\n    return (\r\n      <Input\r\n        innerRef={this._inputRef}\r\n        type=\"text\"\r\n        minLength={minLength}\r\n        maxLength={maxLength}\r\n        value={currentValue}\r\n        onChange={this._onValueChange}\r\n        onKeyPress={this._onInputKeyPress}\r\n        onBlur={this._onInputBlur}\r\n      />\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onValueChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const value = e.target.value;\r\n    this._setEditValue(value);\r\n  }\r\n\r\n  @autobind()\r\n  private _onInputKeyPress(e: React.KeyboardEvent<HTMLInputElement>) {\r\n    if (e.key === Keys.Enter) {\r\n      this._commitEdit();\r\n    }\r\n  }\r\n\r\n  @autobind()\r\n  private _onInputBlur() {\r\n    this._commitEdit();\r\n  }\r\n\r\n  private _setEditValue(value: string) {\r\n    const validation = this._validate(value);\r\n    const isValid = !validation;\r\n\r\n    if (this._inputRef.current) {\r\n      this._inputRef.current.setCustomValidity(validation || \"\");\r\n    }\r\n\r\n    this.setState({\r\n      editValue: value,\r\n      isValid\r\n    });\r\n  }\r\n\r\n  private _commitEdit() {\r\n    const { editValue, isValid } = this.state;\r\n    const { onCommit } = this.props;\r\n\r\n    this.setState({\r\n      editValue: null\r\n    });\r\n\r\n    if (!editValue || !isValid) {\r\n      return;\r\n    }\r\n\r\n    onCommit(editValue);\r\n  }\r\n\r\n  private _validate(value: string): string | null {\r\n    const { minLength, maxLength } = this.props;\r\n    if (minLength != null && (!value || value.length < minLength)) {\r\n      return `Value must be at least ${minLength} characters.`;\r\n    }\r\n\r\n    if (maxLength != null && value.length > maxLength) {\r\n      return `Value must be less than ${maxLength} characters.`;\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n","import styled from \"@/theme\";\r\nimport { WidthProps, width } from \"styled-system\";\r\n\r\nimport ReactSelect, {\r\n  Creatable as ReactSelectCreatable,\r\n  ReactSelectProps,\r\n  ReactCreatableSelectProps\r\n} from \"react-select\";\r\n\r\nimport { TextProps, text } from \"@/theme\";\r\nimport { attachProps } from \"@/utils\";\r\n\r\nexport { Option } from \"react-select\";\r\n\r\nexport interface SelectCreatableProps\r\n  extends ReactCreatableSelectProps,\r\n    WidthProps,\r\n    TextProps {}\r\nconst Creatable = styled<SelectCreatableProps>(ReactSelectCreatable)`\r\n  ${text};\r\n  ${width};\r\n`;\r\nCreatable.displayName = \"Select.Creatable\";\r\n\r\nexport interface SelectProps extends ReactSelectProps, WidthProps, TextProps {}\r\n// TODO: We need to pass the generated className to the specific className structure\r\n//  for the various sub-components of Select.\r\nconst Select = styled<SelectProps>(ReactSelect)`\r\n  ${text};\r\n  ${width};\r\n`;\r\nSelect.displayName = \"Select\";\r\nexport default attachProps(Select, {\r\n  Creatable\r\n});\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Keys from \"@/keys\";\r\n\r\nimport { NumberPrecision, clamp } from \"@/math\";\r\n\r\nimport Input from \"@/components/Input\";\r\n\r\nexport interface NumericInputProps {\r\n  value: number;\r\n  minValue?: number;\r\n  maxValue?: number;\r\n  precision?: NumberPrecision;\r\n  onCommit(value: number): void;\r\n}\r\n\r\ntype Props = NumericInputProps;\r\ninterface State {\r\n  editValue: number | null;\r\n  isValid: boolean;\r\n}\r\nexport default class NumericInput extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      editValue: null,\r\n      isValid: true\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { value, minValue, maxValue } = this.props;\r\n    const { editValue } = this.state;\r\n\r\n    const currentValue = editValue != null ? editValue : value;\r\n\r\n    return (\r\n      <Input\r\n        type=\"number\"\r\n        min={minValue}\r\n        max={maxValue}\r\n        value={currentValue}\r\n        onChange={this._onValueChange}\r\n        onKeyPress={this._onInputKeyPress}\r\n        onBlur={this._onInputBlur}\r\n      />\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onValueChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const value = e.target.valueAsNumber;\r\n    const clampValue = this._clamp(value);\r\n    const isValid = e.target.valueAsNumber === clampValue;\r\n    e.target.setCustomValidity(isValid ? \"\" : \"Value out of range\");\r\n    this.setState({\r\n      editValue: value,\r\n      isValid\r\n    });\r\n  }\r\n\r\n  @autobind()\r\n  private _onInputKeyPress(e: React.KeyboardEvent<HTMLInputElement>) {\r\n    if (e.key === Keys.Enter) {\r\n      this._commitEdit();\r\n    }\r\n  }\r\n\r\n  @autobind()\r\n  private _onInputBlur() {\r\n    this._commitEdit();\r\n  }\r\n\r\n  private _commitEdit() {\r\n    const { editValue, isValid } = this.state;\r\n    const { onCommit } = this.props;\r\n\r\n    this.setState({\r\n      editValue: null\r\n    });\r\n\r\n    if (!editValue || !isValid) {\r\n      return;\r\n    }\r\n\r\n    onCommit(editValue);\r\n  }\r\n\r\n  private _clamp(value: number): number {\r\n    const { precision = \"int32\", minValue, maxValue } = this.props;\r\n    value = clamp(precision, value);\r\n    if (maxValue != null) {\r\n      value = Math.min(value, maxValue);\r\n    }\r\n    if (minValue != null) {\r\n      value = Math.max(value, minValue);\r\n    }\r\n    return value;\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport { TypeInfo, SerializationTypeCode, getTypeCode } from \"oni-save-parser\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport SaveStructureLink from \"@/components/SaveStructureLink\";\r\n\r\nimport { EditorFieldProps } from \"./connect-field\";\r\n\r\nimport ArrayLikeField from \"./ArrayLikeField\";\r\nimport BooleanField from \"./BooleanField\";\r\nimport EnumerationField from \"./EnumerationField\";\r\nimport NumericField from \"./NumericField\";\r\nimport TextField from \"./TextField\";\r\nimport Vector2Field from \"./Vector2Field\";\r\nimport Vector2IField from \"./Vector2IField\";\r\nimport Vector3Field from \"./Vector3Field\";\r\n\r\nexport default function getFieldElementClass(\r\n  typeInfo: TypeInfo\r\n): React.ComponentType<EditorFieldProps> {\r\n  const code = getTypeCode(typeInfo.info);\r\n  switch (code) {\r\n    case SerializationTypeCode.Array:\r\n      return (props: EditorFieldProps) => (\r\n        <ArrayLikeField {...props} subType={typeInfo.subTypes![0]} />\r\n      );\r\n    case SerializationTypeCode.Boolean:\r\n      return (props: EditorFieldProps) => <BooleanField {...props} />;\r\n    case SerializationTypeCode.Byte:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} minValue={0} maxValue={0xff} />\r\n      );\r\n    case SerializationTypeCode.Colour:\r\n      return () => <Text intent={Intent.Dangerous}>TODO Colour</Text>;\r\n    case SerializationTypeCode.Dictionary:\r\n      return () => <Text intent={Intent.Dangerous}>TODO Dictionary</Text>;\r\n    case SerializationTypeCode.Double:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} precision=\"double\" />\r\n      );\r\n    case SerializationTypeCode.Enumeration:\r\n      return (props: EditorFieldProps) => (\r\n        <EnumerationField {...props} enumerationName={typeInfo.templateName!} />\r\n      );\r\n    case SerializationTypeCode.HashSet:\r\n      return (props: EditorFieldProps) => (\r\n        <ArrayLikeField {...props} subType={typeInfo.subTypes![0]} />\r\n      );\r\n    case SerializationTypeCode.Int16:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} precision=\"int16\" />\r\n      );\r\n    case SerializationTypeCode.Int32:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} precision=\"int32\" />\r\n      );\r\n    case SerializationTypeCode.Int64:\r\n      return () => <Text intent={Intent.Dangerous}>TODO Int64</Text>;\r\n    case SerializationTypeCode.List:\r\n      return (props: EditorFieldProps) => (\r\n        <ArrayLikeField {...props} subType={typeInfo.subTypes![0]} />\r\n      );\r\n    case SerializationTypeCode.Pair:\r\n      return () => <Text intent={Intent.Dangerous}>TODO Pair</Text>;\r\n    case SerializationTypeCode.SByte:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} minValue={-128} maxValue={127} />\r\n      );\r\n    case SerializationTypeCode.Single:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} precision=\"single\" />\r\n      );\r\n    case SerializationTypeCode.String:\r\n      return (props: EditorFieldProps) => <TextField {...props} />;\r\n    case SerializationTypeCode.UInt16:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} precision=\"uint16\" />\r\n      );\r\n    case SerializationTypeCode.UInt32:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} precision=\"uint32\" />\r\n      );\r\n    case SerializationTypeCode.UInt64:\r\n      return () => <Text intent={Intent.Dangerous}>TODO UInt64</Text>;\r\n    case SerializationTypeCode.UserDefined:\r\n      return (props: EditorFieldProps) => (\r\n        <SaveStructureLink intent={Intent.Primary} path={props.path}>\r\n          [{typeInfo.templateName || \"Edit\"}]\r\n        </SaveStructureLink>\r\n      );\r\n    case SerializationTypeCode.Vector2:\r\n      return Vector2Field;\r\n    case SerializationTypeCode.Vector2I:\r\n      return Vector2IField;\r\n    case SerializationTypeCode.Vector3:\r\n      return Vector3Field;\r\n    default:\r\n      return handleUnknownType(code);\r\n  }\r\n}\r\n\r\nfunction handleUnknownType(type: never): never {\r\n  throw new Error(`Type code \"${type}\" is unknown.`);\r\n}\r\n","import { GameObject, KPrefabIDBehavior, getBehavior } from \"oni-save-parser\";\r\n\r\nimport { SaveStructureDef } from \"../../types\";\r\n\r\nimport behavior from \"../behaviors\";\r\n\r\nexport const defaultGameObject: SaveStructureDef<GameObject> = {\r\n  $uiPathName(obj: GameObject) {\r\n    const idBehavior = getBehavior(obj, KPrefabIDBehavior);\r\n    const id =\r\n      (idBehavior &&\r\n        idBehavior.templateData &&\r\n        idBehavior.templateData.InstanceID) ||\r\n      \"[malformed]\";\r\n    const pos = `(${obj.position.x.toFixed(0)}, ${obj.position.y.toFixed(0)})`;\r\n    return `#${id} ${pos}`;\r\n  },\r\n\r\n  $uiChildren(gameObject: GameObject) {\r\n    const { behaviors } = gameObject;\r\n    if (!behaviors) {\r\n      return [];\r\n    }\r\n\r\n    return behaviors.map((_, i) => [\"behaviors\", `${i}`]);\r\n  },\r\n\r\n  $editor: \"game-object-default\",\r\n\r\n  behaviors: {\r\n    $uiPathName: false,\r\n    \"*\": behavior\r\n  }\r\n};\r\n","import * as React from \"react\";\r\n\r\nimport styled from \"@/theme\";\r\n\r\nimport { Intent, getTheme, intentFill } from \"@/theme\";\r\n\r\nexport interface ButtonProps {\r\n  intent?: Intent;\r\n  onClick?(e: React.MouseEvent<HTMLDivElement>): void;\r\n}\r\n\r\nconst Button = styled<ButtonProps, \"button\">(\"button\")`\r\n  ${intentFill};\r\n  border: none;\r\n  border-radius: ${props => getTheme(props).radii[1]}px;\r\n  margin: ${props => getTheme(props).space[1]}px;\r\n  font-size: ${props => getTheme(props).fontSizes[1]}px;\r\n`;\r\nButton.displayName = \"Button\";\r\nexport default Button;\r\n","export const ACTION_ONISAVE_SAVE = \"oni-save/save\";\r\nexport const saveOniSave = (fileName: string) => ({\r\n  type: ACTION_ONISAVE_SAVE as typeof ACTION_ONISAVE_SAVE,\r\n  payload: fileName\r\n});\r\nexport type SaveOniSaveAction = ReturnType<typeof saveOniSave>;\r\n","export const ACTION_ONISAVE_LOAD = \"oni-save/load\";\r\nexport const loadOniSave = (file: File) => ({\r\n  type: ACTION_ONISAVE_LOAD as typeof ACTION_ONISAVE_LOAD,\r\n  payload: file\r\n});\r\nexport type LoadOniSaveAction = ReturnType<typeof loadOniSave>;\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nimport {\r\n  SaveEditorResultEvent,\r\n  parseSave as parseSaveCommand,\r\n  writeSave as writeSaveCommand,\r\n  jsonToError\r\n} from \"./worker-messages\";\r\n\r\nimport SaveLoadWorker from \"worker-loader!./save-serializer.worker\";\r\n\r\nconst worker = new SaveLoadWorker();\r\n\r\nexport function parseSave(data: ArrayBuffer): Promise<SaveGame> {\r\n  const promise = new Promise<SaveGame>((accept, reject) => {\r\n    const unhook = () => {\r\n      worker.onerror = null;\r\n      worker.onmessage = null;\r\n    };\r\n\r\n    worker.onerror = error => reject(error);\r\n    worker.onmessage = (message: SaveEditorResultEvent) => {\r\n      const { data } = message;\r\n      switch (data.type) {\r\n        case \"parse-save:success\":\r\n          unhook();\r\n          accept(data.saveGame);\r\n          break;\r\n        case \"parse-save:error\":\r\n          unhook();\r\n          reject(jsonToError(data.error));\r\n      }\r\n    };\r\n  });\r\n\r\n  worker.postMessage(parseSaveCommand(data));\r\n\r\n  return promise;\r\n}\r\n\r\nexport function writeSave(saveGame: SaveGame): Promise<ArrayBuffer> {\r\n  const promise = new Promise<ArrayBuffer>((accept, reject) => {\r\n    const unhook = () => {\r\n      worker.onerror = null;\r\n      worker.onmessage = null;\r\n    };\r\n\r\n    worker.onerror = error => reject(error);\r\n    worker.onmessage = (message: SaveEditorResultEvent) => {\r\n      const { data } = message;\r\n      switch (data.type) {\r\n        case \"write-save:success\":\r\n          unhook();\r\n          accept(data.data);\r\n          break;\r\n        case \"write-save:error\":\r\n          unhook();\r\n          reject(jsonToError(data.error));\r\n      }\r\n    };\r\n  });\r\n\r\n  worker.postMessage(writeSaveCommand(saveGame));\r\n\r\n  return promise;\r\n}\r\n","export * from \"./read-savegame\";\r\nexport * from \"./write-savegame\";\r\n","import { EditMode } from \"@/services/save-structure\";\r\n\r\nexport const ACTION_SET_EDITMODE = \"editor/set-editmode\";\r\nexport const setEditMode = (editMode: EditMode) => ({\r\n  type: ACTION_SET_EDITMODE as typeof ACTION_SET_EDITMODE,\r\n  payload: editMode\r\n});\r\nexport type SetEditModeAction = ReturnType<typeof setEditMode>;\r\n","import { AccessoryType } from \"oni-save-parser\";\r\n\r\nexport const ACTION_SET_ACCESSORY = \"editor/accessorizer/set-accessory\";\r\nexport const setAccessory = (\r\n  gameObjectPath: string[],\r\n  type: AccessoryType,\r\n  name: string | null\r\n) => ({\r\n  type: ACTION_SET_ACCESSORY as typeof ACTION_SET_ACCESSORY,\r\n  payload: { gameObjectPath, type, name }\r\n});\r\nexport type SetAccessoryAction = ReturnType<typeof setAccessory>;\r\n","export const ACTION_DISMISS_ERROR = \"dismiss-error\";\r\nexport const dismissError = () => ({\r\n  type: ACTION_DISMISS_ERROR as typeof ACTION_DISMISS_ERROR\r\n});\r\nexport type DismissErrorAction = ReturnType<typeof dismissError>;\r\n","import { css } from \"../styled\";\r\n\r\nimport { Intent, getTheme } from \"../theme\";\r\nimport { attachProps } from \"@/utils\";\r\n\r\nexport interface IntentFillProps {\r\n  intent?: Intent;\r\n}\r\n\r\nconst intentFillOf = (intent: Intent) => css<IntentFillProps>`\r\n  color: ${props => getTheme(props).colors.textIntentContrast[intent]};\r\n  background-color: ${props => getTheme(props).colors.intent[intent]};\r\n`;\r\n\r\nconst intentFillFromProps = css<IntentFillProps>`\r\n  ${props => intentFillOf(props.intent || Intent.Default)};\r\n`;\r\n\r\nexport const intentFill = attachProps(intentFillFromProps, {\r\n  of: intentFillOf\r\n});\r\n","import * as CSS from \"csstype\";\r\n\r\nimport {\r\n  FontSizeProps,\r\n  FontWeightProps,\r\n  fontSize,\r\n  fontWeight,\r\n  style\r\n} from \"styled-system\";\r\n\r\nimport { css } from \"../styled\";\r\n\r\nimport { IntentColorProps, intentColor } from \"./intent-color\";\r\n\r\nexport interface WordWrapProps {\r\n  wordWrap?: CSS.WordWrapProperty;\r\n}\r\nexport const wordWrap = style({\r\n  prop: \"wordWrap\",\r\n  cssProperty: \"word-wrap\"\r\n});\r\n\r\nexport interface WordBreakProps {\r\n  wordBreak?: CSS.WordBreakProperty;\r\n}\r\nexport const wordBreak = style({\r\n  prop: \"wordBreak\",\r\n  cssProperty: \"word-break\"\r\n});\r\n\r\nexport interface WhitespaceProps {\r\n  whiteSpace?: CSS.WhiteSpaceProperty;\r\n}\r\nexport const whiteSpace = style({\r\n  prop: \"whiteSpace\",\r\n  cssProperty: \"white-space\"\r\n});\r\n\r\nexport type TextProps = IntentColorProps &\r\n  FontSizeProps &\r\n  FontWeightProps &\r\n  WordWrapProps &\r\n  WordBreakProps &\r\n  WhitespaceProps;\r\n\r\nexport const text = css<TextProps>`\r\n  ${intentColor};\r\n  ${fontSize};\r\n  ${fontWeight};\r\n  ${wordWrap};\r\n  ${wordBreak};\r\n  ${whiteSpace};\r\n`;\r\n","import styled from \"@/theme\";\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst NavBarTitleText = styled.span`\r\n  font-size: 2em;\r\n  margin-left: 5px;\r\n  color: ${props => getTheme(props).colors.intent.primary};\r\n`;\r\nNavBarTitleText.displayName = \"NavBarTitleText\";\r\nexport default NavBarTitleText;\r\n","import styled from \"@/theme\";\r\n\r\nconst NavBarGroup = styled.div`\r\n  margin-left: auto;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  align-self: center;\r\n`;\r\nNavBarGroup.displayName = \"NavBarGroup\";\r\nexport default NavBarGroup;\r\n","import styled from \"@/theme\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst NavBarContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: \"row\";\r\n  width: 100%;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  box-sizing: border-box;\r\n  background-color: ${props => getTheme(props).colors.bg.navbar};\r\n`;\r\nNavBarContainer.displayName = \"NavBarContainer\";\r\nexport default NavBarContainer;\r\n","import testData from \"@/__mocks__/save-game.json\";\r\n\r\nimport { loadOniSave } from \"@/actions/load-onisave\";\r\nimport { saveOniSave } from \"@/actions/save-onisave\";\r\n\r\nimport { receiveOniSaveSuccess } from \"@/actions/receive-onisave\";\r\n\r\nconst mapDispatchToProps = {\r\n  onLoad: loadOniSave,\r\n  onLoadTestData: () => receiveOniSaveSuccess(testData),\r\n  onSave: saveOniSave\r\n};\r\nexport default mapDispatchToProps;\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Button from \"@/components/Button\";\r\n\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\nimport NavBarContainer from \"./components/NavBarContainer\";\r\n\r\nimport NavBarGroup from \"./components/NavBarGroup\";\r\nimport NavBarTitleText from \"./components/NavBarTitleText\";\r\n\r\ntype Props = DispatchProps;\r\nclass NavBar extends React.Component<Props> {\r\n  private _input: HTMLElement | null = null;\r\n\r\n  render() {\r\n    const { onLoadTestData } = this.props;\r\n    return (\r\n      <NavBarContainer>\r\n        <NavBarTitleText>Duplicity</NavBarTitleText>\r\n        <NavBarGroup>\r\n          <input\r\n            ref={el => (this._input = el)}\r\n            style={{ display: \"none\" }}\r\n            type=\"file\"\r\n            accept=\".sav\"\r\n            onChange={this._onLoadFileInput}\r\n          />\r\n          <Button onClick={this._onLoadFileClick}>Load</Button>\r\n          <Button onClick={onLoadTestData}>Test</Button>\r\n          <Button intent={Intent.Primary} onClick={this._onSaveFileClick}>\r\n            Save\r\n          </Button>\r\n        </NavBarGroup>\r\n      </NavBarContainer>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onLoadFileClick() {\r\n    if (!this._input) {\r\n      return;\r\n    }\r\n    this._input.click();\r\n  }\r\n\r\n  @autobind()\r\n  private _onLoadFileInput(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const files = e.target.files;\r\n    if (!files || files.length === 0) {\r\n      return;\r\n    }\r\n    const file = files[0];\r\n\r\n    const { onLoad } = this.props;\r\n    onLoad(file);\r\n  }\r\n\r\n  @autobind()\r\n  private _onSaveFileClick() {\r\n    const { onSave } = this.props;\r\n    const fileName = withExtension(\"my-file\", \".sav\");\r\n    onSave(fileName);\r\n  }\r\n}\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(NavBar);\r\n\r\nfunction withExtension(name: string, ext: string): string {\r\n  if (name.endsWith(ext)) return name;\r\n  return name + ext;\r\n}\r\n","import NavBarContainer from \"./NavBar\";\r\nexport default NavBarContainer;\r\n","import styled from \"@/theme\";\r\n\r\nconst AppContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  flex: 1 1 auto;\r\n  overflow: auto;\r\n`;\r\nAppContainer.displayName = \"AppContainer\";\r\nexport default AppContainer;\r\n","import styled from \"@/theme\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst AppContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n  background-color: ${props => getTheme(props).colors.bg.default};\r\n`;\r\nAppContainer.displayName = \"AppContainer\";\r\nexport default AppContainer;\r\n","import styled from \"@/theme\";\r\n\r\nimport { WidthProps, SpaceProps, width, space } from \"styled-system\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nexport interface SeparatorProps extends WidthProps, SpaceProps {}\r\nconst Separator = styled<SeparatorProps, \"div\">(\"div\")`\r\n  border-bottom: 2px solid;\r\n  border-color: ${props => getTheme(props).colors.bg.separator};\r\n  ${width};\r\n  ${space};\r\n  height: 2px;\r\n`;\r\nSeparator.displayName = \"Separator\";\r\nexport default Separator;\r\n","import styled from \"@/theme\";\r\n\r\nconst SaveStructureItemContent = styled.div`\r\n  padding-left: 15px;\r\n`;\r\nexport default SaveStructureItemContent;\r\n","import { getTheme } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\n\r\nconst ItemText = Text.extend`\r\n  margin-left: ${props => getTheme(props).space[1]}px;\r\n`;\r\nexport default ItemText;\r\n","import * as React from \"react\";\r\n\r\nconst ICON_SIZE = 10;\r\nconst ICON_EXPANDED = \"M 0 .25 L .5 .75 L 1 .25 z\";\r\nconst ICON_COLLAPSED = \"M .5 0 L 1 .5 L .5 1 z\";\r\n\r\nexport interface ExpanderProps {\r\n  expanded: boolean;\r\n  onClick?(): void;\r\n}\r\nconst Expander: React.SFC<ExpanderProps & { className?: string }> = ({\r\n  className,\r\n  expanded,\r\n  onClick\r\n}) => (\r\n  <svg\r\n    className={className}\r\n    width={ICON_SIZE}\r\n    height={ICON_SIZE}\r\n    viewBox={`0 0 1 1`}\r\n    onClick={onClick}\r\n  >\r\n    <path d={expanded ? ICON_EXPANDED : ICON_COLLAPSED} fill=\"black\" />\r\n  </svg>\r\n);\r\nexport default Expander;\r\n","import * as React from \"react\";\r\n\r\nimport styled from \"@/theme\";\r\n\r\nimport Expander from \"./components/Expander\";\r\nimport ItemText from \"./components/ItemText\";\r\nimport { Intent } from \"@/theme\";\r\n\r\nexport interface SaveStructureItemHeaderProps {\r\n  expandable: boolean;\r\n  expanded: boolean;\r\n  header: string;\r\n  intent: Intent;\r\n  innerRef?: React.RefObject<HTMLDivElement>;\r\n  onClick(): void;\r\n  onExpandToggle(): void;\r\n}\r\n\r\nconst SaveStructureItemHeaderContainer = styled.span`\r\n  white-space: nowrap;\r\n  cursor: pointer;\r\n`;\r\nSaveStructureItemHeaderContainer.displayName = \"SaveStructureItemContainer\";\r\n\r\nconst SaveStructureItemHeader: React.SFC<\r\n  SaveStructureItemHeaderProps & { className?: string }\r\n> = ({\r\n  className,\r\n  expandable,\r\n  expanded,\r\n  header,\r\n  intent,\r\n  onClick,\r\n  onExpandToggle,\r\n  innerRef\r\n}) => (\r\n  <SaveStructureItemHeaderContainer innerRef={innerRef} className={className}>\r\n    {expandable && (\r\n      <Expander\r\n        expanded={expanded}\r\n        onClick={expandable ? onExpandToggle : undefined}\r\n      />\r\n    )}\r\n    <ItemText intent={intent} onClick={onClick}>\r\n      {header}\r\n    </ItemText>\r\n  </SaveStructureItemHeaderContainer>\r\n);\r\nSaveStructureItemHeader.displayName = \"SaveStructureItemHeader\";\r\nexport default SaveStructureItemHeader;\r\n","import SaveStructureItemHeader from \"./SaveStructureItemHeader\";\r\nexport default SaveStructureItemHeader;\r\n","import styled from \"@/theme\";\r\n\r\nconst SaveStructureItemContainer = styled.div``;\r\nSaveStructureItemContainer.displayName = \"SaveStructureItemContainer\";\r\nexport default SaveStructureItemContainer;\r\n","import { selectPath } from \"@/actions/select-path\";\r\n\r\nconst mapDispatchToProps = {\r\n  onClick: selectPath\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import { SaveGame } from \"oni-save-parser\";\r\nimport createCachedSelector from \"re-reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport {\r\n  getSaveItemTitle,\r\n  getSaveItemChildPaths,\r\n  EditMode\r\n} from \"@/services/save-structure\";\r\n\r\nimport oniSaveSelector from \"@/selectors/oni-save\";\r\nimport selectedPathSelector from \"@/selectors/selected-path\";\r\nimport editModeSelector from \"@/selectors/edit-mode\";\r\n\r\nimport { SaveStructureItemProps } from \"./props\";\r\n\r\nconst cacheKeyGenerator = (_: AppState, props: SaveStructureItemProps) =>\r\n  props.saveItemPath.join(\".\");\r\n\r\nconst itemPathSelector = (_: AppState, props: SaveStructureItemProps) =>\r\n  props.saveItemPath;\r\n\r\nconst title = createCachedSelector<\r\n  AppState,\r\n  SaveStructureItemProps,\r\n  string[],\r\n  SaveGame | null,\r\n  string\r\n>(\r\n  itemPathSelector,\r\n  oniSaveSelector,\r\n  (path, saveGame) =>\r\n    saveGame ? getSaveItemTitle(path, saveGame) : \"[undefined]\"\r\n)(cacheKeyGenerator);\r\n\r\nconst selectionStatus = createCachedSelector<\r\n  AppState,\r\n  SaveStructureItemProps,\r\n  string[],\r\n  string[],\r\n  \"unselected\" | \"in-path\" | \"selected\"\r\n>(itemPathSelector, selectedPathSelector, (itemPath, selectedPath) => {\r\n  const isSelected = itemPath.every((x, i) => selectedPath[i] == x);\r\n  if (!isSelected) {\r\n    return \"unselected\";\r\n  }\r\n\r\n  if (itemPath.length === selectedPath.length) {\r\n    return \"selected\";\r\n  }\r\n\r\n  return \"in-path\";\r\n})(cacheKeyGenerator);\r\n\r\nconst childPaths = createCachedSelector<\r\n  AppState,\r\n  SaveStructureItemProps,\r\n  string[],\r\n  SaveGame | null,\r\n  EditMode,\r\n  string[][]\r\n>(\r\n  itemPathSelector,\r\n  oniSaveSelector,\r\n  editModeSelector,\r\n  (path, saveGame, editMode) =>\r\n    saveGame ? getSaveItemChildPaths(path, saveGame, editMode) : []\r\n)(cacheKeyGenerator);\r\n\r\nconst mapStateToProps = function(\r\n  state: AppState,\r\n  props: SaveStructureItemProps\r\n) {\r\n  // Do not use createStructuredSelector here, as that itself\r\n  //  creates a selector that will go nuts over our multi instance props.\r\n  const stateProps = {\r\n    title: title(state, props),\r\n    selectionStatus: selectionStatus(state, props),\r\n    childPaths: childPaths(state, props)\r\n  };\r\n\r\n  return stateProps;\r\n};\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport { SaveStructureItemProps } from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\nimport SaveStructureItemContainer from \"./components/SaveStructureItemContainer\";\r\nimport SaveStructureItemHeader from \"./components/SaveStructureItemHeader\";\r\nimport SaveStructureItemContent from \"./components/SaveStructureItemContent\";\r\n\r\ninterface State {\r\n  isExpanded: boolean;\r\n}\r\n\r\ntype Props = SaveStructureItemProps & StateProps & DispatchProps;\r\nclass SaveStructureItemComponent extends React.Component<Props, State> {\r\n  private _ref: React.RefObject<HTMLDivElement>;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this._ref = React.createRef();\r\n\r\n    this.state = {\r\n      isExpanded: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.selectionStatus === \"selected\") {\r\n      this._scrollIntoView();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(oldProps: Props) {\r\n    if (\r\n      oldProps.selectionStatus !== \"selected\" &&\r\n      this.props.selectionStatus === \"selected\"\r\n    ) {\r\n      this._scrollIntoView();\r\n    }\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    const { title, selectionStatus, childPaths } = this.props;\r\n    let { isExpanded } = this.state;\r\n\r\n    const isExpandable = childPaths.length > 0;\r\n\r\n    let titleIntent: Intent;\r\n    switch (selectionStatus) {\r\n      default:\r\n        titleIntent = Intent.Default;\r\n        break;\r\n      case \"in-path\":\r\n        titleIntent = Intent.Secondary;\r\n        isExpanded = isExpandable;\r\n        break;\r\n      case \"selected\":\r\n        titleIntent = Intent.Primary;\r\n        break;\r\n    }\r\n\r\n    let valueElement: React.ReactNode | null = null;\r\n    if (isExpandable && isExpanded) {\r\n      valueElement = childPaths.map(childPath => {\r\n        const key = childPath[childPath.length - 1];\r\n        return <SaveStructureItem key={key} saveItemPath={childPath} />;\r\n      });\r\n    }\r\n\r\n    return (\r\n      <SaveStructureItemContainer>\r\n        <SaveStructureItemHeader\r\n          innerRef={this._ref}\r\n          expandable={isExpandable}\r\n          expanded={isExpanded}\r\n          header={title}\r\n          intent={titleIntent}\r\n          onClick={this._onClick}\r\n          onExpandToggle={this._onExpandToggle}\r\n        />\r\n        <SaveStructureItemContent>{valueElement}</SaveStructureItemContent>\r\n      </SaveStructureItemContainer>\r\n    );\r\n  }\r\n\r\n  private _scrollIntoView() {\r\n    if (this._ref.current) {\r\n      const { childPaths } = this.props;\r\n      // Scrolls into view regardless.  Need to not scroll if already visible.\r\n      // this._ref.current.scrollIntoView();\r\n      if (childPaths.length > 0) {\r\n        this.setState({\r\n          isExpanded: true\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  @autobind()\r\n  private _onClick() {\r\n    const { saveItemPath, onClick } = this.props;\r\n    this.setState({\r\n      isExpanded: true\r\n    });\r\n    onClick(saveItemPath);\r\n  }\r\n\r\n  @autobind()\r\n  private _onExpandToggle() {\r\n    this.setState({\r\n      isExpanded: !this.state.isExpanded\r\n    });\r\n  }\r\n}\r\nconst SaveStructureItem = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(SaveStructureItemComponent);\r\nexport default SaveStructureItem;\r\n","import SaveStructureItem from \"./SaveStructureItem\";\r\nexport default SaveStructureItem;\r\nexport * from \"./props\";\r\n","import styled from \"@/theme\";\r\n\r\nconst SaveStructureTreeContainer = styled.div`\r\n  width: 100%;\r\n`;\r\nexport default SaveStructureTreeContainer;\r\n","import * as React from \"react\";\r\n\r\nimport SaveStructureTreeContainer from \"./components/SaveStructureTreeContainer\";\r\nimport SaveStructureItem from \"./components/SaveStructureItem\";\r\n\r\ntype Props = {};\r\nexport default class SaveStructureTree extends React.Component<Props> {\r\n  render() {\r\n    return (\r\n      <SaveStructureTreeContainer>\r\n        <SaveStructureItem saveItemPath={[]} />\r\n      </SaveStructureTreeContainer>\r\n    );\r\n  }\r\n}\r\n","import SaveStructureTree from \"./SaveStructureTree\";\r\nexport default SaveStructureTree;\r\n","import { setEditMode } from \"@/actions/set-editmode\";\r\n\r\nconst mapDispatchToProps = {\r\n  setEditMode\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport Input from \"@/components/Input\";\r\n\r\ntype Props = DispatchProps;\r\nclass EditorModeSelector extends React.Component<Props> {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Text.Label htmlFor=\"advanced_mode\" intent={Intent.Secondary}>\r\n          Advanced Mode\r\n        </Text.Label>\r\n        <Input\r\n          id=\"advanced_mode\"\r\n          type=\"checkbox\"\r\n          onChange={this._onAdvancedModeChange}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onAdvancedModeChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const { setEditMode } = this.props;\r\n    setEditMode(e.target.checked ? \"advanced\" : \"normal\");\r\n  }\r\n}\r\nexport default connect(\r\n  undefined,\r\n  mapDispatchToProps\r\n)(EditorModeSelector);\r\n","import EditorModeSelector from \"./EditorModeSelector\";\r\nexport default EditorModeSelector;\r\n","import styled from \"@/theme\";\r\nimport { WidthProps, HeightProps, width, height } from \"styled-system\";\r\nimport { getTheme } from \"@/theme\";\r\n\r\nexport type BoxProps = WidthProps & HeightProps;\r\n\r\nconst Panel = styled<BoxProps, \"div\">(\"div\")`\r\n  ${width};\r\n  ${height};\r\n  background-color: ${props => getTheme(props).colors.bg.panel};\r\n  overflow: auto;\r\n`;\r\nPanel.displayName = \"Panel\";\r\nexport default Panel;\r\n","import Panel from \"@/components/Panel\";\r\n\r\nconst SidebarContainer = Panel.extend`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n`;\r\nSidebarContainer.displayName = \"SidebarContainer\";\r\nexport default SidebarContainer;\r\n","import * as React from \"react\";\r\n\r\nimport SidebarContainer from \"./components/SidebarContainer\";\r\n\r\nimport EditorModeSelector from \"./components/EditorModeSelector\";\r\nimport SaveStructureTree from \"./components/SaveStructureTree\";\r\n\r\nconst Sidebar: React.SFC = () => (\r\n  <SidebarContainer>\r\n    <EditorModeSelector />\r\n    <SaveStructureTree />\r\n  </SidebarContainer>\r\n);\r\nSidebar.displayName = \"Sidebar\";\r\nexport default Sidebar;\r\n","import Sidebar from \"./Sidebar\";\r\nexport default Sidebar;\r\n","import styled from \"@/theme\";\r\n\r\nconst EditorContainer = styled.div`\r\n  flex: 1 1 auto;\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow: auto;\r\n`;\r\nEditorContainer.displayName = \"EditorContainer\";\r\nexport default EditorContainer;\r\n","import styled from \"@/theme\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst ContentContainer = styled.div`\r\n  padding: ${props => getTheme(props).space[1]}px;\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow: auto;\r\n  flex: 1 1 auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\nexport default ContentContainer;\r\n","import styled from \"@/theme\";\r\n\r\nconst SaveEditorContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\nexport default SaveEditorContainer;\r\n","import * as React from \"react\";\r\n\r\nimport FormGroup from \"@/components/FormGroup\";\r\nimport NumericField from \"@/pages/SaveEditor/components/fields/NumericField\";\r\nimport EditModeCondition from \"@/components/EditModeCondition\";\r\n\r\nexport interface PositionTabContentProps {\r\n  gameObjectPath: string[];\r\n}\r\nconst MinionPositionTab: React.SFC<PositionTabContentProps> = ({\r\n  gameObjectPath\r\n}) => (\r\n  <React.Fragment>\r\n    <FormGroup>\r\n      <FormGroup.Label>X</FormGroup.Label>\r\n      <FormGroup.Content>\r\n        <NumericField\r\n          precision=\"single\"\r\n          path={[...gameObjectPath, \"position\", \"x\"]}\r\n        />\r\n      </FormGroup.Content>\r\n    </FormGroup>\r\n    <FormGroup>\r\n      <FormGroup.Label>Y</FormGroup.Label>\r\n      <FormGroup.Content>\r\n        <NumericField\r\n          precision=\"single\"\r\n          path={[...gameObjectPath, \"position\", \"y\"]}\r\n        />\r\n      </FormGroup.Content>\r\n    </FormGroup>\r\n    <EditModeCondition editMode=\"advanced\">\r\n      <FormGroup>\r\n        <FormGroup.Label>Z</FormGroup.Label>\r\n        <FormGroup.Content>\r\n          <NumericField\r\n            precision=\"single\"\r\n            path={[...gameObjectPath, \"position\", \"z\"]}\r\n          />\r\n        </FormGroup.Content>\r\n      </FormGroup>\r\n    </EditModeCondition>\r\n  </React.Fragment>\r\n);\r\nMinionPositionTab.displayName = \"MinionPositionTab\";\r\nexport default MinionPositionTab;\r\n","import * as React from \"react\";\r\n\r\nimport Select, { SelectProps, Option } from \"@/components/Select\";\r\n\r\nexport type SelectInputProps = Omit<\r\n  SelectProps,\r\n  \"value\" | \"options\" | \"onChange\"\r\n> & {\r\n  value: any;\r\n  options: Option<any>[];\r\n  onCommit(value: any): void;\r\n};\r\n\r\ntype Props = SelectInputProps;\r\nexport default class SelectInput extends React.Component<Props> {\r\n  static defaultProps = {\r\n    clearable: false\r\n  };\r\n\r\n  render() {\r\n    const { value, options, onCommit, ...props } = this.props;\r\n\r\n    return (\r\n      <Select {...props} value={value} options={options} onChange={onCommit} />\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport SelectInput, { SelectInputProps } from \"@/components/SelectInput\";\r\n\r\nimport connectEditorField, {\r\n  EditorFieldProps,\r\n  InjectedProps\r\n} from \"./connect-field\";\r\n\r\nexport type SelectFieldProps = EditorFieldProps &\r\n  Omit<SelectInputProps, \"value\" | \"onCommit\">;\r\n\r\ntype Props = SelectFieldProps & InjectedProps;\r\nclass SelectField extends React.Component<Props> {\r\n  render() {\r\n    const { value, onCommit, options } = this.props;\r\n    return <SelectInput value={value} options={options} onCommit={onCommit} />;\r\n  }\r\n}\r\n\r\nexport default connectEditorField()(SelectField);\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { GameObject, HealthBehavior, getBehavior } from \"oni-save-parser\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport selectedPath from \"@/selectors/selected-path\";\r\nimport selectedValue from \"@/selectors/selected-value\";\r\n\r\nconst healthBehavior = createSelector(\r\n  selectedValue,\r\n  (gameObject: GameObject) => {\r\n    return getBehavior(gameObject, HealthBehavior);\r\n  }\r\n);\r\n\r\nconst healthStatePath = createSelector(\r\n  selectedValue,\r\n  selectedPath,\r\n  (gameObject: GameObject, selectedPath) => {\r\n    if (!gameObject) {\r\n      return;\r\n    }\r\n\r\n    const healthBehaviorIndex = gameObject.behaviors.findIndex(\r\n      x => x.name === HealthBehavior\r\n    );\r\n    if (healthBehaviorIndex === -1) {\r\n      return null;\r\n    }\r\n    return [\r\n      ...selectedPath,\r\n      \"behaviors\",\r\n      `${healthBehaviorIndex}`,\r\n      \"templateData\",\r\n      \"State\"\r\n    ];\r\n  }\r\n);\r\n\r\nconst structuredSelector = {\r\n  selectedPath,\r\n  healthStatePath\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport FormGroup from \"@/components/FormGroup\";\r\nimport SelectField from \"@/pages/SaveEditor/components/fields/SelectField\";\r\nimport { HealthState } from \"oni-save-parser\";\r\n\r\ntype Props = StateProps;\r\nclass MinionHealthTab extends React.Component<Props> {\r\n  render() {\r\n    const { healthStatePath } = this.props;\r\n    if (!healthStatePath) {\r\n      return null;\r\n    }\r\n\r\n    const options = Object.keys(HealthState)\r\n      .filter(x => isNaN(parseInt(x)))\r\n      .map(x => ({\r\n        label: x,\r\n        value: HealthState[x as any]\r\n      }));\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <FormGroup>\r\n          <FormGroup.Label>Status</FormGroup.Label>\r\n          <FormGroup.Content width=\"100%\">\r\n            <SelectField path={healthStatePath} options={options} />\r\n          </FormGroup.Content>\r\n        </FormGroup>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(MinionHealthTab);\r\n","import MinionHealthTab from \"./MinionHealthTab\";\r\nexport default MinionHealthTab;\r\n","import * as React from \"react\";\r\n\r\nimport ReactAutocomplete from \"react-autocomplete\";\r\n\r\nimport styled, { Intent, Background, getTheme } from \"@/theme\";\r\n\r\nimport Input, { InputProps } from \"@/components/Input\";\r\nimport Box from \"@/components/Box\";\r\nimport Text from \"@/components/Text\";\r\n\r\nexport type AutocompleteProps = Omit<ReactAutocomplete.Props, \"renderItem\"> & {\r\n  intent?: Intent;\r\n  renderItem?: ReactAutocomplete.Props[\"renderItem\"];\r\n  minLength?: number;\r\n  maxLength?: number;\r\n};\r\n\r\nconst AutocompleteItem = Text.withComponent(\"div\").extend`\r\n  width: 100%;\r\n`;\r\n\r\nconst Autocomplete: React.SFC<AutocompleteProps> = props => (\r\n  <ReactAutocomplete\r\n    {...props}\r\n    renderInput={inputProps => <Input {...convertProps(inputProps)} />}\r\n    renderItem={(item, isHighlighted, style) => (\r\n      <AutocompleteItem\r\n        intent={isHighlighted ? Intent.Primary : Intent.Secondary}\r\n      >\r\n        {(props.renderItem || defaultRenderItem)(item, isHighlighted, style)}\r\n      </AutocompleteItem>\r\n    )}\r\n    renderMenu={props.renderMenu || renderMenu.bind(null, props)}\r\n  />\r\n);\r\nAutocomplete.displayName = \"Autocomplete\";\r\nexport default Autocomplete;\r\n\r\nfunction convertProps(props: React.HTMLProps<HTMLInputElement>): InputProps {\r\n  return {\r\n    ...props,\r\n    ref: undefined as never,\r\n    innerRef: props.ref\r\n  };\r\n}\r\n\r\nfunction defaultRenderItem(\r\n  item: any,\r\n  isHighlighted: boolean,\r\n  style?: React.CSSProperties\r\n) {\r\n  style = style || {};\r\n  style.width = \"100%\";\r\n  return <div style={style}>{item}</div>;\r\n}\r\n\r\nconst AutocompleteMenu = Box.extend`\r\n  background: ${props => getTheme(props).colors.bg.panel};\r\n  border: ${props => {\r\n    const theme = getTheme(props);\r\n    return `${theme.borders[1]} ${\r\n      theme.colors.intent[props.intent || Intent.Secondary]\r\n    }`;\r\n  }};\r\n  border-top: none;\r\n`;\r\n\r\nfunction renderMenu(\r\n  props: AutocompleteProps,\r\n  items: any[],\r\n  value: string,\r\n  styles: React.CSSProperties\r\n): React.ReactNode {\r\n  // TODO: Portal.\r\n  const elements = items.map((x, i) => <div key={i}>{x}</div>);\r\n  return (\r\n    <AutocompleteMenu intent={props.intent} style={styles}>\r\n      {elements}\r\n    </AutocompleteMenu>\r\n  );\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Keys from \"@/keys\";\r\n\r\nimport Autocomplete from \"@/components/Autocomplete\";\r\n\r\nexport interface TextAutocompleteInputProps {\r\n  value: string;\r\n  minLength?: number;\r\n  maxLength?: number;\r\n  items: string[];\r\n  onCommit(value: string): void;\r\n}\r\n\r\ntype Props = TextAutocompleteInputProps;\r\ninterface State {\r\n  editValue: string | null;\r\n  isValid: boolean;\r\n}\r\nexport default class TextAutocompleteInput extends React.Component<\r\n  Props,\r\n  State\r\n> {\r\n  private _inputRef = React.createRef<HTMLInputElement>();\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      editValue: null,\r\n      isValid: true\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { value, minLength, maxLength, items } = this.props;\r\n    const { editValue } = this.state;\r\n\r\n    const currentValue = editValue != null ? editValue : value;\r\n\r\n    return (\r\n      <Autocomplete\r\n        value={currentValue}\r\n        items={items}\r\n        minLength={minLength}\r\n        maxLength={maxLength}\r\n        getItemValue={x => x}\r\n        onChange={this._onValueChange}\r\n        onSelect={this._onValueSelect}\r\n        selectOnBlur\r\n      />\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onValueChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const value = e.target.value;\r\n    this._setEditValue(value);\r\n  }\r\n\r\n  @autobind()\r\n  private _onValueSelect(value: string) {\r\n    this._setEditValue(value);\r\n    this._commitEdit();\r\n  }\r\n\r\n  // @autobind()\r\n  // private _onInputKeyPress(e: React.KeyboardEvent<HTMLInputElement>) {\r\n  //   if (e.key === Keys.Enter) {\r\n  //     this._commitEdit();\r\n  //   }\r\n  // }\r\n\r\n  private _setEditValue(value: string) {\r\n    const validation = this._validate(value);\r\n    const isValid = !validation;\r\n\r\n    if (this._inputRef.current) {\r\n      this._inputRef.current.setCustomValidity(validation || \"\");\r\n    }\r\n\r\n    this.setState({\r\n      editValue: value,\r\n      isValid\r\n    });\r\n  }\r\n\r\n  private _commitEdit() {\r\n    const { editValue, isValid } = this.state;\r\n    const { onCommit } = this.props;\r\n\r\n    this.setState({\r\n      editValue: null\r\n    });\r\n\r\n    if (!editValue || !isValid) {\r\n      return;\r\n    }\r\n\r\n    onCommit(editValue);\r\n  }\r\n\r\n  private _validate(value: string): string | null {\r\n    const { minLength, maxLength } = this.props;\r\n    if (minLength != null && (!value || value.length < minLength)) {\r\n      return `Value must be at least ${minLength} characters.`;\r\n    }\r\n\r\n    if (maxLength != null && value.length > maxLength) {\r\n      return `Value must be less than ${maxLength} characters.`;\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n","import { createStructuredSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport editMode from \"@/selectors/edit-mode\";\r\n\r\nconst structuredSelector = {\r\n  currentEditMode: editMode\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { EditMode } from \"@/services/save-structure\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nexport interface EditModeConditionProps {\r\n  editMode?: EditMode;\r\n}\r\ntype Props = EditModeConditionProps & StateProps;\r\nclass EditModeCondition extends React.Component<Props> {\r\n  render() {\r\n    const { currentEditMode, editMode, children } = this.props;\r\n    if (currentEditMode !== editMode) {\r\n      return null;\r\n    }\r\n\r\n    return children;\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(EditModeCondition);\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Input from \"@/components/Input\";\r\n\r\nexport interface CheckInputProps {\r\n  value: boolean;\r\n  onCommit(value: boolean): void;\r\n}\r\n\r\ntype Props = CheckInputProps;\r\nexport default class CheckInput extends React.Component<Props> {\r\n  render() {\r\n    const { value } = this.props;\r\n    return (\r\n      <Input type=\"checkbox\" checked={value} onChange={this._onValueChange} />\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onValueChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const { onCommit } = this.props;\r\n    const value = e.target.checked;\r\n    onCommit(value);\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Flex from \"@/components/Flex\";\r\nimport CheckInput from \"@/components/CheckInput\";\r\n\r\nexport interface InputCompatibleProps<T = any> {\r\n  value: T;\r\n  onCommit(value: any): void;\r\n}\r\nexport interface NullableInputProps<T = any> {\r\n  className?: string;\r\n  renderInput(props: InputCompatibleProps<T>): React.ReactNode;\r\n  renderNull?: React.ReactNode | (() => React.ReactNode);\r\n  value: T | null;\r\n  defaultValue: T | (() => T);\r\n  onCommit(value: T | null): void;\r\n}\r\ntype Props = NullableInputProps;\r\ninterface State {\r\n  isNotNull: boolean;\r\n}\r\nexport default class NullableInput extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      isNotNull: this.props.value !== null\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps(props: Props) {\r\n    let isNotNull = props.value !== null;\r\n    if (isNotNull !== this.state.isNotNull) {\r\n      this.setState({\r\n        isNotNull\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { isNotNull } = this.state;\r\n    const { className, renderNull } = this.props;\r\n\r\n    let element: React.ReactNode | null = null;\r\n    if (isNotNull) {\r\n      const { renderInput, onCommit, defaultValue } = this.props;\r\n      const value = this.props.value || resolve(defaultValue);\r\n      element = renderInput({ value, onCommit });\r\n    } else if (renderNull) {\r\n      element = resolve(renderNull);\r\n    }\r\n\r\n    return (\r\n      <Flex className={className} direction=\"row\">\r\n        <CheckInput value={isNotNull} onCommit={this._onNotNullChecked} />\r\n        {element && (\r\n          <Flex.Item grow shrink>\r\n            {element}\r\n          </Flex.Item>\r\n        )}\r\n      </Flex>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onNotNullChecked(value: boolean) {\r\n    const { defaultValue, onCommit } = this.props;\r\n    this.setState({\r\n      isNotNull: value\r\n    });\r\n    if (value) {\r\n      onCommit(defaultValue);\r\n    } else {\r\n      onCommit(null);\r\n    }\r\n  }\r\n}\r\n\r\nfunction resolve<T>(value: T | (() => T)): T {\r\n  if (typeof value === \"function\") {\r\n    return value();\r\n  }\r\n  return value;\r\n}\r\n","import { setAccessory } from \"@/actions/set-accessory\";\r\n\r\nconst mapDispatchToProps = {\r\n  onSetAccessory: setAccessory\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import { Selector, createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport {\r\n  ACCESSORY_TYPES,\r\n  AccessorizerBehavior,\r\n  GameObject,\r\n  AccessoryType,\r\n  getAccessoryName,\r\n  getAccessoryOfType,\r\n  getBehavior\r\n} from \"oni-save-parser\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport selectedValue from \"@/selectors/selected-value\";\r\nimport selectedPath from \"@/selectors/selected-path\";\r\n\r\nconst behavior = createSelector(selectedValue, (gameObject: GameObject) => {\r\n  if (!gameObject) {\r\n    return null;\r\n  }\r\n  return getBehavior(gameObject, AccessorizerBehavior);\r\n});\r\n\r\nfunction createAccessorySelector(\r\n  accessoryType: AccessoryType\r\n): Selector<AppState, string | null> {\r\n  return createSelector(behavior, behavior => {\r\n    if (!behavior) {\r\n      return null;\r\n    }\r\n\r\n    const { accessories } = behavior.templateData;\r\n\r\n    const accessory = getAccessoryOfType(accessories, accessoryType);\r\n    if (!accessory) {\r\n      return null;\r\n    }\r\n\r\n    return getAccessoryName(accessory);\r\n  });\r\n}\r\n\r\nconst structuredSelector = {\r\n  selectedPath\r\n};\r\nACCESSORY_TYPES.forEach(x => {\r\n  (structuredSelector as any)[x] = createAccessorySelector(x);\r\n});\r\nexport type StateProps = StructuredStateProps<\r\n  typeof structuredSelector & Record<AccessoryType, string | null>\r\n>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector as any\r\n);\r\nexport default mapStateToProps;\r\n","import {\r\n  AccessoryType,\r\n  ACCESSORY_BODY_NAMES,\r\n  ACCESSORY_EYE_NAMES,\r\n  ACCESSORY_HAIR_NAMES,\r\n  ACCESSORY_HEAD_NAMES,\r\n  ACCESSORY_MOUTH_NAMES\r\n} from \"oni-save-parser\";\r\n\r\n// TODO: This should be in oni-save-parser\r\nconst ACCESSORIES_BY_TYPE: Record<AccessoryType, string[] | null> = {\r\n  body: ACCESSORY_BODY_NAMES,\r\n  hat: null,\r\n  hat_hair: null,\r\n  hair_always: null,\r\n  hair: ACCESSORY_HAIR_NAMES,\r\n  headshape: ACCESSORY_HEAD_NAMES,\r\n  eyes: ACCESSORY_EYE_NAMES,\r\n  mouth: ACCESSORY_MOUTH_NAMES,\r\n  neck: null,\r\n  arm: null\r\n};\r\nexport default ACCESSORIES_BY_TYPE;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AccessoryType, ACCESSORY_TYPES } from \"oni-save-parser\";\r\n\r\nimport ACCESSORIES_BY_TYPE from \"./accessories-by-type\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\nimport FormGroup from \"@/components/FormGroup\";\r\nimport NullableInput, {\r\n  InputCompatibleProps\r\n} from \"@/components/NullableInput\";\r\nimport TextInput from \"@/components/TextInput\";\r\nimport EditModeCondition from \"@/components/EditModeCondition\";\r\nimport NumericField from \"@/pages/SaveEditor/components/fields/NumericField\";\r\nimport Text from \"@/components/Text\";\r\nimport TextAutocompleteInput from \"@/components/TextAutocompleteInput\";\r\n\r\nconst TDText = Text.withComponent(\"td\");\r\n\r\nconst NoAccessory = <Text intent={Intent.Secondary}>None</Text>;\r\nconst NoAccessoryMouth = <Text intent={Intent.Dangerous}>I Must Scream</Text>;\r\n\r\ntype Props = StateProps & DispatchProps;\r\nclass MinionAppearanceTab extends React.Component<Props> {\r\n  render() {\r\n    const { selectedPath } = this.props;\r\n    const fields = ACCESSORY_TYPES.map(type =>\r\n      this._renderAccessoryField(type)\r\n    );\r\n    return (\r\n      <React.Fragment>\r\n        <table>\r\n          <tbody>{fields}</tbody>\r\n        </table>\r\n        <FormGroup>\r\n          <FormGroup.Label>Scale</FormGroup.Label>\r\n          <FormGroup.Content>\r\n            <FormGroup>\r\n              <FormGroup.Label>X</FormGroup.Label>\r\n              <FormGroup.Content>\r\n                <NumericField path={[...selectedPath, \"scale\", \"x\"]} />\r\n              </FormGroup.Content>\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <FormGroup.Label>Y</FormGroup.Label>\r\n              <FormGroup.Content>\r\n                <NumericField path={[...selectedPath, \"scale\", \"y\"]} />\r\n              </FormGroup.Content>\r\n            </FormGroup>\r\n          </FormGroup.Content>\r\n        </FormGroup>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  private _renderAccessoryField(type: AccessoryType) {\r\n    // FIXME: Code smell: pulling in a state prop just to pass to dispatch.\r\n    const { onSetAccessory, selectedPath } = this.props;\r\n    let editGroup = (\r\n      <tr key={type}>\r\n        <TDText>{type}</TDText>\r\n        <td>\r\n          <NullableInput\r\n            renderInput={props => this._renderAccessorySelector(type, props)}\r\n            renderNull={type !== \"mouth\" ? NoAccessory : NoAccessoryMouth}\r\n            value={this.props[type]}\r\n            defaultValue={(ACCESSORIES_BY_TYPE[type] || [])[0] || \"\"}\r\n            onCommit={onSetAccessory.bind(this, selectedPath, type)}\r\n          />\r\n        </td>\r\n      </tr>\r\n    );\r\n\r\n    if (type === \"hat_hair\" || type === \"hair_always\") {\r\n      editGroup = (\r\n        <EditModeCondition key={type} editMode=\"advanced\">\r\n          {editGroup}\r\n        </EditModeCondition>\r\n      );\r\n    }\r\n\r\n    return editGroup;\r\n  }\r\n\r\n  private _renderAccessorySelector(\r\n    type: AccessoryType,\r\n    props: InputCompatibleProps<string>\r\n  ) {\r\n    const accessoryNames = ACCESSORIES_BY_TYPE[type];\r\n    if (!accessoryNames || accessoryNames.length === 0) {\r\n      return <TextInput {...props} minLength={1} />;\r\n    } else {\r\n      return (\r\n        <TextAutocompleteInput\r\n          value={props.value}\r\n          items={accessoryNames}\r\n          onCommit={props.onCommit}\r\n        />\r\n      );\r\n    }\r\n  }\r\n}\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(MinionAppearanceTab);\r\n","import MinionAppearanceTab from \"./MinionAppearanceTab\";\r\nexport default MinionAppearanceTab;\r\n","import styled from \"@/theme\";\r\n\r\nimport { TextProps as ThemeTextProps, text } from \"@/theme\";\r\n\r\nexport type TextProps = ThemeTextProps;\r\nconst EditableTextInput = styled<TextProps, \"input\">(\"input\")`\r\n  ${text};\r\n  font-size: inherit;\r\n  background: none;\r\n  border: none;\r\n`;\r\nEditableTextInput.displayName = \"EditableTextInput\";\r\nexport default EditableTextInput;\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Keys from \"@/keys\";\r\n\r\nimport Text, { TextProps } from \"../Text\";\r\n\r\nimport EditableTextInput from \"./components/EditableTextInput\";\r\n\r\nexport interface EditableTextProps extends TextProps {\r\n  className?: string;\r\n  value: string;\r\n  minLength?: number;\r\n  maxLength?: number;\r\n  onCommit(value: string): void;\r\n}\r\ntype Props = EditableTextProps;\r\ninterface State {\r\n  editValue: string | null;\r\n}\r\nexport default class EditableText extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      editValue: null\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { className, value, intent } = this.props;\r\n    const { editValue } = this.state;\r\n\r\n    if (editValue !== null) {\r\n      return (\r\n        <EditableTextInput\r\n          className={className}\r\n          autoFocus\r\n          intent={intent}\r\n          value={editValue}\r\n          onChange={this._onEditableChange}\r\n          onKeyUp={this._onEditableKeyUp}\r\n          onFocus={this._onEditableFocus}\r\n          onBlur={this._onEditableBlur}\r\n        />\r\n      );\r\n    } else {\r\n      return (\r\n        <Text className={className} intent={intent} onClick={this._onTextClick}>\r\n          {value}\r\n        </Text>\r\n      );\r\n    }\r\n  }\r\n\r\n  @autobind()\r\n  private _onTextClick() {\r\n    const { value } = this.props;\r\n    this.setState({\r\n      editValue: value\r\n    });\r\n  }\r\n\r\n  @autobind()\r\n  private _onEditableChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    this.setState({\r\n      editValue: e.target.value\r\n    });\r\n  }\r\n\r\n  @autobind()\r\n  private _onEditableKeyUp(e: React.KeyboardEvent) {\r\n    switch (e.key) {\r\n      case Keys.Enter:\r\n        this._commit();\r\n        break;\r\n      case Keys.Esc:\r\n        this._reset();\r\n        break;\r\n    }\r\n  }\r\n\r\n  @autobind()\r\n  private _onEditableFocus(e: React.FocusEvent<HTMLInputElement>) {\r\n    e.target.select();\r\n  }\r\n\r\n  @autobind()\r\n  private _onEditableBlur() {\r\n    this._commit();\r\n  }\r\n\r\n  private _commit() {\r\n    const { editValue } = this.state;\r\n    const { onCommit } = this.props;\r\n\r\n    if (!editValue) {\r\n      return;\r\n    }\r\n\r\n    onCommit(editValue);\r\n\r\n    this._reset();\r\n  }\r\n\r\n  private _reset() {\r\n    this.setState({\r\n      editValue: null\r\n    });\r\n  }\r\n}\r\n","import EditableText from \"./EditableText\";\r\nexport default EditableText;\r\n","import connectEditorField from \"./connect-field\";\r\n\r\nimport EditableText from \"@/components/EditableText\";\r\n\r\nexport default connectEditorField()(EditableText);\r\n","import * as React from \"react\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Flex from \"@/components/Flex\";\r\n\r\nimport EditableTextField from \"@/pages/SaveEditor/components/fields/EditableTextField\";\r\n\r\nimport EditorHeader from \"../../../components/EditorHeader\";\r\n\r\nexport interface MinionHeaderProps {\r\n  minionNamePath: string[];\r\n}\r\nconst MinionHeader: React.SFC<MinionHeaderProps> = ({ minionNamePath }) => (\r\n  <React.Fragment>\r\n    <EditorHeader>\r\n      <Flex direction=\"row\">\r\n        <Flex.Item mr={1}>Name:</Flex.Item>\r\n        <Flex.Item grow shrink>\r\n          <EditableTextField intent={Intent.Primary} path={minionNamePath} />\r\n        </Flex.Item>\r\n      </Flex>\r\n    </EditorHeader>\r\n  </React.Fragment>\r\n);\r\nMinionHeader.displayName = \"MinionHeader\";\r\nexport default MinionHeader;\r\n","import * as React from \"react\";\r\n\r\nexport interface TabProps {\r\n  tabKey: string | number;\r\n  header: React.ReactChild;\r\n}\r\n\r\nconst Tab: React.SFC<TabProps> = ({ children }) => (\r\n  <React.Fragment>{children}</React.Fragment>\r\n);\r\nTab.displayName = \"Tab\";\r\nexport default Tab;\r\n","import styled, { getTheme, intent, Intent } from \"@/theme\";\r\n\r\nexport interface TabProps {\r\n  isSelected?: boolean;\r\n}\r\n\r\nconst VerticalTabItem = styled<TabProps, \"div\">(\"div\")`\r\n  cursor: pointer;\r\n\r\n  padding: ${props => getTheme(props).space[1]}px;\r\n\r\n  color: ${props =>\r\n    props.isSelected ? intent.of(Intent.Primary) : intent.of(Intent.Secondary)}\r\n\r\n  :not(:last-child) {\r\n    border-bottom: ${props => {\r\n      const theme = getTheme(props);\r\n      return `${theme.borders[1]} ${theme.colors.intent.secondary}`;\r\n    }};\r\n  }\r\n\r\n  ${props => {\r\n    const theme = getTheme(props);\r\n    return `border-right: ${theme.borders[1]} ${\r\n      props.isSelected ? \"transparent\" : theme.colors.intent.secondary\r\n    }`;\r\n  }};\r\n`;\r\nVerticalTabItem.displayName = \"VerticalTabItem\";\r\nexport default VerticalTabItem;\r\n","import * as React from \"react\";\r\n\r\nimport Flex from \"@/components/Flex\";\r\n\r\nconst TabContent: React.SFC = ({ children }) => (\r\n  <Flex.Item grow shrink pl={1} p={3}>\r\n    {children}\r\n  </Flex.Item>\r\n);\r\nTabContent.displayName = \"TabContent\";\r\nexport default TabContent;\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { attachProps } from \"@/utils\";\r\n\r\nimport { BoxProps } from \"@/components/Box\";\r\nimport Flex from \"@/components/Flex\";\r\n\r\nimport TabContent from \"./components/TabContent\";\r\nimport VerticalTabItem from \"./components/VerticalTabItem\";\r\n\r\nimport Tab, { TabProps } from \"./components/Tab\";\r\n\r\nexport interface VerticalTabsProps extends BoxProps {}\r\n\r\ntype Props = VerticalTabsProps;\r\ninterface State {\r\n  selectedKey: string | number | null;\r\n}\r\nclass VerticalTabs extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      selectedKey: null\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let { children } = this.props;\r\n    let { selectedKey } = this.state;\r\n\r\n    const tabs = React.Children.map(\r\n      children,\r\n      x =>\r\n        React.isValidElement<TabProps>(x) && x.props.tabKey && x.props.header\r\n          ? x\r\n          : null\r\n    ).filter(x => x !== null) as React.ReactElement<TabProps>[];\r\n\r\n    if (selectedKey == null && tabs.length > 0) {\r\n      selectedKey = tabs[0].props.tabKey;\r\n    }\r\n\r\n    const tabItems = tabs.map((tab, i) => (\r\n      <VerticalTabItem\r\n        key={tab.props.tabKey}\r\n        isSelected={tab.props.tabKey === selectedKey}\r\n        onClick={this._onTabItemClick.bind(this, tab.props.tabKey)}\r\n      >\r\n        {tab.props.header}\r\n      </VerticalTabItem>\r\n    ));\r\n\r\n    const content = selectedKey\r\n      ? tabs.find(x => x.props.tabKey === selectedKey)\r\n      : undefined;\r\n\r\n    return (\r\n      <Flex {...this.props} direction=\"row\">\r\n        <Flex.Item shrink>{tabItems}</Flex.Item>\r\n        <TabContent>{content}</TabContent>\r\n      </Flex>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onTabItemClick(key: string | number) {\r\n    this.setState({\r\n      selectedKey: key\r\n    });\r\n  }\r\n}\r\n\r\nexport { TabProps } from \"./components/Tab\";\r\nexport default attachProps(VerticalTabs, {\r\n  Tab\r\n});\r\n","import VerticalTabs from \"./VerticalTabs\";\r\nexport default VerticalTabs;\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\nimport { MinionIdentityBehavior, GameObject } from \"oni-save-parser\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport selectedPath from \"@/selectors/selected-path\";\r\nimport oniSave from \"@/selectors/oni-save\";\r\nimport { get } from \"lodash-es\";\r\n\r\nconst structuredSelector = {\r\n  gameObjectPath: selectedPath,\r\n  minionNamePath: createSelector(selectedPath, oniSave, (path, oniSave) => {\r\n    const gameObject: GameObject = get(oniSave, path);\r\n    if (!gameObject) {\r\n      return null;\r\n    }\r\n    const behaviorIndex = gameObject.behaviors.findIndex(\r\n      x => x.name === MinionIdentityBehavior\r\n    );\r\n    if (behaviorIndex === -1) {\r\n      return null;\r\n    }\r\n    return [...path, \"behaviors\", `${behaviorIndex}`, \"templateData\", \"name\"];\r\n  })\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport VerticalTabs from \"@/components/VerticalTabs\";\r\n\r\nimport EditorContainer from \"../../components/EditorContainer\";\r\n\r\nimport GameObjectHeader from \"../components/GameObjectHeader\";\r\n\r\nimport MinionHeader from \"./components/MinionEditableName\";\r\n\r\nimport MinionAppearanceTab from \"./components/MinionAppearanceTab\";\r\nimport MinionHealthTab from \"./components/MinionHealthTab\";\r\nimport MinionPositionTab from \"./components/MinionPositionTab\";\r\n\r\ntype Props = StateProps;\r\nclass DuplicantEditor extends React.Component<Props> {\r\n  render() {\r\n    const { minionNamePath, gameObjectPath } = this.props;\r\n    if (!minionNamePath) {\r\n      return \"Error: Malformed data\";\r\n    }\r\n\r\n    return (\r\n      <EditorContainer>\r\n        <GameObjectHeader>\r\n          <MinionHeader minionNamePath={minionNamePath} />\r\n        </GameObjectHeader>\r\n\r\n        <VerticalTabs width=\"100%\">\r\n          <VerticalTabs.Tab tabKey=\"appearance\" header=\"Appearance\">\r\n            <MinionAppearanceTab />\r\n            <br />\r\n            TODO scale\r\n          </VerticalTabs.Tab>\r\n\r\n          <VerticalTabs.Tab tabKey=\"health\" header=\"Health\">\r\n            <MinionHealthTab />\r\n            TODO health points, stanima, diseases (surface and ingested), so on.\r\n          </VerticalTabs.Tab>\r\n\r\n          <VerticalTabs.Tab tabKey=\"position\" header=\"Position\">\r\n            <MinionPositionTab gameObjectPath={gameObjectPath} />\r\n          </VerticalTabs.Tab>\r\n        </VerticalTabs>\r\n      </EditorContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(DuplicantEditor);\r\n","import MinionEditor from \"./MinionEditor\";\r\nexport default MinionEditor;\r\n","import Box from \"@/components/Box\";\r\n\r\nconst GameObjectHeaderContainer = Box;\r\nGameObjectHeaderContainer.displayName = \"GameObjectHeaderContainer\";\r\nexport default GameObjectHeaderContainer;\r\n","import * as CSS from \"csstype\";\r\n\r\nimport styled, {\r\n  Background,\r\n  BackgroundProps,\r\n  TextProps,\r\n  background,\r\n  css,\r\n  text\r\n} from \"@/theme\";\r\n\r\nimport { attachProps } from \"@/utils\";\r\n\r\nexport interface ToolbarItemProps {\r\n  align?: \"left\" | \"center\" | \"right\";\r\n  alignContent?: CSS.AlignContentProperty;\r\n}\r\nconst toolbarItem = css<ToolbarItemProps>`\r\n  grid-area: ${props => props.align};\r\n  justify-self: ${props => props.align};\r\n  align-self: ${props => props.alignContent || \"baseline\"};\r\n`;\r\n\r\nexport type ToolbarLabelProps = ToolbarItemProps & TextProps;\r\nconst ToolbarLabel = styled<ToolbarLabelProps, \"label\">(\"label\")`\r\n  ${text};\r\n  ${toolbarItem};\r\n`;\r\nToolbarLabel.defaultProps = {\r\n  align: \"left\"\r\n};\r\nToolbarLabel.displayName = \"ToolbarLabel\";\r\n\r\nexport type ToolbarGroupProps = ToolbarItemProps;\r\nconst ToolbarGroup = styled<ToolbarGroupProps, \"div\">(\"div\")`\r\n  display: inline-block;\r\n  ${toolbarItem};\r\n`;\r\nToolbarGroup.defaultProps = {\r\n  align: \"right\"\r\n};\r\nToolbarGroup.displayName = \"ToolbarButtonGroup\";\r\n\r\nexport type ToolbarProps = BackgroundProps;\r\nconst Toolbar = styled<ToolbarProps, \"div\">(\"div\")`\r\n  width: 100%;\r\n  height: auto;\r\n  display: grid;\r\n  grid-template-columns: [left] 1fr [center] 1fr [right] 1fr;\r\n  ${background};\r\n`;\r\nToolbar.defaultProps = {\r\n  background: Background.Panel\r\n};\r\nToolbar.displayName = \"Toolbar\";\r\n\r\nexport default attachProps(Toolbar, {\r\n  Label: ToolbarLabel,\r\n  Group: ToolbarGroup\r\n});\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport {\r\n  GameObject,\r\n  PrimaryElementBehavior,\r\n  getBehavior\r\n} from \"oni-save-parser\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport selectedValue from \"@/selectors/selected-value\";\r\n\r\nconst position = createSelector(\r\n  selectedValue,\r\n  (value: GameObject) => value && value.position\r\n);\r\n\r\nconst primaryElementBehavior = createSelector(selectedValue, value => {\r\n  if (!value) {\r\n    return null;\r\n  }\r\n\r\n  return getBehavior(value, PrimaryElementBehavior);\r\n});\r\n\r\nconst primaryElement = createSelector(primaryElementBehavior, behavior => {\r\n  if (!behavior) {\r\n    return null;\r\n  }\r\n\r\n  return behavior.templateData.ElementID;\r\n});\r\n\r\nconst structuredSelector = {\r\n  position,\r\n  primaryElement\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import { Vector3, SimHashes, HashedString } from \"oni-save-parser\";\r\n\r\nconst POSITION_PRECISION = 4;\r\n\r\nexport function formatPositionValue(v: number): string {\r\n  return v.toPrecision(POSITION_PRECISION);\r\n}\r\n\r\nexport function formatPosition(p: Vector3) {\r\n  return `(${formatPositionValue(p.x)}, ${formatPositionValue(p.y)})`;\r\n}\r\n\r\nexport function formatSimHash(hash: SimHashes): string {\r\n  return SimHashes[hash];\r\n}\r\n\r\nexport function formatDisease(diseaseId: HashedString): string {\r\n  // TODO: Look up from oni-save-parser\r\n  return `Disease(${diseaseId.hash})`;\r\n}\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport { formatPosition, formatSimHash, formatDisease } from \"@/format\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport Toolbar from \"@/components/Toolbar\";\r\nimport Text from \"@/components/Text\";\r\n\r\nimport GameObjectHeaderContainer from \"./components/GameObjectHeaderContainer\";\r\n\r\ntype Props = StateProps;\r\nclass GameObjectHeader extends React.Component<Props> {\r\n  render() {\r\n    const { position, primaryElement } = this.props;\r\n    return (\r\n      <GameObjectHeaderContainer>\r\n        <Toolbar>\r\n          <Toolbar.Label>{this.props.children}</Toolbar.Label>\r\n\r\n          <Toolbar.Group align=\"center\" alignContent=\"center\">\r\n            <Text intent={Intent.Secondary} mr={1} whiteSpace=\"nowrap\">\r\n              {position ? formatPosition(position) : \"(no object selected)\"}\r\n            </Text>\r\n          </Toolbar.Group>\r\n\r\n          <Toolbar.Group align=\"right\" alignContent=\"center\">\r\n            {primaryElement && (\r\n              <Text intent={Intent.Secondary} mr={1}>\r\n                {formatSimHash(primaryElement)}\r\n              </Text>\r\n            )}\r\n          </Toolbar.Group>\r\n        </Toolbar>\r\n      </GameObjectHeaderContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(GameObjectHeader);\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { KPrefabIDBehavior, getBehavior, GameObject } from \"oni-save-parser\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport { getPathGameObjectGroup } from \"@/services/save-structure\";\r\n\r\nimport selectedValue from \"@/selectors/selected-value\";\r\nimport selectedPath from \"@/selectors/selected-path\";\r\nimport oniSave from \"@/selectors/oni-save\";\r\n\r\nconst structuredSelector = {\r\n  gameObjectPath: selectedPath,\r\n  gameObjectName: createSelector(\r\n    selectedValue,\r\n    selectedPath,\r\n    oniSave,\r\n    (selectedValue, selectedPath, oniSave) => {\r\n      if (!oniSave) {\r\n        return \"[no save loaded]\";\r\n      }\r\n\r\n      if (!selectedValue) {\r\n        return \"[no value selected]\";\r\n      }\r\n\r\n      const prefabIdBehavior = getBehavior(selectedValue, KPrefabIDBehavior);\r\n      let prefabId =\r\n        (prefabIdBehavior &&\r\n          prefabIdBehavior.templateData &&\r\n          prefabIdBehavior.templateData.InstanceID) ||\r\n        \"[no instance id]\";\r\n\r\n      const group = getPathGameObjectGroup(selectedPath, oniSave);\r\n\r\n      return `${group ? group.name : \"[unknown]\"} #${prefabId}`;\r\n    }\r\n  )\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport FormGroup from \"@/components/FormGroup\";\r\n\r\nimport NumericField from \"@/pages/SaveEditor/components/fields/NumericField\";\r\n\r\nimport EditorContainer from \"../../components/EditorContainer\";\r\nimport EditorHeader from \"../../components/EditorHeader\";\r\nimport GameObjectHeader from \"../components/GameObjectHeader\";\r\n\r\ntype Props = StateProps;\r\nclass DefaultGameObjectEditor extends React.Component<Props> {\r\n  render() {\r\n    const { gameObjectPath, gameObjectName } = this.props;\r\n    if (!gameObjectPath) {\r\n      return \"Error: Malformed data\";\r\n    }\r\n\r\n    return (\r\n      <EditorContainer>\r\n        <GameObjectHeader>\r\n          <EditorHeader intent={Intent.Primary}>{gameObjectName}</EditorHeader>\r\n        </GameObjectHeader>\r\n        <FormGroup>\r\n          <FormGroup.Label>Position</FormGroup.Label>\r\n          <FormGroup.Content>\r\n            <FormGroup>\r\n              <FormGroup.Label>X</FormGroup.Label>\r\n              <FormGroup.Content>\r\n                <NumericField\r\n                  precision=\"single\"\r\n                  path={[...gameObjectPath, \"position\", \"x\"]}\r\n                />\r\n              </FormGroup.Content>\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <FormGroup.Label>Y</FormGroup.Label>\r\n              <FormGroup.Content>\r\n                <NumericField\r\n                  precision=\"single\"\r\n                  path={[...gameObjectPath, \"position\", \"y\"]}\r\n                />\r\n              </FormGroup.Content>\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <FormGroup.Label>Z</FormGroup.Label>\r\n              <FormGroup.Content>\r\n                <NumericField\r\n                  precision=\"single\"\r\n                  path={[...gameObjectPath, \"position\", \"z\"]}\r\n                />\r\n              </FormGroup.Content>\r\n            </FormGroup>\r\n          </FormGroup.Content>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <FormGroup.Label>Scale</FormGroup.Label>\r\n          <FormGroup.Content>\r\n            <FormGroup>\r\n              <FormGroup.Label>X</FormGroup.Label>\r\n              <FormGroup.Content>\r\n                <NumericField\r\n                  precision=\"single\"\r\n                  path={[...gameObjectPath, \"scale\", \"x\"]}\r\n                />\r\n              </FormGroup.Content>\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <FormGroup.Label>Y</FormGroup.Label>\r\n              <FormGroup.Content>\r\n                <NumericField\r\n                  precision=\"single\"\r\n                  path={[...gameObjectPath, \"scale\", \"y\"]}\r\n                />\r\n              </FormGroup.Content>\r\n            </FormGroup>\r\n          </FormGroup.Content>\r\n        </FormGroup>\r\n      </EditorContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(DefaultGameObjectEditor);\r\n","import DefaultGameObjectEditor from \"./DefaultGameObjectEditor\";\r\nexport default DefaultGameObjectEditor;\r\n","import styled from \"@/theme\";\r\n\r\nconst GroupListContent = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  justify-content: flex-start;\r\n  align-items: baseline;\r\n`;\r\nGroupListContent.displayName = \"GroupListContent\";\r\nexport default GroupListContent;\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { GameObjectGroup } from \"oni-save-parser\";\r\n\r\nimport { get } from \"lodash-es\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save\";\r\nimport selectedPath from \"@/selectors/selected-path\";\r\n\r\nimport { getSaveItemTitle } from \"@/services/save-structure\";\r\n\r\nexport interface GameObjectItem {\r\n  name: string;\r\n  path: string[];\r\n}\r\n\r\nconst gameObjectItems = createSelector(\r\n  oniSave,\r\n  selectedPath,\r\n  (oniSave, selectedPath) => {\r\n    if (!oniSave) {\r\n      return [];\r\n    }\r\n\r\n    const group: GameObjectGroup = get(oniSave, selectedPath);\r\n    if (!group) {\r\n      return [];\r\n    }\r\n\r\n    return group.gameObjects.map((x, i) => {\r\n      const path = [...selectedPath, \"gameObjects\", `${i}`];\r\n      const name = getSaveItemTitle(path, oniSave);\r\n      const item: GameObjectItem = {\r\n        name,\r\n        path\r\n      };\r\n      return item;\r\n    });\r\n  }\r\n);\r\n\r\nconst structuredSelector = {\r\n  gameObjectItems\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport Portrait from \"@/components/Portrait\";\r\nimport SaveStructureLink from \"@/components/SaveStructureLink\";\r\n\r\nimport EditorContainer from \"@/pages/SaveEditor/components/editors/components/EditorContainer\";\r\nimport EditorHeader from \"@/pages/SaveEditor/components/editors/components/EditorHeader\";\r\n\r\nimport GameObjectListContent from \"./components/GameObjectListContent\";\r\n\r\ntype Props = StateProps;\r\nclass GameObjectList extends React.Component<Props> {\r\n  render() {\r\n    const { gameObjectItems } = this.props;\r\n    const portraits = gameObjectItems.map(x => (\r\n      <Portrait key={x.name}>\r\n        <Portrait.Header wordBreak=\"break-all\">\r\n          <SaveStructureLink intent={Intent.Primary} path={x.path}>\r\n            {x.name}\r\n          </SaveStructureLink>\r\n        </Portrait.Header>\r\n      </Portrait>\r\n    ));\r\n    return (\r\n      <EditorContainer>\r\n        <EditorHeader>GameObjects</EditorHeader>\r\n        <GameObjectListContent>{portraits}</GameObjectListContent>\r\n      </EditorContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(GameObjectList);\r\n","import GameObjectList from \"./GameObjectList\";\r\nexport default GameObjectList;\r\n","import styled from \"@/theme\";\r\n\r\nconst GameObjectGroupListContent = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  justify-content: flex-start;\r\n  align-items: baseline;\r\n`;\r\nGameObjectGroupListContent.displayName = \"GameObjectGroupListContent\";\r\nexport default GameObjectGroupListContent;\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save\";\r\n\r\nexport interface GroupItem {\r\n  name: string;\r\n  count: number;\r\n  path: string[];\r\n}\r\n\r\nconst gameObjectGroups = createSelector(oniSave, oniSave => {\r\n  if (!oniSave) {\r\n    return [];\r\n  }\r\n\r\n  return oniSave.gameObjects.map((x, i) => {\r\n    const item: GroupItem = {\r\n      name: x.name,\r\n      count: x.gameObjects.length,\r\n      path: [\"gameObjects\", `${i}`]\r\n    };\r\n    return item;\r\n  });\r\n});\r\n\r\nconst structuredSelector = {\r\n  gameObjectGroups\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport Portrait from \"@/components/Portrait\";\r\nimport SaveStructureLink from \"@/components/SaveStructureLink\";\r\n\r\nimport EditorContainer from \"@/pages/SaveEditor/components/editors/components/EditorContainer\";\r\nimport EditorHeader from \"@/pages/SaveEditor/components/editors/components/EditorHeader\";\r\n\r\nimport GameObjectGroupListContent from \"./components/GameObjectGroupListContent\";\r\n\r\ntype Props = StateProps;\r\nclass GameObjectGroupList extends React.Component<Props> {\r\n  render() {\r\n    const { gameObjectGroups } = this.props;\r\n    const portraits = gameObjectGroups.map(x => (\r\n      <Portrait key={x.name}>\r\n        <Portrait.Header wordBreak=\"break-all\">\r\n          <SaveStructureLink intent={Intent.Primary} path={x.path}>\r\n            {x.name}\r\n          </SaveStructureLink>\r\n        </Portrait.Header>\r\n        <Portrait.Footer>\r\n          <Text intent={Intent.Secondary}>{x.count} items</Text>\r\n        </Portrait.Footer>\r\n      </Portrait>\r\n    ));\r\n    return (\r\n      <EditorContainer>\r\n        <EditorHeader>GameObject Types</EditorHeader>\r\n        <GameObjectGroupListContent>{portraits}</GameObjectGroupListContent>\r\n      </EditorContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(GameObjectGroupList);\r\n","import GameObjectGroupList from \"./GameObjectGroupList\";\r\nexport default GameObjectGroupList;\r\n","import * as React from \"react\";\r\n\r\nimport FormGroup from \"@/components/FormGroup\";\r\n\r\nimport { EditorFieldProps } from \"./connect-field\";\r\n\r\nimport NumericField from \"./NumericField\";\r\n\r\nconst Vector3Field: React.SFC<EditorFieldProps> = ({ path }) => (\r\n  <div>\r\n    <FormGroup>\r\n      <FormGroup.Label>X</FormGroup.Label>\r\n      <FormGroup.Content>\r\n        <NumericField precision=\"single\" path={[...path, \"x\"]} />\r\n      </FormGroup.Content>\r\n    </FormGroup>\r\n    <FormGroup>\r\n      <FormGroup.Label>Y</FormGroup.Label>\r\n      <FormGroup.Content>\r\n        <NumericField precision=\"single\" path={[...path, \"y\"]} />\r\n      </FormGroup.Content>\r\n    </FormGroup>\r\n    <FormGroup>\r\n      <FormGroup.Label>Z</FormGroup.Label>\r\n      <FormGroup.Content>\r\n        <NumericField precision=\"single\" path={[...path, \"z\"]} />\r\n      </FormGroup.Content>\r\n    </FormGroup>\r\n  </div>\r\n);\r\nVector3Field.displayName = \"Vector3Field\";\r\nexport default Vector3Field;\r\n","import * as React from \"react\";\r\n\r\nimport FormGroup from \"@/components/FormGroup\";\r\n\r\nimport { EditorFieldProps } from \"./connect-field\";\r\n\r\nimport NumericField from \"./NumericField\";\r\n\r\nconst Vector2IField: React.SFC<EditorFieldProps> = ({ path }) => (\r\n  <div>\r\n    <FormGroup>\r\n      <FormGroup.Label>X</FormGroup.Label>\r\n      <FormGroup.Content>\r\n        <NumericField precision=\"int32\" path={[...path, \"x\"]} />\r\n      </FormGroup.Content>\r\n    </FormGroup>\r\n    <FormGroup>\r\n      <FormGroup.Label>Y</FormGroup.Label>\r\n      <FormGroup.Content>\r\n        <NumericField precision=\"int32\" path={[...path, \"y\"]} />\r\n      </FormGroup.Content>\r\n    </FormGroup>\r\n  </div>\r\n);\r\nVector2IField.displayName = \"Vector2IField\";\r\nexport default Vector2IField;\r\n","import * as React from \"react\";\r\n\r\nimport FormGroup from \"@/components/FormGroup\";\r\n\r\nimport { EditorFieldProps } from \"./connect-field\";\r\n\r\nimport NumericField from \"./NumericField\";\r\n\r\nconst Vector2Field: React.SFC<EditorFieldProps> = ({ path }) => (\r\n  <div>\r\n    <FormGroup>\r\n      <FormGroup.Label>X</FormGroup.Label>\r\n      <FormGroup.Content>\r\n        <NumericField precision=\"single\" path={[...path, \"x\"]} />\r\n      </FormGroup.Content>\r\n    </FormGroup>\r\n    <FormGroup>\r\n      <FormGroup.Label>Y</FormGroup.Label>\r\n      <FormGroup.Content>\r\n        <NumericField precision=\"single\" path={[...path, \"y\"]} />\r\n      </FormGroup.Content>\r\n    </FormGroup>\r\n  </div>\r\n);\r\nVector2Field.displayName = \"Vector2Field\";\r\nexport default Vector2Field;\r\n","import TextInput from \"@/components/TextInput\";\r\n\r\nimport connectEditorField from \"./connect-field\";\r\n\r\nexport default connectEditorField()(TextInput);\r\n","interface ConstrainedArrayConstructor {\r\n  new (length: number): {\r\n    [value: number]: number;\r\n  };\r\n}\r\n\r\nfunction createClamp(\r\n  type: ConstrainedArrayConstructor\r\n): (value: number) => number {\r\n  const clampArray = new type(1);\r\n  return (value: number) => {\r\n    clampArray[0] = value;\r\n    return clampArray[0];\r\n  };\r\n}\r\n\r\nexport type NumberPrecision =\r\n  | \"int8\"\r\n  | \"uint8\"\r\n  | \"int16\"\r\n  | \"uint16\"\r\n  | \"int32\"\r\n  | \"uint32\"\r\n  | \"single\"\r\n  | \"double\";\r\n\r\nexport const clampInt8 = createClamp(Int8Array);\r\nexport const clampUInt8 = createClamp(Uint8Array);\r\n\r\nexport const clampInt16 = createClamp(Int16Array);\r\nexport const clampUInt16 = createClamp(Uint16Array);\r\n\r\nexport const clampInt32 = createClamp(Int32Array);\r\nexport const clampUInt32 = createClamp(Uint32Array);\r\n\r\nexport const clampSingle = createClamp(Float32Array);\r\nexport const clampDouble = createClamp(Float64Array);\r\n\r\nconst CLAMPS_BY_PRECISION: Record<\r\n  NumberPrecision,\r\n  (value: number) => number\r\n> = {\r\n  int8: clampInt8,\r\n  uint8: clampUInt8,\r\n  int16: clampInt16,\r\n  uint16: clampUInt16,\r\n  int32: clampInt32,\r\n  uint32: clampUInt32,\r\n  single: clampSingle,\r\n  double: clampDouble\r\n};\r\n\r\nexport function clamp(precision: NumberPrecision, value: number): number {\r\n  const clamper = CLAMPS_BY_PRECISION[precision];\r\n  if (!clamper) {\r\n    throw new Error(`Unknown precision \"${precision}\".`);\r\n  }\r\n\r\n  return clamper(value);\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\nimport { EnumerationsByName } from \"oni-save-parser\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport NumericInput from \"@/components/NumericInput\";\r\nimport Select, { Option } from \"@/components/Select\";\r\n\r\nimport connectEditorField, {\r\n  EditorFieldProps,\r\n  InjectedProps\r\n} from \"./connect-field\";\r\n\r\nexport interface EnumerationFieldProps extends EditorFieldProps {\r\n  enumerationName: string;\r\n}\r\n\r\ntype Props = EnumerationFieldProps & InjectedProps;\r\nclass EnumerationField extends React.Component<Props> {\r\n  render() {\r\n    const { enumerationName, value, onCommit } = this.props;\r\n    const enumeration = getEnumeration(enumerationName);\r\n    if (!enumeration) {\r\n      return (\r\n        <span>\r\n          <NumericInput value={value} onCommit={onCommit} />\r\n          <Text intent={Intent.Hint}>{enumerationName} (unknown)</Text>\r\n        </span>\r\n      );\r\n    } else {\r\n      // Enumeration has keys for names and numbers.\r\n      const nameKeys = Object.keys(enumeration).filter(\r\n        // TODO: This is silly.  Expose a way to match the [enum]Names constants\r\n        //  to the names of enum types.\r\n        x => isNaN(parseInt(x))\r\n      );\r\n      const options: Option<number>[] = nameKeys.map(x => ({\r\n        label: x,\r\n        value: enumeration[x]\r\n      }));\r\n      return (\r\n        <span>\r\n          <Select\r\n            value={value as number}\r\n            options={options}\r\n            searchable={options.length >= 7}\r\n            clearable={false}\r\n            onChange={this._onSelectInputChange}\r\n            width=\"200px\"\r\n          />\r\n        </span>\r\n      );\r\n    }\r\n  }\r\n\r\n  @autobind()\r\n  private _onSelectInputChange(value: Option<any> | null) {\r\n    if (!value) {\r\n      return;\r\n    }\r\n    const { onCommit } = this.props;\r\n    onCommit(value.value);\r\n  }\r\n}\r\n\r\nexport default connectEditorField()(EnumerationField);\r\n\r\nfunction getEnumeration(\r\n  enumerationName: string\r\n): (Record<string, number> & Record<number, string>) | null {\r\n  if (\r\n    !Object.prototype.hasOwnProperty.call(EnumerationsByName, enumerationName)\r\n  ) {\r\n    return null;\r\n  }\r\n\r\n  return (EnumerationsByName as any)[enumerationName];\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport connectEditorField, {\r\n  EditorFieldProps,\r\n  InjectedProps\r\n} from \"./connect-field\";\r\n\r\nimport Input from \"@/components/Input\";\r\n\r\nexport interface BooleanFieldProps extends EditorFieldProps {}\r\n\r\ntype Props = BooleanFieldProps & InjectedProps;\r\nclass BooleanField extends React.Component<Props> {\r\n  render() {\r\n    const { value } = this.props;\r\n    return (\r\n      <Input type=\"checkbox\" value={value} onChange={this._onValueChange} />\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onValueChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const value = e.target.checked;\r\n    const { onCommit } = this.props;\r\n    onCommit(value);\r\n  }\r\n}\r\nexport default connectEditorField()(BooleanField);\r\n","import { modifyOniSave } from \"@/actions/modify-onisave\";\r\n\r\nimport { EditorFieldProps } from \"./props\";\r\nimport { Dispatch } from \"redux\";\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch, props: EditorFieldProps) {\r\n  return {\r\n    onCommit(value: any) {\r\n      dispatch(modifyOniSave(props.path, value));\r\n    }\r\n  };\r\n}\r\nexport type DispatchProps = ReturnType<typeof mapDispatchToProps>;\r\nexport default mapDispatchToProps;\r\n","import createCachedSelector from \"re-reselect\";\r\n\r\nimport { get } from \"lodash-es\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save\";\r\n\r\nimport { EditorFieldProps } from \"./props\";\r\n\r\nconst itemPathSelector = (_: AppState, props: EditorFieldProps) => props.path;\r\n\r\nconst cacheKeyGenerator = (_: AppState, props: EditorFieldProps) =>\r\n  props.path.join(\".\");\r\n\r\nconst itemValue = createCachedSelector(\r\n  itemPathSelector,\r\n  oniSave,\r\n  (path, oniSave) => {\r\n    if (path.length === 0) {\r\n      return oniSave;\r\n    }\r\n    return get(oniSave, path);\r\n  }\r\n)(cacheKeyGenerator);\r\n\r\nfunction mapStateToProps(state: AppState, props: EditorFieldProps) {\r\n  return {\r\n    value: itemValue(state, props)\r\n  };\r\n}\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\n\r\nimport { TypeInfo } from \"oni-save-parser\";\r\n\r\nimport Text from \"@/components/Text\";\r\n\r\nimport connectEditorField, {\r\n  EditorFieldProps,\r\n  InjectedProps\r\n} from \"./connect-field\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport getFieldElementClass from \"./from-typeinfo\";\r\n\r\nexport interface ArrayLikeFieldProps extends EditorFieldProps {\r\n  subType: TypeInfo;\r\n}\r\nconst ArrayLikeField: React.SFC<ArrayLikeFieldProps & InjectedProps> = ({\r\n  path,\r\n  subType,\r\n  value\r\n}) => {\r\n  const ValueElement = getFieldElementClass(subType);\r\n  const elements = (value as any[]).map((value, i) => {\r\n    return (\r\n      <tr key={i}>\r\n        <td>{i}</td>\r\n        <td>\r\n          <ValueElement path={[...path, `${i}`]} />\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n  return (\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th>\r\n            <Text intent={Intent.Primary}>Key</Text>\r\n          </th>\r\n          <th>\r\n            <Text intent={Intent.Primary}>Value</Text>\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>{elements}</tbody>\r\n    </table>\r\n  );\r\n};\r\nArrayLikeField.displayName = \"ArrayLikeField\";\r\nexport default connectEditorField()(ArrayLikeField);\r\n","import styled from \"@/theme\";\r\n\r\nconst TemplateObjectEditorContainer = styled.div``;\r\nTemplateObjectEditorContainer.displayName = \"TemplateObjectEditorContainer\";\r\nexport default TemplateObjectEditorContainer;\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save\";\r\nimport selectedPath from \"@/selectors/selected-path\";\r\n\r\nimport { TemplateObjectEditorProps } from \"./props\";\r\nimport { getTypeCode, SerializationTypeCode } from \"oni-save-parser\";\r\n\r\nconst templateName = (_: AppState, props: TemplateObjectEditorProps) =>\r\n  props.templateName;\r\n\r\nconst templatePath = (_: AppState, props: TemplateObjectEditorProps) =>\r\n  props.templatePath;\r\n\r\nconst valuePath = (state: AppState, props: TemplateObjectEditorProps) =>\r\n  props.valuePathHack || selectedPath(state);\r\n\r\nconst template = createSelector(\r\n  oniSave,\r\n  templateName,\r\n  templatePath,\r\n  (oniSave, templateName, templatePath) => {\r\n    if (!oniSave) {\r\n      return null;\r\n    }\r\n\r\n    let template = oniSave.templates.find(x => x.name === templateName);\r\n\r\n    for (let i = 0; i < templatePath.length; i++) {\r\n      const part = templatePath[i];\r\n\r\n      if (template == null) {\r\n        return null;\r\n      }\r\n\r\n      const member =\r\n        template.fields.find(x => x.name === part) ||\r\n        template.properties.find(x => x.name === part);\r\n      if (!member) {\r\n        return null;\r\n      }\r\n\r\n      const typeCode = getTypeCode(member.type.info);\r\n\r\n      if (typeCode === SerializationTypeCode.UserDefined) {\r\n        template = oniSave.templates.find(\r\n          x => x.name === member.type.templateName!\r\n        );\r\n      } else if (\r\n        LIST_TYPES.indexOf(typeCode) !== -1 &&\r\n        getTypeCode(member.type.subTypes![0].info) ===\r\n          SerializationTypeCode.UserDefined\r\n      ) {\r\n        i++;\r\n        if (i === templatePath.length) {\r\n          // Targeting an array but no index yet.\r\n          return null;\r\n        }\r\n\r\n        template = oniSave.templates.find(\r\n          x => x.name === member.type.subTypes![0].templateName\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    return template;\r\n  }\r\n);\r\n\r\n// TODO: replace with oni-save-parser LIST_TYPES when released.\r\nconst LIST_TYPES = [\r\n  SerializationTypeCode.Array,\r\n  SerializationTypeCode.List,\r\n  SerializationTypeCode.HashSet\r\n];\r\n\r\nconst structuredSelector = {\r\n  template,\r\n  selectedPath: valuePath\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<\r\n  AppState,\r\n  TemplateObjectEditorProps,\r\n  StateProps\r\n>(structuredSelector);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport { TemplateObjectEditorProps } from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport Text from \"@/components/Text\";\r\nconst H4 = Text.withComponent(\"h4\");\r\nconst TD = Text.withComponent(\"td\");\r\n\r\nimport TemplateObjectEditorContainer from \"./components/TemplateObjectEditorContainer\";\r\n\r\nimport getTypeInfoFieldComponent from \"../../fields/from-typeinfo\";\r\n\r\ntype Props = TemplateObjectEditorProps & StateProps;\r\nclass TemplateObjectEditor extends React.Component<Props> {\r\n  render() {\r\n    const { templateName, template, selectedPath } = this.props;\r\n\r\n    const fieldRows =\r\n      template &&\r\n      [...(template.fields || []), ...(template.properties || [])].map(x => {\r\n        const FieldEditor = getTypeInfoFieldComponent(x.type);\r\n        return (\r\n          <tr key={x.name}>\r\n            <TD>{x.name}</TD>\r\n            <td>\r\n              <FieldEditor path={[...selectedPath, x.name]} />\r\n            </td>\r\n          </tr>\r\n        );\r\n      });\r\n    return (\r\n      <TemplateObjectEditorContainer>\r\n        <H4 intent={Intent.Primary}>{templateName}</H4>\r\n        <table>\r\n          <tbody>{fieldRows}</tbody>\r\n        </table>\r\n      </TemplateObjectEditorContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(TemplateObjectEditor);\r\n","import TemplateObjectEditor from \"./TemplateObjectEditor\";\r\nexport default TemplateObjectEditor;\r\n","import styled from \"@/theme\";\r\n\r\nconst DuplicantsListContent = styled.div`\r\n  padding: 5px;\r\n  overflow-x: auto;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\nDuplicantsListContent.displayName = \"DuplicantsListContent\";\r\nexport default DuplicantsListContent;\r\n","import styled from \"@/theme\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst DuplicantsListContainer = styled.div`\r\n  width: 100%;\r\n  margin-top: 5px;\r\n  box-sizing: border-box;\r\n  padding: ${props => getTheme(props).space[1]}px;\r\n  border: ${props => getTheme(props).borders[2]};\r\n  border-color: ${props => getTheme(props).colors.bg.separator};\r\n`;\r\nDuplicantsListContainer.displayName = \"DuplicantsListContainer\";\r\nexport default DuplicantsListContainer;\r\n","import styled from \"@/theme\";\r\n\r\nimport { TextProps, text } from \"@/theme\";\r\n\r\nconst PortraitFooter = styled.div`\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  margin-top: 2px;\r\n  text-align: center;\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n`;\r\nPortraitFooter.displayName = \"PortraitFooter\";\r\nexport default PortraitFooter;\r\n","import styled from \"@/theme\";\r\n\r\nimport { TextProps, text } from \"@/theme\";\r\n\r\nexport interface PortraitHeaderProps extends TextProps {}\r\nconst PortraitHeader = styled<TextProps, \"h4\">(\"h4\")`\r\n  ${text};\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  margin-top: 0;\r\n  margin-bottom: 2px;\r\n  text-align: center;\r\n`;\r\nPortraitHeader.displayName = \"PortraitHeader\";\r\nexport default PortraitHeader;\r\n","import styled from \"@/theme\";\r\n\r\nimport { attachProps } from \"@/utils\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nimport Header from \"./PortraitHeader\";\r\nimport Footer from \"./PortraitFooter\";\r\n\r\nconst Portrait = styled.div`\r\n  border-radius: ${props => getTheme(props).radii[1]};\r\n  background-color: ${props => getTheme(props).colors.bg.panel};\r\n  width: 150px;\r\n  height: 150px;\r\n  position: relative;\r\n  padding: 5px;\r\n  margin: 5px;\r\n  box-sizing: border-box;\r\n`;\r\nPortrait.displayName = \"Portrait\";\r\n\r\nexport default attachProps(Portrait, {\r\n  Header,\r\n  Footer\r\n});\r\n","import createCachedSelector from \"re-reselect\";\r\nimport { MinionIdentityBehavior, getBehavior } from \"oni-save-parser\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save\";\r\n\r\nimport { DuplicantPortraitProps } from \"./props\";\r\n\r\nconst gameObjectIndex = (_: AppState, props: DuplicantPortraitProps) =>\r\n  props.gameObjectIndex;\r\n\r\nconst generateCacheKey = gameObjectIndex;\r\n\r\nconst gameObject = createCachedSelector(\r\n  oniSave,\r\n  gameObjectIndex,\r\n  (oniSave, gameObjectIndex) => {\r\n    if (!oniSave) {\r\n      return null;\r\n    }\r\n    const duplicants = oniSave.gameObjects.find(x => x.name === \"Minion\");\r\n    if (!duplicants) {\r\n      return null;\r\n    }\r\n\r\n    return duplicants.gameObjects[gameObjectIndex] || null;\r\n  }\r\n)(generateCacheKey);\r\n\r\nconst duplicantIdentity = createCachedSelector(gameObject, gameObject => {\r\n  if (!gameObject) {\r\n    return null;\r\n  }\r\n  const identBehavior = getBehavior(gameObject, MinionIdentityBehavior);\r\n  if (!identBehavior || !identBehavior.templateData) {\r\n    return null;\r\n  }\r\n  return identBehavior.templateData;\r\n})(generateCacheKey);\r\n\r\nconst path = (state: AppState, props: DuplicantPortraitProps) => {\r\n  const gameSave = oniSave(state);\r\n  if (!gameSave) {\r\n    return null;\r\n  }\r\n  const groupIndex = gameSave.gameObjects.findIndex(x => x.name === \"Minion\");\r\n  if (groupIndex === -1) {\r\n    return null;\r\n  }\r\n  const index = gameObjectIndex(state, props);\r\n  return [\"gameObjects\", `${groupIndex}`, \"gameObjects\", `${index}`];\r\n};\r\n\r\nconst name = (state: AppState, props: DuplicantPortraitProps) => {\r\n  const ident = duplicantIdentity(state, props);\r\n  return (ident && ident.name) || null;\r\n};\r\n\r\nconst gender = (state: AppState, props: DuplicantPortraitProps) => {\r\n  const ident = duplicantIdentity(state, props);\r\n  return (ident && ident.genderStringKey) || null;\r\n};\r\n\r\nconst arrivalCycle = (state: AppState, props: DuplicantPortraitProps) => {\r\n  const ident = duplicantIdentity(state, props);\r\n  return (ident && (ident.arrivalTime / 200).toFixed(1)) || null;\r\n};\r\n\r\nfunction mapStateToProps(state: AppState, props: DuplicantPortraitProps) {\r\n  return {\r\n    path: path(state, props),\r\n    name: name(state, props),\r\n    gender: gender(state, props),\r\n    arrivalCycle: arrivalCycle(state, props)\r\n  };\r\n}\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport { DuplicantPortraitProps } from \"./props\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport SaveStructureLink from \"@/components/SaveStructureLink\";\r\nimport Portrait from \"@/components/Portrait\";\r\n\r\ntype Props = DuplicantPortraitProps & StateProps;\r\nclass DuplicantPortrait extends React.Component<Props> {\r\n  render() {\r\n    const { path, name, gender, arrivalCycle } = this.props;\r\n    return (\r\n      <Portrait>\r\n        <Portrait.Header>\r\n          {path ? (\r\n            <SaveStructureLink intent={Intent.Primary} path={path}>\r\n              {name}\r\n            </SaveStructureLink>\r\n          ) : (\r\n            \"Invalid Object\"\r\n          )}\r\n        </Portrait.Header>\r\n        <Portrait.Footer>\r\n          <div>\r\n            <Text intent={Intent.Secondary}>{gender}</Text>\r\n          </div>\r\n          <div>\r\n            <Text intent={Intent.Secondary}>{arrivalCycle} cycles old</Text>\r\n          </div>\r\n        </Portrait.Footer>\r\n      </Portrait>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(DuplicantPortrait);\r\n","import DuplicantPortrait from \"./DuplicantPortrait\";\r\nexport default DuplicantPortrait;\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { range } from \"lodash-es\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save\";\r\n\r\nconst duplicantsSetPath = createSelector(oniSave, oniSave => {\r\n  if (!oniSave) {\r\n    return null;\r\n  }\r\n  const index = oniSave.gameObjects.findIndex(x => x.name === \"Minion\");\r\n  if (index === -1) {\r\n    return null;\r\n  }\r\n  return [\"gameObjects\", `${index}`];\r\n});\r\n\r\nconst duplicantIndexes = createSelector(oniSave, oniSave => {\r\n  if (!oniSave) {\r\n    return [];\r\n  }\r\n  const minionSet = oniSave.gameObjects.find(x => x.name === \"Minion\");\r\n  if (!minionSet) {\r\n    return [];\r\n  }\r\n  return range(minionSet.gameObjects.length);\r\n});\r\n\r\nconst structuredSelector = {\r\n  duplicantsSetPath,\r\n  duplicantIndexes\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport SaveStructureLink from \"@/components/SaveStructureLink\";\r\n\r\nimport DuplicantPortrait from \"./components/DuplicantPortrait\";\r\nimport DuplicantsListContainer from \"./components/DuplicantsListContainer\";\r\nimport DuplicantsListContent from \"./components/DuplicantsListContent\";\r\n\r\ntype Props = StateProps;\r\nclass DuplicantsList extends React.Component<Props> {\r\n  render() {\r\n    const { duplicantsSetPath, duplicantIndexes } = this.props;\r\n    if (!duplicantsSetPath || !duplicantIndexes) {\r\n      return \"Malformed Data\";\r\n    }\r\n\r\n    const duplicantPortraits = duplicantIndexes.map(x => (\r\n      <DuplicantPortrait key={x} gameObjectIndex={x} />\r\n    ));\r\n\r\n    return (\r\n      <DuplicantsListContainer>\r\n        <SaveStructureLink intent={Intent.Primary} path={duplicantsSetPath}>\r\n          Duplicants\r\n        </SaveStructureLink>\r\n        <DuplicantsListContent>{duplicantPortraits}</DuplicantsListContent>\r\n      </DuplicantsListContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(DuplicantsList);\r\n","import DuplicantsList from \"./DuplicantsList\";\r\nexport default DuplicantsList;\r\n","import Text from \"@/components/Text\";\r\n\r\nconst SaveGameTitle = Text.withComponent(\"h3\").extend`\r\n  margin-top: 0;\r\n`;\r\nSaveGameTitle.displayName = \"SaveGameTitle\";\r\nexport default SaveGameTitle;\r\n","import styled from \"@/theme\";\r\n\r\nconst SaveRootEditorContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\nSaveRootEditorContainer.displayName = \"SaveRootEditorContainer\";\r\nexport default SaveRootEditorContainer;\r\n","import { createStructuredSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save\";\r\n\r\nconst structuredSelector = {\r\n  oniSave\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\n\r\nimport Text from \"./Text\";\r\nimport { Intent } from \"@/theme\";\r\n\r\nexport interface InfoTextProps {\r\n  value: any;\r\n  pluralize?: boolean;\r\n}\r\n\r\nconst InfoText: React.SFC<InfoTextProps> = ({ value, children }) => (\r\n  <div>\r\n    <Text intent={Intent.Secondary}>{value}</Text> <Text>{children}</Text>\r\n  </div>\r\n);\r\nexport default InfoText;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport InfoText from \"@/components/InfoText\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport SaveRootEditorContainer from \"./components/SaveRootEditorContainer\";\r\n\r\nimport SaveGameTitle from \"./components/SaveGameTitle\";\r\nimport DuplicantsList from \"./components/DuplicantsList\";\r\n\r\ntype Props = StateProps;\r\nclass SaveRootEditor extends React.Component<Props> {\r\n  render() {\r\n    const { oniSave } = this.props;\r\n    return (\r\n      <SaveRootEditorContainer>\r\n        {oniSave ? (\r\n          this._renderContent()\r\n        ) : (\r\n          <Text intent={Intent.Hint}>No Save Loaded</Text>\r\n        )}\r\n      </SaveRootEditorContainer>\r\n    );\r\n  }\r\n\r\n  private _renderContent() {\r\n    const oniSave = this.props.oniSave!;\r\n    const numGameObjects = oniSave.gameObjects.reduce(\r\n      (count, set) => count + set.gameObjects.length,\r\n      0\r\n    );\r\n    return (\r\n      <React.Fragment>\r\n        <SaveGameTitle intent={Intent.Primary}>\r\n          {oniSave.header.gameInfo.baseName}\r\n        </SaveGameTitle>\r\n        <InfoText value={oniSave.header.gameInfo.numberOfCycles}>\r\n          cycles\r\n        </InfoText>\r\n        <InfoText value={oniSave.header.gameInfo.numberOfDuplicants}>\r\n          duplicants\r\n        </InfoText>\r\n        <InfoText value={numGameObjects}>game objects</InfoText>\r\n        <DuplicantsList />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(SaveRootEditor);\r\n","import SaveRootEditor from \"./SaveRootEditor\";\r\nexport default SaveRootEditor;\r\n","import { modifyOniSave } from \"@/actions/modify-onisave\";\r\n\r\nconst mapDispatchToProps = {\r\n  onModify: modifyOniSave\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import { createSelector, createStructuredSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport selectedPath from \"@/selectors/selected-path\";\r\nimport selectedValue from \"@/selectors/selected-value\";\r\n\r\nexport interface FieldEditable {\r\n  title: string;\r\n  key: string;\r\n  value: any;\r\n}\r\nexport type FieldRow = FieldEditable;\r\n\r\nconst fields = createSelector(\r\n  selectedValue,\r\n  (selectedValue): FieldRow[] => {\r\n    if (!selectedValue) {\r\n      return [];\r\n    }\r\n\r\n    if (isPrimitive(selectedValue)) {\r\n      // Cannot edit things in a primitive.\r\n      return [];\r\n    }\r\n\r\n    return Object.keys(selectedValue)\r\n      .filter(key => isPrimitive(selectedValue[key]))\r\n      .map(key => {\r\n        const value = selectedValue[key];\r\n        const editable: FieldEditable = {\r\n          title: key,\r\n          key,\r\n          value\r\n        };\r\n        return editable;\r\n      });\r\n  }\r\n);\r\n\r\nconst structuredSelectors = {\r\n  selectedPath,\r\n  fields\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelectors>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelectors\r\n);\r\nexport default mapStateToProps;\r\n\r\nconst primitiveTypes = [\"string\", \"number\", \"boolean\"];\r\nfunction isPrimitive(val: any) {\r\n  const valType = typeof val;\r\n  return primitiveTypes.indexOf(valType) !== -1;\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nexport interface EditorFieldProps {\r\n  propKey: string;\r\n  value: any;\r\n  onChange(propKey: string, value: any): void;\r\n}\r\nexport default class EditorField extends React.Component<EditorFieldProps> {\r\n  render() {\r\n    const { value } = this.props;\r\n    return (\r\n      <input\r\n        type=\"text\"\r\n        onChange={this._onChange}\r\n        value={JSON.stringify(value)}\r\n      />\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const { propKey, onChange } = this.props;\r\n    const value = e.target.value;\r\n    try {\r\n      const parsedValue = JSON.parse(value);\r\n      onChange(propKey, parsedValue);\r\n    } catch {}\r\n  }\r\n}\r\n","import styled from \"@/theme\";\r\n\r\nconst Container = styled.div``;\r\nexport default Container;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Text from \"@/components/Text\";\r\n\r\nimport SelectedObjectEditorContainer from \"./components/Container\";\r\n\r\nimport EditorField from \"./components/EditorField\";\r\n\r\nimport mapStateToProps, { StateProps, FieldRow } from \"./derived-state\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\nconst TH = Text.withComponent(\"th\");\r\nconst TD = Text.withComponent(\"td\");\r\n\r\ntype Props = StateProps & DispatchProps;\r\nclass DefaultObjectEditor extends React.Component<Props> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const { fields } = this.props;\r\n\r\n    const fieldElements = fields.map(field => this._renderFieldRow(field));\r\n\r\n    return (\r\n      <SelectedObjectEditorContainer>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <TH>Name</TH>\r\n              <TH>Value</TH>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{fieldElements}</tbody>\r\n        </table>\r\n      </SelectedObjectEditorContainer>\r\n    );\r\n  }\r\n\r\n  private _renderFieldRow(field: FieldRow) {\r\n    const { title, key, value } = field;\r\n    return (\r\n      <tr key={key}>\r\n        <TD>{title}</TD>\r\n        <TD>\r\n          <EditorField\r\n            propKey={key}\r\n            value={value}\r\n            onChange={this._onFieldChange}\r\n          />\r\n        </TD>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onFieldChange(key: string, value: any) {\r\n    const { selectedPath, onModify } = this.props;\r\n    onModify([...selectedPath, key], value);\r\n  }\r\n}\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(DefaultObjectEditor);\r\n","import DefaultObjectEditor from \"./DefaultObjectEditor\";\r\nexport default DefaultObjectEditor;\r\n","import DefaultObjectEditor from \"./DefaultObjectEditor\";\r\n\r\nimport SaveRootEditor from \"./SaveRootEditor\";\r\nimport TemplateObjectEditor from \"./TemplateObjectEditor\";\r\nimport GameObjectGroupList from \"./GameObjectGroupList\";\r\nimport GameObjectList from \"./GameObjectList\";\r\n\r\nimport DefaultGameObjectEditor from \"./game-objects/DefaultGameObjectEditor\";\r\nimport MinionEditor from \"./game-objects/MinionEditor\";\r\n\r\nconst editors: Record<string, React.ComponentClass<any>> = {\r\n  \"save-root\": SaveRootEditor,\r\n  \"game-object-group-list\": GameObjectGroupList,\r\n  \"game-object-list\": GameObjectList,\r\n  \"template-object\": TemplateObjectEditor,\r\n  \"game-object-default\": DefaultGameObjectEditor,\r\n  \"game-object-minion\": MinionEditor\r\n};\r\n\r\nexport function getEditor(\r\n  editorType: string | null\r\n): React.ComponentClass<any> {\r\n  if (!editorType) {\r\n    return DefaultObjectEditor;\r\n  }\r\n\r\n  return editors[editorType] || DefaultObjectEditor;\r\n}\r\n","import styled, { Background, Intent, background, intentFill } from \"@/theme\";\r\n\r\nexport interface ResizeHandleVisualProps {\r\n  isResizing: boolean;\r\n}\r\nconst ResizeHandleVisual = styled<ResizeHandleVisualProps, \"div\">(\"div\")`\r\n  width: 4px;\r\n  height: 100%;\r\n  ${props =>\r\n    props.isResizing\r\n      ? intentFill.of(Intent.Primary)\r\n      : background.of(Background.Separator)};\r\n  flex: none;\r\n  cursor: ew-resize;\r\n\r\n  :hover {\r\n    ${intentFill.of(Intent.Primary)};\r\n  }\r\n`;\r\nexport default ResizeHandleVisual;\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { DraggableCore, DraggableData } from \"react-draggable\";\r\n\r\nimport ResizeHandleVisual from \"./ResizeHandleVisual\";\r\n\r\nexport interface ResizeHandleProps {\r\n  onResize(delta: number): void;\r\n}\r\n\r\ntype Props = ResizeHandleProps;\r\ninterface State {\r\n  isResizing: boolean;\r\n}\r\nclass ResizeHandle extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isResizing: false\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <DraggableCore\r\n        onStart={this._onStart}\r\n        onStop={this._onStop}\r\n        onDrag={this._onDrag}\r\n      >\r\n        <ResizeHandleVisual isResizing={this.state.isResizing} />\r\n      </DraggableCore>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onDrag(e: MouseEvent, d: DraggableData) {\r\n    const { onResize } = this.props;\r\n    onResize(d.deltaX);\r\n  }\r\n\r\n  @autobind()\r\n  private _onStart() {\r\n    this.setState({\r\n      isResizing: true\r\n    });\r\n  }\r\n\r\n  @autobind()\r\n  private _onStop() {\r\n    this.setState({\r\n      isResizing: false\r\n    });\r\n  }\r\n}\r\nexport default ResizeHandle;\r\n","import * as React from \"react\";\r\n\r\nimport { HeightProps, height } from \"styled-system\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Flex from \"@/components/Flex\";\r\n\r\nimport ResizeHandle from \"./components/ResizeHandle\";\r\nimport styled from \"@/theme\";\r\n\r\nexport interface ResizePanelProps extends HeightProps {\r\n  className?: string;\r\n  defaultWidth?: number;\r\n}\r\ninterface State {\r\n  width: number;\r\n}\r\ntype Props = ResizePanelProps;\r\nclass ResizePanel extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      width: props.defaultWidth || 300\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { className, children } = this.props;\r\n    const { width } = this.state;\r\n    // TODO: too many wrapping divs.\r\n    //  Provide a way to apply flex to an existing item.\r\n    return (\r\n      <Flex className={className} direction=\"row\">\r\n        <Flex.Item style={{ width }}>{children}</Flex.Item>\r\n        <Flex.Item>\r\n          <ResizeHandle onResize={this._onResize} />\r\n        </Flex.Item>\r\n      </Flex>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onResize(delta: number) {\r\n    this.setState(s => ({\r\n      width: s.width + delta\r\n    }));\r\n  }\r\n}\r\n\r\nexport default styled(ResizePanel)`\r\n  ${height};\r\n`;\r\n","import ResizePanel from \"./ResizePanel\";\r\nexport default ResizePanel;\r\n","import styled from \"@/theme\";\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst BreadcrumbContainer = styled.div`\r\n  margin-bottom: ${props => getTheme(props).space[1]}px;\r\n`;\r\nBreadcrumbContainer.displayName = \"BreadcrumbContainer\";\r\nexport default BreadcrumbContainer;\r\n","import { selectPath } from \"@/actions/select-path\";\r\n\r\nconst mapDispatchToProps = {\r\n  onClick: selectPath\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport styled from \"@/theme\";\r\n\r\nimport { LinkProps, link } from \"@/theme\";\r\n\r\nimport { SaveStructureLinkProps } from \"./props\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\ntype Props = SaveStructureLinkProps & DispatchProps;\r\nclass SaveStructureLink extends React.Component<Props> {\r\n  render() {\r\n    const { intent, children } = this.props;\r\n    return (\r\n      <Link intent={intent} onClick={this._onClick}>\r\n        {children}\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onClick() {\r\n    const { path, onClick } = this.props;\r\n    onClick(path);\r\n  }\r\n}\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(SaveStructureLink);\r\n\r\nconst Link = styled<LinkProps, \"span\">(\"span\")`\r\n  ${link};\r\n`;\r\n","import { createSelector } from \"reselect\";\r\n\r\nimport { getSaveItemBreadcrumb } from \"@/services/save-structure\";\r\n\r\nimport selectedPath from \"./selected-path\";\r\nimport oniSave from \"./oni-save\";\r\n\r\nconst selectedPathBreadcrumbSelector = createSelector(\r\n  selectedPath,\r\n  oniSave,\r\n  (selectedPath, oniSave) =>\r\n    oniSave ? getSaveItemBreadcrumb(selectedPath, oniSave) : []\r\n);\r\nexport default selectedPathBreadcrumbSelector;\r\n","import { createStructuredSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport breadcrumb from \"@/selectors/selected-path-breadcrumb\";\r\n\r\nconst structuredSelector = {\r\n  breadcrumb\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport SaveStructureLink from \"@/components/SaveStructureLink\";\r\n\r\nimport BreadcrumbContainer from \"./components/BreadcrumbContainer\";\r\n\r\ntype Props = StateProps;\r\nclass SelectedPathBreadcrumb extends React.Component<Props> {\r\n  render() {\r\n    const { breadcrumb } = this.props;\r\n    let links: React.ReactNode[] = [];\r\n    for (let i = 0; i < breadcrumb.length; i++) {\r\n      let isFinal = i + 1 === breadcrumb.length;\r\n      const x = breadcrumb[i];\r\n      const key = x.path.join(\".\");\r\n      links.push(\r\n        <SaveStructureLink\r\n          intent={isFinal ? Intent.Primary : Intent.Secondary}\r\n          key={key}\r\n          path={x.path}\r\n        >\r\n          {x.title}\r\n        </SaveStructureLink>\r\n      );\r\n      if (!isFinal) {\r\n        links.push(<Text key={`${key}:sep`}>{\" > \"}</Text>);\r\n      }\r\n    }\r\n    return <BreadcrumbContainer>{links}</BreadcrumbContainer>;\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(SelectedPathBreadcrumb);\r\n","import SelectedPathBreadcrumb from \"./SelectedPathBreadcrumb\";\r\nexport default SelectedPathBreadcrumb;\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { isObject } from \"lodash-es\";\r\n\r\nimport saveStructure from \"./root\";\r\nimport { SaveStructureDef } from \"./types\";\r\n\r\nexport function getSaveStructureDef(\r\n  saveGamePath: string[],\r\n  save: SaveGame\r\n): SaveStructureDef | null {\r\n  // TODO: Seems like there would be a builtin utility for this\r\n  const iter = walkSaveStructurePath(saveGamePath, save);\r\n  let result: IteratorResult<any>;\r\n  do {\r\n    result = iter.next();\r\n  } while (!result.done);\r\n  return result.value;\r\n}\r\n\r\n/**\r\n * Walks through a path of a save game, returning the save structure objects in order.\r\n * @param saveGamePath The path to walk the save structure tree to\r\n * @param saveGame The save game to walk.\r\n */\r\nexport function* walkSaveStructurePath(\r\n  saveGamePath: string[],\r\n  saveGame: SaveGame\r\n): IterableIterator<{ def: SaveStructureDef; path: string[] }> {\r\n  let structure: SaveStructureDef = saveStructure;\r\n  let value: any = saveGame;\r\n\r\n  yield {\r\n    def: saveStructure,\r\n    path: []\r\n  };\r\n\r\n  for (let i = 0; i < saveGamePath.length; i++) {\r\n    const key = saveGamePath[i];\r\n\r\n    let subStructure: SaveStructureDef | undefined;\r\n    if (isObject(structure)) {\r\n      subStructure =\r\n        Object.keys(structure).indexOf(key) !== -1\r\n          ? structure[key]\r\n          : structure[\"*\"];\r\n    }\r\n\r\n    if (!subStructure) {\r\n      return null;\r\n    }\r\n\r\n    // Pick the value before searching for variants.\r\n    value = value[key];\r\n\r\n    // Try to pick a variant if possible.\r\n    if (subStructure.$variants) {\r\n      const variant = subStructure.$variants.find(\r\n        x => !x.$match || x.$match(value)\r\n      );\r\n      if (variant) {\r\n        subStructure = {\r\n          ...subStructure,\r\n          ...variant\r\n        } as SaveStructureDef;\r\n      }\r\n    }\r\n\r\n    structure = subStructure;\r\n\r\n    yield {\r\n      def: structure,\r\n      path: saveGamePath.slice(0, i + 1)\r\n    };\r\n  }\r\n\r\n  return structure;\r\n}\r\n\r\n// export function getChildStructures(def: SaveStructureDef): SaveStructureDef[] {\r\n//   return Object.keys(def)\r\n//     .filter(x => x[0] !== \"$\")\r\n//     .map(x => def[x]) as SaveStructureDef[];\r\n// }\r\n","import { StorageBehavior, StoredGameObject } from \"oni-save-parser\";\r\n\r\nimport { forEach, isObject } from \"lodash-es\";\r\n\r\nimport { SaveStructureDef } from \"../../types\";\r\nimport { behaviorIs } from \"../../matchers\";\r\n\r\nimport { defaultBehavior } from \"./default\";\r\n\r\nconst storageBehaviorExtraData: SaveStructureDef<\r\n  StorageBehavior[\"extraData\"]\r\n> = {\r\n  $uiPathName: false,\r\n\r\n  $editor: \"game-object-list\",\r\n\r\n  \"*\": {\r\n    $editor: \"game-object-default\",\r\n    $uiPathName(obj: StoredGameObject, path: string[]) {\r\n      const index = path[path.length - 1];\r\n      return `${index}: ${obj.name}`;\r\n    },\r\n    $variants: []\r\n  }\r\n};\r\n// TODO: Recurse into behavior editors.\r\n//  Cannot do this currently because we are executing this file to build behaviors for initializing the createGameObjectVariants file.\r\n// storageBehaviorExtraData[\"*\"]!.$variants = createGameObjectVariants(null);\r\n\r\nexport const storageBehavior: SaveStructureDef<StorageBehavior> = {\r\n  ...(defaultBehavior as any),\r\n\r\n  $match: behaviorIs(StorageBehavior),\r\n\r\n  $uiChildren(behavior: StorageBehavior) {\r\n    const children: string[][] = [];\r\n    if (\r\n      behavior.templateData &&\r\n      Object.keys(behavior.templateData).length > 0\r\n    ) {\r\n      forEach(behavior.templateData, (_, key) => {\r\n        // Have to wipe the type here because lodash is being obstinate.\r\n        //  It explicitly calls out that key must be string because 'the type may have properties not defined in the type'.\r\n        //  Not sure why we have a type system if we aren't going to bother using it.\r\n        if (isObject((behavior.templateData as any)[key])) {\r\n          // As of the CU, all of these fields are value fields,\r\n          //  so this does not execute.\r\n          // Leaving it in for future-proofing.\r\n          children.push([\"templateData\", key]);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (behavior.extraData) {\r\n      // extraData is aray of gameObjects stored in this storage.\r\n      forEach(behavior.extraData, (_, key) => {\r\n        children.push([\"extraData\", `${key}`]);\r\n      });\r\n    }\r\n    return children.length > 0 ? children : false;\r\n  },\r\n\r\n  extraData: storageBehaviorExtraData\r\n};\r\n","import { PrimaryElementBehavior } from \"oni-save-parser\";\r\n\r\nimport { SaveStructureDef } from \"../../types\";\r\nimport { behaviorIs } from \"../../matchers\";\r\n\r\nimport { defaultBehavior } from \"./default\";\r\n\r\nexport const primaryElementBehavior: SaveStructureDef<\r\n  PrimaryElementBehavior\r\n> = {\r\n  ...defaultBehavior,\r\n  $match: behaviorIs(PrimaryElementBehavior)\r\n};\r\n","import { GameObjectBehavior } from \"oni-save-parser\";\r\n\r\nimport { SaveStructureDef } from \"../../../structure\";\r\n\r\nimport { defaultBehavior } from \"./default\";\r\nimport { primaryElementBehavior } from \"./primary-element\";\r\nimport { storageBehavior } from \"./storage\";\r\n\r\nconst behavior: SaveStructureDef<GameObjectBehavior> = {\r\n  $variants: [storageBehavior, primaryElementBehavior, defaultBehavior]\r\n};\r\nexport default behavior;\r\n","import {\r\n  GameObject,\r\n  MinionIdentityBehavior,\r\n  getBehavior\r\n} from \"oni-save-parser\";\r\n\r\nimport { SaveStructureDef } from \"../../types\";\r\n\r\nimport { defaultGameObject } from \"./default\";\r\n\r\nconst minionGameObject: SaveStructureDef<GameObject> = {\r\n  ...defaultGameObject,\r\n\r\n  $editor: \"game-object-minion\",\r\n\r\n  $uiPathName: (obj: GameObject) => {\r\n    const identityBehavior = getBehavior(obj, MinionIdentityBehavior);\r\n    const name =\r\n      (identityBehavior &&\r\n        identityBehavior.templateData &&\r\n        identityBehavior.templateData.name) ||\r\n      \"[malformed]\";\r\n    return name;\r\n  }\r\n};\r\n\r\nexport const gameObjectName = \"Minion\";\r\nexport const gameObjectStructure = minionGameObject;\r\n\r\nexport default minionGameObject;\r\n","import { set } from \"lodash-es\";\r\n\r\nimport { gameObjectIs } from \"../../matchers\";\r\nimport { SaveStructureDef } from \"../../types\";\r\n\r\nimport * as minion from \"./minion\";\r\n\r\nimport { defaultGameObject } from \"./default\";\r\n\r\nconst gameObjectVariantInfo = [minion];\r\n\r\nexport function createGameObjectVariants(\r\n  gameObjectPath: string[] | null\r\n): SaveStructureDef<{}>[] {\r\n  const defaultVariant: SaveStructureDef<{}> = {\r\n    $advanced: true\r\n  };\r\n  setStructure(defaultVariant, gameObjectPath, defaultGameObject);\r\n\r\n  const variants = gameObjectVariantInfo.map(info => {\r\n    const rootVariant: SaveStructureDef<{}> = {\r\n      $match: gameObjectIs(info.gameObjectName)\r\n    };\r\n    setStructure(rootVariant, gameObjectPath, info.gameObjectStructure);\r\n    return rootVariant;\r\n  });\r\n\r\n  // Add default as last item\r\n  variants.push(defaultVariant);\r\n  return variants;\r\n}\r\n\r\nfunction setStructure(\r\n  obj: any,\r\n  path: string[] | null,\r\n  structure: SaveStructureDef\r\n) {\r\n  if (path && path.length > 0) {\r\n    // Collapse the intermediate paths.\r\n    for (let i = 1; i < path.length; i++) {\r\n      set(obj, [...path.slice(0, i), \"$uiPathName\"], false);\r\n    }\r\n    set(obj, path, structure);\r\n  } else {\r\n    // Use a one-value rootVariant to ensure we get a reference,\r\n    //  to mantain recursive support.\r\n    obj.$variants = [structure];\r\n  }\r\n}\r\n","import { GameObjectGroup, SaveGame } from \"oni-save-parser\";\r\n\r\nimport { SaveStructureDef } from \"../types\";\r\n\r\nimport { createGameObjectVariants } from \"./gameObjectTypes\";\r\n\r\nconst gameObjectGroupsStructure: SaveStructureDef<GameObjectGroup> = {\r\n  $uiPathName(group: GameObjectGroup) {\r\n    return group.name;\r\n  },\r\n\r\n  $uiChildren(group: GameObjectGroup) {\r\n    return group.gameObjects.map((_, i) => [\"gameObjects\", `${i}`]);\r\n  },\r\n\r\n  $editor: \"game-object-list\",\r\n\r\n  // We want to handle each game object type uniquely,\r\n  //  but their uniqueness is keyed off the name of this group.\r\n  // To handle this, we provide variants that match off the group's name.\r\n  $variants: createGameObjectVariants([\"gameObjects\", \"*\"])\r\n};\r\n\r\nconst gameObjectsStructure: SaveStructureDef<SaveGame[\"gameObjects\"]> = {\r\n  $editor: \"game-object-group-list\",\r\n\r\n  // gameObjects is an array, so we use the fallback key to\r\n  //  handle all items.\r\n  \"*\": gameObjectGroupsStructure\r\n};\r\nexport default gameObjectsStructure;\r\n","export * from \"./root\";\r\nexport * from \"./types\";\r\nexport * from \"./utils\";\r\n\r\nimport saveStructure from \"./root\";\r\nexport default saveStructure;\r\n","import {\r\n  SaveGame,\r\n  GameObjectBehavior,\r\n  GameObject,\r\n  GameObjectGroup\r\n} from \"oni-save-parser\";\r\n\r\nimport { get, isObject } from \"lodash-es\";\r\n\r\nimport { EditMode, SaveItemBreadcrumb } from \"./types\";\r\n\r\nimport {\r\n  SaveStructureDef,\r\n  getSaveStructureDef,\r\n  walkSaveStructurePath\r\n} from \"./structure\";\r\n\r\nconst GAME_OBJECT_GROUP_PATH_ROOT = [\"gameObjects\", \"*\"];\r\nexport function getPathGameObjectGroup(\r\n  path: string[],\r\n  saveGame: SaveGame\r\n): GameObjectGroup | null {\r\n  if (path.length < GAME_OBJECT_GROUP_PATH_ROOT.length) {\r\n    return null;\r\n  }\r\n\r\n  path = path.slice(0, GAME_OBJECT_GROUP_PATH_ROOT.length);\r\n\r\n  if (\r\n    !path.every((x, i) => comparePathMatch(x, i, GAME_OBJECT_GROUP_PATH_ROOT))\r\n  ) {\r\n    return null;\r\n  }\r\n\r\n  return get(saveGame, path);\r\n}\r\n\r\nconst GAME_OBJECT_PATH_ROOT = [\"gameObjects\", \"*\", \"gameObject\", \"*\"];\r\nexport function getPathGameObject(\r\n  path: string[],\r\n  saveGame: SaveGame\r\n): GameObject | null {\r\n  if (path.length < GAME_OBJECT_PATH_ROOT.length) {\r\n    return null;\r\n  }\r\n\r\n  path = path.slice(0, GAME_OBJECT_PATH_ROOT.length);\r\n\r\n  if (!path.every((x, i) => comparePathMatch(x, i, GAME_OBJECT_PATH_ROOT))) {\r\n    return null;\r\n  }\r\n\r\n  return get(saveGame, path);\r\n}\r\n\r\nconst GAME_OBJECT_BEHAVIOR_PATH_ROOT = [\r\n  \"gameObjects\",\r\n  \"*\",\r\n  \"gameObject\",\r\n  \"*\",\r\n  \"behaviors\",\r\n  \"*\"\r\n];\r\nexport function getPathBehavior(\r\n  path: string[],\r\n  saveGame: SaveGame\r\n): GameObjectBehavior | null {\r\n  if (path.length < GAME_OBJECT_BEHAVIOR_PATH_ROOT.length) {\r\n    return null;\r\n  }\r\n\r\n  path = path.slice(0, GAME_OBJECT_BEHAVIOR_PATH_ROOT.length);\r\n\r\n  if (\r\n    !path.every((x, i) =>\r\n      comparePathMatch(x, i, GAME_OBJECT_BEHAVIOR_PATH_ROOT)\r\n    )\r\n  ) {\r\n    return null;\r\n  }\r\n\r\n  return get(saveGame, path);\r\n}\r\n\r\nfunction comparePathMatch(part: string, index: number, match: string[]) {\r\n  if (match[index] === \"*\") return true;\r\n  if (part === match[index]) return true;\r\n  return false;\r\n}\r\n\r\nexport function getSaveItemTitle(path: string[], saveGame: SaveGame): string {\r\n  const def = getSaveStructureDef(path, saveGame);\r\n  let nameSource: string | false | undefined;\r\n  if (def) {\r\n    const nameProducer = def.$uiPathName;\r\n    if (typeof nameProducer === \"function\") {\r\n      const value = path.length > 0 ? get(saveGame, path) : saveGame;\r\n      nameSource = nameProducer(value, path, saveGame);\r\n    } else if (typeof nameProducer === \"string\") {\r\n      nameSource = nameProducer;\r\n    }\r\n  }\r\n\r\n  // TODO: Object might opt out of a path entry with uiPathName: false\r\n  //  What do we do in this case?\r\n  //  For now, we just return the absolute path.\r\n  return nameSource || path[path.length - 1];\r\n}\r\n\r\nexport function getSaveItemBreadcrumb(\r\n  path: string[],\r\n  saveGame: SaveGame\r\n): SaveItemBreadcrumb[] {\r\n  const breadcrumbs: SaveItemBreadcrumb[] = [];\r\n  for (const structurePath of walkSaveStructurePath(path, saveGame)) {\r\n    const { def, path: defPath } = structurePath;\r\n    let title: string | false = false;\r\n    const nameProducer = def.$uiPathName;\r\n    if (typeof nameProducer === \"function\") {\r\n      const value = defPath.length > 0 ? get(saveGame, defPath) : saveGame;\r\n      title = nameProducer(value, defPath, saveGame) || false;\r\n    } else if (typeof nameProducer === \"string\") {\r\n      title = nameProducer;\r\n    } else if (nameProducer === false) {\r\n      // Opting out of a path entry.\r\n      continue;\r\n    } else {\r\n      title = defPath[defPath.length - 1];\r\n    }\r\n\r\n    if (title) {\r\n      breadcrumbs.push({\r\n        title,\r\n        path: defPath\r\n      });\r\n    }\r\n  }\r\n\r\n  return breadcrumbs;\r\n}\r\n\r\nexport function getSaveItemEditValue(path: string[], saveGame: SaveGame) {\r\n  return path.length > 0 ? get(saveGame, path) : saveGame;\r\n}\r\n\r\nexport function getSaveItemChildPaths(\r\n  path: string[],\r\n  saveGame: SaveGame,\r\n  editMode: EditMode\r\n): string[][] {\r\n  const def = getSaveStructureDef(path, saveGame);\r\n  const childPaths = collectChildPaths(path, saveGame, def, editMode);\r\n  return childPaths;\r\n}\r\n\r\nexport function getSaveItemEditor(\r\n  path: string[],\r\n  saveGame: SaveGame\r\n): string | null {\r\n  const def = getSaveStructureDef(path, saveGame);\r\n  return (def && def.$editor) || null;\r\n}\r\n\r\nexport function getSaveItemEditorProps(\r\n  path: string[],\r\n  saveGame: SaveGame\r\n): Record<string, any> {\r\n  const def = getSaveStructureDef(path, saveGame);\r\n  if (!def || !def.$editor) {\r\n    return {};\r\n  }\r\n\r\n  const propFactory = def.$editorProps;\r\n  if (!propFactory) {\r\n    return {};\r\n  }\r\n\r\n  const value = path.length > 0 ? get(saveGame, path) : saveGame;\r\n  return propFactory(value, path, saveGame);\r\n}\r\n\r\n/**\r\n * Determine the child values for the given value.\r\n * @param saveGamePath The path to the value whose children to determine\r\n * @param oniSave The oni save game structure\r\n * @param def The definition of the value whose children to determine\r\n * @param editMode The current edit mode.\r\n * @returns A collection of absolute save game paths for the child values of this value.\r\n */\r\nfunction collectChildPaths(\r\n  saveGamePath: string[],\r\n  oniSave: SaveGame,\r\n  def: SaveStructureDef | null,\r\n  editMode: EditMode\r\n): string[][] {\r\n  let uiChildren = def ? def.$uiChildren : null;\r\n\r\n  const value = saveGamePath.length > 0 ? get(oniSave, saveGamePath) : oniSave;\r\n\r\n  if (typeof uiChildren === \"function\") {\r\n    uiChildren = uiChildren(value);\r\n  }\r\n\r\n  if (uiChildren === false) {\r\n    // Explicitly no children.\r\n    return [];\r\n  }\r\n\r\n  if (uiChildren == null && def) {\r\n    // TODO: Not sure if this is a good idea, trying it out.\r\n    // Explicit structure children are candidates for children.\r\n\r\n    // Only process def if it is not advanced, or we are in advanced mode.\r\n    // Determine the save structure keys we can work off of.\r\n    const defKeys: string[] = Object.keys(def).filter(x => x[0] !== \"$\");\r\n    if (defKeys.indexOf(\"*\") !== -1) {\r\n      // Def knows about all child keys.  Probably an array or map.\r\n      uiChildren = Object.keys(value).map(x => [x]);\r\n    } else if (defKeys.length > 0) {\r\n      // We have known child keys, offer them up.\r\n      uiChildren = defKeys.map(x => [x]);\r\n    }\r\n  }\r\n\r\n  // Failed to find any children, attempt to auto-determine them.\r\n  if (uiChildren == null) {\r\n    uiChildren = collectAutoChildPaths(saveGamePath, oniSave, editMode);\r\n  }\r\n\r\n  // Make the path absolute\r\n  uiChildren = uiChildren ? uiChildren.map(x => [...saveGamePath, ...x]) : [];\r\n\r\n  if (uiChildren) {\r\n    // Check for editMode visibility.\r\n    uiChildren = uiChildren.filter(path => {\r\n      const childValue = get(oniSave, path);\r\n      const childDef = getSaveStructureDef(path, oniSave);\r\n      return checkEditMode(childValue, childDef, editMode);\r\n    });\r\n  }\r\n\r\n  return uiChildren;\r\n}\r\n\r\nfunction checkEditMode(\r\n  value: any,\r\n  def: SaveStructureDef | null,\r\n  editMode: EditMode\r\n): boolean {\r\n  if (editMode === \"advanced\") {\r\n    return true;\r\n  }\r\n\r\n  // Unknown objects are implicitly advanced.\r\n  let advancedProducer = def ? def.$advanced : true;\r\n  let advanced: boolean;\r\n  if (typeof advancedProducer === \"boolean\") {\r\n    advanced = advancedProducer;\r\n  } else if (typeof advancedProducer === \"function\") {\r\n    advanced = advancedProducer(value);\r\n  } else {\r\n    advanced = false;\r\n  }\r\n\r\n  return !advanced;\r\n}\r\n\r\nfunction collectAutoChildPaths(\r\n  saveGamePath: string[],\r\n  oniSave: SaveGame,\r\n  editMode: EditMode\r\n): string[][] {\r\n  if (editMode !== \"advanced\") {\r\n    // Do not auto-determine anything when not in advanced mode.\r\n    return [];\r\n  }\r\n\r\n  const value = saveGamePath.length > 0 ? get(oniSave, saveGamePath) : oniSave;\r\n  let uiChildren: string[][] | null = null;\r\n  if (isObject(value)) {\r\n    // Target is an object, offer up all child objects.\r\n    uiChildren = Object.keys(value)\r\n      .filter(x => isImplicitChild(value[x]))\r\n      .map(x => [x]);\r\n  } else if (Array.isArray(value)) {\r\n    // Target is an array, offer up all array items.\r\n    uiChildren = value.filter(isImplicitChild).map((_, i) => [`${i}`]);\r\n  }\r\n\r\n  return uiChildren || [];\r\n}\r\n\r\nfunction isImplicitChild(value: any): boolean {\r\n  return isObject(value);\r\n}\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport {\r\n  getSaveItemEditor,\r\n  getSaveItemEditorProps\r\n} from \"@/services/save-structure\";\r\n\r\nimport oniSave from \"@/selectors/oni-save\";\r\nimport selectedPath from \"@/selectors/selected-path\";\r\n\r\nconst stateSelectors = {\r\n  editorType: createSelector(\r\n    oniSave,\r\n    selectedPath,\r\n    (oniSave, selectedPath) =>\r\n      (oniSave && getSaveItemEditor(selectedPath, oniSave)) || null\r\n  ),\r\n  editorProps: createSelector(\r\n    oniSave,\r\n    selectedPath,\r\n    (oniSave, selectedPath) =>\r\n      oniSave && getSaveItemEditorProps(selectedPath, oniSave)\r\n  )\r\n};\r\nexport type StateProps = StructuredStateProps<typeof stateSelectors>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  stateSelectors\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport SelectedPathBreadcrumb from \"@/components/SelectedPathBreadcrumb\";\r\nimport ResizePanel from \"@/components/ResizePanel\";\r\n\r\nimport { getEditor } from \"./components/editors\";\r\n\r\nimport SaveEditorContainer from \"./components/SaveEditorContainer\";\r\nimport ContentContainer from \"./components/ContentContainer\";\r\nimport EditorContainer from \"./components/EditorContainer\";\r\n\r\nimport Sidebar from \"./components/Sidebar\";\r\nimport Separator from \"@/components/Separator\";\r\n\r\ntype Props = StateProps;\r\nclass SaveEditor extends React.Component<Props> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      selectedPath: null\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { editorType, editorProps } = this.props;\r\n\r\n    const ObjectEditor = getEditor(editorType);\r\n\r\n    return (\r\n      <SaveEditorContainer>\r\n        <ResizePanel>\r\n          <Sidebar />\r\n        </ResizePanel>\r\n        <ContentContainer>\r\n          <SelectedPathBreadcrumb />\r\n          <Separator width=\"100%\" />\r\n          <EditorContainer>\r\n            <ObjectEditor {...editorProps} />\r\n          </EditorContainer>\r\n        </ContentContainer>\r\n      </SaveEditorContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(SaveEditor);\r\n","import SaveEditor from \"./SaveEditor\";\r\nexport default SaveEditor;\r\n","import * as React from \"react\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\n\r\nconst Saving: React.SFC = () => <Text intent={Intent.Primary}>Saving</Text>;\r\nSaving.displayName = \"Saving\";\r\nexport default Saving;\r\n","import Saving from \"./Saving\";\r\nexport default Saving;\r\n","import * as React from \"react\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\n\r\nconst Loading: React.SFC = () => <Text intent={Intent.Primary}>Loading</Text>;\r\nLoading.displayName = \"Loading\";\r\nexport default Loading;\r\n","import Loading from \"./Loading\";\r\nexport default Loading;\r\n","import * as React from \"react\";\r\n\r\nimport Flex from \"@/components/Flex\";\r\nimport Button from \"@/components/Button\";\r\nimport Text from \"@/components/Text\";\r\nimport { Intent } from \"@/theme\";\r\n\r\nexport interface ErrorProps {\r\n  error: Error;\r\n  onDismiss(): void;\r\n}\r\n\r\nconst Error: React.SFC<ErrorProps> = ({ error, onDismiss }) => (\r\n  <Flex direction=\"column\" width=\"100%\" height=\"100%\">\r\n    <Flex.Item grow>\r\n      <Text intent={Intent.Dangerous}>\r\n        <h2>Error</h2>\r\n        <code>{error.stack || error.message || String(error)}</code>\r\n      </Text>\r\n    </Flex.Item>\r\n    <Flex.Item>\r\n      <Button intent={Intent.Primary} onClick={onDismiss}>\r\n        Close\r\n      </Button>\r\n    </Flex.Item>\r\n  </Flex>\r\n);\r\nError.displayName = \"Error\";\r\nexport default Error;\r\n","import Error from \"./Error\";\r\nexport default Error;\r\n","import * as React from \"react\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\n\r\nconst NoSave: React.SFC = () => (\r\n  <Text intent={Intent.Hint}>\r\n    Load a save using the controls on the upper left.\r\n  </Text>\r\n);\r\nNoSave.displayName = \"NoSave\";\r\nexport default NoSave;\r\n","import NoSave from \"./NoSave\";\r\nexport default NoSave;\r\n","import { dismissError } from \"@/actions/dismiss-error\";\r\n\r\nconst mapDispatchToProps = {\r\n  onDismissError: dismissError\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import { AppState } from \"@/state\";\r\n\r\nconst loadingStateSelector = (state: AppState) => state.loadingState;\r\nexport default loadingStateSelector;\r\n","import { AppState } from \"@/state\";\r\n\r\nconst errorSelector = (state: AppState) => state.error;\r\nexport default errorSelector;\r\n","import { createStructuredSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport error from \"@/selectors/error\";\r\nimport loadingState from \"@/selectors/loading-state\";\r\n\r\nconst stateSelectors = {\r\n  loadingState,\r\n  error\r\n};\r\nexport type StateProps = StructuredStateProps<typeof stateSelectors>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  stateSelectors\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\nimport NoSave from \"@/pages/NoSave\";\r\nimport Error from \"@/pages/Error\";\r\nimport Loading from \"@/pages/Loading\";\r\nimport Saving from \"@/pages/Saving\";\r\nimport SaveEditor from \"@/pages/SaveEditor\";\r\n\r\nimport AppContainer from \"./components/AppContainer\";\r\nimport AppContent from \"./components/AppContent\";\r\nimport NavBarContainer from \"./components/NavBar\";\r\n\r\ntype Props = StateProps & DispatchProps;\r\nclass App extends React.Component<Props> {\r\n  render() {\r\n    const { error, loadingState, onDismissError } = this.props;\r\n\r\n    let element: JSX.Element;\r\n\r\n    if (error) {\r\n      element = <Error error={error} onDismiss={onDismissError} />;\r\n    } else {\r\n      switch (loadingState) {\r\n        case \"idle\":\r\n          element = <NoSave />;\r\n          break;\r\n        case \"loading\":\r\n          element = <Loading />;\r\n          break;\r\n        case \"saving\":\r\n          element = <Saving />;\r\n          break;\r\n        case \"ready\":\r\n          element = <SaveEditor />;\r\n          break;\r\n        default:\r\n          element = <div>???</div>;\r\n          break;\r\n      }\r\n    }\r\n\r\n    return (\r\n      <AppContainer>\r\n        <NavBarContainer />\r\n        <AppContent>{element}</AppContent>\r\n      </AppContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(App);\r\n","import App from \"./App\";\r\nexport default App;\r\n","import { AnyAction } from \"redux\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { ACTION_RECEIVE_ONISAVE_SUCCESS } from \"@/actions/receive-onisave\";\r\nimport { AppState } from \"@/state\";\r\n\r\nexport function actionSanitizer(action: AnyAction): AnyAction {\r\n  if (action.type === ACTION_RECEIVE_ONISAVE_SUCCESS) {\r\n    return {\r\n      ...action,\r\n      payload: sanitizeSave(action.payload)\r\n    };\r\n  }\r\n  return action;\r\n}\r\n\r\nexport function stateSanitizer(state: AppState): any {\r\n  return {\r\n    ...state,\r\n    oniSave: state.oniSave ? sanitizeSave(state.oniSave) : null\r\n  };\r\n}\r\n\r\nfunction sanitizeSave(save: SaveGame): any {\r\n  return {\r\n    ...save,\r\n    world: {\r\n      ...save.world,\r\n      streamed: \"~snip~\"\r\n    }\r\n  };\r\n}\r\n","import { call, put, select, takeEvery } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { writeSaveGame } from \"@/services/save-serializer/sagas\";\r\n\r\nimport { saveAs } from \"file-saver\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_SAVE,\r\n  SaveOniSaveAction\r\n} from \"../actions/save-onisave\";\r\n\r\nimport {\r\n  receiveOniSaveBegin,\r\n  receiveOniSaveError,\r\n  receiveOniSaveSuccess\r\n} from \"../actions/receive-onisave\";\r\n\r\nimport oniSaveSelector from \"../selectors/oni-save\";\r\n\r\nexport default function* saveEditorSaga() {\r\n  yield takeEvery(ACTION_ONISAVE_SAVE, handleOniSaveLoad);\r\n}\r\n\r\nfunction* handleOniSaveLoad(action: SaveOniSaveAction) {\r\n  const saveName = action.payload;\r\n\r\n  const save: SaveGame | null = yield select(oniSaveSelector);\r\n  if (!save) {\r\n    return;\r\n  }\r\n\r\n  yield put(receiveOniSaveBegin(\"saving\"));\r\n  let blob: Blob;\r\n  try {\r\n    blob = yield call(writeSaveGame, save);\r\n  } catch (error) {\r\n    yield put(receiveOniSaveError(error));\r\n    return;\r\n  }\r\n\r\n  saveAs(blob, saveName);\r\n\r\n  yield put(receiveOniSaveSuccess(save));\r\n}\r\n","import { call } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { writeSave } from \"../worker-instance\";\r\n\r\nexport function* writeSaveGame(saveGame: SaveGame) {\r\n  const data: ArrayBuffer = yield call(writeSave, saveGame);\r\n  const blob = new Blob([data]);\r\n  return blob;\r\n}\r\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"9ed25550b7b8216b8799.worker.js\");\n};","import { SaveGame } from \"oni-save-parser\";\r\n\r\nconst COMMAND_PARSE_SAVE = \"parse-save\";\r\nexport const parseSave = (data: ArrayBuffer) => ({\r\n  type: COMMAND_PARSE_SAVE as typeof COMMAND_PARSE_SAVE,\r\n  data\r\n});\r\nexport type ParseSaveCommand = ReturnType<typeof parseSave>;\r\n\r\nconst RESULT_SAVE_SUCCESS = \"parse-save:success\";\r\nexport const parseSaveSuccess = (saveGame: SaveGame) => ({\r\n  type: RESULT_SAVE_SUCCESS as typeof RESULT_SAVE_SUCCESS,\r\n  saveGame\r\n});\r\nexport type ParseSaveSuccessResult = ReturnType<typeof parseSaveSuccess>;\r\n\r\nconst RESULT_SAVE_ERROR = \"parse-save:error\";\r\nexport const parseSaveError = (error: Error) => ({\r\n  type: RESULT_SAVE_ERROR as typeof RESULT_SAVE_ERROR,\r\n  error: errorToJson(error)\r\n});\r\nexport type ParseSaveErrorResult = ReturnType<typeof parseSaveError>;\r\n\r\nexport type ParseSaveResult = ParseSaveSuccessResult | ParseSaveErrorResult;\r\n\r\nconst COMMAND_WRITE_SAVE = \"write-save\";\r\nexport const writeSave = (saveGame: SaveGame) => ({\r\n  type: COMMAND_WRITE_SAVE as typeof COMMAND_WRITE_SAVE,\r\n  saveGame\r\n});\r\nexport type WriteSaveCommand = ReturnType<typeof writeSave>;\r\n\r\nconst RESULT_WRITE_SUCCESS = \"write-save:success\";\r\nexport const writeSaveSuccess = (data: ArrayBuffer) => ({\r\n  type: RESULT_WRITE_SUCCESS as typeof RESULT_WRITE_SUCCESS,\r\n  data\r\n});\r\nexport type WriteSaveSuccessResult = ReturnType<typeof writeSaveSuccess>;\r\n\r\nconst RESULT_WRITE_ERROR = \"write-save:error\";\r\nexport const writeSaveError = (error: Error) => ({\r\n  type: RESULT_WRITE_ERROR as typeof RESULT_WRITE_ERROR,\r\n  error: errorToJson(error)\r\n});\r\nexport type WriteSaveErrorResult = ReturnType<typeof writeSaveError>;\r\n\r\nexport type WriteSaveResult = WriteSaveSuccessResult | WriteSaveErrorResult;\r\n\r\nexport type SaveEditorCommand = ParseSaveCommand | WriteSaveCommand;\r\nexport type SaveEditorResult = ParseSaveResult | WriteSaveResult;\r\n\r\nexport interface SaveEditorCommandEvent extends MessageEvent {\r\n  data: SaveEditorCommand;\r\n}\r\n\r\nexport interface SaveEditorResultEvent extends MessageEvent {\r\n  data: SaveEditorResult;\r\n}\r\n\r\nexport interface ErrorJson {\r\n  name: string;\r\n  message: string;\r\n  stack?: string;\r\n}\r\nexport function errorToJson(e: Error): ErrorJson {\r\n  return {\r\n    name: e.name,\r\n    message: e.message,\r\n    stack: e.stack\r\n  };\r\n}\r\nexport function jsonToError(obj: ErrorJson): Error {\r\n  const e = new Error(obj.message);\r\n  e.name = obj.name;\r\n  e.stack = obj.stack;\r\n  return e;\r\n}\r\n","import { call } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { parseSave } from \"../worker-instance\";\r\n\r\nexport function* readSaveGame(file: File) {\r\n  const data: ArrayBuffer = yield call(readFile, file);\r\n  const saveGame: SaveGame = yield call(parseSave, data);\r\n  return saveGame;\r\n}\r\n\r\nfunction readFile(file: File): Promise<ArrayBuffer> {\r\n  const reader = new FileReader();\r\n  return new Promise<ArrayBuffer>((accept, reject) => {\r\n    reader.onload = () => {\r\n      accept(reader.result);\r\n    };\r\n    reader.onerror = () => {\r\n      reject(reader.error);\r\n    };\r\n    reader.readAsArrayBuffer(file);\r\n  });\r\n}\r\n","import { call, put, takeEvery } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { readSaveGame } from \"@/services/save-serializer/sagas\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_LOAD,\r\n  LoadOniSaveAction\r\n} from \"../actions/load-onisave\";\r\n\r\nimport {\r\n  receiveOniSaveBegin,\r\n  receiveOniSaveError,\r\n  receiveOniSaveSuccess\r\n} from \"../actions/receive-onisave\";\r\n\r\nexport default function* saveEditorSaga() {\r\n  yield takeEvery(ACTION_ONISAVE_LOAD, handleOniSaveLoad);\r\n}\r\n\r\nfunction* handleOniSaveLoad(action: LoadOniSaveAction) {\r\n  const file = action.payload;\r\n\r\n  yield put(receiveOniSaveBegin(\"loading\", true));\r\n  let save: SaveGame;\r\n  try {\r\n    save = yield call(readSaveGame, file);\r\n  } catch (error) {\r\n    yield put(receiveOniSaveError(error));\r\n    return;\r\n  }\r\n  yield put(receiveOniSaveSuccess(save));\r\n}\r\n","import { fork } from \"redux-saga/effects\";\r\n\r\nimport loadOniSaveSaga from \"./load-onisave\";\r\nimport saveOniSaveSaga from \"./save-onisave\";\r\n\r\nexport default function* saga() {\r\n  yield fork(loadOniSaveSaga);\r\n  yield fork(saveOniSaveSaga);\r\n}\r\n","import { ACTION_SET_EDITMODE, SetEditModeAction } from \"@/actions/set-editmode\";\r\nimport { AppState, defaultAppState } from \"@/state\";\r\n\r\nexport default function setEditMode(\r\n  state: AppState = defaultAppState,\r\n  action: SetEditModeAction\r\n): AppState {\r\n  if (action.type !== ACTION_SET_EDITMODE) {\r\n    return state;\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    editMode: action.payload\r\n  };\r\n}\r\n","import produce from \"immer\";\r\n\r\nimport { get } from \"lodash-es\";\r\n\r\nimport {\r\n  GameObject,\r\n  AccessorizerBehavior,\r\n  Accessory,\r\n  getIndexOfAccessoryType,\r\n  getBehavior,\r\n  getAccessoryType\r\n} from \"oni-save-parser\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport {\r\n  ACTION_SET_ACCESSORY,\r\n  SetAccessoryAction\r\n} from \"@/actions/set-accessory\";\r\n\r\nexport default function setAccessoryReducer(\r\n  state: AppState,\r\n  action: SetAccessoryAction\r\n): AppState {\r\n  if (action.type !== ACTION_SET_ACCESSORY) {\r\n    return state;\r\n  }\r\n\r\n  return produce(state, state => {\r\n    const { loadingState, oniSave } = state;\r\n    if (loadingState !== \"ready\" || !oniSave) {\r\n      return;\r\n    }\r\n\r\n    const { gameObjectPath, type, name } = action.payload;\r\n\r\n    const gameObject: GameObject = get(oniSave, gameObjectPath);\r\n    if (!gameObject) {\r\n      return;\r\n    }\r\n\r\n    const behavior = getBehavior(gameObject, AccessorizerBehavior);\r\n    if (!behavior) {\r\n      return;\r\n    }\r\n    const { accessories } = behavior.templateData;\r\n\r\n    const accessoryIndex = getIndexOfAccessoryType(accessories, type);\r\n\r\n    if (name === null) {\r\n      // Remove\r\n      accessories.splice(accessoryIndex, 1);\r\n      return;\r\n    }\r\n\r\n    const newAccessory = Accessory(name);\r\n\r\n    if (accessoryIndex === -1) {\r\n      // Add\r\n      accessories.push(newAccessory);\r\n    } else {\r\n      // Replace\r\n      accessories[accessoryIndex] = newAccessory;\r\n    }\r\n  });\r\n}\r\n","import { ACTION_SELECT_PATH, SelectPathAction } from \"@/actions/select-path\";\r\nimport { AppState, defaultAppState } from \"@/state\";\r\n\r\nexport default function selectPathReducer(\r\n  state: AppState = defaultAppState,\r\n  action: SelectPathAction\r\n): AppState {\r\n  if (action.type !== ACTION_SELECT_PATH) {\r\n    return state;\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    selectedPath: action.payload\r\n  };\r\n}\r\n","import {\r\n  ReceiveOniSaveAction,\r\n  ACTION_RECEIVE_ONISAVE_BEGIN,\r\n  ACTION_RECEIVE_ONISAVE_ERROR,\r\n  ACTION_RECEIVE_ONISAVE_SUCCESS\r\n} from \"../actions/receive-onisave\";\r\nimport { AppState, defaultAppState } from \"@/state\";\r\n\r\nexport default function receiveOniSaveReducer(\r\n  state: AppState = defaultAppState,\r\n  action: ReceiveOniSaveAction\r\n): AppState {\r\n  switch (action.type) {\r\n    case ACTION_RECEIVE_ONISAVE_BEGIN:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        loadingState: action.payload.operation,\r\n        oniSave: action.payload.clearExisting ? null : state.oniSave\r\n      };\r\n    case ACTION_RECEIVE_ONISAVE_ERROR:\r\n      state = {\r\n        ...state,\r\n        loadingState: \"idle\",\r\n        error: action.payload\r\n      };\r\n      break;\r\n    case ACTION_RECEIVE_ONISAVE_SUCCESS:\r\n      state = {\r\n        ...state,\r\n        loadingState: \"ready\",\r\n        error: null,\r\n        oniSave: action.payload\r\n      };\r\n  }\r\n\r\n  return state;\r\n}\r\n","import produce from \"immer\";\r\n\r\nimport { set } from \"lodash-es\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_MODIFY,\r\n  ModifyOniSaveAction\r\n} from \"../actions/modify-onisave\";\r\n\r\nexport default function modifyOniSaveReducer(\r\n  state: AppState,\r\n  action: ModifyOniSaveAction\r\n): AppState {\r\n  if (action.type !== ACTION_ONISAVE_MODIFY) {\r\n    return state;\r\n  }\r\n\r\n  const { loadingState, oniSave } = state;\r\n  if (loadingState !== \"ready\" || !oniSave) {\r\n    return state;\r\n  }\r\n\r\n  const { path, value } = action.payload;\r\n\r\n  return produce(state, draft => {\r\n    set(draft.oniSave!, path, value);\r\n  });\r\n}\r\n","import { AppState, defaultAppState } from \"@/state\";\r\n\r\nimport {\r\n  ACTION_DISMISS_ERROR,\r\n  DismissErrorAction\r\n} from \"@/actions/dismiss-error\";\r\n\r\nexport default function dismissErrorReducer(\r\n  state: AppState = defaultAppState,\r\n  action: DismissErrorAction\r\n): AppState {\r\n  if (action.type !== ACTION_DISMISS_ERROR) {\r\n    return state;\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    error: null\r\n  };\r\n}\r\n","import reduceReducers from \"reduce-reducers\";\r\n\r\nimport dismissErrorReducer from \"./dismiss-error\";\r\nimport modifyOniSave from \"./modify-onisave\";\r\nimport receiveOniSaveReducer from \"./receive-onisave\";\r\nimport selectPathReducer from \"./select-path\";\r\nimport setAccessoryReducer from \"./set-accessory\";\r\nimport setEditModeReducer from \"./set-editmode\";\r\n\r\nconst reducers = [\r\n  dismissErrorReducer,\r\n  modifyOniSave,\r\n  receiveOniSaveReducer,\r\n  selectPathReducer,\r\n  setAccessoryReducer,\r\n  setEditModeReducer\r\n];\r\n\r\n// @ts-ignore: We need to tell the reducers thay may receive a non-matching item.\r\n//  I have not been able to craft a type that describes this though.\r\nexport default reduceReducers(...reducers);\r\n","import {\r\n  compose,\r\n  createStore as createReduxStore,\r\n  applyMiddleware\r\n} from \"redux\";\r\n\r\nimport createSagaMiddleware from \"redux-saga\";\r\n\r\nimport reducer from \"@/reducer\";\r\nimport saga from \"@/saga\";\r\n\r\nimport { actionSanitizer, stateSanitizer } from \"./devtool-sanitizer\";\r\n\r\nexport function createStore() {\r\n  const composeEnhancers =\r\n    (window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ &&\r\n      window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n        actionSanitizer,\r\n        stateSanitizer\r\n      })) ||\r\n    compose;\r\n\r\n  const sagaMiddleware = createSagaMiddleware();\r\n\r\n  const store = createReduxStore(\r\n    reducer,\r\n    composeEnhancers(applyMiddleware(sagaMiddleware))\r\n  );\r\n  sagaMiddleware.run(saga);\r\n  return store;\r\n}\r\n","import { createStore } from \"./store\";\r\n\r\nconst store = createStore();\r\nexport default store;\r\n","import { css } from \"../styled\";\r\n\r\nimport { attachProps } from \"@/utils\";\r\n\r\nimport { Intent } from \"../theme\";\r\n\r\nimport { intentColor } from \"./intent-color\";\r\nimport { intentFill } from \"./intent-fill\";\r\n\r\nexport interface IntentProps {\r\n  intentIsBg?: boolean;\r\n  intent?: Intent;\r\n}\r\n\r\nconst intentDefault = (defaultIntent: Intent | null) => css<IntentProps>`\r\n  ${props => {\r\n    return props.intent\r\n      ? props.intentIsBg\r\n        ? intentFill\r\n        : intentColor\r\n      : defaultIntent;\r\n  }};\r\n`;\r\n\r\nconst intentOf = (intent: Intent, isBg: boolean = false) => css`\r\n  ${isBg ? intentFill.of(intent) : intentColor.of(intent)};\r\n`;\r\n\r\nconst intentFromProps = css<IntentProps>`\r\n  ${props => {\r\n    return props.intentIsBg ? intentFill : intentColor;\r\n  }};\r\n`;\r\n\r\nexport const intent = attachProps(intentFromProps, {\r\n  withDefault: intentDefault,\r\n  of: intentOf\r\n});\r\n","import { css } from \"../styled\";\r\nimport { TextProps, text } from \"./text\";\r\n\r\nexport interface LinkProps extends TextProps {}\r\n\r\nexport const link = css<LinkProps>`\r\n  ${text};\r\n  text-decoration: underline;\r\n  cursor: pointer;\r\n`;\r\n","import { css } from \"../styled\";\r\n\r\nimport { Background, Intent, isBackground, isIntent, getTheme } from \"../theme\";\r\nimport { attachProps } from \"@/utils\";\r\n\r\nexport interface BackgroundProps {\r\n  background?: Background | Intent;\r\n}\r\n\r\nexport const backgroundOf = (background: Background | Intent) => css<\r\n  BackgroundProps\r\n>`\r\n  ${props => {\r\n    const colors = getTheme(props).colors;\r\n    if (isIntent(background)) {\r\n      return `background-color: ${colors.intent[background]}`;\r\n    } else if (isBackground(background)) {\r\n      return `background-color: ${colors.bg[background]}`;\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }};\r\n`;\r\n\r\nexport const backgroundFromProps = css<BackgroundProps>`\r\n  ${props => {\r\n    let { background } = props;\r\n    if (!background) {\r\n      return undefined;\r\n    }\r\n    return backgroundOf(background);\r\n  }};\r\n`;\r\n\r\nexport const background = attachProps(backgroundFromProps, {\r\n  of: backgroundOf\r\n});\r\n","export * from \"./background\";\r\nexport * from \"./text\";\r\nexport * from \"./link\";\r\nexport * from \"./intent-color\";\r\nexport * from \"./intent-fill\";\r\nexport * from \"./intent\";\r\n","import * as React from \"react\";\r\nimport { hot } from \"react-hot-loader\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport { ThemeProvider, theme } from \"@/theme\";\r\n\r\nimport store from \"./store\";\r\n\r\nimport App from \"./App\";\r\n\r\nconst Root: React.SFC = () => (\r\n  <Provider store={store}>\r\n    <ThemeProvider theme={theme}>\r\n      <App />\r\n    </ThemeProvider>\r\n  </Provider>\r\n);\r\n\r\nexport default hot(module)(Root);\r\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"* {\\r\\n  font-family: \\\"Titillium Web\\\", sans-serif;\\r\\n}\\r\\n\\r\\nhtml,\\r\\nbody,\\r\\n#root {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  margin: 0;\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./style.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import \"react-select/dist/react-select.css\";\r\nimport \"./style.css\";\r\n","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\n\r\nimport Modal from \"react-modal\";\r\n\r\nimport \"./style\";\r\n\r\nimport Root from \"./root\";\r\n\r\nconst rootEl = document.getElementById(\"root\");\r\nif (rootEl) {\r\n  Modal.setAppElement(rootEl);\r\n  ReactDOM.render(<Root />, rootEl);\r\n}\r\n"],"sourceRoot":""}