{"version":3,"sources":["webpack:///./src/services/save-editor/index.tsx","webpack:///./src/logging/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Effects/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Traits/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Skills/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Appearance/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/General/index.ts","webpack:///./src/services/save-editor/save-editor.ts","webpack:///./src/components/App/index.ts","webpack:///./src/services/save-editor/store.ts","webpack:///./src/store.ts","webpack:///./src/components/SavingDialog/component.tsx","webpack:///./src/components/SavingDialog/index.ts","webpack:///./src/components/AppNavMenu/style.scss","webpack:///./src/components/AppNavMenu/style.scss?3c5e","webpack:///./src/components/ActiveAwareLink/component.tsx","webpack:///./src/components/ActiveAwareLink/index.ts","webpack:///./src/components/AppNavMenu/component.tsx","webpack:///./src/components/AppNavMenu/index.ts","webpack:///./src/components/AppNavBar/style.scss","webpack:///./src/components/AppNavBar/style.scss?a2b2","webpack:///./src/components/AppNavBar/component.tsx","webpack:///./src/components/AppNavBar/index.ts","webpack:///./src/pages/Changelog/style.scss","webpack:///./src/pages/Changelog/style.scss?b0de","webpack:///./CHANGELOG.md","webpack:///./src/pages/Changelog/component.tsx","webpack:///./src/pages/Changelog/index.ts","webpack:///./src/pages/SaveEditor/pages/Geysers/style.scss","webpack:///./src/pages/SaveEditor/pages/Geysers/style.scss?64aa","webpack:///./src/pages/SaveEditor/pages/Geysers/components/GeyserEditor/style.scss","webpack:///./src/pages/SaveEditor/pages/Geysers/components/GeyserEditor/style.scss?b9fe","webpack:///./src/pages/SaveEditor/pages/Geysers/components/GeyserEditor/component.tsx","webpack:///./src/pages/SaveEditor/pages/Geysers/components/GeyserEditor/index.ts","webpack:///./src/pages/SaveEditor/components/GameObjectGrid/component.tsx","webpack:///./src/pages/SaveEditor/components/GameObjectGrid/index.ts","webpack:///./src/pages/SaveEditor/pages/Geysers/component.tsx","webpack:///./src/pages/SaveEditor/pages/Geysers/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/page-graph.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Effects/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/pages/Aptitudes/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/pages/Aptitudes/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/pages/Roles/style.scss","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/pages/Roles/style.scss?49aa","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/pages/Roles/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/pages/Roles/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Traits/traits.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Traits/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Skills/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Appearance/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/General/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantsList/style.scss","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantsList/style.scss?6de7","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantPortrait/style.scss","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantPortrait/style.scss?8cac","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantPortrait/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantPortrait/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantsList/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantsList/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/index.ts","webpack:///./src/pages/SaveEditor/pages/General/style.scss","webpack:///./src/pages/SaveEditor/pages/General/style.scss?e5a9","webpack:///./src/pages/SaveEditor/pages/General/component.tsx","webpack:///./src/pages/SaveEditor/pages/General/index.ts","webpack:///./src/pages/SaveEditor/page-graph.ts","webpack:///./src/pages/Error/component.tsx","webpack:///./src/pages/Error/index.ts","webpack:///./src/pages/SaveEditor/components/LoadingSaveFile/component.tsx","webpack:///./src/pages/SaveEditor/components/LoadingSaveFile/index.ts","webpack:///./src/pages/SaveEditor/components/NoSaveLoaded/component.tsx","webpack:///./src/pages/SaveEditor/components/NoSaveLoaded/index.ts","webpack:///./src/pages/SaveEditor/component.tsx","webpack:///./src/pages/SaveEditor/index.ts","webpack:///./src/site-graph/root.ts","webpack:///./src/pages/404/style.scss","webpack:///./src/pages/404/style.scss?de76","webpack:///./src/pages/404/component.tsx","webpack:///./src/pages/404/index.ts","webpack:///./src/site-graph/components/SiteSwitch.tsx","webpack:///./src/services/save-editor/save-loader.worker.ts","webpack:///./src/services/save-editor/game-object-behavior.ts","webpack:///./src/services/save-editor/game-object.ts","webpack:///./src/utils.ts","webpack:///./src/components/App/component.tsx","webpack:///./src/app.tsx","webpack:///./src/css/root.scss","webpack:///./src/css/root.scss?3097","webpack:///./src/css/index.ts","webpack:///./src/index.tsx"],"names":["React","__importStar","__webpack_require__","mobx_react_1","save_editor_1","withSaveEditor","WrappedComponent","WithSaveEditor","Component","[object Object]","createElement","Object","assign","this","props","__decorate","inject","exports","SaveEditorImpl","failureType","ACTION_INVALID","SAVEFILE_CORRUPT","STATE_CORRUPT","MISSING_BEHAVIOR","warning","message","console","warn","error","freeze","seal","FAILURE_TYPE","component_1","__importDefault","default","mobx_1","file_saver_1","utils_1","logging_1","game_object_1","save_loader_worker_1","worker","saveName","isSaveLoading","isSaveLoaded","isSaveSaving","loadError","saveLoadParseStep","_saveGame","_parseStepStack","_parseStepUpdateQueued","_gameObjects","Map","load","flow","file","clear","name","data","readFile","saveGame","_parseSave","type","typedKeys","body","gameObjects","models","map","x","GameObjectModelImpl","set","e","save","_","value","forEach","syncChanges","_writeSave","blob","Blob","saveAs","withExtension","objectModelArrays","Array","from","values","concat","get","event","force","str","max","current","push","length","pop","log","join","setTimeout","action","buffer","Promise","accept","reject","onerror","onmessage","_writeProgress","cmd","command","postMessage","reader","FileReader","onload","result","readAsArrayBuffer","ext","endsWith","observable","prototype","createStore","mobx","configure","enforceActions","store_1","createStores","saveEditor","core_1","SavingDialog","NonIdealState","Spinner","large","observer","module","i","content","options","hmr","transform","insertInto","undefined","locals","react_router_1","react_router_dom_1","core_decorators_1","ActiveAwareLink","_a","to","location","children","onClick","className","exact","staticContext","other","__rest","pathName","pathname","match","matchPartialPath","toString","Link","_onClick","preventDefault","startsWith","autobind","withRouter","ActiveAwareLink_1","AppNavMenu","siteGraph","links","_renderLinks","entries","key","String","fragments","previousWasGroup","entry","rendered","_renderEntry","MenuDivider","isArray","menuName","navMenu","unshift","path","navMenuCollapse","primaryLink","throwUnknownSiteGraphType","Error","icons_1","AppNavBar","_input","Navbar","NavbarGroup","NavbarHeading","EditableText","onConfirm","_onRename","disabled","placeholder","Icon","icon","IconNames","EDIT","iconSize","title","align","Alignment","RIGHT","Button","UPLOAD","_onLoadClick","FLOPPY_DISK","_onSaveClick","ref","el","style","display","onChange","_onLoadFile","click","change","files","target","renameSave","react_markdown_1","changelog","ChangelogPage","source","oni_save_parser_1","select_1","StringSelect","Select","ofType","GeyserEditor","gameObject","behavior","getBehavior","GeyserBehavior","config","templateData","configuration","materialType","getGeyserTypeName","typeId","hash","items","GEYSER_TYPE_NAMES","itemRenderer","_renderGeyserTypeItem","itemPredicate","_filterItem","onItemSelect","_onGeyserTypeSelect","filterable","popoverProps","minimal","rightIcon","text","Slider","rateRoll","min","stepSize","labelRenderer","_percentageRenderer","_setRateRoll","iterationLengthRoll","_setIterationLengthRoll","iterationPercentRoll","_setIterationPercentRoll","yearLengthRoll","_setYearLengthRoll","yearPercentRoll","_setYearPercentRoll","query","indexOf","typeName","getGeyserTypeHash","itemProps","modifiers","handleClick","matchesPredicate","MenuItem","active","toFixed","bound","GameObjectGrid","renderItem","elements","GameObjectGridElement","kPrefabID","_onItemClick","bind","GameObjectGrid_1","GeyserEditor_1","GeysersPage","super","state","selectedGeyser","geysers","filter","isGeyser","visual","SEARCH_AROUND","_renderGeyserGridItem","_onGeyserSelected","geyserBehavior","position","y","Observer","Card","interactive","setState","s","General_1","Appearance_1","Effects_1","Jobs_1","Skills_1","Traits_1","pageGraph","component","DuplicantEffects","duplicant","effectsBehavior","AIEffectsBehavior","rows","saveLoadEffects","DuplicantEffectRow","id","timeRemaining","onChangeTime","_onEffectChangeTime","onRemove","_onEffectRemoved","AI_EFFECT_IDS","_renderItem","_onEffectSelected","resetOnClose","resetOnSelect","item","toLowerCase","effect","effectID","effects","findIndex","find","index","splice","NumericInput","clampValueOnBlur","onValueChange","_onTimeRemainingChange","SMALL_CROSS","_onRemove","isNaN","SKIP_APTITUDES","Set","AptitudePage","MinionResumeBehavior","WARNING_SIGN","APTITUDE_NAMES","has","AptitudeRow","aptitudeID","interested","hasAptitude","setInterest","_setInterested","AptitudeByRoleGroup","aptitudes","APTITUDE_NAME_HASHES","checked","_onInterestChange","aptitude","DuplicantRolesPage","resumeBehavior","currentRole","targetRole","ExperienceByRoleID","MasteryByRoleID","knownRoles","keys","experience","mastery","RoleRow","roleID","setMastery","_setMastery","setExperience","_setExperience","_onCurrentRoleSelected","_onTargetRoleSelected","_onSetMastery","_onSetExperience","Roles_1","Aptitudes_1","Tabs","vertical","renderActiveTabPanelOnly","Tab","panel","TRAITS","TraitMultiSelect","MultiSelect","traits_1","DuplicantTraits","traitsBehavior","AITraitsBehavior","traits","TraitIds","selectedItems","_onTagSelected","tagRenderer","tag","tagInputProps","_onTagRemoved","noResults","trait","isSelected","TICK","BLANK","shouldDismissPopover","DuplicantSkills","skillsBehavior","AIAttributeLevelsBehavior","saveLoadLevels","DuplicantSkillRow","attributeId","level","onChangeLevel","_onChangeLevel","onChangeExperience","_onChangeExperience","skill","_onLevelChange","_onExperienceChange","Math","round","oni_save_parser_2","DuplicantAccessoryPage","accessorizer","AccessorizerBehavior","accessories","eyesAccessory","getAccessoryOfType","headAccessory","hairAccessory","mouthAccessory","bodyAccessory","eyes","guid","Guid","head","hair","mouth","AppearanceGroup","ACCESSORIZER_EYE_GUIDS","onSet","_setEyes","ACCESSORIZER_HEAD_GUIDS","_setHead","ACCESSORIZER_HAIR_GUIDS","_setHair","ACCESSORIZER_MOUTH_GUIDS","_setMouth","ACCESSORIZER_BODY_GUIDS","_setBody","getIndexOfAccessoryType","_onSet","accessoryID","GenderSelect","NumberSelect","MIN_SCALE","Number","EPSILON","DuplicantGeneralPage","scaleX","scale","scaleY","healthBehavior","HealthBehavior","healthState","State","identityBehavior","MinionIdentityBehavior","gender","voiceIdx","healthStateStr","HEALTH_STATE_NAMES","MINION_IDENTITY_GENDERS","_onGenderSelected","_onVoiceSelected","_onScaleX","_onScaleY","_onHealthStateSelected","stateIndex","genderStringKey","DuplicantEditor","rename","ERROR","_onNameChange","DuplicantPortrait","identity","resume","role","outerClassName","DuplicantPortrait_1","DuplicantsList","duplicants","selectedDuplicant","_onDuplicantClick","onDuplicantClick","DuplicantsList_1","DuplicantEditor_1","DuplicantsPage","getGameObjects","MUGSHOT","_onDuplicantSelected","page_graph_1","GeneralPage","clockBehavior","_getClockBehavior","cycle","immigrationBehavior","_getImmigrationBehavior","timeBeforeSpawn","bImmigrantAvailable","_onCycleChange","_nextSpawnChange","_spawnReadyChange","time","Duplicants_1","Geysers_1","ErrorPage","stack","description","Text","LoadingSaveFile","currentStep","saveDescription","savePath","NoSaveLoadedPageComponent","intent","Intent","PRIMARY","NoSaveLoaded_1","LoadingSaveFile_1","Error_1","SaveEditorPageComponent","App_1","SaveEditor_1","Changelog_1","_404_1","SiteSwitch","routes","_renderRoutes","Switch","Route","collectRouteEntries","_renderPage","_renderPath","page","SiteSwitchWithRouter","render","Fragment","graph","isSitePage","Worker","p","GameObjectBehaviorModelImpl","_behavior","parsedData","toJS","exportMapsAsObjects","deep","game_object_behavior_1","_behaviors","_gameObject","behaviors","array","idBehavior","KPrefabIDBehavior","InstanceID","NaN","behaviorName","z","obj","mobx_react_devtools_1","SiteSwitch_1","root_1","AppNavBar_1","AppNavMenu_1","SavingDialog_1","AppComponent","Redirect","Dialog","isOpen","SAVED","isCloseButtonShown","react_hot_loader_1","hot","ReactDOM","app_1","rootEl","document","getElementById","Provider","HashRouter"],"mappings":"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","file":"client.5607fa1386c6afb278ef.bundle.js","sourcesContent":["\r\nimport * as React from \"react\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport { SaveEditor } from \"./interfaces\";\r\n\r\nexport * from \"./interfaces\";\r\n\r\nexport { SaveEditorImpl } from \"./save-editor\";\r\n\r\nexport interface SaveEditorProps {\r\n    saveEditor: SaveEditor;\r\n}\r\n\r\ntype Omit<T, K extends keyof T> = T extends any ? Pick<T, Exclude<keyof T, K>> : never;\r\nexport function withSaveEditor<TProps extends SaveEditorProps>(WrappedComponent: React.ComponentClass<TProps>): React.ComponentClass<Omit<TProps, \"saveEditor\">> {\r\n    @inject(\"saveEditor\")\r\n    class WithSaveEditor extends React.Component<Omit<TProps, \"saveEditor\">> {\r\n        render() {\r\n            return (\r\n                <WrappedComponent {...this.props as any} />\r\n            );\r\n        }\r\n\r\n        private _setObserver() {\r\n\r\n        }\r\n    };\r\n    return WithSaveEditor;\r\n}\r\n","\r\nconst failureType = {\r\n    ACTION_INVALID: \"action-invalid\" as \"action-invalid\",\r\n    SAVEFILE_CORRUPT: \"savefile-corrupt\" as \"savefile-corrupt\",\r\n    STATE_CORRUPT: \"state-corrupt\" as \"state-corrupt\",\r\n    MISSING_BEHAVIOR: \"missing-behavior\" as \"missing-behavior\"\r\n};\r\nObject.freeze(failureType);\r\nObject.seal(failureType);\r\n\r\nexport type FailureType = (typeof failureType)[keyof typeof failureType];\r\nexport const FAILURE_TYPE: Readonly<typeof failureType> = failureType;\r\n\r\n\r\nexport function warning(message: string, failureType?: FailureType) {\r\n    // TODO: Log to user console.\r\n    console.warn(`(${failureType}):`, message);\r\n}\r\n\r\nexport function error(message: string, failureType?: FailureType) {\r\n    // TODO: Log to user console.\r\n    console.error(`(${failureType}):`, message);\r\n}","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport {\r\n    observable,\r\n    action,\r\n    flow\r\n} from \"mobx\";\r\n\r\nimport { saveAs } from \"file-saver\";\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { typedKeys } from \"@/utils\";\r\nimport { error } from \"@/logging\";\r\n\r\nimport { SaveEditor, GameObjectModel } from \"./interfaces\";\r\nimport { GameObjectModelImpl } from \"./game-object\";\r\n\r\nimport SaveLoadWorker from \"worker-loader!./save-loader.worker\";\r\nimport { LoadCommandData, SaveCommandData, SaveLoaderEvents, ProgressEvent } from \"./save-loader.worker\";\r\nconst worker = new SaveLoadWorker();\r\n\r\n\r\nexport class SaveEditorImpl implements SaveEditor {\r\n    @observable\r\n    saveName: string | null = null;\r\n\r\n    @observable\r\n    isSaveLoading: boolean = false;\r\n\r\n    @observable\r\n    isSaveLoaded: boolean = false;\r\n\r\n    @observable\r\n    isSaveSaving: boolean = false;\r\n\r\n    @observable\r\n    loadError: Error | null = null;\r\n\r\n    @observable\r\n    saveLoadParseStep: string | null = null;\r\n\r\n    private _saveGame: SaveGame | null = null;\r\n\r\n    private _parseStepStack: string[] = [];\r\n    private _parseStepUpdateQueued: boolean = false;\r\n\r\n    /**\r\n     * Map of game object types to GameObjectModels in index order.\r\n     */\r\n    private _gameObjects = new Map<string, GameObjectModelImpl[]>();\r\n\r\n    get gameObjects(): GameObjectModel[] {\r\n        const objectModelArrays = Array.from(this._gameObjects.values());\r\n        return ([] as GameObjectModel[]).concat(...objectModelArrays);\r\n    }\r\n\r\n    load: SaveEditor[\"load\"] = flow(function* (this: SaveEditorImpl, file: File) {\r\n        this.isSaveLoaded = false;\r\n        this.isSaveLoading = true;\r\n        this._gameObjects.clear();\r\n        this.saveName = file.name;\r\n        try {\r\n            const data = yield readFile(file);\r\n            const saveGame: SaveGame = yield this._parseSave(data);\r\n            this._saveGame = saveGame;\r\n            for (let type of typedKeys(this._saveGame.body.gameObjects)) {\r\n                const models = this._saveGame.body.gameObjects[type].map(x => new GameObjectModelImpl(type, x));\r\n                this._gameObjects.set(type, models);\r\n            }\r\n            this.isSaveLoaded = true;\r\n        }\r\n        catch (e) {\r\n            error(\"Failed to load file: \" + e.message);\r\n            this.loadError = e;\r\n        }\r\n        finally {\r\n            this.isSaveLoading = false;\r\n        }\r\n    });\r\n\r\n    @action\r\n    renameSave(name: string) {\r\n        if (!this.isSaveLoaded) return;\r\n        if (name == null || name === \"\") return;\r\n        this.saveName = name;\r\n    }\r\n\r\n    save: SaveEditor[\"save\"] = flow(function*(this: SaveEditorImpl) {\r\n        if (!this._saveGame) return;\r\n        this.isSaveSaving = true;\r\n        try {\r\n            for (let [_, value] of this._gameObjects) {\r\n                value.forEach(x => x.syncChanges());\r\n            }\r\n            const data = yield this._writeSave(this._saveGame)\r\n            const blob = new Blob([data]);\r\n\r\n            saveAs(blob, withExtension(this.saveName || \"my-file\", \".sav\"));\r\n        }\r\n        catch (e) {\r\n            error(\"Failed to save file: \" + e.message);\r\n            this.loadError = e;\r\n        }\r\n        finally {\r\n            this.isSaveSaving = false;\r\n        }\r\n    });\r\n\r\n    // TODO: Look at why this is generating new objects every time.  Might be because the source object isnt observable?\r\n    // getGameObjects: SaveEditor[\"getGameObjects\"] = createTransformer((type: string) => ((this._saveGame && this._saveGame.body.gameObjects[type]) || []).map(x => new GameObjectModelImpl(type, x)));\r\n    getGameObjects(type: string): GameObjectModel[] {\r\n        return this._gameObjects.get(type) || [];\r\n    }\r\n\r\n    @action(\"write-saveload-progress\")\r\n    private _writeProgress(event: ProgressEvent, force: boolean = false) {\r\n        switch(event.event) {\r\n            case \"start\": {\r\n                const str = event.e.max ?\r\n                    `${event.e.name} (${event.e.current} of ${event.e.max})`\r\n                    : event.e.name;\r\n                this._parseStepStack.push(str);\r\n                break;\r\n            }\r\n            case \"progress\": {\r\n                const str = event.e.max ?\r\n                    `${event.e.name} (${event.e.current} of ${event.e.max})`\r\n                    : event.e.name;\r\n                this._parseStepStack[this._parseStepStack.length - 1] = str;\r\n                break;\r\n            }\r\n            case \"end\": {\r\n                this._parseStepStack.pop();\r\n                break;\r\n            }\r\n        }\r\n\r\n        console.log(this._parseStepStack.join(\" > \"));\r\n        \r\n        if (this._parseStepUpdateQueued) return;\r\n        this._parseStepUpdateQueued = true;\r\n        setTimeout(action(() => {\r\n            this._parseStepUpdateQueued = false;\r\n            this.saveLoadParseStep = this._parseStepStack.join(\" > \");\r\n        }), 200);\r\n    }\r\n\r\n    private _parseSave(buffer: ArrayBuffer): Promise<SaveGame> {\r\n        return new Promise<SaveGame>((accept, reject) => {\r\n            worker.onerror = (e: ErrorEvent) => { reject(e.error) };\r\n            worker.onmessage = (e: MessageEvent) => {\r\n                const event = e.data as SaveLoaderEvents;\r\n                switch(event.type) {\r\n                    case \"progress\": {\r\n                        this._writeProgress(event);\r\n                        return;\r\n                    };\r\n                    case \"loaded\": {\r\n                        worker.onmessage = null;\r\n                        const {error, saveGame} = event;\r\n                        if (error) reject(error);\r\n                        else accept(saveGame!);\r\n                        return;\r\n                    };\r\n                }\r\n            };\r\n    \r\n            const cmd: LoadCommandData = {\r\n                command: \"load\",\r\n                buffer: buffer\r\n            };\r\n            worker.postMessage(cmd);\r\n        });\r\n    }\r\n    \r\n    private _writeSave(saveGame: SaveGame): Promise<ArrayBuffer> {\r\n        return new Promise<ArrayBuffer>((accept, reject) => {\r\n            worker.onerror = (e: ErrorEvent) => { reject(e.error) };\r\n            worker.onmessage = (e: MessageEvent) => {\r\n                const event = e.data as SaveLoaderEvents;\r\n                switch(event.type) {\r\n                    case \"progress\": {\r\n                        this._writeProgress(event);\r\n                        return;\r\n                    };\r\n                    case \"saved\": {\r\n                        worker.onmessage = null;\r\n                        const {error, buffer} = event;\r\n                        if (error) reject(error);\r\n                        else accept(buffer!);\r\n                        return;\r\n                    };\r\n                }\r\n            };\r\n    \r\n            const cmd: SaveCommandData = {\r\n                command: \"save\",\r\n                save: saveGame\r\n            };\r\n            worker.postMessage(cmd);\r\n        });\r\n    }\r\n}\r\n\r\n\r\nfunction readFile(file: File): Promise<ArrayBuffer> {\r\n    const reader = new FileReader();\r\n    return new Promise<ArrayBuffer>((accept, reject) => {\r\n        reader.onload = () => {\r\n            accept(reader.result);\r\n        };\r\n        reader.onerror = () => {\r\n            reject(reader.error);\r\n        };\r\n        reader.readAsArrayBuffer(file);\r\n    });\r\n}\r\n\r\nfunction withExtension(name: string, ext: string): string {\r\n    if (name.endsWith(ext)) return name;\r\n    return name + ext;\r\n}","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport { SaveEditor } from \"./interfaces\";\r\nimport { SaveEditorImpl } from \"./save-editor\";\r\n\r\nexport function createStore(): SaveEditor {\r\n    return new SaveEditorImpl();\r\n}","\r\nimport * as mobx from \"mobx\";\r\nmobx.configure({\r\n    enforceActions: true\r\n});\r\n\r\nimport { createStore as createSaveEditorStore } from \"./services/save-editor/store\";\r\n\r\nexport function createStores() {\r\n    return {\r\n        saveEditor: createSaveEditorStore()\r\n    };\r\n}\r\n","\r\nimport * as React from \"react\";\r\n\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport { NonIdealState, Spinner } from \"@blueprintjs/core\";\r\n\r\nimport { SaveEditorProps, withSaveEditor } from \"@/services/save-editor\";\r\n\r\ntype Props = SaveEditorProps;\r\n@observer\r\nclass SavingDialog extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            saveEditor: {\r\n                saveName,\r\n                saveLoadParseStep\r\n            }\r\n        } = this.props;\r\n        return (\r\n            <NonIdealState>\r\n                <div>\r\n                    <Spinner large={true} />\r\n                </div>\r\n                <div>\r\n                    Saving <code>{saveName}</code>\r\n                </div>\r\n                <div>{saveLoadParseStep}</div>\r\n            </NonIdealState>\r\n        );\r\n    }\r\n}\r\nexport default withSaveEditor(SavingDialog);","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\\n */\\n.ui-nav-menu {\\n  padding: 15px;\\n  background-color: #394b59; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\nimport * as React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Link, LinkProps } from \"react-router-dom\"\r\nimport { autobind } from \"core-decorators\";\r\n\r\nexport interface ActiveAwareLinkProps extends LinkProps {\r\n    exact?: boolean;\r\n}\r\ntype Props = ActiveAwareLinkProps & RouteComponentProps<{}>;\r\nclass ActiveAwareLink extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            to,\r\n            location,\r\n            children,\r\n            onClick,\r\n            className,\r\n            exact,\r\n\r\n            // Need to strip this out of passed props\r\n            staticContext,\r\n            ...other\r\n        } = this.props\r\n        const pathName = location.pathname;\r\n        let match: boolean;\r\n        \r\n        if (exact) match = to === pathName;\r\n        else match = matchPartialPath(pathName, to.toString());\r\n\r\n        if (match) {\r\n            return <span className={`pt-active pt-intent-primary ${className || \"\"}`}>{children}</span>;\r\n        }\r\n\r\n        return <Link to={to} className={className || \"\"} {...other} onClick={this._onClick}>{children}</Link>;\r\n    }\r\n\r\n    @autobind()\r\n    private _onClick(event: React.MouseEvent<HTMLAnchorElement>) {\r\n        const {\r\n            exact,\r\n            location,\r\n            to,\r\n            onClick\r\n        } = this.props;\r\n        const pathName = location.pathname;\r\n\r\n        let match: boolean;\r\n        if (exact) match = to === pathName;\r\n        else match = matchPartialPath(pathName, to.toString());\r\n\r\n        if (match) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if (onClick) {\r\n            onClick(event);\r\n        }\r\n    }\r\n}\r\nexport default withRouter(ActiveAwareLink);\r\n\r\nfunction matchPartialPath(pathName: string, to: string): boolean {\r\n    if (pathName === to) return true;\r\n\r\n    if (!pathName.startsWith(to)) return false;\r\n\r\n    // Need to make sure we matched up to a path seperator.\r\n    if (pathName[to.length] !== '/') return false;\r\n    return true;\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\n\r\nimport {\r\n    MenuDivider\r\n} from \"@blueprintjs/core\";\r\n\r\nimport ActiveAwareLink from \"../ActiveAwareLink\";\r\n\r\nimport { SiteGraph, SiteGraphEntry } from \"@/site-graph\";\r\n\r\nimport \"./style.scss\";\r\n\r\nexport interface AppNavMenuProps {\r\n    className?: string;\r\n    siteGraph: SiteGraph;\r\n}\r\n\r\nclass AppNavMenu extends React.Component<AppNavMenuProps & RouteComponentProps<any>> {\r\n    render() {\r\n        const {\r\n            className,\r\n            siteGraph\r\n        } = this.props;\r\n\r\n        const links = this._renderLinks(siteGraph);\r\n        return (\r\n            <div className={`ui-nav-menu ${className || \"\"}`}>\r\n                {links}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private _renderLinks(entries: SiteGraph, key?: any): React.ReactChild[] {\r\n        key = key ? String(key) + \"-\" : \"\";\r\n\r\n        const fragments: React.ReactChild[] = [];\r\n        let previousWasGroup = false;\r\n\r\n        entries.forEach((entry, i) => {\r\n            const rendered = this._renderEntry(entry, key + i);\r\n            if (!rendered) return;\r\n            \r\n            if (previousWasGroup) {\r\n                fragments.push(<MenuDivider key={key + (i - 1) + \"-divider\"}/>)\r\n            }\r\n\r\n            if (Array.isArray(rendered)) {\r\n                fragments.push(...rendered);\r\n                previousWasGroup = rendered.length > 0;\r\n            }\r\n            else {\r\n                fragments.push(rendered);\r\n            }\r\n        });\r\n\r\n        return fragments;\r\n    }\r\n\r\n    private _renderEntry(entry: SiteGraphEntry, key: any): React.ReactChild | React.ReactChild[] {\r\n        switch(entry.type) {\r\n            case \"path\":\r\n            case \"group\": {\r\n                const rendered = this._renderLinks(entry.children, key);\r\n                const menuName = entry.navMenu && (entry.navMenu === \"string\" && entry.navMenu) || entry.name;\r\n                if (menuName && menuName !== \"\") {\r\n                    rendered.unshift(\r\n                        <div key={`${key}-header`} className=\"pt-menu-header\"><h6>{menuName}</h6></div>\r\n                    );\r\n                }\r\n                return rendered;\r\n            }\r\n            case \"page\": {\r\n                const pathName = this.props.location.pathname;\r\n                const {\r\n                    name,\r\n                    path,\r\n                    children,\r\n                    navMenuCollapse\r\n                } = entry;\r\n                const primaryLink = <ActiveAwareLink key={key} exact={children != null} className=\"pt-menu-item\" to={path}>{name}</ActiveAwareLink>;\r\n                if (!children || (navMenuCollapse && !matchPartialPath(pathName, path))) {\r\n                    return primaryLink;\r\n                }\r\n                else {\r\n                    return [\r\n                        primaryLink,\r\n                        <ul key={`${key}-list`}>\r\n                            {this._renderLinks(children).map((x, i) => <li key={`${key}-${i}`}>{x}</li>)}\r\n                        </ul>\r\n                    ];\r\n                }\r\n            }\r\n            default: \r\n                return throwUnknownSiteGraphType(entry);\r\n        }\r\n    }\r\n}\r\nexport default withRouter(AppNavMenu);\r\n\r\nfunction throwUnknownSiteGraphType(entry: never): never {\r\n    throw new Error(`Unknown entry type \"${(entry as SiteGraphEntry).type}\".`);\r\n}\r\n\r\n\r\nfunction matchPartialPath(pathName: string, to: string): boolean {\r\n    if (pathName === to) return true;\r\n\r\n    if (!pathName.startsWith(to)) return false;\r\n\r\n    // Need to make sure we matched up to a path seperator.\r\n    if (pathName[to.length] !== '/') return false;\r\n    return true;\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\\n */\\n.pt-navbar.ui-app-navbar {\\n  background-color: #2965cc; }\\n  .pt-navbar.ui-app-navbar .pt-navbar-group .pt-button {\\n    margin: 0 4px; }\\n\\n.ui-savename-editbadge {\\n  padding-left: 5px; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport {\r\n    Navbar,\r\n    NavbarGroup,\r\n    NavbarHeading,\r\n    EditableText,\r\n    Button,\r\n    Alignment,\r\n    Icon\r\n} from \"@blueprintjs/core\";\r\n\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport { SaveEditorProps, withSaveEditor } from \"@/services/save-editor\";\r\n\r\nimport \"./style.scss\";\r\n\r\nimport { AppNavBarProps } from \"./props\";\r\n\r\ntype Props = AppNavBarProps & SaveEditorProps;\r\n@observer\r\nclass AppNavBar extends React.Component<Props> {\r\n    private _input: HTMLElement | null = null;\r\n\r\n    render() {\r\n        const {\r\n            className,\r\n            saveEditor: {\r\n                saveName,\r\n                isSaveLoaded\r\n            }\r\n        } = this.props;\r\n\r\n        return (\r\n            <Navbar className={`ui-app-navbar ${className || \"\"}`}>\r\n                <NavbarGroup>\r\n                    <NavbarHeading>ONI Save Editor</NavbarHeading>\r\n                        <EditableText\r\n                            onConfirm={this._onRename}\r\n                            disabled={!isSaveLoaded}\r\n                            placeholder={!isSaveLoaded ? \"No save loaded\" : \"Click to edit save name\"}\r\n                            value={saveName || \"\"}\r\n                        />\r\n                        {\r\n                            isSaveLoaded ?\r\n                                <span className=\"ui-savename-editbadge\">\r\n                                    <Icon\r\n                                        icon={IconNames.EDIT}\r\n                                        iconSize={10}\r\n                                        title=\"Click on the save name to edit\"\r\n                                    />\r\n                                </span>\r\n                            : undefined\r\n                        }\r\n                </NavbarGroup>\r\n                <NavbarGroup align={Alignment.RIGHT}>\r\n                    <Button icon={IconNames.UPLOAD} onClick={this._onLoadClick}>Load</Button>\r\n                    <Button icon={IconNames.FLOPPY_DISK} disabled={!isSaveLoaded} onClick={this._onSaveClick}>Save</Button>\r\n                    <input\r\n                        ref={el => this._input = el}\r\n                        style={{ display: \"none\" }}\r\n                        className=\"pt-button pt-intent-primary\"\r\n                        type=\"file\"\r\n                        accept=\".sav\"\r\n                        onChange={this._onLoadFile}\r\n                    />\r\n                </NavbarGroup>\r\n            </Navbar>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onSaveClick() {\r\n        this.props.saveEditor.save();\r\n    }\r\n\r\n    @autobind()\r\n    private _onLoadClick() {\r\n        if (!this._input) return;\r\n        this._input.click();\r\n    }\r\n\r\n    @autobind()\r\n    private _onLoadFile(change: React.ChangeEvent<HTMLInputElement>) {\r\n        const files = change.target.files;\r\n        if (!files || files.length === 0) return;\r\n        this.props.saveEditor.load(files[0]);\r\n    }\r\n\r\n    @autobind()\r\n    private _onRename(name: string) {\r\n        const { saveEditor } = this.props;\r\n        saveEditor.renameSave(name);\r\n    }\r\n}\r\nexport default withSaveEditor(AppNavBar);\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ui-page-changelog {\\n  padding: 15px; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","module.exports = \"\\r\\n### v1.4.0\\r\\n- Edit duplicant\\r\\n    - Interests (aptitudes)\\r\\n- Edit geysers\\r\\n    - Type\\r\\n    - Cycle time factor\\r\\n    - Active time factor\\r\\n    - Dormant time factor\\r\\n- Ability to rename file on download.\\r\\n\\r\\n### v1.3.0\\r\\n- Edit current cycle.\\r\\n- Edit duplicant printer\\r\\n    - Next duplicant ready\\r\\n    - Time to next duplicant\\r\\n\\r\\n### v1.2.1\\r\\n- Fix save corruption when text with multi-byte accents are encountered.\\r\\n- Refactor URL layout to make way for future utilities.\\r\\n\\r\\n### v1.2.0\\r\\n\\r\\n- Edit Duplicants\\r\\n    - Current Job\\r\\n    - Target Job\\r\\n    - Job Experience\\r\\n    - Job Mastery\\r\\n\\r\\n### v1.1.0\\r\\n\\r\\n- Edit Duplicants\\r\\n    - Gender (data only; no visual effect)\\r\\n    - Voice\\r\\n    - Appearance\\r\\n- Dedicated load button (no more refreshes to edit new saves)\\r\\n\\r\\n### v1.0.0\\r\\n\\r\\nGround-up rewrite.\\r\\n\\r\\n- Edit Duplicants\\r\\n    - Name\\r\\n    - Size (width and height)\\r\\n    - Health Status (healthy, critical, incapacitated, invulnurable, ...)\\r\\n    - Skills (level and experience)\\r\\n    - Traits\\r\\n    - Status Effects\\r\\n- New Theme\\r\\n- Non-blocking file loading and saving.  Prevents browsers from killing the process when working with large saves.\\r\\n- Internal cleanup for mantainability going forward.\"","\r\nimport * as React from \"react\";\r\nimport Markdown from \"react-markdown\";\r\n\r\nconst changelog = require(\"@/../CHANGELOG.md\");\r\n\r\nimport \"./style.scss\";\r\n\r\nexport default class ChangelogPage extends React.Component {\r\n    render() {\r\n        return <Markdown className=\"ui-page ui-page-changelog fill-parent\" source={changelog}/>\r\n    }\r\n}","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\\n */\\n.ui-geyser-list {\\n  background-color: #bfccd6;\\n  height: 340px; }\\n  .ui-geyser-list .ui-geyser-portrait {\\n    width: 150px;\\n    height: 150px;\\n    margin: 10px;\\n    cursor: pointer; }\\n    .ui-geyser-list .ui-geyser-portrait .ui-geyser-type {\\n      text-align: center; }\\n    .ui-geyser-list .ui-geyser-portrait .ui-geyser-position {\\n      text-align: center; }\\n  .ui-geyser-list .ui-geyser-portrait.pt-active {\\n    background-color: #f29d49; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ui-page-geyser-editor {\\n  padding: 15px; }\\n  .ui-page-geyser-editor .ui-geyser-factor-explain {\\n    padding-top: 5px;\\n    padding-bottom: 10px; }\\n  .ui-page-geyser-editor .ui-slider-inset {\\n    box-sizing: border-box;\\n    padding: 0px 10px; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { GeyserBehavior, GEYSER_TYPE_NAMES, getGeyserTypeName, getGeyserTypeHash } from \"oni-save-parser\";\r\nimport { Button, MenuItem, NumericInput, Slider } from \"@blueprintjs/core\";\r\nimport { Select, IItemRendererProps } from \"@blueprintjs/select\";\r\nconst StringSelect = Select.ofType<string>();\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\nimport { typedKeys } from \"@/utils\";\r\n\r\nimport \"./style.scss\";\r\n\r\nexport interface GeyserEditorProps {\r\n    className?: string;\r\n    gameObject: GameObjectModel;\r\n}\r\n@observer\r\nexport default class GeyserEditor extends React.Component<GeyserEditorProps> {\r\n    render() {\r\n        const {\r\n            className,\r\n            gameObject\r\n        } = this.props;\r\n\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) {\r\n            return (\r\n                <div>\r\n                    This geyser has not been initialized, and cannot be edited.  Probably because it has not yet been discovered in-game.\r\n                </div>\r\n            );\r\n        }\r\n\r\n        const materialType = getGeyserTypeName(config.typeId.hash) || \"[Unknown]\";\r\n        return (\r\n            <div className={`layout-vertical ui-page-geyser-editor container-scroll ${className || \"\"}`}>\r\n                <div className=\"pt-form-group pt-inline\">\r\n                    <label className=\"pt-label\">\r\n                        Type\r\n                    </label>\r\n                    <div className=\"pt-form-content\">\r\n                        <div className=\"pt-input-group\">\r\n                            <StringSelect\r\n                                items={GEYSER_TYPE_NAMES}\r\n                                itemRenderer={this._renderGeyserTypeItem}\r\n                                itemPredicate={this._filterItem}\r\n                                onItemSelect={this._onGeyserTypeSelect}\r\n                                filterable={true}\r\n                                popoverProps={{ minimal: true }}\r\n                            >\r\n                                <Button rightIcon=\"caret-down\" text={materialType} />\r\n                            </StringSelect>\r\n                            <div className=\"pt-form-helper-text\">\r\n                                Geyser types are predefined in the game assembly, and determine the emitted element\r\n                                and range of possible emit / idle / dormant times.\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group\">\r\n                    <div className=\"pt-form-helper-text ui-geyser-factor-explain\">\r\n                        The following factor values are percentages of the min/max value defined\r\n                        by the geyser type.  Factors above 100% do not have an effect.\r\n                    </div>\r\n                    <label className=\"pt-label\">Emit Rate Factor</label>\r\n                    <div className=\"pt-form-content ui-slider-inset\">\r\n                        <Slider\r\n                            value={config.rateRoll}\r\n                            min={0}\r\n                            max={1}\r\n                            stepSize={0.001}\r\n                            labelRenderer={this._percentageRenderer}\r\n                            onChange={this._setRateRoll}\r\n                        />\r\n                        <div className=\"pt-form-helper-text\">Mass per cycle</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group\">\r\n                    <label className=\"pt-label\">Active Cycle Length Factor</label>\r\n                    <div className=\"pt-form-content ui-slider-inset\">\r\n                        <Slider\r\n                            value={config.iterationLengthRoll}\r\n                            min={0}\r\n                            max={1}\r\n                            stepSize={0.001}\r\n                            labelRenderer={this._percentageRenderer}\r\n                            onChange={this._setIterationLengthRoll}\r\n                        />\r\n                        <div className=\"pt-form-helper-text\">The total length of the active (emit and idle) stage.</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group\">\r\n                    <label className=\"pt-label\">Active Emitting Percentage Factor</label>\r\n                    <div className=\"pt-form-content ui-slider-inset\">\r\n                        <Slider\r\n                            value={config.iterationPercentRoll}\r\n                            min={0}\r\n                            max={1}\r\n                            stepSize={0.001}\r\n                            labelRenderer={this._percentageRenderer}\r\n                            onChange={this._setIterationPercentRoll}\r\n                        />\r\n                        <div className=\"pt-form-helper-text\">The percentage of the active stage that is spent emitting material.</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group\">\r\n                    <label className=\"pt-label\">Lifecycle Length Factor</label>\r\n                    <div className=\"pt-form-content ui-slider-inset\">\r\n                        <Slider\r\n                            value={config.yearLengthRoll}\r\n                            min={0}\r\n                            max={1}\r\n                            stepSize={0.001}\r\n                            labelRenderer={this._percentageRenderer}\r\n                            onChange={this._setYearLengthRoll}\r\n                        />\r\n                        <div className=\"pt-form-helper-text\">The total length of its active/dormant cycle.</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group\">\r\n                    <label className=\"pt-label\">Lifecycle Active Percentage Factor</label>\r\n                    <div className=\"pt-form-content ui-slider-inset\">\r\n                        <Slider\r\n                            value={config.yearPercentRoll}\r\n                            min={0}\r\n                            max={1}\r\n                            stepSize={0.001}\r\n                            labelRenderer={this._percentageRenderer}\r\n                            onChange={this._setYearPercentRoll}\r\n                        />\r\n                        <div className=\"pt-form-helper-text\">The percentage of its lifecycle that is spent in an active (not dormant) state.</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private _filterItem(query: string, value: string) {\r\n        return value.indexOf(query) !== -1;\r\n    }\r\n\r\n    @action.bound\r\n    private _onGeyserTypeSelect(typeName: string) {\r\n        const { gameObject } = this.props;\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) return;\r\n        const hash = getGeyserTypeHash(typeName);\r\n        if (hash != null) config.typeId.hash = hash;\r\n    }\r\n\r\n    private _renderGeyserTypeItem(value: string, itemProps: IItemRendererProps) {\r\n        const {\r\n            modifiers,\r\n            handleClick\r\n        } = itemProps;\r\n\r\n        if (!modifiers.matchesPredicate) {\r\n            return null;\r\n        }\r\n        return (\r\n            <MenuItem\r\n                active={modifiers.active}\r\n                key={value}\r\n                onClick={handleClick}\r\n                text={value}\r\n            />\r\n        );\r\n    }\r\n\r\n    private _percentageRenderer(value: number): string {\r\n        return `${(value * 100).toFixed(1)}%`;\r\n    }\r\n\r\n    @action.bound\r\n    private _setRateRoll(value: number) {\r\n        const { gameObject } = this.props;\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) return;\r\n        config.rateRoll = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setIterationLengthRoll(value: number) {\r\n        const { gameObject } = this.props;\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) return;\r\n        config.iterationLengthRoll = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setIterationPercentRoll(value: number) {\r\n        const { gameObject } = this.props;\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) return;\r\n        config.iterationPercentRoll = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setYearLengthRoll(value: number) {\r\n        const { gameObject } = this.props;\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) return;\r\n        config.yearLengthRoll = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setYearPercentRoll(value: number) {\r\n        const { gameObject } = this.props;\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) return;\r\n        config.yearPercentRoll = value;\r\n    }\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\nexport interface GameObjectGridProps {\r\n    className?: string;\r\n    gameObjects: GameObjectModel[];\r\n    onClick?(gameObject: GameObjectModel): void;\r\n    renderItem: (gameObject: GameObjectModel) => React.ReactChild;\r\n}\r\n\r\n@observer\r\nexport default class GameObjectGrid extends React.Component<GameObjectGridProps> {\r\n    render() {\r\n        const {\r\n            className,\r\n            gameObjects,\r\n            renderItem\r\n        } = this.props;\r\n\r\n        const elements = gameObjects.map(x => <GameObjectGridElement key={x.kPrefabID} gameObject={x} onClick={this._onItemClick} renderItem={renderItem}/>);\r\n        return (\r\n            <div className={`${className || ''} ui-gameobject-grid`}>\r\n                <div className={`fill-parent layout-horizontal layout-wrap container-scroll`}>\r\n                    {elements}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onItemClick(gameObject: GameObjectModel) {\r\n        const { onClick } = this.props;\r\n        if (onClick) onClick(gameObject);\r\n    }\r\n}\r\n\r\ninterface GameObjectGridElementProps {\r\n    gameObject: GameObjectModel;\r\n    renderItem(gameObject: GameObjectModel): React.ReactChild;\r\n    onClick(gameObject: GameObjectModel): void;\r\n}\r\nclass GameObjectGridElement extends React.Component<GameObjectGridElementProps> {\r\n    render() {\r\n        const {gameObject, renderItem, onClick} = this.props;\r\n        return <div onClick={onClick.bind(null, gameObject)}>{renderItem(gameObject)}</div>;\r\n    }\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { observer, Observer } from \"mobx-react\";\r\nimport { GeyserBehavior, getGeyserTypeName } from \"oni-save-parser\";\r\n\r\nimport { NonIdealState, Card, ICardProps } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport { SaveEditorProps, withSaveEditor, GameObjectModel } from \"@/services/save-editor\";\r\n\r\nimport GameObjectGrid from \"../../components/GameObjectGrid\";\r\nimport GeyserEditor from \"./components/GeyserEditor\";\r\n\r\nimport \"./style.scss\";\r\n\r\ntype Props = SaveEditorProps;\r\ninterface State {\r\n    selectedGeyser: GameObjectModel | null;\r\n}\r\nclass GeysersPage extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            selectedGeyser: null\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            selectedGeyser\r\n        } = this.state;\r\n        const {\r\n            saveEditor\r\n        } = this.props;\r\n\r\n        const geysers = saveEditor.gameObjects.filter(isGeyser);\r\n\r\n        if (geysers.length === 0) {\r\n            return (\r\n                <NonIdealState visual={IconNames.SEARCH_AROUND}>\r\n                    <div>No geysers found.</div>\r\n                    <div>Geysers are not spawned into the game until they are discovered.</div>\r\n                </NonIdealState>\r\n            );\r\n        }\r\n\r\n        let content: React.ReactFragment;\r\n        if (selectedGeyser != null) {\r\n            content = <GeyserEditor className=\"fill-parent\" gameObject={selectedGeyser} />\r\n        }\r\n        else {\r\n            content = (\r\n                <NonIdealState visual={IconNames.SEARCH_AROUND}>\r\n                    Select a geyser to edit\r\n                </NonIdealState>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"ui-page ui-page-geysers fill-parent layout-vertical\">\r\n                <GameObjectGrid\r\n                    className=\"layout-item ui-geyser-list\"\r\n                    gameObjects={geysers}\r\n                    renderItem={this._renderGeyserGridItem}\r\n                    onClick={this._onGeyserSelected}\r\n                />\r\n                <div className=\"layout-item-fill\">\r\n                    {content}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _renderGeyserGridItem(gameObject: GameObjectModel): React.ReactChild {\r\n        const geyserBehavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = geyserBehavior && geyserBehavior.templateData.configuration;\r\n        if (!config) {\r\n            return <div className=\"ui-geyser-portrait\">Undiscovered</div>;\r\n        }\r\n\r\n        const x = gameObject.position.x.toFixed();\r\n        const y = gameObject.position.y.toFixed();\r\n\r\n        return (\r\n            <Observer>\r\n                {() =>\r\n                    <Card className=\"ui-geyser-portrait\" interactive={true}>\r\n                        <h5 className=\"ui-geyser-type\">{getGeyserTypeName(config.typeId.hash)}</h5>\r\n                        <div className=\"ui-geyser-position\">({x}, {y})</div>\r\n                    </Card>\r\n                }\r\n            </Observer>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onGeyserSelected(selectedGeyser: GameObjectModel) {\r\n        this.setState(s => ({\r\n            ...s,\r\n            selectedGeyser\r\n        }));\r\n    }\r\n}\r\n\r\nexport default withSaveEditor(GeysersPage);\r\n\r\nfunction isGeyser(gameObject: GameObjectModel) {\r\n    if (gameObject.type.startsWith(\"GeyserGeneric_\")) return true;\r\n    // TODO: ONI code also contains MethaneGeyser and ChlorineGeyser.\r\n    //  I think these are left-over from the prototype geysers, but\r\n    //  need to confirm this.\r\n    return false;\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport { SiteGraph } from \"@/site-graph\";\r\n\r\nimport General from \"./pages/General\";\r\nimport Appearance from \"./pages/Appearance\";\r\nimport Effects from \"./pages/Effects\";\r\nimport Jobs from \"./pages/Jobs\";\r\nimport Skills from \"./pages/Skills\";\r\nimport Traits from \"./pages/Traits\";\r\n\r\n\r\nexport const pageGraph: SiteGraph = [\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/duplicants/:prefabId/general\",\r\n        name: \"General\",\r\n        component: General\r\n    },\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/duplicants/:prefabId/appearance\",\r\n        name: \"Appearance\",\r\n        component: Appearance\r\n    },\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/duplicants/:prefabId/skills\",\r\n        name: \"Skills\",\r\n        component: Skills\r\n    },\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/duplicants/:prefabId/traits\",\r\n        name: \"Traits\",\r\n        component: Traits\r\n    },\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/duplicants/:prefabId/jobs\",\r\n        name: \"Jobs\",\r\n        component: Jobs\r\n    },\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/duplicants/:prefabId/effects\",\r\n        name: \"Effects\",\r\n        component: Effects\r\n    },\r\n];\r\n","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { AI_EFFECT_IDS, AIEffectsBehavior } from \"oni-save-parser\";\r\n\r\nimport { NumericInput, MenuItem, Button } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\nimport { Select, IItemRendererProps } from \"@blueprintjs/select\";\r\nconst StringSelect = Select.ofType<string>();\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\n\r\nexport interface DuplicantEffectsProps {\r\n    duplicant: GameObjectModel\r\n};\r\n\r\n\r\ntype Props = DuplicantEffectsProps;\r\n@observer\r\nclass DuplicantEffects extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n\r\n        const effectsBehavior = duplicant.getBehavior(AIEffectsBehavior);\r\n        if (!effectsBehavior) return <div>Error: No AIEffectsBehavior found.</div>;\r\n        const effects = effectsBehavior.templateData.saveLoadEffects;\r\n\r\n        const rows = effects.map(x =>\r\n            <DuplicantEffectRow\r\n                key={x.id}\r\n                id={x.id}\r\n                timeRemaining={x.timeRemaining}\r\n                onChangeTime={this._onEffectChangeTime}\r\n                onRemove={this._onEffectRemoved}\r\n            />\r\n        );\r\n\r\n        return (\r\n            <div className={`ui-duplicant-effects fill-parent layout-vertical`}>\r\n                <div className=\"container-scroll layout-item-fill\">\r\n                    <table className=\"pt-html-table pt-html-table-striped fill-parent-width\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Effect</th>\r\n                                <th>Time Remaining (ms)</th>\r\n                                <th></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {rows}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                <div>\r\n                    <StringSelect\r\n                        items={AI_EFFECT_IDS}\r\n                        itemPredicate={this._filterItem}\r\n                        itemRenderer={this._renderItem}\r\n                        onItemSelect={this._onEffectSelected}\r\n                        filterable={true}\r\n                        resetOnClose={true}\r\n                        resetOnSelect={true}\r\n                        popoverProps={{ minimal: true }}\r\n                    >\r\n                        <Button rightIcon=\"caret-down\" text=\"Add a new Effect\" />\r\n                    </StringSelect>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    private _filterItem(query: string, item: string) {\r\n        return item.toLowerCase().indexOf(query.toLowerCase()) !== -1;\r\n    }\r\n\r\n    @autobind()\r\n    private _renderItem(effect: string, itemProps: IItemRendererProps) {\r\n        const {\r\n            modifiers,\r\n            handleClick\r\n        } = itemProps;\r\n\r\n        if (!modifiers.matchesPredicate) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <MenuItem\r\n                active={modifiers.active}\r\n                key={effect}\r\n                onClick={handleClick}\r\n                text={effect}\r\n            />\r\n        );\r\n    };\r\n\r\n    @action.bound\r\n    private _onEffectSelected(effectID: string) {\r\n        const { duplicant } = this.props;\r\n        const effectsBehavior = duplicant.getBehavior(AIEffectsBehavior);\r\n        if (!effectsBehavior) return;\r\n        const effects = effectsBehavior.templateData.saveLoadEffects;\r\n\r\n        if (effects.findIndex(x => x.id === effectID) !== -1) return;\r\n\r\n        effects.push({\r\n            id: effectID,\r\n            timeRemaining: 5000\r\n        });\r\n    }\r\n\r\n    @action.bound\r\n    private _onEffectChangeTime(effectID: string, timeRemaining: number) {\r\n        const { duplicant } = this.props;\r\n        const effectsBehavior = duplicant.getBehavior(AIEffectsBehavior);\r\n        if (!effectsBehavior) return;\r\n        const effects = effectsBehavior.templateData.saveLoadEffects;\r\n\r\n        const effect = effects.find(x => x.id === effectID);\r\n        if (!effect) return;\r\n\r\n        effect.timeRemaining = timeRemaining;\r\n    }\r\n\r\n    @action.bound\r\n    private _onEffectRemoved(effectID: string) {\r\n        const { duplicant } = this.props;\r\n        const effectsBehavior = duplicant.getBehavior(AIEffectsBehavior);\r\n        if (!effectsBehavior) return;\r\n        const effects = effectsBehavior.templateData.saveLoadEffects;\r\n\r\n        const index = effects.findIndex(x => x.id === effectID);\r\n        if (index === -1) return;\r\n        effects.splice(index, 1);\r\n    }\r\n}\r\nexport default DuplicantEffects;\r\n\r\n\r\ninterface DuplicantEffectRowProps {\r\n    id: string;\r\n    timeRemaining: number;\r\n    onChangeTime(id: string, timeRemaining: number): void;\r\n    onRemove(id: string): void;\r\n}\r\n\r\nclass DuplicantEffectRow extends React.Component<DuplicantEffectRowProps> {\r\n    constructor(props: DuplicantEffectRowProps) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            id,\r\n            timeRemaining\r\n        } = this.props;\r\n\r\n        return (\r\n            <tr>\r\n                <td>{id}</td>\r\n                <td>\r\n                    <NumericInput\r\n                        value={timeRemaining}\r\n                        clampValueOnBlur={true}\r\n                        min={0}\r\n                        onValueChange={this._onTimeRemainingChange}\r\n                    />\r\n                </td>\r\n                <td>\r\n                    <Button icon={IconNames.SMALL_CROSS} onClick={this._onRemove} />\r\n                </td>\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onTimeRemainingChange(value: number) {\r\n        const {\r\n            id,\r\n            onChangeTime\r\n        } = this.props;\r\n\r\n        if (value < 0 || isNaN(value)) {\r\n            value = 0;\r\n        }\r\n\r\n        onChangeTime(id, value);\r\n    }\r\n\r\n    @autobind()\r\n    private _onRemove() {\r\n        const {\r\n            id,\r\n            onRemove\r\n        } = this.props;\r\n        onRemove(id);\r\n    }\r\n}\r\n","\r\nimport * as React from \"react\";\r\nimport { NonIdealState  } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { observer } from \"mobx-react\";\r\nimport { action } from \"mobx\";\r\n\r\nimport {\r\n    APTITUDE_NAMES,\r\n    APTITUDE_HASH_NAMES,\r\n    APTITUDE_NAME_HASHES,\r\n    AptitudeName,\r\n    MinionResumeBehavior\r\n} from \"oni-save-parser\";\r\n\r\nimport { GameObjectModel, GameObjectBehaviorModel } from \"@/services/save-editor\";\r\n\r\n\r\n// These are not saved, and probably are not functional yet.\r\nconst SKIP_APTITUDES = new Set([\"Management\", \"Suits\", \"MedicalAid\"]);\r\n\r\nexport interface AptitudePageProps {\r\n    className?: string;\r\n    duplicant: GameObjectModel;\r\n}\r\n@observer\r\nexport default class AptitudePage extends React.Component<AptitudePageProps> {\r\n    render() {\r\n        const {\r\n            className,\r\n            duplicant\r\n        } = this.props;\r\n\r\n        const behavior = duplicant.getBehavior(MinionResumeBehavior);\r\n        if (!behavior) {\r\n            return (\r\n                <NonIdealState visual={IconNames.WARNING_SIGN}>\r\n                    No resume behavior exists on this duplicant.  Jobs may not have been initialized.\r\n                </NonIdealState>\r\n            );\r\n        }\r\n\r\n        const rows = APTITUDE_NAMES.filter(x => !SKIP_APTITUDES.has(x)).map(name => (\r\n            <AptitudeRow key={name} aptitudeID={name} interested={hasAptitude(behavior, name)} setInterest={this._setInterested} />\r\n        ));\r\n\r\n        return (\r\n            <div className={`fill-parent container-scroll ${className || \"\"}`}>\r\n                <table className=\"pt-html-table pt-html-table-striped fill-parent\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Aptitude Type</th>\r\n                            <th>Interested</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {rows}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @action.bound\r\n    private _setInterested(aptitudeID: AptitudeName, interested: boolean) {\r\n        const { duplicant } = this.props;\r\n        const behavior = duplicant.getBehavior(MinionResumeBehavior);\r\n        if (!behavior || !behavior.templateData || !behavior.templateData.AptitudeByRoleGroup) return;\r\n        const aptitudes = behavior.templateData.AptitudeByRoleGroup;\r\n\r\n        // This is dumb, but the keys of this are ONI HashStrings, which only save their key as a nested property.\r\n        const hash = APTITUDE_NAME_HASHES[aptitudeID];\r\n        if (hash == null) return false;\r\n        for (let [key, value] of aptitudes.entries()) {\r\n            if (key.hash === hash) {\r\n                aptitudes.set(key, interested ? 1 : 0);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ninterface AptitudeRowProps {\r\n    aptitudeID: string;\r\n    interested: boolean;\r\n    setInterest(aptitudeID: string, interested: boolean): void;\r\n}\r\nclass AptitudeRow extends React.Component<AptitudeRowProps> {\r\n    render() {\r\n        const {\r\n            aptitudeID,\r\n            interested\r\n        } = this.props;\r\n        return (\r\n            <tr>\r\n                <td>{aptitudeID}</td>\r\n                <td>\r\n                    <label className=\"pt-control pt-checkbox\">\r\n                        <input type=\"checkbox\" checked={interested} onChange={this._onInterestChange} />\r\n                        <span className=\"pt-control-indicator\"></span>\r\n                    </label>\r\n                </td>\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onInterestChange(change: React.ChangeEvent<HTMLInputElement>) {\r\n        const {\r\n            aptitudeID,\r\n            setInterest\r\n        } = this.props;\r\n        setInterest(aptitudeID, change.target.checked);\r\n    }\r\n}\r\n\r\nfunction hasAptitude(behavior: GameObjectBehaviorModel<MinionResumeBehavior>, aptitude: AptitudeName): boolean {\r\n    if (!behavior.templateData || !behavior.templateData.AptitudeByRoleGroup) return false;\r\n\r\n    const hash = APTITUDE_NAME_HASHES[aptitude];\r\n    if (hash == null) return false;\r\n\r\n    for (let [key, value] of behavior.templateData.AptitudeByRoleGroup.entries()) {\r\n        if (key.hash === hash) return value > 0;\r\n    }\r\n    return false;\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","exports = module.exports = require(\"../../../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ui-page-duplicants .ui-duplicant-roles .ui-current-role, .ui-page-duplicants .ui-duplicant-roles .ui-target-role {\\n  padding: 5px; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../../../../node_modules/css-loader/index.js!../../../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../../../node_modules/css-loader/index.js!../../../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../../../node_modules/css-loader/index.js!../../../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { NumericInput, Button, MenuItem } from \"@blueprintjs/core\";\r\nimport { Select, IItemRendererProps } from \"@blueprintjs/select\";\r\nconst StringSelect = Select.ofType<string>();\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\nimport { MinionResumeBehavior } from \"oni-save-parser\";\r\n\r\nimport \"./style.scss\";\r\n\r\nexport interface DuplicantJobsPageProps {\r\n    duplicant: GameObjectModel;\r\n}\r\n\r\ntype Props = DuplicantJobsPageProps;\r\n@observer\r\nclass DuplicantRolesPage extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n\r\n        const resumeBehavior = duplicant.getBehavior(MinionResumeBehavior);\r\n        if (!resumeBehavior) return <div>Error: GameObject lacks a MinionResumeBehavior.</div>;\r\n\r\n        const {\r\n            currentRole,\r\n            targetRole,\r\n            ExperienceByRoleID,\r\n            MasteryByRoleID\r\n        } = resumeBehavior.templateData;\r\n\r\n        if (!ExperienceByRoleID || !MasteryByRoleID || !currentRole) {\r\n            return <div>Error: Empty MinionResume behavior data.</div>;\r\n        }\r\n\r\n        // Might want to make a constant for this, but this is better for future compatibility.\r\n        const knownRoles = Array.from(ExperienceByRoleID.keys());\r\n\r\n        const rows = knownRoles.map(x => {\r\n            const experience = ExperienceByRoleID.get(x) || 0;\r\n            const mastery = MasteryByRoleID.get(x) || false;\r\n            return <RoleRow key={x} roleID={x} mastery={mastery} experience={experience} setMastery={this._setMastery} setExperience={this._setExperience} />\r\n        });\r\n\r\n        return (\r\n            <div className={`ui-duplicant-roles fill-parent container-scroll`}>\r\n                <div className=\"layout-vertical\">\r\n                    <div className=\"layout-horizontal\">\r\n                        <div className=\"ui-current-role pt-form-group pt-inline\">\r\n                            <label className=\"pt-label\">\r\n                                Current Role\r\n                            </label>\r\n                            <div className=\"pt-form-content\">\r\n                                <StringSelect\r\n                                    items={knownRoles}\r\n                                    itemPredicate={this._filterItem}\r\n                                    itemRenderer={this._renderItem}\r\n                                    onItemSelect={this._onCurrentRoleSelected}\r\n                                    filterable={true}\r\n                                    resetOnClose={true}\r\n                                    resetOnSelect={true}\r\n                                    popoverProps={{ minimal: true }}\r\n                                >\r\n                                    <Button rightIcon=\"caret-down\" text={currentRole || \"[Unknown]\"} />\r\n                                </StringSelect>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"ui-target-role pt-form-group pt-inline\">\r\n                            <label className=\"pt-label\">\r\n                                Target Role\r\n                            </label>\r\n                            <div className=\"pt-form-content\">\r\n                                <StringSelect\r\n                                    items={knownRoles}\r\n                                    itemPredicate={this._filterItem}\r\n                                    itemRenderer={this._renderItem}\r\n                                    onItemSelect={this._onTargetRoleSelected}\r\n                                    filterable={true}\r\n                                    resetOnClose={true}\r\n                                    resetOnSelect={true}\r\n                                    popoverProps={{ minimal: true }}\r\n                                >\r\n                                    <Button rightIcon=\"caret-down\" text={targetRole || \"[Unknown]\"} />\r\n                                </StringSelect>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <table className=\"pt-html-table pt-html-table-striped fill-parent-width layout-item\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Job Name</th>\r\n                                <th>Mastery</th>\r\n                                <th>Experience</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {rows}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private _filterItem(query: string, item: string) {\r\n        return item.toLowerCase().indexOf(query.toLowerCase()) !== -1;\r\n    }\r\n\r\n    @autobind()\r\n    private _renderItem(effect: string, itemProps: IItemRendererProps) {\r\n        const {\r\n            modifiers,\r\n            handleClick\r\n        } = itemProps;\r\n\r\n        if (!modifiers.matchesPredicate) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <MenuItem\r\n                active={modifiers.active}\r\n                key={effect}\r\n                onClick={handleClick}\r\n                text={effect}\r\n            />\r\n        );\r\n    };\r\n\r\n    @action.bound\r\n    private _onCurrentRoleSelected(roleID: string) {\r\n        const { duplicant } = this.props;\r\n        const resumeBehavior = duplicant.getBehavior(MinionResumeBehavior);\r\n        if (!resumeBehavior) return;\r\n        resumeBehavior.templateData.currentRole = roleID;\r\n    }\r\n\r\n    @action.bound\r\n    private _onTargetRoleSelected(roleID: string) {\r\n        const { duplicant } = this.props;\r\n        const resumeBehavior = duplicant.getBehavior(MinionResumeBehavior);\r\n        if (!resumeBehavior) return;\r\n        resumeBehavior.templateData.targetRole = roleID;\r\n    }\r\n\r\n    @action.bound\r\n    private _setMastery(roleID: string, mastery: boolean) {\r\n        const { duplicant } = this.props;\r\n        const resumeBehavior = duplicant.getBehavior(MinionResumeBehavior);\r\n        if (!resumeBehavior) return;\r\n        resumeBehavior.templateData.MasteryByRoleID!.set(roleID, mastery);\r\n    }\r\n\r\n    @action.bound\r\n    private _setExperience(roleID: string, experience: number) {\r\n        const { duplicant } = this.props;\r\n        const resumeBehavior = duplicant.getBehavior(MinionResumeBehavior);\r\n        if (!resumeBehavior) return;\r\n        resumeBehavior.templateData.ExperienceByRoleID!.set(roleID, experience);\r\n    }\r\n}\r\nexport default DuplicantRolesPage;\r\n\r\n\r\ninterface JobRowProps {\r\n    roleID: string;\r\n    mastery: boolean;\r\n    experience: number;\r\n    setMastery(roleID: string, mastery: boolean): void;\r\n    setExperience(roleID: string, experience: number): void;\r\n}\r\nclass RoleRow extends React.Component<JobRowProps> {\r\n    render() {\r\n        const {\r\n            roleID,\r\n            mastery,\r\n            experience\r\n        } = this.props;\r\n\r\n        return (\r\n            <tr>\r\n                <td>{roleID}</td>\r\n                <td>\r\n                    <label className=\"pt-control pt-checkbox\">\r\n                        <input type=\"checkbox\" checked={mastery} onChange={this._onSetMastery} />\r\n                        <span className=\"pt-control-indicator\"></span>\r\n                    </label>\r\n                </td>\r\n                <td>\r\n                    <NumericInput\r\n                        value={experience}\r\n                        clampValueOnBlur={true}\r\n                        min={0}\r\n                        onValueChange={this._onSetExperience}\r\n                    />\r\n                </td>\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    _onSetMastery(change: React.ChangeEvent<HTMLInputElement>) {\r\n        const checked = change.target.checked;\r\n        const {\r\n            roleID,\r\n            setMastery\r\n        } = this.props;\r\n        setMastery(roleID, checked);\r\n    }\r\n\r\n    @autobind()\r\n    private _onSetExperience(value: number) {\r\n        if (value < 0) {\r\n            value = 0;\r\n        }\r\n\r\n        const {\r\n            roleID,\r\n            setExperience\r\n        } = this.props;\r\n        setExperience(roleID, value);\r\n    }\r\n}","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\n\r\nimport {\r\n    Tabs,\r\n    Tab\r\n} from \"@blueprintjs/core\";\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\nimport RolesPage from \"./pages/Roles\";\r\nimport AptitudePage from \"./pages/Aptitudes\";\r\n\r\nexport interface DuplicantRolesPageProps {\r\n    duplicant: GameObjectModel;\r\n}\r\n\r\ntype Props = DuplicantRolesPageProps;\r\nclass DuplicantRolesPage extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n        return (\r\n            <div className=\"ui-duplicant-roles fill-parent\">\r\n                <Tabs className=\"fill-parent layout-horizontal\" vertical={true} renderActiveTabPanelOnly={true} id=\"DuplicantRolePages\">\r\n                    <Tab className=\"layout-item-fill\" id=\"roles\" title=\"Roles\" panel={<RolesPage duplicant={duplicant} />} />\r\n                    <Tab className=\"layout-item-fill\" id=\"aptitudes\" title=\"Aptitudes\" panel={<AptitudePage duplicant={duplicant} />} />\r\n                </Tabs>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default DuplicantRolesPage;","\r\n// TODO: move to oni-save-parser\r\nconst TRAITS: string[] = [\r\n    \"None\",\r\n    \"Stinky\",\r\n    \"Ellie\",\r\n    \"Joshua\",\r\n    \"Liam\",\r\n    \"CantResearch\",\r\n    \"CantBuild\",\r\n    \"CantCook\",\r\n    \"CantDig\",\r\n    \"Hemophobia\",\r\n    \"MedicalAid\",\r\n    \"ScaredyCat\",\r\n    \"MouthBreather\",\r\n    \"CalorieBurner\",\r\n    \"SmallBladder\",\r\n    \"Anemic\",\r\n    \"SlowLearner\",\r\n    \"NoodleArms\",\r\n    \"InteriorDecorator\",\r\n    \"Regeneration\",\r\n    \"DeeperDiversLungs\",\r\n    \"SunnyDisposition\",\r\n    \"RockCrusher\",\r\n    \"Uncultured\",\r\n    \"WeakImmuneSystem\",\r\n    \"IrritableBowel\",\r\n    \"Flatulence\",\r\n    \"Snorer\",\r\n    \"Narcolepsy\",\r\n    \"Twinkletoes\",\r\n    \"Greasemonkey\",\r\n    \"MoleHands\",\r\n    \"FastLearner\",\r\n    \"DiversLung\",\r\n    \"StrongArm\",\r\n    \"IronGut\",\r\n    \"StrongImmuneSystem\",\r\n    \"BedsideManner\",\r\n    \"Caring\",\r\n    \"Aggressive\",\r\n    \"UglyCrier\",\r\n    \"BingeEater\",\r\n    \"StressVomiter\",\r\n    \"EarlyBird\",\r\n    \"NightOwl\",\r\n    \"Claustrophobic\",\r\n    \"PrefersWarmer\",\r\n    \"PrefersColder\",\r\n    \"SensitiveFeet\",\r\n    \"Fashionable\",\r\n    \"Climacophobic\",\r\n    \"SolitarySleeper\",\r\n    \"Workaholic\"\r\n];\r\nexport default TRAITS;","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { MenuItem, Intent } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\nimport { MultiSelect, ItemRenderer, IItemRendererProps } from \"@blueprintjs/select\";\r\nconst TraitMultiSelect = MultiSelect.ofType<string>();\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\nimport TRAITS from \"./traits\";\r\nimport { AITraitsBehavior } from \"oni-save-parser\";\r\n\r\nexport interface DuplicantTraitsProps {\r\n    duplicant: GameObjectModel;\r\n};\r\n\r\n\r\ntype Props = DuplicantTraitsProps;\r\n@observer\r\nclass DuplicantTraits extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n\r\n        const traitsBehavior = duplicant.getBehavior(AITraitsBehavior);\r\n        if (!traitsBehavior) return <div>Error: Game object lacks a AITraitsBehavior.</div>;\r\n        const traits = traitsBehavior.templateData.TraitIds;\r\n\r\n        return (\r\n            <div className={`fill-parent ui-duplicant-traits`}>\r\n                <TraitMultiSelect\r\n                    className=\"fill-parent-width\"\r\n                    items={TRAITS}\r\n                    selectedItems={traits}\r\n                    onItemSelect={this._onTagSelected}\r\n                    itemPredicate={this._filterItem}\r\n                    itemRenderer={this._renderItem}\r\n                    tagRenderer={tag => tag}\r\n                    tagInputProps={{ onRemove: this._onTagRemoved }}\r\n                    noResults={<MenuItem disabled={true} text=\"No results.\" />}\r\n                    popoverProps={{ minimal: true }}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    @action.bound\r\n    private _onTagSelected(tag: string) {\r\n        const { duplicant } = this.props;\r\n        const traitsBehavior = duplicant.getBehavior(AITraitsBehavior);\r\n        if (!traitsBehavior) return;\r\n        const traits = traitsBehavior.templateData.TraitIds;\r\n\r\n        if (traits.indexOf(tag) !== -1) {\r\n            return;\r\n        }\r\n\r\n        traits.push(tag);\r\n    }\r\n\r\n    @autobind()\r\n    private _onTagRemoved(tag: string) {\r\n        const { duplicant } = this.props;\r\n        const traitsBehavior = duplicant.getBehavior(AITraitsBehavior);\r\n        if (!traitsBehavior) return;\r\n        const traits = traitsBehavior.templateData.TraitIds;\r\n\r\n        const index = traits.indexOf(tag);\r\n        if (index === -1) return;\r\n\r\n        traits.splice(index, 1);\r\n    }\r\n\r\n    private _filterItem(query: string, trait: string) {\r\n        return trait.toLowerCase().indexOf(query.toLowerCase()) !== -1;\r\n    }\r\n\r\n    @autobind()\r\n    private _renderItem(trait: string, itemProps: IItemRendererProps) {\r\n        const {\r\n            modifiers,\r\n            handleClick\r\n        } = itemProps;\r\n\r\n        if (!modifiers.matchesPredicate) {\r\n            return null;\r\n        }\r\n\r\n        let isSelected = false;\r\n        \r\n        // TODO: Ensure that mobx is caching this stuff, as this is called for every item.\r\n        const traitsBehavior = this.props.duplicant.getBehavior(AITraitsBehavior);\r\n        if (traitsBehavior) {\r\n            const traits = traitsBehavior.templateData.TraitIds;\r\n            isSelected = traits.indexOf(trait) !== -1;\r\n        }\r\n\r\n        return (\r\n            <MenuItem\r\n                active={modifiers.active}\r\n                icon={isSelected ? IconNames.TICK : IconNames.BLANK}\r\n                key={trait}\r\n                onClick={handleClick}\r\n                text={trait}\r\n                shouldDismissPopover={false}\r\n            />\r\n        );\r\n    };\r\n\r\n}\r\nexport default DuplicantTraits;\r\n","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { NumericInput } from \"@blueprintjs/core\";\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\nimport { AIAttributeLevelsBehavior } from \"oni-save-parser\";\r\n\r\nexport interface DuplicantSkillsProps {\r\n    duplicant: GameObjectModel;\r\n};\r\n\r\n\r\ntype Props = DuplicantSkillsProps;\r\n@observer\r\nclass DuplicantSkills extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n\r\n        const skillsBehavior = duplicant.getBehavior(AIAttributeLevelsBehavior);\r\n        if (!skillsBehavior) return <div>Error: Game object lacks a AIAttributeLevelsBehavior behavior.</div>;\r\n        const skills = skillsBehavior.templateData.saveLoadLevels;\r\n\r\n        const rows = skills.map(x => \r\n            <DuplicantSkillRow\r\n                key={x.attributeId}\r\n                id={x.attributeId}\r\n                level={x.level}\r\n                experience={x.experience}\r\n                onChangeLevel={this._onChangeLevel}\r\n                onChangeExperience={this._onChangeExperience}\r\n        />);\r\n\r\n        return (\r\n            <div className={`ui-duplicant-skills fill-parent container-scroll`}>\r\n                <table className=\"pt-html-table pt-html-table-striped\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Skill</th>\r\n                            <th>Level</th>\r\n                            <th>Experience</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {rows}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    @action.bound\r\n    private _onChangeLevel(id: string, level: number) {\r\n        const { duplicant } = this.props;\r\n        const skillsBehavior = duplicant.getBehavior(AIAttributeLevelsBehavior);\r\n        if (!skillsBehavior) return;\r\n        const skills = skillsBehavior.templateData.saveLoadLevels;\r\n        const skill = skills.find(x => x.attributeId === id);\r\n        if (!skill) return;\r\n        skill.level = level;\r\n    }\r\n\r\n    @action.bound\r\n    private _onChangeExperience(id: string, experience: number) {\r\n        const { duplicant } = this.props;\r\n        const skillsBehavior = duplicant.getBehavior(AIAttributeLevelsBehavior);\r\n        if (!skillsBehavior) return;\r\n        const skills = skillsBehavior.templateData.saveLoadLevels;\r\n        const skill = skills.find(x => x.attributeId === id);\r\n        if (!skill) return;\r\n        skill.experience = experience;\r\n    }\r\n}\r\nexport default DuplicantSkills;\r\n\r\n\r\ninterface DuplicantSkillRowProps {\r\n    id: string;\r\n    level: number;\r\n    experience: number;\r\n    onChangeLevel(id: string, level: number): void;\r\n    onChangeExperience(id: string, level: number): void;\r\n}\r\n\r\nclass DuplicantSkillRow extends React.Component<DuplicantSkillRowProps> {\r\n    render() {\r\n        const {\r\n            id,\r\n            level,\r\n            experience\r\n        } = this.props;\r\n\r\n        return (\r\n            <tr>\r\n                <td>{id}</td>\r\n                <td><NumericInput\r\n                    value={level}\r\n                    clampValueOnBlur={true}\r\n                    min={0}\r\n                    onValueChange={this._onLevelChange}\r\n                /></td>\r\n                <td><NumericInput\r\n                    value={experience}\r\n                    clampValueOnBlur={true}\r\n                    min={0}\r\n                    onValueChange={this._onExperienceChange}\r\n                /></td>\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onLevelChange(value: number) {\r\n        const {\r\n            id,\r\n            onChangeLevel\r\n        } = this.props;\r\n\r\n        value = Math.round(value);\r\n        if (value < 0 || isNaN(value)) {\r\n            value = 0;\r\n        }\r\n        \r\n        onChangeLevel(id, value);\r\n    }\r\n\r\n    @autobind()\r\n    private _onExperienceChange(value: number) {\r\n        const {\r\n            id,\r\n            onChangeExperience\r\n        } = this.props;\r\n\r\n        if (value < 0 || isNaN(value)) {\r\n            value = 0;\r\n        }\r\n\r\n        onChangeExperience(id, value);\r\n    }\r\n}\r\n","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { getAccessoryOfType, getIndexOfAccessoryType } from \"oni-save-parser\";\r\n\r\nimport { Button, MenuItem } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\nimport { Select, IItemRendererProps } from \"@blueprintjs/select\";\r\nconst StringSelect = Select.ofType<string>();\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\n\r\nimport { \r\n    ACCESSORIZER_EYE_GUIDS,\r\n    ACCESSORIZER_HAIR_GUIDS,\r\n    ACCESSORIZER_HEAD_GUIDS,\r\n    ACCESSORIZER_MOUTH_GUIDS,\r\n    ACCESSORIZER_BODY_GUIDS,\r\n    AccessorizerBehavior\r\n} from \"oni-save-parser\";\r\nimport { action } from \"mobx\";\r\n\r\n\r\nexport interface DuplicantAccessoryPageProps {\r\n    duplicant: GameObjectModel;\r\n};\r\n\r\ntype Props = DuplicantAccessoryPageProps;\r\n@observer\r\nclass DuplicantAccessoryPage extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n        const accessorizer = duplicant.getBehavior(AccessorizerBehavior);\r\n        if (!accessorizer) return <div>Error: No AccessorizerBehavior found</div>;\r\n        const accessories = accessorizer.templateData.accessories;\r\n\r\n        const eyesAccessory = getAccessoryOfType(accessories, \"eyes\");\r\n        const headAccessory = getAccessoryOfType(accessories, \"headshape\");\r\n        const hairAccessory = getAccessoryOfType(accessories, \"hair\");\r\n        const mouthAccessory = getAccessoryOfType(accessories, \"mouth\");\r\n        const bodyAccessory = getAccessoryOfType(accessories, \"body\");\r\n\r\n        const eyes = eyesAccessory ? eyesAccessory.guid.Guid : \"[Error: Accessory Not Found]\";\r\n        const head = headAccessory ? headAccessory.guid.Guid : \"[Error: Accessory Not Found]\";\r\n        const hair = hairAccessory ? hairAccessory.guid.Guid : \"[Error: Accessory Not Found]\";\r\n        const mouth = mouthAccessory ? mouthAccessory.guid.Guid : \"[Error: Accessory Not Found]\";\r\n        const body = bodyAccessory ? bodyAccessory.guid.Guid : \"[Error: Accessory Not Found]\";\r\n\r\n        return (\r\n            <div className={`ui-duplicant-accessories fill-parent layout-vertical container-scroll`}>\r\n                <AppearanceGroup name=\"Eyes\" value={eyes} accessories={ACCESSORIZER_EYE_GUIDS} onSet={this._setEyes}/>\r\n                <AppearanceGroup name=\"Head\" value={head} accessories={ACCESSORIZER_HEAD_GUIDS} onSet={this._setHead}/>\r\n                <AppearanceGroup name=\"Hair\" value={hair} accessories={ACCESSORIZER_HAIR_GUIDS} onSet={this._setHair}/>\r\n                <AppearanceGroup name=\"Mouth\" value={mouth} accessories={ACCESSORIZER_MOUTH_GUIDS} onSet={this._setMouth}/>\r\n                <AppearanceGroup name=\"Body\" value={body} accessories={ACCESSORIZER_BODY_GUIDS} onSet={this._setBody}/>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @action.bound\r\n    private _setEyes(value: string) {\r\n        const { duplicant } = this.props;\r\n        const accessorizer = duplicant.getBehavior(AccessorizerBehavior);\r\n        if (!accessorizer) return;\r\n        const accessories = accessorizer.templateData.accessories;\r\n        const index = getIndexOfAccessoryType(accessories, \"eyes\");\r\n        if (index == -1) return;\r\n        accessories[index].guid.Guid = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setHead(value: string) {\r\n        const { duplicant } = this.props;\r\n        const accessorizer = duplicant.getBehavior(AccessorizerBehavior);\r\n        if (!accessorizer) return;\r\n        const accessories = accessorizer.templateData.accessories;\r\n        const index = getIndexOfAccessoryType(accessories, \"headshape\");\r\n        if (index == -1) return;\r\n        accessories[index].guid.Guid = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setHair(value: string) {\r\n        const { duplicant } = this.props;\r\n        const accessorizer = duplicant.getBehavior(AccessorizerBehavior);\r\n        if (!accessorizer) return;\r\n        const accessories = accessorizer.templateData.accessories;\r\n        const index = getIndexOfAccessoryType(accessories, \"hair\");\r\n        if (index == -1) return;\r\n        accessories[index].guid.Guid = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setMouth(value: string) {\r\n        const { duplicant } = this.props;\r\n        const accessorizer = duplicant.getBehavior(AccessorizerBehavior);\r\n        if (!accessorizer) return;\r\n        const accessories = accessorizer.templateData.accessories;\r\n        const index = getIndexOfAccessoryType(accessories, \"mouth\");\r\n        if (index == -1) return;\r\n        accessories[index].guid.Guid = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setBody(value: string) {\r\n        const { duplicant } = this.props;\r\n        const accessorizer = duplicant.getBehavior(AccessorizerBehavior);\r\n        if (!accessorizer) return;\r\n        const accessories = accessorizer.templateData.accessories;\r\n        const index = getIndexOfAccessoryType(accessories, \"body\");\r\n        if (index == -1) return;\r\n        accessories[index].guid.Guid = value;\r\n    }\r\n}\r\nexport default DuplicantAccessoryPage;\r\n\r\n\r\ninterface AppearanceGroupProps {\r\n    name: string;\r\n    accessories: string[];\r\n    value: string | null;\r\n    onSet(accessoryID: string): void\r\n}\r\nclass AppearanceGroup extends React.Component<AppearanceGroupProps> {\r\n    render() {\r\n        const {\r\n            name,\r\n            accessories,\r\n            value\r\n        } = this.props;\r\n        return (\r\n            <div className=\"pt-form-group pt-inline\">\r\n            <label className=\"pt-label\">\r\n                {name}\r\n            </label>\r\n            <div className=\"pt-form-content\">\r\n                <StringSelect\r\n                    items={accessories}\r\n                    itemRenderer={this._renderItem}\r\n                    onItemSelect={this._onSet}\r\n                    filterable={false}\r\n                    resetOnClose={true}\r\n                    resetOnSelect={true}\r\n                    popoverProps={{ minimal: true }}\r\n                >\r\n                    <Button rightIcon=\"caret-down\" text={value || \"[Accessory not Found]\"} />\r\n                </StringSelect>\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _renderItem(accessoryID: string, itemProps: IItemRendererProps) {\r\n        const {\r\n            modifiers,\r\n            handleClick\r\n        } = itemProps;\r\n\r\n        if (!modifiers.matchesPredicate) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <MenuItem\r\n                active={modifiers.active}\r\n                key={accessoryID}\r\n                onClick={handleClick}\r\n                text={accessoryID}\r\n            />\r\n        );\r\n    };\r\n\r\n    @autobind()\r\n    private _onSet(accessoryID: string) {\r\n        const { onSet } = this.props;\r\n        onSet(accessoryID);\r\n    }\r\n}\r\n","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { HEALTH_STATE_NAMES, MINION_IDENTITY_GENDERS, MinionGender, HealthBehavior, MinionIdentityBehavior } from \"oni-save-parser\";\r\n\r\nimport { Button, MenuItem, NumericInput } from \"@blueprintjs/core\";\r\nimport { Select, IItemRendererProps } from \"@blueprintjs/select\";\r\n\r\nconst GenderSelect = Select.ofType<MinionGender>();\r\nconst StringSelect = Select.ofType<string>();\r\nconst NumberSelect = Select.ofType<number>();\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\n\r\nexport interface DuplicantGeneralProps {\r\n    duplicant: GameObjectModel;\r\n};\r\n\r\n\r\n// We only care about > 0\r\nconst MIN_SCALE = Number.EPSILON;\r\n\r\ntype Props = DuplicantGeneralProps;\r\n@observer\r\nclass DuplicantGeneralPage extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n\r\n        const scaleX = duplicant.scale.x;\r\n        const scaleY = duplicant.scale.y;\r\n\r\n        const healthBehavior = duplicant.getBehavior(HealthBehavior);\r\n        if (!healthBehavior) return <div>Error: HealthBehavior not found</div>;\r\n        const healthState = healthBehavior.templateData.State;\r\n\r\n        const identityBehavior = duplicant.getBehavior(MinionIdentityBehavior);\r\n        if (!identityBehavior) return <div>Error: MinionIdentityBehavior not found</div>;\r\n        const {\r\n            gender,\r\n            voiceIdx\r\n        } = identityBehavior.templateData;\r\n\r\n        let healthStateStr: string;\r\n        if (healthState != null && healthState >= 0 && healthState < HEALTH_STATE_NAMES.length) {\r\n            healthStateStr = HEALTH_STATE_NAMES[healthState];\r\n        }\r\n        else {\r\n            healthStateStr = `<Unknown Health State ${healthState}>`;\r\n        }\r\n\r\n        return (\r\n            <div className=\"fill-parent\">\r\n                <div className=\"pt-form-group pt-inline\">\r\n                    <label className=\"pt-label\">\r\n                        Gender\r\n                    </label>\r\n                    <div className=\"pt-form-content\">\r\n                        <GenderSelect\r\n                            // TODO: Export from oni-save-parser\r\n                            items={MINION_IDENTITY_GENDERS}\r\n                            itemRenderer={this._renderItem}\r\n                            onItemSelect={this._onGenderSelected}\r\n                            filterable={false}\r\n                            resetOnClose={true}\r\n                            resetOnSelect={true}\r\n                            popoverProps={{ minimal: true }}\r\n                        >\r\n                            <Button rightIcon=\"caret-down\" text={gender || \"MALE\"} />\r\n                        </GenderSelect>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group pt-inline\">\r\n                    <label className=\"pt-label\">\r\n                        Voice\r\n                    </label>\r\n                    <div className=\"pt-form-content\">\r\n                        <NumberSelect\r\n                            // TODO: get from oni-save-parser\r\n                            items={[0, 1, 2, 3, 4]}\r\n                            itemRenderer={this._renderItem}\r\n                            onItemSelect={this._onVoiceSelected}\r\n                            filterable={false}\r\n                            resetOnClose={true}\r\n                            resetOnSelect={true}\r\n                            popoverProps={{ minimal: true }}\r\n                        >\r\n                            <Button rightIcon=\"caret-down\" text={`Voice ${voiceIdx || 0}`} />\r\n                        </NumberSelect>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group pt-inline\">\r\n                    <label className=\"pt-label\">\r\n                        Scale\r\n                    </label>\r\n                    <div className=\"pt-form-content\">\r\n                        <div className=\"pt-input-group\">\r\n                            <span>Horizontal</span>\r\n                            <NumericInput min={MIN_SCALE} clampValueOnBlur={true} value={scaleX} onValueChange={this._onScaleX} />\r\n                        </div>\r\n                        <div className=\"pt-input-group\">\r\n                            <span>Vertical</span>\r\n                            <NumericInput min={MIN_SCALE} clampValueOnBlur={true} value={scaleY} onValueChange={this._onScaleY} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group pt-inline\">\r\n                    <label className=\"pt-label\">\r\n                        Health State\r\n                    </label>\r\n                    <div className=\"pt-form-content\">\r\n                        <StringSelect\r\n                            items={HEALTH_STATE_NAMES}\r\n                            itemRenderer={this._renderItem}\r\n                            onItemSelect={this._onHealthStateSelected}\r\n                            filterable={false}\r\n                            resetOnClose={true}\r\n                            resetOnSelect={true}\r\n                            popoverProps={{ minimal: true }}\r\n                        >\r\n                            <Button rightIcon=\"caret-down\" text={healthStateStr} />\r\n                        </StringSelect>\r\n                        <div className=\"pt-form-helper-text\">The duplicant's current overall health condition.</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _renderItem(effect: string | number, itemProps: IItemRendererProps) {\r\n        const {\r\n            modifiers,\r\n            handleClick\r\n        } = itemProps;\r\n\r\n        if (!modifiers.matchesPredicate) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <MenuItem\r\n                active={modifiers.active}\r\n                key={effect}\r\n                onClick={handleClick}\r\n                text={effect}\r\n            />\r\n        );\r\n    };\r\n\r\n    @action.bound\r\n    private _onHealthStateSelected(healthState: string) {\r\n        const { duplicant } = this.props;\r\n\r\n        const healthBehavior = duplicant.getBehavior(HealthBehavior);\r\n        if (!healthBehavior) return;\r\n\r\n        // Need to get the enum value of the display text.\r\n        const stateIndex = HEALTH_STATE_NAMES.indexOf(healthState);\r\n        if (stateIndex === -1) {\r\n            return;\r\n        }\r\n\r\n        healthBehavior.templateData.State = stateIndex;\r\n    }\r\n\r\n    @action.bound\r\n    private _onGenderSelected(gender: MinionGender) {\r\n        const { duplicant } = this.props;\r\n        const identityBehavior = duplicant.getBehavior(MinionIdentityBehavior);\r\n        if (!identityBehavior) return;\r\n        identityBehavior.templateData.gender = gender;\r\n        identityBehavior.templateData.genderStringKey = gender;\r\n    }\r\n\r\n    @action.bound\r\n    private _onVoiceSelected(voiceIdx: number) {\r\n        const { duplicant } = this.props;\r\n        const identityBehavior = duplicant.getBehavior(MinionIdentityBehavior);\r\n        if (!identityBehavior) return;\r\n        identityBehavior.templateData.voiceIdx = voiceIdx;\r\n    }\r\n\r\n    @action.bound\r\n    private _onScaleX(value: number) {\r\n        const { duplicant } = this.props;\r\n\r\n        // Negative numbers dont render; probably because sprite normal faces\r\n        //  away from game camera.\r\n        if (value === 0 || isNaN(value)) {\r\n            value = 1;\r\n        }\r\n\r\n        duplicant.scale.x = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _onScaleY(value: number) {\r\n        const { duplicant } = this.props;\r\n\r\n        // Negative numbers dont render; probably because sprite normal faces\r\n        //  away from game camera.\r\n        if (value === 0 || isNaN(value)) {\r\n            value = 1;\r\n        }\r\n\r\n        duplicant.scale.y = value;\r\n    }\r\n}\r\nexport default DuplicantGeneralPage;\r\n","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { MinionIdentityBehavior } from \"oni-save-parser\";\r\n\r\nimport {\r\n    EditableText,\r\n    Tabs,\r\n    Tab,\r\n    NonIdealState\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\nimport { error, FAILURE_TYPE } from \"@/logging\";\r\n\r\n\r\nexport interface DuplicantEditorProps {\r\n    className?: string;\r\n    duplicant: GameObjectModel;\r\n};\r\n\r\n\r\nimport GeneralPage from \"../../pages/General\";\r\nimport AppearancePage from \"../../pages/Appearance\";\r\nimport SkillsPage from \"../../pages/Skills\";\r\nimport TraitsPage from \"../../pages/Traits\";\r\nimport JobsPage from \"../../pages/Jobs\";\r\nimport EffectsPage from \"../../pages/Effects\";\r\n\r\n\r\ntype Props = DuplicantEditorProps;\r\ninterface State {\r\n    rename: string | null;\r\n}\r\nclass DuplicantEditor extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            rename: null\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            className,\r\n            duplicant,\r\n        } = this.props;\r\n\r\n        const {\r\n            rename\r\n        } = this.state;\r\n\r\n        const identityBehavior = duplicant.getBehavior(MinionIdentityBehavior);\r\n\r\n        if (!identityBehavior) {\r\n            error(\"Duplicant identity behavior missing\", FAILURE_TYPE.MISSING_BEHAVIOR);\r\n            return (\r\n                <NonIdealState visual={IconNames.ERROR}>\r\n                    Duplicant has no identity behavior.\r\n                </NonIdealState>\r\n            )\r\n        }\r\n        \r\n        const name = rename || identityBehavior.templateData.name;\r\n        \r\n        return (\r\n            <div className={`ui-duplicant-editor layout-vertical ${className}`}>\r\n                <div className=\"layout-item\">\r\n                    <h1 className=\"ui-title\">\r\n                        <EditableText\r\n                            value={name}\r\n                            onChange={this._onNameChange}\r\n                            onConfirm={this._onRename}\r\n                        />\r\n                    </h1> <span className=\"pt-text-muted\">(click to edit name)</span>\r\n                </div>\r\n                <div className=\"layout-item-fill\">\r\n                    <Tabs id=\"DuplicantEditCategories\" className=\"ui-category-tabs fill-parent layout-vertical\" renderActiveTabPanelOnly={true}>\r\n                        <Tab className=\"layout-item-fill\" id=\"general\" title=\"General\" panel={<GeneralPage duplicant={duplicant} />} />\r\n                        <Tab className=\"layout-item-fill\" id=\"appearance\" title=\"Appearance\" panel={<AppearancePage duplicant={duplicant} />} />\r\n                        <Tab className=\"layout-item-fill\" id=\"skills\" title=\"Skills\" panel={<SkillsPage duplicant={duplicant}/>} />\r\n                        <Tab className=\"layout-item-fill\" id=\"traits\" title=\"Traits\" panel={<TraitsPage duplicant={duplicant}/>} />\r\n                        <Tab className=\"layout-item-fill\" id=\"jobs\" title=\"Jobs\" panel={<JobsPage duplicant={duplicant}/>} />\r\n                        <Tab className=\"layout-item-fill\" id=\"effects\" title=\"Effects\" panel={<EffectsPage duplicant={duplicant}/>} />\r\n                    </Tabs>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onNameChange(str: string) {\r\n        this.setState(s => ({\r\n            ...s,\r\n            rename: str\r\n        }));\r\n    }\r\n\r\n    @action.bound\r\n    private _onRename() {\r\n        const { duplicant } = this.props;\r\n        const name = this.state.rename;\r\n        if (!name || name === \"\") return;\r\n        const identityBehavior = duplicant.getBehavior(MinionIdentityBehavior);\r\n        if (!identityBehavior) return;\r\n\r\n        identityBehavior.templateData.name = name;\r\n        this.setState(s => ({\r\n            ...s,\r\n            rename: null\r\n        }));\r\n    }\r\n}\r\nexport default DuplicantEditor;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\\n */\\n.ui-duplicant-list {\\n  background-color: #bfccd6;\\n  height: 340px; }\\n  .ui-duplicant-list .ui-duplicant-portrait {\\n    margin: 10px;\\n    cursor: pointer; }\\n  .ui-duplicant-list .ui-duplicant-portrait.pt-active {\\n    background-color: #f29d49; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ui-duplicant-portrait {\\n  width: 150px;\\n  height: 150px; }\\n  .ui-duplicant-portrait .ui-duplicant-name {\\n    text-align: center; }\\n  .ui-duplicant-portrait .ui-duplicant-role {\\n    text-align: center; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\nimport { Card } from \"@blueprintjs/core\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { error, FAILURE_TYPE } from \"@/logging\";\r\nimport { MinionIdentityBehavior, MinionResumeBehavior } from \"oni-save-parser\";\r\n\r\nimport \"./style.scss\";\r\n\r\n\r\nexport interface DuplicantPortraitProps {\r\n    className?: string;\r\n    duplicant: GameObjectModel;\r\n    onClick?(duplicant: GameObjectModel): void;\r\n}\r\n\r\n\r\ntype Props = DuplicantPortraitProps;\r\n@observer\r\nclass DuplicantPortrait extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            className,\r\n            duplicant\r\n        } = this.props;\r\n\r\n        const identity = duplicant.getBehavior(MinionIdentityBehavior);\r\n        const resume = duplicant.getBehavior(MinionResumeBehavior);\r\n\r\n        let outerClassName = `ui-duplicant-portrait ${className}`;\r\n\r\n        let name: string;\r\n        let role: string;\r\n\r\n        if (identity) {\r\n            name = identity.templateData.name;\r\n        }\r\n        else {\r\n            error(\"Duplicant not found or identity behavior missing.\", FAILURE_TYPE.MISSING_BEHAVIOR);\r\n            name = \"[IDENTITY MISSING]\";\r\n        }\r\n\r\n        if (resume && resume.templateData.currentRole) {\r\n            role = resume.templateData.currentRole;\r\n        }\r\n        else {\r\n            error(\"resume behavior missing.\", FAILURE_TYPE.MISSING_BEHAVIOR);\r\n            role = \"[RESUME MISSING]\";\r\n        }\r\n\r\n        return (\r\n            <Card className={outerClassName} interactive={true} onClick={this._onClick}>\r\n                <h5 className=\"ui-duplicant-name\">{name}</h5>\r\n                {/* TODO render a picture.  Plenty of data in identity to do so.  Also see Accessorizer */}\r\n                <div className=\"ui-duplicant-role\">{role}</div>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onClick() {\r\n        const {\r\n            duplicant,\r\n            onClick\r\n        } = this.props;\r\n        if (onClick) onClick(duplicant);\r\n    }\r\n}\r\nexport default DuplicantPortrait;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\nimport DuplicantPortrait from \"../DuplicantPortrait\";\r\n\r\nimport \"./style.scss\";\r\n\r\nexport interface DuplicantsListProps {\r\n    className?: string;\r\n    duplicants: GameObjectModel[];\r\n    selectedDuplicant?: number | GameObjectModel | null;\r\n    onDuplicantClick?(duplicant: GameObjectModel): void;\r\n}\r\n\r\ntype Props = DuplicantsListProps;\r\n@observer\r\nclass DuplicantsList extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            className,\r\n            duplicants\r\n        } = this.props;\r\n\r\n        let selectedDuplicant = this.props.selectedDuplicant;\r\n        if (typeof selectedDuplicant === \"number\") {\r\n            selectedDuplicant = duplicants.find(x => x.kPrefabID === selectedDuplicant);\r\n        }\r\n\r\n        const elements = duplicants.map(x => <DuplicantPortrait key={x.kPrefabID} className={x === selectedDuplicant ? \"pt-active\" : \"\"} duplicant={x} onClick={this._onDuplicantClick} />);\r\n\r\n        return (\r\n            <div className={`${className || ''} ui-duplicant-list`}>\r\n                <div className={`fill-parent layout-horizontal layout-wrap container-scroll`}>\r\n                    {elements}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onDuplicantClick(duplicant: GameObjectModel) {\r\n        const {\r\n            onDuplicantClick\r\n        } = this.props;\r\n\r\n        if (onDuplicantClick) {\r\n            onDuplicantClick(duplicant);\r\n        }\r\n    }\r\n}\r\nexport default DuplicantsList;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { NonIdealState } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport { SaveEditorProps, withSaveEditor, GameObjectModel } from \"@/services/save-editor\";\r\n\r\n\r\nimport DuplicantsList from \"./components/DuplicantsList\";\r\nimport DuplicantEditor from \"./components/DuplicantEditor\";\r\n\r\n\r\ntype Props = SaveEditorProps;\r\ninterface State {\r\n    selectedDuplicant: GameObjectModel | null;\r\n}\r\nclass DuplicantsPage extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            selectedDuplicant: null\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            selectedDuplicant\r\n        } = this.state;\r\n        const {\r\n            saveEditor\r\n        } = this.props;\r\n\r\n        const duplicants = saveEditor.getGameObjects(\"Minion\");\r\n\r\n        let content: React.ReactFragment;\r\n        if (selectedDuplicant != null) {\r\n            content = <DuplicantEditor className=\"fill-parent\" duplicant={selectedDuplicant}/>\r\n        }\r\n        else {\r\n            content = (\r\n                <NonIdealState visual={IconNames.MUGSHOT}>\r\n                    Select a duplicant to edit\r\n                </NonIdealState>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"ui-page ui-page-duplicants fill-parent layout-vertical\">\r\n                <DuplicantsList className=\"layout-item\" duplicants={duplicants} selectedDuplicant={selectedDuplicant} onDuplicantClick={this._onDuplicantSelected} />\r\n                <div className=\"layout-item-fill\">\r\n                    {content}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onDuplicantSelected(duplicant: GameObjectModel) {\r\n        this.setState(s => ({\r\n            ...s,\r\n            selectedDuplicant: duplicant\r\n        }));\r\n    }\r\n}\r\n\r\nexport default withSaveEditor(DuplicantsPage);\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n\r\nexport { pageGraph } from \"./page-graph\";","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ui-page-general {\\n  padding: 15px; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { NumericInput } from \"@blueprintjs/core\";\r\nimport { GameObjectBehavior } from \"oni-save-parser\";\r\n\r\nimport { SaveEditorProps, withSaveEditor, GameObjectBehaviorModel } from \"@/services/save-editor\";\r\n\r\nimport \"./style.scss\";\r\n\r\ntype Props = SaveEditorProps;\r\nclass GeneralPage extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            saveEditor\r\n        } = this.props;\r\n\r\n        const clockBehavior = this._getClockBehavior();\r\n        if (!clockBehavior) return <div>Error: No GameClock behavior present in SaveGame object.</div>;\r\n        const cycle = clockBehavior.templateData.cycle;\r\n\r\n        const immigrationBehavior = this._getImmigrationBehavior();\r\n        if (!immigrationBehavior) return <div>Error: No Immigration behavior present in SaveGame object.</div>;\r\n        const {\r\n            timeBeforeSpawn,\r\n            bImmigrantAvailable\r\n        } = immigrationBehavior.templateData;\r\n\r\n        return (\r\n            <div className=\"ui-page ui-page-general fill-parent layout-vertical\">\r\n                <div className=\"pt-form-group\">\r\n                    <label className=\"pt-label\">\r\n                        <h5>World Time</h5>\r\n                    </label>\r\n                    <div className=\"pt-form-content\">\r\n                        <div className=\"pt-input-group\">\r\n                            <span>Cycles</span>\r\n                            <NumericInput min={0} value={cycle} onValueChange={this._onCycleChange} clampValueOnBlur={true} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group\">\r\n                    <label className=\"pt-label\">\r\n                        <h5>Duplicant Spawner</h5>\r\n                    </label>\r\n                    <div className=\"pt-form-content\">\r\n                        <div className=\"pt-input-group\">\r\n                            <span>Next Spawn</span>\r\n                            <NumericInput min={0} clampValueOnBlur={true} value={timeBeforeSpawn} onValueChange={this._nextSpawnChange} />\r\n                        </div>\r\n                        <div className=\"pt-input-group\">\r\n                            <label className=\"pt-control pt-checkbox\">\r\n                                <input type=\"checkbox\" checked={bImmigrantAvailable} onChange={this._spawnReadyChange} />\r\n                                <span className=\"pt-control-indicator\"></span>\r\n                                Spawn Ready\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @action.bound\r\n    private _onCycleChange(cycle: number) {\r\n        const behavior = this._getClockBehavior();\r\n        if (!behavior) return;\r\n        behavior.templateData.cycle = cycle;\r\n    }\r\n\r\n    @action.bound\r\n    private _nextSpawnChange(time: number) {\r\n        const behavior = this._getImmigrationBehavior();\r\n        if (!behavior) return;\r\n        behavior.templateData.timeBeforeSpawn = time;\r\n    }\r\n\r\n    @action.bound\r\n    private _spawnReadyChange(change: React.ChangeEvent<HTMLInputElement>) {\r\n        const behavior = this._getImmigrationBehavior();\r\n        if (!behavior) return;\r\n        behavior.templateData.bImmigrantAvailable = change.target.checked;\r\n    }\r\n\r\n    private _getClockBehavior(): GameObjectBehaviorModel<GameClockBehavior> | undefined {\r\n        const { saveEditor } = this.props;\r\n        const saveGame = saveEditor.getGameObjects(\"SaveGame\")[0];\r\n        if (!saveGame) return undefined;\r\n\r\n        return saveGame.getBehavior(\"GameClock\");\r\n    }\r\n\r\n    private _getImmigrationBehavior(): GameObjectBehaviorModel<ImmigrationBehavior> | undefined {\r\n        const { saveEditor } = this.props;\r\n        const saveGame = saveEditor.getGameObjects(\"SaveGame\")[0];\r\n        if (!saveGame) return undefined;\r\n\r\n        return saveGame.getBehavior(\"Immigration\");\r\n    }\r\n}\r\n\r\nexport default withSaveEditor(GeneralPage);\r\n\r\n// TODO: move to oni-save-parser\r\ninterface GameClockBehavior extends GameObjectBehavior {\r\n    name: \"GameClock\";\r\n    parsedData: {\r\n        cycle: number;\r\n    }\r\n}\r\ninterface ImmigrationBehavior extends GameObjectBehavior {\r\n    name: \"Immigration\";\r\n    parsedData: {\r\n        timeBeforeSpawn: number;\r\n        bImmigrantAvailable: boolean;\r\n    }\r\n}","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport { SiteGraph } from \"@/site-graph\";\r\n\r\nimport General from \"./pages/General\";\r\nimport Duplicants, { pageGraph as duplicantsPageGraph } from \"./pages/Duplicants\";\r\nimport Geysers from \"./pages/Geysers\";\r\n\r\n\r\nexport const pageGraph: SiteGraph = [\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/general\",\r\n        name: \"General\",\r\n        component: General\r\n    },\r\n    {\r\n        // TODO: Update components to take params\r\n        type: \"page\",\r\n        path: \"/editor/duplicants\", // \"/editor/duplicants/:prefabId\",\r\n        name: \"Duplicants\",\r\n        component: Duplicants,\r\n        //children: duplicantsPageGraph\r\n    },\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/geysers\",\r\n        name: \"Geysers\",\r\n        component: Geysers\r\n    }\r\n];\r\n","\r\nimport * as React from \"react\";\r\n\r\nimport {\r\n    NonIdealState,\r\n    Text\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\n\r\nexport interface ErrorPageProps {\r\n    error: Error;\r\n}\r\ntype Props = ErrorPageProps;\r\nclass ErrorPage extends React.Component<Props> {\r\n    render() {\r\n        let {\r\n            error\r\n        } = this.props;\r\n\r\n        if (!error) {\r\n            error = new Error(\"Well, this is weird... The Error page loaded, but there is no error.\");\r\n            error.stack = \"I really don't know what to do about this...\"\r\n        }\r\n\r\n        return (\r\n            <NonIdealState visual={IconNames.ERROR} description=\"An Error Occurred\">\r\n                <Text>{error.message}</Text>\r\n                <div>\r\n                    <code>{error.stack}</code>\r\n                </div>\r\n            </NonIdealState>\r\n        );\r\n    }\r\n}\r\nexport default ErrorPage;","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport * as React from \"react\";\r\n\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport {\r\n    NonIdealState,\r\n    Spinner,\r\n    Text\r\n} from \"@blueprintjs/core\";\r\n\r\nimport { \r\n    SaveEditorProps,\r\n    withSaveEditor\r\n} from \"@/services/save-editor\";\r\n\r\n@observer\r\nclass LoadingSaveFile extends React.Component<SaveEditorProps> {\r\n    render() {\r\n        const currentStep = this.props.saveEditor.saveLoadParseStep;\r\n        return (\r\n            <NonIdealState>\r\n                <Text>Loading File</Text>\r\n                <div>\r\n                    <Spinner large={true}/>\r\n                </div>\r\n                <Text>{currentStep}</Text>\r\n            </NonIdealState>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withSaveEditor(LoadingSaveFile);\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport {\r\n    NonIdealState,\r\n    Button,\r\n    Intent\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\n\r\nimport { SaveEditorProps, withSaveEditor } from \"@/services/save-editor\";\r\n\r\n\r\nconst saveDescription = \"Oxygen Not Included saves can be found in your documents folder under\";\r\n// TODO: Show correct path based on user's OS.\r\nconst savePath = \"Klei/OxygenNotIncluded/save_files\";\r\n\r\ntype Props = SaveEditorProps;\r\n@observer\r\nclass NoSaveLoadedPageComponent extends React.Component<Props> {\r\n    private _input: HTMLInputElement | null = null;\r\n    \r\n    render() {\r\n        return (\r\n            <NonIdealState\r\n                visual={IconNames.FLOPPY_DISK}\r\n                action={\r\n                    <Button intent={Intent.PRIMARY} onClick={this._onLoadClick}>Load a .sav file</Button>\r\n                }\r\n                description=\"No save has been loaded.\"\r\n            >\r\n                <div>{saveDescription} <code>{savePath}</code></div>\r\n                <input\r\n                    ref={el => this._input = el}\r\n                    style={{display: \"none\"}}\r\n                    className=\"pt-button pt-intent-primary\"\r\n                    type=\"file\"\r\n                    accept=\".sav\"\r\n                    onChange={this._onLoadFile}\r\n                />\r\n            </NonIdealState>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onLoadClick() {\r\n        if (!this._input) return;\r\n        this._input.click();\r\n    }\r\n\r\n    @autobind()\r\n    private _onLoadFile(change: React.ChangeEvent<HTMLInputElement>) {\r\n        const files = change.target.files;\r\n        if (!files || files.length === 0) return;\r\n        this.props.saveEditor.load(files[0]);\r\n    }\r\n}\r\nexport default withSaveEditor(NoSaveLoadedPageComponent);\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport {\r\n    Card,\r\n    Elevation,\r\n    Menu,\r\n    MenuDivider\r\n} from \"@blueprintjs/core\";\r\n\r\nimport { withSaveEditor, SaveEditorProps } from \"@/services/save-editor\";\r\n\r\nimport NoSaveLoadedPage from \"./components/NoSaveLoaded\";\r\nimport LoadingSaveFilePage from \"./components/LoadingSaveFile\";\r\n\r\n\r\nimport ErrorPage from \"../Error\";\r\n\r\ntype Props = SaveEditorProps;\r\n@observer\r\nclass SaveEditorPageComponent extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            saveEditor: {\r\n                loadError,\r\n                isSaveLoading,\r\n                isSaveLoaded\r\n            },\r\n            children\r\n        } = this.props;\r\n\r\n        let rootComponent: React.ReactChild;\r\n\r\n        if (loadError) {\r\n            // Show error screen\r\n            return <ErrorPage error={loadError} />;\r\n        }\r\n        else if (isSaveLoading) {\r\n            return <LoadingSaveFilePage />;\r\n        }\r\n        else if (!isSaveLoaded) {\r\n            return <NoSaveLoadedPage />\r\n        }\r\n\r\n        return (\r\n            <div className=\"ui-page ui-page-saveeditor fill-parent\">\r\n                {children}\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withSaveEditor(SaveEditorPageComponent);","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n\r\nexport { pageGraph } from \"./page-graph\";\r\n","\r\nimport { SitePage } from \"@/site-graph\";\r\n\r\nimport App from \"../components/App\";\r\nimport SaveEditor, { pageGraph as saveEditorPages } from \"../pages/SaveEditor\";\r\nimport ChangeLog from \"../pages/Changelog\";\r\n\r\nconst siteGraph: SitePage = {\r\n    type: \"page\",\r\n    name: \"Duplicity\",\r\n    path: \"/\",\r\n    component: App,\r\n    children: [\r\n        {\r\n            // Save Editor\r\n            type: \"page\",\r\n            path: \"/editor\",\r\n            name: \"Save Editor\",\r\n            component: SaveEditor,\r\n            navMenuCollapse: true,\r\n            children: saveEditorPages\r\n        },\r\n        {\r\n            type: \"page\",\r\n            path: \"/changelog\",\r\n            name: \"Duplicity Changelog\",\r\n            component: ChangeLog\r\n        }\r\n    ]\r\n};\r\n\r\nexport default siteGraph;\r\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ui-page-404 .ui-title {\\n  font-size: 20pt; }\\n\\n.ui-page-404 .ui-title-secondary {\\n  font-size: 12pt; }\\n\\n.ui-page-404 .ui-body {\\n  margin-top: 8px; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\nimport * as React from \"react\";\r\n\r\nimport {\r\n    NonIdealState,\r\n    Text\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport \"./style.scss\";\r\n\r\nclass DuplicantsPage extends React.Component {\r\n    render() {\r\n        return (\r\n            <NonIdealState className=\"ui-page ui-page-404\" visual={IconNames.ERROR}>\r\n                <div>\r\n                    <div className=\"ui-title\">I don't know how you got here...</div>\r\n                    <div className=\"ui-title-secondary\">But weasels were probably involved.</div>\r\n                </div>\r\n                <div className=\"ui-body\">\r\n                    <div>No idea what this page is supposed to be, sorry.</div>\r\n                    <div>Try choosing something else to edit.</div>\r\n                </div>\r\n            </NonIdealState>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DuplicantsPage","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { Switch, Route, RouteComponentProps, withRouter } from \"react-router-dom\";\r\n\r\nimport Page404 from \"../../pages/404\";\r\n\r\nimport { SiteGraph, SitePage, SiteGraphEntry, SitePath } from \"../interfaces\";\r\n\r\nexport interface SiteSwitchProps {\r\n    siteGraph: SiteGraph;\r\n}\r\n\r\ntype Props = SiteSwitchProps & RouteComponentProps<any>;\r\nclass SiteSwitch extends React.Component<Props> {\r\n    render() {\r\n        const { siteGraph, children } = this.props;\r\n        const routes = this._renderRoutes(siteGraph);\r\n        return (\r\n            <Switch>\r\n                {routes}\r\n                {children}\r\n                <Route component={Page404}/>\r\n            </Switch>\r\n        );\r\n    }\r\n\r\n    private _renderRoutes(entries: SiteGraphEntry[]): React.ReactChild[] {\r\n        return collectRouteEntries(entries).map(x => {\r\n            switch(x.type) {\r\n                case \"page\":\r\n                    return this._renderPage(x);\r\n                case \"path\":\r\n                    return this._renderPath(x);\r\n            }\r\n        });\r\n    }\r\n\r\n    private _renderPage(page: SitePage): React.ReactChild {\r\n        let children: React.ReactChild | undefined = undefined;\r\n        if (page.children) {\r\n            children = <SiteSwitchWithRouter siteGraph={page.children}/>\r\n        }\r\n        return (\r\n            <Route\r\n                key={page.path}\r\n                exact={!children}\r\n                path={page.path}\r\n                render={props => <page.component {...props} children={children} />}\r\n            />\r\n        );\r\n    }\r\n\r\n    private _renderPath(path: SitePath): React.ReactChild {\r\n        // TODO: Good place to support index path.\r\n        //  If index enabled, first item is <Redirect exact path={path.path} to={path.indexPath}/>\r\n        return (\r\n            <React.Fragment key={path.path}>\r\n                {this._renderRoutes(path.children)}\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nfunction collectRouteEntries(graph: SiteGraph): (SitePage | SitePath)[] {\r\n    const elements: (SitePage | SitePath)[] = [];\r\n    for (let entry of graph) {\r\n        switch(entry.type) {\r\n            case \"page\":\r\n            case \"path\":\r\n                elements.push(entry);\r\n                break;\r\n            case \"group\":\r\n                elements.push(...collectRouteEntries(entry.children));\r\n        }\r\n    }\r\n    return elements;\r\n}\r\n\r\nconst SiteSwitchWithRouter = withRouter(SiteSwitch);\r\nexport default SiteSwitchWithRouter;\r\n\r\n/*\r\nError:\r\nA type predicate's type must be assignable to its parameter's type.\r\n  Type 'SitePage' is not assignable to type 'T'.\r\n*/\r\nfunction isSitePage(x: SiteGraphEntry): x is SitePage {\r\n    return x.type === \"page\";\r\n}\r\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"019079b3f4d0c80f18f6.worker.js\");\n};","\r\nimport { GameObjectBehaviorModel } from \"./interfaces\";\r\nimport { GameObjectBehavior } from \"oni-save-parser\";\r\nimport { typedKeys } from \"utils\";\r\nimport { observable, toJS } from \"mobx\";\r\n\r\nexport class GameObjectBehaviorModelImpl implements GameObjectBehaviorModel {\r\n    get name(): string {\r\n        return this._behavior.name;\r\n    }\r\n\r\n    @observable.deep\r\n    templateData: any | null;\r\n\r\n    constructor(private _behavior: GameObjectBehavior) {\r\n        this.templateData = _behavior.parsedData || null;\r\n    }\r\n\r\n    syncChanges() {\r\n        this._behavior.parsedData = toJS(this.templateData, {\r\n            exportMapsAsObjects: false\r\n        });\r\n    }\r\n}","\r\nimport { observable, toJS } from \"mobx\";\r\n// import { createTransformer } from \"mobx-utils\";\r\n\r\nimport {\r\n    GameObject,\r\n    Vector3,\r\n    KPrefabIDBehavior,\r\n    BehaviorName,\r\n    GameObjectBehavior\r\n} from \"oni-save-parser\";\r\n\r\nimport { GameObjectModel, GameObjectBehaviorModel } from \"./interfaces\";\r\n\r\nimport { GameObjectBehaviorModelImpl } from \"./game-object-behavior\";\r\n\r\nexport class GameObjectModelImpl implements GameObjectModel {\r\n    readonly type: string;\r\n\r\n    readonly kPrefabID: number;\r\n\r\n    @observable.deep\r\n    position: Vector3;\r\n\r\n    @observable.deep\r\n    scale: Vector3;\r\n\r\n    private _gameObject: GameObject;\r\n\r\n    private _behaviors = new Map<string, GameObjectBehaviorModelImpl[]>();\r\n\r\n    constructor(type: string, gameObject: GameObject) {\r\n        this.type = type;\r\n        this._gameObject = gameObject;\r\n\r\n        this.position = gameObject.position;\r\n        this.scale = gameObject.scale;\r\n\r\n        for (let behavior of gameObject.behaviors) {\r\n            let array = this._behaviors.get(behavior.name);\r\n            if (!array) {\r\n                array = [];\r\n                this._behaviors.set(behavior.name, array);\r\n            }\r\n            array.push(new GameObjectBehaviorModelImpl(behavior));\r\n        }\r\n\r\n        const idBehavior = this.getBehavior(KPrefabIDBehavior);\r\n        if (idBehavior) {\r\n            this.kPrefabID = idBehavior.templateData.InstanceID;\r\n        }\r\n        else {\r\n            this.kPrefabID = NaN;\r\n        }\r\n    }\r\n\r\n    // TODO: Look at why this is generating new objects every time.  Might be because the source object isnt observable?\r\n    /*\r\n    getBehavior: GameObjectModel[\"getBehavior\"] = createTransformer((behaviorName: string) => {\r\n        const behavior = this._gameObject.behaviors.find(x => x.name === behaviorName);\r\n        if (!behavior) return undefined;\r\n        return new GameObjectBehaviorModelImpl(behavior);\r\n    });\r\n    */\r\n    getBehavior<TBehavior extends GameObjectBehavior>(behaviorName: BehaviorName<TBehavior>): GameObjectBehaviorModel<TBehavior> | undefined {\r\n        const entries = this._behaviors.get(behaviorName);\r\n        if (entries) return entries[0] as any;\r\n        return undefined;\r\n    }\r\n\r\n    /*\r\n    getAllBehaviors: GameObjectModel[\"getAllBehaviors\"] = createTransformer((behaviorName: string) => {\r\n        return this._gameObject.behaviors.filter(x => x.name === behaviorName).map(x => new GameObjectBehaviorModelImpl(x));\r\n    });\r\n    */\r\n\r\n    getAllBehaviors<TBehavior extends GameObjectBehavior>(behaviorName: BehaviorName<TBehavior>): GameObjectBehaviorModel<TBehavior>[] {\r\n        return this._behaviors.get(behaviorName) || [] as any;\r\n    }\r\n\r\n    syncChanges() {\r\n        // Sigh...\r\n        this._gameObject.position.x = this.position.x;\r\n        this._gameObject.position.y = this.position.y;\r\n        this._gameObject.position.z = this.position.z;\r\n\r\n        this._gameObject.scale.x = this.scale.x;\r\n        this._gameObject.scale.y = this.scale.y;\r\n        this._gameObject.scale.z = this.scale.z;\r\n\r\n        for (let [_, values] of this._behaviors) {\r\n            values.forEach(x => x.syncChanges());\r\n        }\r\n    }\r\n}\r\n","\r\nexport function typedKeys<T>(obj: T): (keyof T)[] {\r\n    return Object.keys(obj) as any;\r\n}\r\n","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { Route, Redirect, Switch, RouteComponentProps, withRouter } from \"react-router\";\r\n\r\nimport {\r\n    Dialog,\r\n    Spinner,\r\n    NonIdealState\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport DevTools from \"mobx-react-devtools\";\r\n\r\nimport { SaveEditorProps, withSaveEditor } from \"@/services/save-editor\";\r\n\r\nimport SiteSwitch from \"@/site-graph/components/SiteSwitch\";\r\nimport siteRoot from \"@/site-graph/root\";\r\n\r\nimport AppNavBar from \"../AppNavBar\";\r\nimport AppNavMenu from \"../AppNavMenu\";\r\nimport SavingDialog from \"../SavingDialog\";\r\n\r\n\r\ntype Props = SaveEditorProps & RouteComponentProps<any>;\r\n@observer\r\nclass AppComponent extends React.Component<Props> {\r\n    private _input: HTMLInputElement | null = null;\r\n\r\n    render() {\r\n        const {\r\n            saveEditor: {\r\n                isSaveSaving,\r\n                saveName\r\n            }\r\n        } = this.props;\r\n\r\n        return (\r\n            <div className=\"ui-app-root pt-app pt-dark fill-parent layout-vertical\">\r\n                <AppNavBar className=\"layout-item\" />\r\n                <div className=\"layout-item-fill layout-horizontal\">\r\n                    <AppNavMenu className=\"layout-item\" siteGraph={siteRoot.children!} />\r\n                    <div className=\"layout-item-fill\">\r\n                        <SiteSwitch siteGraph={siteRoot.children!}>\r\n                            { /* TODO: Use an index path concept for site graph. */}\r\n                            <Redirect exact from=\"/\" to=\"/editor\" />\r\n                        </SiteSwitch>\r\n                    </div>\r\n                    {process.env.NODE_ENV === \"development\" ? <DevTools /> : undefined}\r\n                </div>\r\n                <Dialog isOpen={isSaveSaving} title=\"Saving File\" icon={IconNames.SAVED} isCloseButtonShown={false}>\r\n                    <SavingDialog />\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n// Need withRouter to force update.  Yes, we need one on either side of ../App.tsx\r\nexport default withRouter(withSaveEditor(AppComponent));\r\n","\r\nimport * as React from \"react\";\r\n\r\nimport { hot } from \"react-hot-loader\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport App from \"./components/App\";\r\n\r\n// react-router wants to wrap every element we have in a new element.  Because composability!\r\n//  without wrapping this in a <Route/> from the outside, the PureComponent hot will not see\r\n//  any changes, and the broken context system is ignored.\r\n//  Every other library out their uses an external context store similar to the new react context\r\n//  pattern, but router just blames everyone else for honoring shouldComponentUpdate and says wontfix.\r\n// Might be better off removing route altogether and staying a SPA.\r\nexport default withRouter(hot(module)(App) as any);\r\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"html, body, #root {\\n  height: 100%;\\n  width: 100%; }\\n\\nbody {\\n  margin: 0;\\n  padding: 0; }\\n\\n.fill-parent, .fill-parent-width, .fill-parent-height {\\n  /* Fill parent to our outsides.*/\\n  box-sizing: border-box; }\\n\\n.fill-parent, .fill-parent-width {\\n  width: 100%; }\\n\\n.fill-parent, .fill-parent-height {\\n  height: 100%; }\\n\\n.layout-wrap {\\n  flex-wrap: wrap; }\\n\\n/*\\r\\n============================================================================\\r\\nHorizontal and Vertical Layouts\\r\\n============================================================================\\r\\n*/\\n/* Container for items that can fill up the available space, and optionally be constrained by it. */\\n.layout-vertical {\\n  display: flex;\\n  flex-direction: column; }\\n\\n.layout-horizontal {\\n  display: flex;\\n  flex-direction: row; }\\n\\n.layout-item, .layout-item-fill {\\n  box-sizing: border-box; }\\n\\n.layout-vertical > div, .layout-horizontal > div, .layout-vertical > .layout-item, .layout-horizontal > .layout-item {\\n  flex: none; }\\n\\n.layout-vertical > .layout-item-fill, .layout-horizontal > .layout-item-fill {\\n  flex: 1 1 auto; }\\n\\n.layout-vertical > .layout-item-constrain, .layout-horizontal > .layout-item-constrain {\\n  flex: 0 1 auto; }\\n\\n.layout-vertical > .layout-item-fill, .layout-vertical > .layout-item-constrain {\\n  /* Flex sets min-height to auto, we need to allow it to shrink down */\\n  min-height: 0;\\n  /*\\r\\n    Maintain some sort of inner css specified (vs actual?) value for height, so that \\r\\n    child elements can use height percentages and fill their parent (us)\\r\\n    */\\n  height: 100%; }\\n\\n.layout-horizontal > .layout-item-fill, .layout-horizontal > .layout-item-constrain {\\n  min-width: 0;\\n  width: 100%; }\\n\\n/*\\r\\n============================================================================\\r\\nContent Containers\\r\\n============================================================================\\r\\n*/\\n.container-scroll {\\n  overflow: auto; }\\n\\n/*\\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\\n */\\n.ui-app-root {\\n  background-color: #182026; }\\n\\n.ui-page-duplicants .ui-duplicant-editor {\\n  box-sizing: border-box;\\n  padding: 5px; }\\n  .ui-page-duplicants .ui-duplicant-editor .ui-title {\\n    display: inline-block;\\n    width: auto; }\\n\\n.ui-page-duplicants .ui-duplicant-skills .pt-html-table {\\n  width: 100%;\\n  max-height: 100%; }\\n\\n.ui-page-duplicants .ui-duplicant-effects .pt-html-table {\\n  width: 100%;\\n  max-height: 100%; }\\n\\n.pt-multi-select-popover .pt-menu, .pt-select-popover .pt-menu {\\n  max-width: 400px;\\n  max-height: 300px;\\n  overflow: auto; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./root.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./root.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./root.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\n import \"@blueprintjs/core/lib/css/blueprint.css\";\r\n import \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\r\n\r\nimport \"./root.scss\";\r\n","\r\nimport * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport { Provider } from \"mobx-react\";\r\n\r\nimport { HashRouter } from \"react-router-dom\";\r\n\r\nimport \"./css\";\r\nimport App from \"./app\";\r\nimport { createStores } from \"./store\";\r\n\r\nconst rootEl = document.getElementById(\"root\");\r\n\r\nReactDOM.render(\r\n    <Provider {...createStores()}>\r\n        <HashRouter>\r\n            <App />\r\n        </HashRouter>\r\n    </Provider>,\r\n    rootEl\r\n);\r\n"],"sourceRoot":""}