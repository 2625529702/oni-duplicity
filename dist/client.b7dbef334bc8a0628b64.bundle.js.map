{"version":3,"sources":["webpack:///./src/services/save-editor/index.tsx","webpack:///./src/logging/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Effects/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Traits/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Skills/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Appearance/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/General/index.ts","webpack:///./src/services/save-editor/save-editor.ts","webpack:///./src/components/App/index.ts","webpack:///./src/services/save-editor/store.ts","webpack:///./src/store.ts","webpack:///./src/components/SavingDialog/component.tsx","webpack:///./src/components/SavingDialog/index.ts","webpack:///./src/components/AppNavMenu/style.scss","webpack:///./src/components/AppNavMenu/style.scss?3c5e","webpack:///./src/components/ActiveAwareLink/component.tsx","webpack:///./src/components/ActiveAwareLink/index.ts","webpack:///./src/components/AppNavMenu/component.tsx","webpack:///./src/components/AppNavMenu/index.ts","webpack:///./src/components/AppNavBar/style.scss","webpack:///./src/components/AppNavBar/style.scss?a2b2","webpack:///./src/components/AppNavBar/component.tsx","webpack:///./src/components/AppNavBar/index.ts","webpack:///./src/pages/Changelog/style.scss","webpack:///./src/pages/Changelog/style.scss?b0de","webpack:///./CHANGELOG.md","webpack:///./src/pages/Changelog/component.tsx","webpack:///./src/pages/Changelog/index.ts","webpack:///./src/pages/SaveEditor/pages/Geysers/style.scss","webpack:///./src/pages/SaveEditor/pages/Geysers/style.scss?64aa","webpack:///./src/pages/SaveEditor/pages/Geysers/components/GeyserEditor/style.scss","webpack:///./src/pages/SaveEditor/pages/Geysers/components/GeyserEditor/style.scss?b9fe","webpack:///./src/pages/SaveEditor/pages/Geysers/components/GeyserEditor/component.tsx","webpack:///./src/pages/SaveEditor/pages/Geysers/components/GeyserEditor/index.ts","webpack:///./src/pages/SaveEditor/components/GameObjectGrid/component.tsx","webpack:///./src/pages/SaveEditor/components/GameObjectGrid/index.ts","webpack:///./src/pages/SaveEditor/pages/Geysers/component.tsx","webpack:///./src/pages/SaveEditor/pages/Geysers/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/page-graph.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Effects/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/pages/Aptitudes/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/pages/Aptitudes/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/pages/Roles/style.scss","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/pages/Roles/style.scss?49aa","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/pages/Roles/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/pages/Roles/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Jobs/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Traits/traits.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Traits/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Skills/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/Appearance/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/pages/General/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantsList/style.scss","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantsList/style.scss?6de7","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantPortrait/style.scss","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantPortrait/style.scss?8cac","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantPortrait/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantPortrait/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantsList/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantsList/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/index.ts","webpack:///./src/pages/SaveEditor/pages/General/style.scss","webpack:///./src/pages/SaveEditor/pages/General/style.scss?e5a9","webpack:///./src/pages/SaveEditor/pages/General/component.tsx","webpack:///./src/pages/SaveEditor/pages/General/index.ts","webpack:///./src/pages/SaveEditor/page-graph.ts","webpack:///./src/pages/Error/component.tsx","webpack:///./src/pages/Error/index.ts","webpack:///./src/pages/SaveEditor/components/LoadingSaveFile/component.tsx","webpack:///./src/pages/SaveEditor/components/LoadingSaveFile/index.ts","webpack:///./src/pages/SaveEditor/components/NoSaveLoaded/component.tsx","webpack:///./src/pages/SaveEditor/components/NoSaveLoaded/index.ts","webpack:///./src/pages/SaveEditor/component.tsx","webpack:///./src/pages/SaveEditor/index.ts","webpack:///./src/site-graph/root.ts","webpack:///./src/pages/404/style.scss","webpack:///./src/pages/404/style.scss?de76","webpack:///./src/pages/404/component.tsx","webpack:///./src/pages/404/index.ts","webpack:///./src/site-graph/components/SiteSwitch.tsx","webpack:///./src/services/save-editor/save-loader.worker.ts","webpack:///./src/services/save-editor/game-object-behavior.ts","webpack:///./src/services/save-editor/game-object.ts","webpack:///./src/components/App/component.tsx","webpack:///./src/app.tsx","webpack:///./src/css/root.scss","webpack:///./src/css/root.scss?3097","webpack:///./src/css/index.ts","webpack:///./src/index.tsx"],"names":["React","__importStar","__webpack_require__","mobx_react_1","save_editor_1","withSaveEditor","WrappedComponent","WithSaveEditor","Component","[object Object]","createElement","Object","assign","this","props","key","code","eval","__decorate","inject","exports","SaveEditorImpl","failureType","ACTION_INVALID","SAVEFILE_CORRUPT","STATE_CORRUPT","MISSING_BEHAVIOR","warning","message","console","warn","error","freeze","seal","FAILURE_TYPE","component_1","__importDefault","default","mobx_1","file_saver_1","logging_1","game_object_1","save_loader_worker_1","worker","saveName","isSaveLoading","isSaveLoaded","isSaveSaving","loadError","saveLoadParseStep","_saveGame","_gameObjects","Map","load","flow","file","clear","name","data","readFile","saveGame","_parseSave","gameObjects","objectSet","models","map","x","GameObjectModelImpl","set","e","save","_","value","forEach","syncChanges","_writeSave","blob","Blob","saveAs","withExtension","objectModelArrays","Array","from","values","concat","type","get","buffer","Promise","accept","reject","onerror","onmessage","event","cmd","command","postMessage","reader","FileReader","onload","result","readAsArrayBuffer","ext","endsWith","observable","action","createStore","mobx","configure","enforceActions","store_1","createStores","saveEditor","core_1","SavingDialog","NonIdealState","Spinner","large","observer","module","push","i","content","options","hmr","transform","insertInto","undefined","locals","react_router_1","react_router_dom_1","core_decorators_1","ActiveAwareLink","_a","to","location","children","onClick","className","exact","staticContext","other","__rest","pathName","pathname","match","matchPartialPath","toString","Link","_onClick","preventDefault","startsWith","length","autobind","withRouter","ActiveAwareLink_1","AppNavMenu","siteGraph","links","_renderLinks","entries","String","fragments","previousWasGroup","entry","rendered","_renderEntry","MenuDivider","isArray","menuName","navMenu","unshift","path","navMenuCollapse","primaryLink","throwUnknownSiteGraphType","Error","icons_1","AppNavBar","_input","Navbar","NavbarGroup","NavbarHeading","EditableText","onConfirm","_onRename","disabled","placeholder","Icon","icon","IconNames","EDIT","iconSize","title","align","Alignment","RIGHT","Button","UPLOAD","_onLoadClick","FLOPPY_DISK","_onSaveClick","ref","el","style","display","onChange","_onLoadFile","click","change","files","target","renameSave","react_markdown_1","changelog","ChangelogPage","source","oni_save_parser_1","select_1","StringSelect","Select","ofType","GeyserEditor","gameObject","behavior","getBehavior","GeyserBehavior","config","templateData","configuration","materialType","getGeyserTypeName","typeId","hash","items","GEYSER_TYPE_NAMES","itemRenderer","_renderGeyserTypeItem","itemPredicate","_filterItem","onItemSelect","_onGeyserTypeSelect","filterable","popoverProps","minimal","rightIcon","text","Slider","rateRoll","min","max","stepSize","labelRenderer","_percentageRenderer","_setRateRoll","iterationLengthRoll","_setIterationLengthRoll","iterationPercentRoll","_setIterationPercentRoll","yearLengthRoll","_setYearLengthRoll","yearPercentRoll","_setYearPercentRoll","query","indexOf","typeName","getGeyserTypeHash","itemProps","modifiers","handleClick","matchesPredicate","MenuItem","active","toFixed","bound","GameObjectGrid","renderItem","elements","GameObjectGridElement","kPrefabID","_onItemClick","bind","GameObjectGrid_1","GeyserEditor_1","GeysersPage","super","state","selectedGeyser","geysers","filter","isGeyser","visual","SEARCH_AROUND","_renderGeyserGridItem","_onGeyserSelected","geyserBehavior","position","y","Observer","Card","interactive","setState","s","General_1","Appearance_1","Effects_1","Jobs_1","Skills_1","Traits_1","pageGraph","component","DuplicantEffects","duplicant","effectsBehavior","AIEffectsBehavior","rows","saveLoadEffects","DuplicantEffectRow","id","timeRemaining","onChangeTime","_onEffectChangeTime","onRemove","_onEffectRemoved","AI_EFFECT_IDS","_renderItem","_onEffectSelected","resetOnClose","resetOnSelect","item","toLowerCase","effect","effectID","effects","findIndex","find","index","splice","NumericInput","clampValueOnBlur","onValueChange","_onTimeRemainingChange","SMALL_CROSS","_onRemove","isNaN","SKIP_APTITUDES","Set","AptitudePage","MinionResumeBehavior","WARNING_SIGN","APTITUDE_NAMES","has","AptitudeRow","aptitudeID","interested","hasAptitude","setInterest","_setInterested","AptitudeByRoleGroup","aptitudes","APTITUDE_NAME_HASHES","aptitude","checked","_onInterestChange","DuplicantRolesPage","resumeBehavior","currentRole","targetRole","ExperienceByRoleID","MasteryByRoleID","knownRoles","experiencePair","experience","masteryPair","m","mastery","RoleRow","roleID","setMastery","_setMastery","setExperience","_setExperience","_onCurrentRoleSelected","_onTargetRoleSelected","_onSetMastery","_onSetExperience","Roles_1","Aptitudes_1","Tabs","vertical","renderActiveTabPanelOnly","Tab","panel","TRAITS","TraitMultiSelect","MultiSelect","traits_1","DuplicantTraits","traitsBehavior","AITraitsBehavior","traits","TraitIds","selectedItems","_onTagSelected","tagRenderer","tag","tagInputProps","_onTagRemoved","noResults","trait","isSelected","TICK","BLANK","shouldDismissPopover","DuplicantSkills","skillsBehavior","AIAttributeLevelsBehavior","saveLoadLevels","DuplicantSkillRow","attributeId","level","onChangeLevel","_onChangeLevel","onChangeExperience","_onChangeExperience","skill","_onLevelChange","_onExperienceChange","Math","round","oni_save_parser_2","DuplicantAccessoryPage","accessorizer","AccessorizerBehavior","accessories","eyesAccessory","getAccessoryOfType","headAccessory","hairAccessory","mouthAccessory","bodyAccessory","eyes","guid","Guid","head","hair","mouth","body","AppearanceGroup","ACCESSORIZER_EYE_GUIDS","onSet","_setEyes","ACCESSORIZER_HEAD_GUIDS","_setHead","ACCESSORIZER_HAIR_GUIDS","_setHair","ACCESSORIZER_MOUTH_GUIDS","_setMouth","ACCESSORIZER_BODY_GUIDS","_setBody","getIndexOfAccessoryType","_onSet","accessoryID","GenderSelect","NumberSelect","MIN_SCALE","Number","EPSILON","DuplicantGeneralPage","scaleX","scale","scaleY","healthBehavior","HealthBehavior","healthState","State","identityBehavior","MinionIdentityBehavior","gender","voiceIdx","healthStateStr","HEALTH_STATE_NAMES","MINION_IDENTITY_GENDERS","_onGenderSelected","_onVoiceSelected","_onScaleX","_onScaleY","_onHealthStateSelected","stateIndex","genderStringKey","DuplicantEditor","rename","ERROR","_onNameChange","str","DuplicantPortrait","identity","resume","role","outerClassName","DuplicantPortrait_1","DuplicantsList","duplicants","selectedDuplicant","_onDuplicantClick","onDuplicantClick","DuplicantsList_1","DuplicantEditor_1","DuplicantsPage","getGameObjects","MUGSHOT","_onDuplicantSelected","page_graph_1","GeneralPage","clockBehavior","_getClockBehavior","cycle","immigrationBehavior","_getImmigrationBehavior","timeBeforeSpawn","bImmigrantAvailable","_onCycleChange","_nextSpawnChange","_spawnReadyChange","time","Duplicants_1","Geysers_1","ErrorPage","stack","description","Text","LoadingSaveFile","currentStep","saveDescription","savePath","NoSaveLoadedPageComponent","intent","Intent","PRIMARY","NoSaveLoaded_1","LoadingSaveFile_1","Error_1","SaveEditorPageComponent","App_1","SaveEditor_1","Changelog_1","_404_1","SiteSwitch","routes","_renderRoutes","Switch","Route","collectRouteEntries","_renderPage","_renderPath","page","SiteSwitchWithRouter","render","Fragment","graph","Worker","p","GameObjectBehaviorModelImpl","_behavior","toJS","exportMapsAsObjects","deep","game_object_behavior_1","_behaviors","_gameObject","behaviors","array","idBehavior","KPrefabIDBehavior","InstanceID","NaN","behaviorName","z","mobx_react_devtools_1","SiteSwitch_1","root_1","AppNavBar_1","AppNavMenu_1","SavingDialog_1","AppComponent","Redirect","Dialog","isOpen","SAVED","isCloseButtonShown","react_hot_loader_1","hot","ReactDOM","app_1","rootEl","document","getElementById","Provider","HashRouter"],"mappings":"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","file":"client.b7dbef334bc8a0628b64.bundle.js","sourcesContent":["\r\nimport * as React from \"react\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport { SaveEditor } from \"./interfaces\";\r\n\r\nexport * from \"./interfaces\";\r\n\r\nexport { SaveEditorImpl } from \"./save-editor\";\r\n\r\nexport interface SaveEditorProps {\r\n    saveEditor: SaveEditor;\r\n}\r\n\r\ntype Omit<T, K extends keyof T> = T extends any ? Pick<T, Exclude<keyof T, K>> : never;\r\nexport function withSaveEditor<TProps extends SaveEditorProps>(WrappedComponent: React.ComponentClass<TProps>): React.ComponentClass<Omit<TProps, \"saveEditor\">> {\r\n    @inject(\"saveEditor\")\r\n    class WithSaveEditor extends React.Component<Omit<TProps, \"saveEditor\">> {\r\n        render() {\r\n            return (\r\n                <WrappedComponent {...this.props as any} />\r\n            );\r\n        }\r\n\r\n        private _setObserver() {\r\n\r\n        }\r\n    };\r\n    return WithSaveEditor;\r\n}\r\n","\r\nconst failureType = {\r\n    ACTION_INVALID: \"action-invalid\" as \"action-invalid\",\r\n    SAVEFILE_CORRUPT: \"savefile-corrupt\" as \"savefile-corrupt\",\r\n    STATE_CORRUPT: \"state-corrupt\" as \"state-corrupt\",\r\n    MISSING_BEHAVIOR: \"missing-behavior\" as \"missing-behavior\"\r\n};\r\nObject.freeze(failureType);\r\nObject.seal(failureType);\r\n\r\nexport type FailureType = (typeof failureType)[keyof typeof failureType];\r\nexport const FAILURE_TYPE: Readonly<typeof failureType> = failureType;\r\n\r\n\r\nexport function warning(message: string, failureType?: FailureType) {\r\n    // TODO: Log to user console.\r\n    console.warn(`(${failureType}):`, message);\r\n}\r\n\r\nexport function error(message: string, failureType?: FailureType) {\r\n    // TODO: Log to user console.\r\n    console.error(`(${failureType}):`, message);\r\n}","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","import { observable, action, flow } from \"mobx\";\r\n\r\nimport { saveAs } from \"file-saver\";\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { typedKeys } from \"@/utils\";\r\nimport { error } from \"@/logging\";\r\n\r\nimport { SaveEditor, GameObjectModel } from \"./interfaces\";\r\nimport { GameObjectModelImpl } from \"./game-object\";\r\n\r\nimport SaveLoadWorker from \"worker-loader!./save-loader.worker\";\r\nimport {\r\n  LoadCommandData,\r\n  SaveCommandData,\r\n  SaveLoaderEvents\r\n} from \"./save-loader.worker\";\r\nconst worker = new SaveLoadWorker();\r\n\r\nexport class SaveEditorImpl implements SaveEditor {\r\n  @observable saveName: string | null = null;\r\n\r\n  @observable isSaveLoading: boolean = false;\r\n\r\n  @observable isSaveLoaded: boolean = false;\r\n\r\n  @observable isSaveSaving: boolean = false;\r\n\r\n  @observable loadError: Error | null = null;\r\n\r\n  @observable saveLoadParseStep: string | null = null;\r\n\r\n  private _saveGame: SaveGame | null = null;\r\n\r\n  /**\r\n   * Map of game object types to GameObjectModels in index order.\r\n   */\r\n  private _gameObjects = new Map<string, GameObjectModelImpl[]>();\r\n\r\n  get gameObjects(): GameObjectModel[] {\r\n    const objectModelArrays = Array.from(this._gameObjects.values());\r\n    return ([] as GameObjectModel[]).concat(...objectModelArrays);\r\n  }\r\n\r\n  load: SaveEditor[\"load\"] = flow(function*(this: SaveEditorImpl, file: File) {\r\n    this.isSaveLoaded = false;\r\n    this.isSaveLoading = true;\r\n    this._gameObjects.clear();\r\n    this.saveName = file.name;\r\n    try {\r\n      const data = yield readFile(file);\r\n      const saveGame: SaveGame = yield this._parseSave(data);\r\n      this._saveGame = saveGame;\r\n      const { gameObjects } = saveGame;\r\n      for (let objectSet of gameObjects) {\r\n        const models = objectSet.gameObjects.map(\r\n          x => new GameObjectModelImpl(objectSet.name, x)\r\n        );\r\n        this._gameObjects.set(objectSet.name, models);\r\n      }\r\n      this.isSaveLoaded = true;\r\n    } catch (e) {\r\n      error(\"Failed to load file: \" + e.message);\r\n      this.loadError = e;\r\n    } finally {\r\n      this.isSaveLoading = false;\r\n    }\r\n  });\r\n\r\n  @action\r\n  renameSave(name: string) {\r\n    if (!this.isSaveLoaded) return;\r\n    if (name == null || name === \"\") return;\r\n    this.saveName = name;\r\n  }\r\n\r\n  save: SaveEditor[\"save\"] = flow(function*(this: SaveEditorImpl) {\r\n    if (!this._saveGame) return;\r\n    this.isSaveSaving = true;\r\n    try {\r\n      for (let [_, value] of this._gameObjects) {\r\n        value.forEach(x => x.syncChanges());\r\n      }\r\n      const data = yield this._writeSave(this._saveGame);\r\n      const blob = new Blob([data]);\r\n\r\n      saveAs(blob, withExtension(this.saveName || \"my-file\", \".sav\"));\r\n    } catch (e) {\r\n      error(\"Failed to save file: \" + e.message);\r\n      this.loadError = e;\r\n    } finally {\r\n      this.isSaveSaving = false;\r\n    }\r\n  });\r\n\r\n  // TODO: Look at why this is generating new objects every time.  Might be because the source object isnt observable?\r\n  // getGameObjects: SaveEditor[\"getGameObjects\"] = createTransformer((type: string) => ((this._saveGame && this._saveGame.body.gameObjects[type]) || []).map(x => new GameObjectModelImpl(type, x)));\r\n  getGameObjects(type: string): GameObjectModel[] {\r\n    return this._gameObjects.get(type) || [];\r\n  }\r\n\r\n  private _parseSave(buffer: ArrayBuffer): Promise<SaveGame> {\r\n    return new Promise<SaveGame>((accept, reject) => {\r\n      worker.onerror = (e: ErrorEvent) => {\r\n        reject(e.error);\r\n      };\r\n      worker.onmessage = (e: MessageEvent) => {\r\n        const event = e.data as SaveLoaderEvents;\r\n        switch (event.type) {\r\n          case \"loaded\": {\r\n            worker.onmessage = null;\r\n            const { error, saveGame } = event;\r\n            if (error) reject(error);\r\n            else accept(saveGame!);\r\n            return;\r\n          }\r\n        }\r\n      };\r\n\r\n      const cmd: LoadCommandData = {\r\n        command: \"load\",\r\n        buffer: buffer\r\n      };\r\n      worker.postMessage(cmd);\r\n    });\r\n  }\r\n\r\n  private _writeSave(saveGame: SaveGame): Promise<ArrayBuffer> {\r\n    return new Promise<ArrayBuffer>((accept, reject) => {\r\n      worker.onerror = (e: ErrorEvent) => {\r\n        reject(e.error);\r\n      };\r\n      worker.onmessage = (e: MessageEvent) => {\r\n        const event = e.data as SaveLoaderEvents;\r\n        switch (event.type) {\r\n          case \"saved\": {\r\n            worker.onmessage = null;\r\n            const { error, buffer } = event;\r\n            if (error) reject(error);\r\n            else accept(buffer!);\r\n            return;\r\n          }\r\n        }\r\n      };\r\n\r\n      const cmd: SaveCommandData = {\r\n        command: \"save\",\r\n        save: saveGame\r\n      };\r\n      worker.postMessage(cmd);\r\n    });\r\n  }\r\n}\r\n\r\nfunction readFile(file: File): Promise<ArrayBuffer> {\r\n  const reader = new FileReader();\r\n  return new Promise<ArrayBuffer>((accept, reject) => {\r\n    reader.onload = () => {\r\n      accept(reader.result);\r\n    };\r\n    reader.onerror = () => {\r\n      reject(reader.error);\r\n    };\r\n    reader.readAsArrayBuffer(file);\r\n  });\r\n}\r\n\r\nfunction withExtension(name: string, ext: string): string {\r\n  if (name.endsWith(ext)) return name;\r\n  return name + ext;\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport { SaveEditor } from \"./interfaces\";\r\nimport { SaveEditorImpl } from \"./save-editor\";\r\n\r\nexport function createStore(): SaveEditor {\r\n    return new SaveEditorImpl();\r\n}","\r\nimport * as mobx from \"mobx\";\r\nmobx.configure({\r\n    enforceActions: true\r\n});\r\n\r\nimport { createStore as createSaveEditorStore } from \"./services/save-editor/store\";\r\n\r\nexport function createStores() {\r\n    return {\r\n        saveEditor: createSaveEditorStore()\r\n    };\r\n}\r\n","\r\nimport * as React from \"react\";\r\n\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport { NonIdealState, Spinner } from \"@blueprintjs/core\";\r\n\r\nimport { SaveEditorProps, withSaveEditor } from \"@/services/save-editor\";\r\n\r\ntype Props = SaveEditorProps;\r\n@observer\r\nclass SavingDialog extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            saveEditor: {\r\n                saveName,\r\n                saveLoadParseStep\r\n            }\r\n        } = this.props;\r\n        return (\r\n            <NonIdealState>\r\n                <div>\r\n                    <Spinner large={true} />\r\n                </div>\r\n                <div>\r\n                    Saving <code>{saveName}</code>\r\n                </div>\r\n                <div>{saveLoadParseStep}</div>\r\n            </NonIdealState>\r\n        );\r\n    }\r\n}\r\nexport default withSaveEditor(SavingDialog);","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\\n */\\n.ui-nav-menu {\\n  padding: 15px;\\n  background-color: #394b59; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\nimport * as React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Link, LinkProps } from \"react-router-dom\"\r\nimport { autobind } from \"core-decorators\";\r\n\r\nexport interface ActiveAwareLinkProps extends LinkProps {\r\n    exact?: boolean;\r\n}\r\ntype Props = ActiveAwareLinkProps & RouteComponentProps<{}>;\r\nclass ActiveAwareLink extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            to,\r\n            location,\r\n            children,\r\n            onClick,\r\n            className,\r\n            exact,\r\n\r\n            // Need to strip this out of passed props\r\n            staticContext,\r\n            ...other\r\n        } = this.props\r\n        const pathName = location.pathname;\r\n        let match: boolean;\r\n        \r\n        if (exact) match = to === pathName;\r\n        else match = matchPartialPath(pathName, to.toString());\r\n\r\n        if (match) {\r\n            return <span className={`pt-active pt-intent-primary ${className || \"\"}`}>{children}</span>;\r\n        }\r\n\r\n        return <Link to={to} className={className || \"\"} {...other} onClick={this._onClick}>{children}</Link>;\r\n    }\r\n\r\n    @autobind()\r\n    private _onClick(event: React.MouseEvent<HTMLAnchorElement>) {\r\n        const {\r\n            exact,\r\n            location,\r\n            to,\r\n            onClick\r\n        } = this.props;\r\n        const pathName = location.pathname;\r\n\r\n        let match: boolean;\r\n        if (exact) match = to === pathName;\r\n        else match = matchPartialPath(pathName, to.toString());\r\n\r\n        if (match) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if (onClick) {\r\n            onClick(event);\r\n        }\r\n    }\r\n}\r\nexport default withRouter(ActiveAwareLink);\r\n\r\nfunction matchPartialPath(pathName: string, to: string): boolean {\r\n    if (pathName === to) return true;\r\n\r\n    if (!pathName.startsWith(to)) return false;\r\n\r\n    // Need to make sure we matched up to a path seperator.\r\n    if (pathName[to.length] !== '/') return false;\r\n    return true;\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\n\r\nimport {\r\n    MenuDivider\r\n} from \"@blueprintjs/core\";\r\n\r\nimport ActiveAwareLink from \"../ActiveAwareLink\";\r\n\r\nimport { SiteGraph, SiteGraphEntry } from \"@/site-graph\";\r\n\r\nimport \"./style.scss\";\r\n\r\nexport interface AppNavMenuProps {\r\n    className?: string;\r\n    siteGraph: SiteGraph;\r\n}\r\n\r\nclass AppNavMenu extends React.Component<AppNavMenuProps & RouteComponentProps<any>> {\r\n    render() {\r\n        const {\r\n            className,\r\n            siteGraph\r\n        } = this.props;\r\n\r\n        const links = this._renderLinks(siteGraph);\r\n        return (\r\n            <div className={`ui-nav-menu ${className || \"\"}`}>\r\n                {links}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private _renderLinks(entries: SiteGraph, key?: any): React.ReactChild[] {\r\n        key = key ? String(key) + \"-\" : \"\";\r\n\r\n        const fragments: React.ReactChild[] = [];\r\n        let previousWasGroup = false;\r\n\r\n        entries.forEach((entry, i) => {\r\n            const rendered = this._renderEntry(entry, key + i);\r\n            if (!rendered) return;\r\n            \r\n            if (previousWasGroup) {\r\n                fragments.push(<MenuDivider key={key + (i - 1) + \"-divider\"}/>)\r\n            }\r\n\r\n            if (Array.isArray(rendered)) {\r\n                fragments.push(...rendered);\r\n                previousWasGroup = rendered.length > 0;\r\n            }\r\n            else {\r\n                fragments.push(rendered);\r\n            }\r\n        });\r\n\r\n        return fragments;\r\n    }\r\n\r\n    private _renderEntry(entry: SiteGraphEntry, key: any): React.ReactChild | React.ReactChild[] {\r\n        switch(entry.type) {\r\n            case \"path\":\r\n            case \"group\": {\r\n                const rendered = this._renderLinks(entry.children, key);\r\n                const menuName = entry.navMenu && (entry.navMenu === \"string\" && entry.navMenu) || entry.name;\r\n                if (menuName && menuName !== \"\") {\r\n                    rendered.unshift(\r\n                        <div key={`${key}-header`} className=\"pt-menu-header\"><h6>{menuName}</h6></div>\r\n                    );\r\n                }\r\n                return rendered;\r\n            }\r\n            case \"page\": {\r\n                const pathName = this.props.location.pathname;\r\n                const {\r\n                    name,\r\n                    path,\r\n                    children,\r\n                    navMenuCollapse\r\n                } = entry;\r\n                const primaryLink = <ActiveAwareLink key={key} exact={children != null} className=\"pt-menu-item\" to={path}>{name}</ActiveAwareLink>;\r\n                if (!children || (navMenuCollapse && !matchPartialPath(pathName, path))) {\r\n                    return primaryLink;\r\n                }\r\n                else {\r\n                    return [\r\n                        primaryLink,\r\n                        <ul key={`${key}-list`}>\r\n                            {this._renderLinks(children).map((x, i) => <li key={`${key}-${i}`}>{x}</li>)}\r\n                        </ul>\r\n                    ];\r\n                }\r\n            }\r\n            default: \r\n                return throwUnknownSiteGraphType(entry);\r\n        }\r\n    }\r\n}\r\nexport default withRouter(AppNavMenu);\r\n\r\nfunction throwUnknownSiteGraphType(entry: never): never {\r\n    throw new Error(`Unknown entry type \"${(entry as SiteGraphEntry).type}\".`);\r\n}\r\n\r\n\r\nfunction matchPartialPath(pathName: string, to: string): boolean {\r\n    if (pathName === to) return true;\r\n\r\n    if (!pathName.startsWith(to)) return false;\r\n\r\n    // Need to make sure we matched up to a path seperator.\r\n    if (pathName[to.length] !== '/') return false;\r\n    return true;\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\\n */\\n.pt-navbar.ui-app-navbar {\\n  background-color: #2965cc; }\\n  .pt-navbar.ui-app-navbar .pt-navbar-group .pt-button {\\n    margin: 0 4px; }\\n\\n.ui-savename-editbadge {\\n  padding-left: 5px; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport {\r\n    Navbar,\r\n    NavbarGroup,\r\n    NavbarHeading,\r\n    EditableText,\r\n    Button,\r\n    Alignment,\r\n    Icon\r\n} from \"@blueprintjs/core\";\r\n\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport { SaveEditorProps, withSaveEditor } from \"@/services/save-editor\";\r\n\r\nimport \"./style.scss\";\r\n\r\nimport { AppNavBarProps } from \"./props\";\r\n\r\ntype Props = AppNavBarProps & SaveEditorProps;\r\n@observer\r\nclass AppNavBar extends React.Component<Props> {\r\n    private _input: HTMLElement | null = null;\r\n\r\n    render() {\r\n        const {\r\n            className,\r\n            saveEditor: {\r\n                saveName,\r\n                isSaveLoaded\r\n            }\r\n        } = this.props;\r\n\r\n        return (\r\n            <Navbar className={`ui-app-navbar ${className || \"\"}`}>\r\n                <NavbarGroup>\r\n                    <NavbarHeading>ONI Save Editor</NavbarHeading>\r\n                        <EditableText\r\n                            onConfirm={this._onRename}\r\n                            disabled={!isSaveLoaded}\r\n                            placeholder={!isSaveLoaded ? \"No save loaded\" : \"Click to edit save name\"}\r\n                            value={saveName || \"\"}\r\n                        />\r\n                        {\r\n                            isSaveLoaded ?\r\n                                <span className=\"ui-savename-editbadge\">\r\n                                    <Icon\r\n                                        icon={IconNames.EDIT}\r\n                                        iconSize={10}\r\n                                        title=\"Click on the save name to edit\"\r\n                                    />\r\n                                </span>\r\n                            : undefined\r\n                        }\r\n                </NavbarGroup>\r\n                <NavbarGroup align={Alignment.RIGHT}>\r\n                    <Button icon={IconNames.UPLOAD} onClick={this._onLoadClick}>Load</Button>\r\n                    <Button icon={IconNames.FLOPPY_DISK} disabled={!isSaveLoaded} onClick={this._onSaveClick}>Save</Button>\r\n                    <input\r\n                        ref={el => this._input = el}\r\n                        style={{ display: \"none\" }}\r\n                        className=\"pt-button pt-intent-primary\"\r\n                        type=\"file\"\r\n                        accept=\".sav\"\r\n                        onChange={this._onLoadFile}\r\n                    />\r\n                </NavbarGroup>\r\n            </Navbar>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onSaveClick() {\r\n        this.props.saveEditor.save();\r\n    }\r\n\r\n    @autobind()\r\n    private _onLoadClick() {\r\n        if (!this._input) return;\r\n        this._input.click();\r\n    }\r\n\r\n    @autobind()\r\n    private _onLoadFile(change: React.ChangeEvent<HTMLInputElement>) {\r\n        const files = change.target.files;\r\n        if (!files || files.length === 0) return;\r\n        this.props.saveEditor.load(files[0]);\r\n    }\r\n\r\n    @autobind()\r\n    private _onRename(name: string) {\r\n        const { saveEditor } = this.props;\r\n        saveEditor.renameSave(name);\r\n    }\r\n}\r\nexport default withSaveEditor(AppNavBar);\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ui-page-changelog {\\n  padding: 15px; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","module.exports = \"### v1.4.2\\r\\n\\r\\nWallpaper over more bugs due to oni-save-parser@2 save object differences.\\r\\n\\r\\n### v1.4.1\\r\\n\\r\\nSlash and burn conversion to support oni-save-parser@2 and the Cosmic Update version of ONI (save version 7.4).\\r\\n\\r\\n### v1.4.0\\r\\n\\r\\n- Edit duplicant\\r\\n  - Interests (aptitudes)\\r\\n- Edit geysers\\r\\n  - Type\\r\\n  - Cycle time factor\\r\\n  - Active time factor\\r\\n  - Dormant time factor\\r\\n- Ability to rename file on download.\\r\\n\\r\\n### v1.3.0\\r\\n\\r\\n- Edit current cycle.\\r\\n- Edit duplicant printer\\r\\n  - Next duplicant ready\\r\\n  - Time to next duplicant\\r\\n\\r\\n### v1.2.1\\r\\n\\r\\n- Fix save corruption when text with multi-byte accents are encountered.\\r\\n- Refactor URL layout to make way for future utilities.\\r\\n\\r\\n### v1.2.0\\r\\n\\r\\n- Edit Duplicants\\r\\n  - Current Job\\r\\n  - Target Job\\r\\n  - Job Experience\\r\\n  - Job Mastery\\r\\n\\r\\n### v1.1.0\\r\\n\\r\\n- Edit Duplicants\\r\\n  - Gender (data only; no visual effect)\\r\\n  - Voice\\r\\n  - Appearance\\r\\n- Dedicated load button (no more refreshes to edit new saves)\\r\\n\\r\\n### v1.0.0\\r\\n\\r\\nGround-up rewrite.\\r\\n\\r\\n- Edit Duplicants\\r\\n  - Name\\r\\n  - Size (width and height)\\r\\n  - Health Status (healthy, critical, incapacitated, invulnurable, ...)\\r\\n  - Skills (level and experience)\\r\\n  - Traits\\r\\n  - Status Effects\\r\\n- New Theme\\r\\n- Non-blocking file loading and saving. Prevents browsers from killing the process when working with large saves.\\r\\n- Internal cleanup for mantainability going forward.\\r\\n\"","\r\nimport * as React from \"react\";\r\nimport Markdown from \"react-markdown\";\r\n\r\nconst changelog = require(\"@/../CHANGELOG.md\");\r\n\r\nimport \"./style.scss\";\r\n\r\nexport default class ChangelogPage extends React.Component {\r\n    render() {\r\n        return <Markdown className=\"ui-page ui-page-changelog fill-parent\" source={changelog}/>\r\n    }\r\n}","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\\n */\\n.ui-geyser-list {\\n  background-color: #bfccd6;\\n  height: 340px; }\\n  .ui-geyser-list .ui-geyser-portrait {\\n    width: 150px;\\n    height: 150px;\\n    margin: 10px;\\n    cursor: pointer; }\\n    .ui-geyser-list .ui-geyser-portrait .ui-geyser-type {\\n      text-align: center; }\\n    .ui-geyser-list .ui-geyser-portrait .ui-geyser-position {\\n      text-align: center; }\\n  .ui-geyser-list .ui-geyser-portrait.pt-active {\\n    background-color: #f29d49; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ui-page-geyser-editor {\\n  padding: 15px; }\\n  .ui-page-geyser-editor .ui-geyser-factor-explain {\\n    padding-top: 5px;\\n    padding-bottom: 10px; }\\n  .ui-page-geyser-editor .ui-slider-inset {\\n    box-sizing: border-box;\\n    padding: 0px 10px; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { GeyserBehavior, GEYSER_TYPE_NAMES, getGeyserTypeName, getGeyserTypeHash } from \"oni-save-parser\";\r\nimport { Button, MenuItem, NumericInput, Slider } from \"@blueprintjs/core\";\r\nimport { Select, IItemRendererProps } from \"@blueprintjs/select\";\r\nconst StringSelect = Select.ofType<string>();\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\nimport { typedKeys } from \"@/utils\";\r\n\r\nimport \"./style.scss\";\r\n\r\nexport interface GeyserEditorProps {\r\n    className?: string;\r\n    gameObject: GameObjectModel;\r\n}\r\n@observer\r\nexport default class GeyserEditor extends React.Component<GeyserEditorProps> {\r\n    render() {\r\n        const {\r\n            className,\r\n            gameObject\r\n        } = this.props;\r\n\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) {\r\n            return (\r\n                <div>\r\n                    This geyser has not been initialized, and cannot be edited.  Probably because it has not yet been discovered in-game.\r\n                </div>\r\n            );\r\n        }\r\n\r\n        const materialType = getGeyserTypeName(config.typeId.hash) || \"[Unknown]\";\r\n        return (\r\n            <div className={`layout-vertical ui-page-geyser-editor container-scroll ${className || \"\"}`}>\r\n                <div className=\"pt-form-group pt-inline\">\r\n                    <label className=\"pt-label\">\r\n                        Type\r\n                    </label>\r\n                    <div className=\"pt-form-content\">\r\n                        <div className=\"pt-input-group\">\r\n                            <StringSelect\r\n                                items={GEYSER_TYPE_NAMES}\r\n                                itemRenderer={this._renderGeyserTypeItem}\r\n                                itemPredicate={this._filterItem}\r\n                                onItemSelect={this._onGeyserTypeSelect}\r\n                                filterable={true}\r\n                                popoverProps={{ minimal: true }}\r\n                            >\r\n                                <Button rightIcon=\"caret-down\" text={materialType} />\r\n                            </StringSelect>\r\n                            <div className=\"pt-form-helper-text\">\r\n                                Geyser types are predefined in the game assembly, and determine the emitted element\r\n                                and range of possible emit / idle / dormant times.\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group\">\r\n                    <div className=\"pt-form-helper-text ui-geyser-factor-explain\">\r\n                        The following factor values are percentages of the min/max value defined\r\n                        by the geyser type.  Factors above 100% do not have an effect.\r\n                    </div>\r\n                    <label className=\"pt-label\">Emit Rate Factor</label>\r\n                    <div className=\"pt-form-content ui-slider-inset\">\r\n                        <Slider\r\n                            value={config.rateRoll}\r\n                            min={0}\r\n                            max={1}\r\n                            stepSize={0.001}\r\n                            labelRenderer={this._percentageRenderer}\r\n                            onChange={this._setRateRoll}\r\n                        />\r\n                        <div className=\"pt-form-helper-text\">Mass per cycle</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group\">\r\n                    <label className=\"pt-label\">Active Cycle Length Factor</label>\r\n                    <div className=\"pt-form-content ui-slider-inset\">\r\n                        <Slider\r\n                            value={config.iterationLengthRoll}\r\n                            min={0}\r\n                            max={1}\r\n                            stepSize={0.001}\r\n                            labelRenderer={this._percentageRenderer}\r\n                            onChange={this._setIterationLengthRoll}\r\n                        />\r\n                        <div className=\"pt-form-helper-text\">The total length of the active (emit and idle) stage.</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group\">\r\n                    <label className=\"pt-label\">Active Emitting Percentage Factor</label>\r\n                    <div className=\"pt-form-content ui-slider-inset\">\r\n                        <Slider\r\n                            value={config.iterationPercentRoll}\r\n                            min={0}\r\n                            max={1}\r\n                            stepSize={0.001}\r\n                            labelRenderer={this._percentageRenderer}\r\n                            onChange={this._setIterationPercentRoll}\r\n                        />\r\n                        <div className=\"pt-form-helper-text\">The percentage of the active stage that is spent emitting material.</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group\">\r\n                    <label className=\"pt-label\">Lifecycle Length Factor</label>\r\n                    <div className=\"pt-form-content ui-slider-inset\">\r\n                        <Slider\r\n                            value={config.yearLengthRoll}\r\n                            min={0}\r\n                            max={1}\r\n                            stepSize={0.001}\r\n                            labelRenderer={this._percentageRenderer}\r\n                            onChange={this._setYearLengthRoll}\r\n                        />\r\n                        <div className=\"pt-form-helper-text\">The total length of its active/dormant cycle.</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group\">\r\n                    <label className=\"pt-label\">Lifecycle Active Percentage Factor</label>\r\n                    <div className=\"pt-form-content ui-slider-inset\">\r\n                        <Slider\r\n                            value={config.yearPercentRoll}\r\n                            min={0}\r\n                            max={1}\r\n                            stepSize={0.001}\r\n                            labelRenderer={this._percentageRenderer}\r\n                            onChange={this._setYearPercentRoll}\r\n                        />\r\n                        <div className=\"pt-form-helper-text\">The percentage of its lifecycle that is spent in an active (not dormant) state.</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private _filterItem(query: string, value: string) {\r\n        return value.indexOf(query) !== -1;\r\n    }\r\n\r\n    @action.bound\r\n    private _onGeyserTypeSelect(typeName: string) {\r\n        const { gameObject } = this.props;\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) return;\r\n        const hash = getGeyserTypeHash(typeName);\r\n        if (hash != null) config.typeId.hash = hash;\r\n    }\r\n\r\n    private _renderGeyserTypeItem(value: string, itemProps: IItemRendererProps) {\r\n        const {\r\n            modifiers,\r\n            handleClick\r\n        } = itemProps;\r\n\r\n        if (!modifiers.matchesPredicate) {\r\n            return null;\r\n        }\r\n        return (\r\n            <MenuItem\r\n                active={modifiers.active}\r\n                key={value}\r\n                onClick={handleClick}\r\n                text={value}\r\n            />\r\n        );\r\n    }\r\n\r\n    private _percentageRenderer(value: number): string {\r\n        return `${(value * 100).toFixed(1)}%`;\r\n    }\r\n\r\n    @action.bound\r\n    private _setRateRoll(value: number) {\r\n        const { gameObject } = this.props;\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) return;\r\n        config.rateRoll = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setIterationLengthRoll(value: number) {\r\n        const { gameObject } = this.props;\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) return;\r\n        config.iterationLengthRoll = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setIterationPercentRoll(value: number) {\r\n        const { gameObject } = this.props;\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) return;\r\n        config.iterationPercentRoll = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setYearLengthRoll(value: number) {\r\n        const { gameObject } = this.props;\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) return;\r\n        config.yearLengthRoll = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setYearPercentRoll(value: number) {\r\n        const { gameObject } = this.props;\r\n        const behavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = behavior && behavior.templateData.configuration;\r\n        if (!config) return;\r\n        config.yearPercentRoll = value;\r\n    }\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\nexport interface GameObjectGridProps {\r\n    className?: string;\r\n    gameObjects: GameObjectModel[];\r\n    onClick?(gameObject: GameObjectModel): void;\r\n    renderItem: (gameObject: GameObjectModel) => React.ReactChild;\r\n}\r\n\r\n@observer\r\nexport default class GameObjectGrid extends React.Component<GameObjectGridProps> {\r\n    render() {\r\n        const {\r\n            className,\r\n            gameObjects,\r\n            renderItem\r\n        } = this.props;\r\n\r\n        const elements = gameObjects.map(x => <GameObjectGridElement key={x.kPrefabID} gameObject={x} onClick={this._onItemClick} renderItem={renderItem}/>);\r\n        return (\r\n            <div className={`${className || ''} ui-gameobject-grid`}>\r\n                <div className={`fill-parent layout-horizontal layout-wrap container-scroll`}>\r\n                    {elements}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onItemClick(gameObject: GameObjectModel) {\r\n        const { onClick } = this.props;\r\n        if (onClick) onClick(gameObject);\r\n    }\r\n}\r\n\r\ninterface GameObjectGridElementProps {\r\n    gameObject: GameObjectModel;\r\n    renderItem(gameObject: GameObjectModel): React.ReactChild;\r\n    onClick(gameObject: GameObjectModel): void;\r\n}\r\nclass GameObjectGridElement extends React.Component<GameObjectGridElementProps> {\r\n    render() {\r\n        const {gameObject, renderItem, onClick} = this.props;\r\n        return <div onClick={onClick.bind(null, gameObject)}>{renderItem(gameObject)}</div>;\r\n    }\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { observer, Observer } from \"mobx-react\";\r\nimport { GeyserBehavior, getGeyserTypeName } from \"oni-save-parser\";\r\n\r\nimport { NonIdealState, Card, ICardProps } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport { SaveEditorProps, withSaveEditor, GameObjectModel } from \"@/services/save-editor\";\r\n\r\nimport GameObjectGrid from \"../../components/GameObjectGrid\";\r\nimport GeyserEditor from \"./components/GeyserEditor\";\r\n\r\nimport \"./style.scss\";\r\n\r\ntype Props = SaveEditorProps;\r\ninterface State {\r\n    selectedGeyser: GameObjectModel | null;\r\n}\r\nclass GeysersPage extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            selectedGeyser: null\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            selectedGeyser\r\n        } = this.state;\r\n        const {\r\n            saveEditor\r\n        } = this.props;\r\n\r\n        const geysers = saveEditor.gameObjects.filter(isGeyser);\r\n\r\n        if (geysers.length === 0) {\r\n            return (\r\n                <NonIdealState visual={IconNames.SEARCH_AROUND}>\r\n                    <div>No geysers found.</div>\r\n                    <div>Geysers are not spawned into the game until they are discovered.</div>\r\n                </NonIdealState>\r\n            );\r\n        }\r\n\r\n        let content: React.ReactFragment;\r\n        if (selectedGeyser != null) {\r\n            content = <GeyserEditor className=\"fill-parent\" gameObject={selectedGeyser} />\r\n        }\r\n        else {\r\n            content = (\r\n                <NonIdealState visual={IconNames.SEARCH_AROUND}>\r\n                    Select a geyser to edit\r\n                </NonIdealState>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"ui-page ui-page-geysers fill-parent layout-vertical\">\r\n                <GameObjectGrid\r\n                    className=\"layout-item ui-geyser-list\"\r\n                    gameObjects={geysers}\r\n                    renderItem={this._renderGeyserGridItem}\r\n                    onClick={this._onGeyserSelected}\r\n                />\r\n                <div className=\"layout-item-fill\">\r\n                    {content}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _renderGeyserGridItem(gameObject: GameObjectModel): React.ReactChild {\r\n        const geyserBehavior = gameObject.getBehavior(GeyserBehavior);\r\n        const config = geyserBehavior && geyserBehavior.templateData.configuration;\r\n        if (!config) {\r\n            return <div className=\"ui-geyser-portrait\">Undiscovered</div>;\r\n        }\r\n\r\n        const x = gameObject.position.x.toFixed();\r\n        const y = gameObject.position.y.toFixed();\r\n\r\n        return (\r\n            <Observer>\r\n                {() =>\r\n                    <Card className=\"ui-geyser-portrait\" interactive={true}>\r\n                        <h5 className=\"ui-geyser-type\">{getGeyserTypeName(config.typeId.hash)}</h5>\r\n                        <div className=\"ui-geyser-position\">({x}, {y})</div>\r\n                    </Card>\r\n                }\r\n            </Observer>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onGeyserSelected(selectedGeyser: GameObjectModel) {\r\n        this.setState(s => ({\r\n            ...s,\r\n            selectedGeyser\r\n        }));\r\n    }\r\n}\r\n\r\nexport default withSaveEditor(GeysersPage);\r\n\r\nfunction isGeyser(gameObject: GameObjectModel) {\r\n    if (gameObject.type.startsWith(\"GeyserGeneric_\")) return true;\r\n    // TODO: ONI code also contains MethaneGeyser and ChlorineGeyser.\r\n    //  I think these are left-over from the prototype geysers, but\r\n    //  need to confirm this.\r\n    return false;\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport { SiteGraph } from \"@/site-graph\";\r\n\r\nimport General from \"./pages/General\";\r\nimport Appearance from \"./pages/Appearance\";\r\nimport Effects from \"./pages/Effects\";\r\nimport Jobs from \"./pages/Jobs\";\r\nimport Skills from \"./pages/Skills\";\r\nimport Traits from \"./pages/Traits\";\r\n\r\n\r\nexport const pageGraph: SiteGraph = [\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/duplicants/:prefabId/general\",\r\n        name: \"General\",\r\n        component: General\r\n    },\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/duplicants/:prefabId/appearance\",\r\n        name: \"Appearance\",\r\n        component: Appearance\r\n    },\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/duplicants/:prefabId/skills\",\r\n        name: \"Skills\",\r\n        component: Skills\r\n    },\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/duplicants/:prefabId/traits\",\r\n        name: \"Traits\",\r\n        component: Traits\r\n    },\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/duplicants/:prefabId/jobs\",\r\n        name: \"Jobs\",\r\n        component: Jobs\r\n    },\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/duplicants/:prefabId/effects\",\r\n        name: \"Effects\",\r\n        component: Effects\r\n    },\r\n];\r\n","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { AI_EFFECT_IDS, AIEffectsBehavior } from \"oni-save-parser\";\r\n\r\nimport { NumericInput, MenuItem, Button } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\nimport { Select, IItemRendererProps } from \"@blueprintjs/select\";\r\nconst StringSelect = Select.ofType<string>();\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\n\r\nexport interface DuplicantEffectsProps {\r\n    duplicant: GameObjectModel\r\n};\r\n\r\n\r\ntype Props = DuplicantEffectsProps;\r\n@observer\r\nclass DuplicantEffects extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n\r\n        const effectsBehavior = duplicant.getBehavior(AIEffectsBehavior);\r\n        if (!effectsBehavior) return <div>Error: No AIEffectsBehavior found.</div>;\r\n        const effects = effectsBehavior.templateData.saveLoadEffects;\r\n\r\n        const rows = effects.map(x =>\r\n            <DuplicantEffectRow\r\n                key={x.id}\r\n                id={x.id}\r\n                timeRemaining={x.timeRemaining}\r\n                onChangeTime={this._onEffectChangeTime}\r\n                onRemove={this._onEffectRemoved}\r\n            />\r\n        );\r\n\r\n        return (\r\n            <div className={`ui-duplicant-effects fill-parent layout-vertical`}>\r\n                <div className=\"container-scroll layout-item-fill\">\r\n                    <table className=\"pt-html-table pt-html-table-striped fill-parent-width\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Effect</th>\r\n                                <th>Time Remaining (ms)</th>\r\n                                <th></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {rows}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                <div>\r\n                    <StringSelect\r\n                        items={AI_EFFECT_IDS}\r\n                        itemPredicate={this._filterItem}\r\n                        itemRenderer={this._renderItem}\r\n                        onItemSelect={this._onEffectSelected}\r\n                        filterable={true}\r\n                        resetOnClose={true}\r\n                        resetOnSelect={true}\r\n                        popoverProps={{ minimal: true }}\r\n                    >\r\n                        <Button rightIcon=\"caret-down\" text=\"Add a new Effect\" />\r\n                    </StringSelect>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    private _filterItem(query: string, item: string) {\r\n        return item.toLowerCase().indexOf(query.toLowerCase()) !== -1;\r\n    }\r\n\r\n    @autobind()\r\n    private _renderItem(effect: string, itemProps: IItemRendererProps) {\r\n        const {\r\n            modifiers,\r\n            handleClick\r\n        } = itemProps;\r\n\r\n        if (!modifiers.matchesPredicate) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <MenuItem\r\n                active={modifiers.active}\r\n                key={effect}\r\n                onClick={handleClick}\r\n                text={effect}\r\n            />\r\n        );\r\n    };\r\n\r\n    @action.bound\r\n    private _onEffectSelected(effectID: string) {\r\n        const { duplicant } = this.props;\r\n        const effectsBehavior = duplicant.getBehavior(AIEffectsBehavior);\r\n        if (!effectsBehavior) return;\r\n        const effects = effectsBehavior.templateData.saveLoadEffects;\r\n\r\n        if (effects.findIndex(x => x.id === effectID) !== -1) return;\r\n\r\n        effects.push({\r\n            id: effectID,\r\n            timeRemaining: 5000\r\n        });\r\n    }\r\n\r\n    @action.bound\r\n    private _onEffectChangeTime(effectID: string, timeRemaining: number) {\r\n        const { duplicant } = this.props;\r\n        const effectsBehavior = duplicant.getBehavior(AIEffectsBehavior);\r\n        if (!effectsBehavior) return;\r\n        const effects = effectsBehavior.templateData.saveLoadEffects;\r\n\r\n        const effect = effects.find(x => x.id === effectID);\r\n        if (!effect) return;\r\n\r\n        effect.timeRemaining = timeRemaining;\r\n    }\r\n\r\n    @action.bound\r\n    private _onEffectRemoved(effectID: string) {\r\n        const { duplicant } = this.props;\r\n        const effectsBehavior = duplicant.getBehavior(AIEffectsBehavior);\r\n        if (!effectsBehavior) return;\r\n        const effects = effectsBehavior.templateData.saveLoadEffects;\r\n\r\n        const index = effects.findIndex(x => x.id === effectID);\r\n        if (index === -1) return;\r\n        effects.splice(index, 1);\r\n    }\r\n}\r\nexport default DuplicantEffects;\r\n\r\n\r\ninterface DuplicantEffectRowProps {\r\n    id: string;\r\n    timeRemaining: number;\r\n    onChangeTime(id: string, timeRemaining: number): void;\r\n    onRemove(id: string): void;\r\n}\r\n\r\nclass DuplicantEffectRow extends React.Component<DuplicantEffectRowProps> {\r\n    constructor(props: DuplicantEffectRowProps) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            id,\r\n            timeRemaining\r\n        } = this.props;\r\n\r\n        return (\r\n            <tr>\r\n                <td>{id}</td>\r\n                <td>\r\n                    <NumericInput\r\n                        value={timeRemaining}\r\n                        clampValueOnBlur={true}\r\n                        min={0}\r\n                        onValueChange={this._onTimeRemainingChange}\r\n                    />\r\n                </td>\r\n                <td>\r\n                    <Button icon={IconNames.SMALL_CROSS} onClick={this._onRemove} />\r\n                </td>\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onTimeRemainingChange(value: number) {\r\n        const {\r\n            id,\r\n            onChangeTime\r\n        } = this.props;\r\n\r\n        if (value < 0 || isNaN(value)) {\r\n            value = 0;\r\n        }\r\n\r\n        onChangeTime(id, value);\r\n    }\r\n\r\n    @autobind()\r\n    private _onRemove() {\r\n        const {\r\n            id,\r\n            onRemove\r\n        } = this.props;\r\n        onRemove(id);\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport { NonIdealState } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { observer } from \"mobx-react\";\r\nimport { action } from \"mobx\";\r\n\r\nimport {\r\n  APTITUDE_NAMES,\r\n  APTITUDE_HASH_NAMES,\r\n  APTITUDE_NAME_HASHES,\r\n  AptitudeName,\r\n  MinionResumeBehavior\r\n} from \"oni-save-parser\";\r\n\r\nimport {\r\n  GameObjectModel,\r\n  GameObjectBehaviorModel\r\n} from \"@/services/save-editor\";\r\n\r\n// These are not saved, and probably are not functional yet.\r\nconst SKIP_APTITUDES = new Set([\"Management\", \"Suits\", \"MedicalAid\"]);\r\n\r\nexport interface AptitudePageProps {\r\n  className?: string;\r\n  duplicant: GameObjectModel;\r\n}\r\n@observer\r\nexport default class AptitudePage extends React.Component<AptitudePageProps> {\r\n  render() {\r\n    const { className, duplicant } = this.props;\r\n\r\n    const behavior = duplicant.getBehavior(MinionResumeBehavior);\r\n    if (!behavior) {\r\n      return (\r\n        <NonIdealState visual={IconNames.WARNING_SIGN}>\r\n          No resume behavior exists on this duplicant. Jobs may not have been\r\n          initialized.\r\n        </NonIdealState>\r\n      );\r\n    }\r\n\r\n    const rows = APTITUDE_NAMES.filter(x => !SKIP_APTITUDES.has(x)).map(\r\n      name => (\r\n        <AptitudeRow\r\n          key={name}\r\n          aptitudeID={name}\r\n          interested={hasAptitude(behavior, name)}\r\n          setInterest={this._setInterested}\r\n        />\r\n      )\r\n    );\r\n\r\n    return (\r\n      <div className={`fill-parent container-scroll ${className || \"\"}`}>\r\n        <table className=\"pt-html-table pt-html-table-striped fill-parent\">\r\n          <thead>\r\n            <tr>\r\n              <th>Aptitude Type</th>\r\n              <th>Interested</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{rows}</tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  @action.bound\r\n  private _setInterested(aptitudeID: AptitudeName, interested: boolean) {\r\n    const { duplicant } = this.props;\r\n    const behavior = duplicant.getBehavior(MinionResumeBehavior);\r\n    if (\r\n      !behavior ||\r\n      !behavior.templateData ||\r\n      !behavior.templateData.AptitudeByRoleGroup\r\n    ) {\r\n      return;\r\n    }\r\n    const aptitudes = behavior.templateData.AptitudeByRoleGroup;\r\n\r\n    // This is dumb, but the keys of this are ONI HashStrings, which only save their key as a nested property.\r\n    const hash = APTITUDE_NAME_HASHES[aptitudeID];\r\n    if (hash == null) return false;\r\n    for (let i = 0; i < aptitudes.length; i++) {\r\n      const aptitude = aptitudes[i];\r\n      if (aptitude[0].hash === hash) {\r\n        aptitude[1] = interested ? 1 : 0;\r\n        return;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\ninterface AptitudeRowProps {\r\n  aptitudeID: string;\r\n  interested: boolean;\r\n  setInterest(aptitudeID: string, interested: boolean): void;\r\n}\r\nclass AptitudeRow extends React.Component<AptitudeRowProps> {\r\n  render() {\r\n    const { aptitudeID, interested } = this.props;\r\n    return (\r\n      <tr>\r\n        <td>{aptitudeID}</td>\r\n        <td>\r\n          <label className=\"pt-control pt-checkbox\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={interested}\r\n              onChange={this._onInterestChange}\r\n            />\r\n            <span className=\"pt-control-indicator\" />\r\n          </label>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onInterestChange(change: React.ChangeEvent<HTMLInputElement>) {\r\n    const { aptitudeID, setInterest } = this.props;\r\n    setInterest(aptitudeID, change.target.checked);\r\n  }\r\n}\r\n\r\nfunction hasAptitude(\r\n  behavior: GameObjectBehaviorModel<MinionResumeBehavior>,\r\n  aptitude: AptitudeName\r\n): boolean {\r\n  if (!behavior.templateData || !behavior.templateData.AptitudeByRoleGroup)\r\n    return false;\r\n\r\n  const hash = APTITUDE_NAME_HASHES[aptitude];\r\n  if (hash == null) return false;\r\n\r\n  for (let [key, value] of behavior.templateData.AptitudeByRoleGroup) {\r\n    if (key.hash === hash) return value > 0;\r\n  }\r\n  return false;\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","exports = module.exports = require(\"../../../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ui-page-duplicants .ui-duplicant-roles .ui-current-role, .ui-page-duplicants .ui-duplicant-roles .ui-target-role {\\n  padding: 5px; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../../../../node_modules/css-loader/index.js!../../../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../../../node_modules/css-loader/index.js!../../../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../../../node_modules/css-loader/index.js!../../../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { NumericInput, Button, MenuItem } from \"@blueprintjs/core\";\r\nimport { Select, IItemRendererProps } from \"@blueprintjs/select\";\r\nconst StringSelect = Select.ofType<string>();\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\nimport { MinionResumeBehavior } from \"oni-save-parser\";\r\n\r\nimport \"./style.scss\";\r\n\r\nexport interface DuplicantJobsPageProps {\r\n  duplicant: GameObjectModel;\r\n}\r\n\r\ntype Props = DuplicantJobsPageProps;\r\n@observer\r\nclass DuplicantRolesPage extends React.Component<Props> {\r\n  render() {\r\n    const { duplicant } = this.props;\r\n\r\n    const resumeBehavior = duplicant.getBehavior(MinionResumeBehavior);\r\n    if (!resumeBehavior)\r\n      return <div>Error: GameObject lacks a MinionResumeBehavior.</div>;\r\n\r\n    const {\r\n      currentRole,\r\n      targetRole,\r\n      ExperienceByRoleID,\r\n      MasteryByRoleID\r\n    } = resumeBehavior.templateData;\r\n\r\n    if (!ExperienceByRoleID || !MasteryByRoleID || !currentRole) {\r\n      return <div>Error: Empty MinionResume behavior data.</div>;\r\n    }\r\n\r\n    // Might want to make a constant for this, but this is better for future compatibility.\r\n    const knownRoles = Array.from(ExperienceByRoleID.map(x => x[0]));\r\n\r\n    const rows = knownRoles.map(x => {\r\n      const experiencePair = ExperienceByRoleID.find(e => e[0] === x[0]);\r\n      const experience = (experiencePair && experiencePair[1]) || 0;\r\n\r\n      const masteryPair = MasteryByRoleID.find(m => m[0] === x[0]);\r\n      const mastery = (masteryPair && masteryPair[1]) || false;\r\n      return (\r\n        <RoleRow\r\n          key={x}\r\n          roleID={x}\r\n          mastery={mastery}\r\n          experience={experience}\r\n          setMastery={this._setMastery}\r\n          setExperience={this._setExperience}\r\n        />\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div className={`ui-duplicant-roles fill-parent container-scroll`}>\r\n        <div className=\"layout-vertical\">\r\n          <div className=\"layout-horizontal\">\r\n            <div className=\"ui-current-role pt-form-group pt-inline\">\r\n              <label className=\"pt-label\">Current Role</label>\r\n              <div className=\"pt-form-content\">\r\n                <StringSelect\r\n                  items={knownRoles}\r\n                  itemPredicate={this._filterItem}\r\n                  itemRenderer={this._renderItem}\r\n                  onItemSelect={this._onCurrentRoleSelected}\r\n                  filterable={true}\r\n                  resetOnClose={true}\r\n                  resetOnSelect={true}\r\n                  popoverProps={{ minimal: true }}\r\n                >\r\n                  <Button\r\n                    rightIcon=\"caret-down\"\r\n                    text={currentRole || \"[Unknown]\"}\r\n                  />\r\n                </StringSelect>\r\n              </div>\r\n            </div>\r\n            <div className=\"ui-target-role pt-form-group pt-inline\">\r\n              <label className=\"pt-label\">Target Role</label>\r\n              <div className=\"pt-form-content\">\r\n                <StringSelect\r\n                  items={knownRoles}\r\n                  itemPredicate={this._filterItem}\r\n                  itemRenderer={this._renderItem}\r\n                  onItemSelect={this._onTargetRoleSelected}\r\n                  filterable={true}\r\n                  resetOnClose={true}\r\n                  resetOnSelect={true}\r\n                  popoverProps={{ minimal: true }}\r\n                >\r\n                  <Button\r\n                    rightIcon=\"caret-down\"\r\n                    text={targetRole || \"[Unknown]\"}\r\n                  />\r\n                </StringSelect>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <table className=\"pt-html-table pt-html-table-striped fill-parent-width layout-item\">\r\n            <thead>\r\n              <tr>\r\n                <th>Job Name</th>\r\n                <th>Mastery</th>\r\n                <th>Experience</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>{rows}</tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private _filterItem(query: string, item: string) {\r\n    return item.toLowerCase().indexOf(query.toLowerCase()) !== -1;\r\n  }\r\n\r\n  @autobind()\r\n  private _renderItem(effect: string, itemProps: IItemRendererProps) {\r\n    const { modifiers, handleClick } = itemProps;\r\n\r\n    if (!modifiers.matchesPredicate) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <MenuItem\r\n        active={modifiers.active}\r\n        key={effect}\r\n        onClick={handleClick}\r\n        text={effect}\r\n      />\r\n    );\r\n  }\r\n\r\n  @action.bound\r\n  private _onCurrentRoleSelected(roleID: string) {\r\n    const { duplicant } = this.props;\r\n    const resumeBehavior = duplicant.getBehavior(MinionResumeBehavior);\r\n    if (!resumeBehavior) return;\r\n    resumeBehavior.templateData.currentRole = roleID;\r\n  }\r\n\r\n  @action.bound\r\n  private _onTargetRoleSelected(roleID: string) {\r\n    const { duplicant } = this.props;\r\n    const resumeBehavior = duplicant.getBehavior(MinionResumeBehavior);\r\n    if (!resumeBehavior) return;\r\n    resumeBehavior.templateData.targetRole = roleID;\r\n  }\r\n\r\n  @action.bound\r\n  private _setMastery(roleID: string, mastery: boolean) {\r\n    const { duplicant } = this.props;\r\n    const resumeBehavior = duplicant.getBehavior(MinionResumeBehavior);\r\n    if (!resumeBehavior) return;\r\n    const masteries = resumeBehavior.templateData.MasteryByRoleID!;\r\n    const masteryPair = masteries.find(m => m[0] === roleID);\r\n    if (!masteryPair) return;\r\n    masteryPair[1] = mastery;\r\n  }\r\n\r\n  @action.bound\r\n  private _setExperience(roleID: string, experience: number) {\r\n    const { duplicant } = this.props;\r\n    const resumeBehavior = duplicant.getBehavior(MinionResumeBehavior);\r\n    if (!resumeBehavior) return;\r\n    const experiences = resumeBehavior.templateData.ExperienceByRoleID!;\r\n    const experiencePair = experiences.find(e => e[0] === roleID);\r\n    if (!experiencePair) return;\r\n    experiencePair[1] = experience;\r\n  }\r\n}\r\nexport default DuplicantRolesPage;\r\n\r\ninterface JobRowProps {\r\n  roleID: string;\r\n  mastery: boolean;\r\n  experience: number;\r\n  setMastery(roleID: string, mastery: boolean): void;\r\n  setExperience(roleID: string, experience: number): void;\r\n}\r\nclass RoleRow extends React.Component<JobRowProps> {\r\n  render() {\r\n    const { roleID, mastery, experience } = this.props;\r\n\r\n    return (\r\n      <tr>\r\n        <td>{roleID}</td>\r\n        <td>\r\n          <label className=\"pt-control pt-checkbox\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={mastery}\r\n              onChange={this._onSetMastery}\r\n            />\r\n            <span className=\"pt-control-indicator\" />\r\n          </label>\r\n        </td>\r\n        <td>\r\n          <NumericInput\r\n            value={experience}\r\n            clampValueOnBlur={true}\r\n            min={0}\r\n            onValueChange={this._onSetExperience}\r\n          />\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  _onSetMastery(change: React.ChangeEvent<HTMLInputElement>) {\r\n    const checked = change.target.checked;\r\n    const { roleID, setMastery } = this.props;\r\n    setMastery(roleID, checked);\r\n  }\r\n\r\n  @autobind()\r\n  private _onSetExperience(value: number) {\r\n    if (value < 0) {\r\n      value = 0;\r\n    }\r\n\r\n    const { roleID, setExperience } = this.props;\r\n    setExperience(roleID, value);\r\n  }\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\n\r\nimport {\r\n    Tabs,\r\n    Tab\r\n} from \"@blueprintjs/core\";\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\nimport RolesPage from \"./pages/Roles\";\r\nimport AptitudePage from \"./pages/Aptitudes\";\r\n\r\nexport interface DuplicantRolesPageProps {\r\n    duplicant: GameObjectModel;\r\n}\r\n\r\ntype Props = DuplicantRolesPageProps;\r\nclass DuplicantRolesPage extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n        return (\r\n            <div className=\"ui-duplicant-roles fill-parent\">\r\n                <Tabs className=\"fill-parent layout-horizontal\" vertical={true} renderActiveTabPanelOnly={true} id=\"DuplicantRolePages\">\r\n                    <Tab className=\"layout-item-fill\" id=\"roles\" title=\"Roles\" panel={<RolesPage duplicant={duplicant} />} />\r\n                    <Tab className=\"layout-item-fill\" id=\"aptitudes\" title=\"Aptitudes\" panel={<AptitudePage duplicant={duplicant} />} />\r\n                </Tabs>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default DuplicantRolesPage;","\r\n// TODO: move to oni-save-parser\r\nconst TRAITS: string[] = [\r\n    \"None\",\r\n    \"Stinky\",\r\n    \"Ellie\",\r\n    \"Joshua\",\r\n    \"Liam\",\r\n    \"CantResearch\",\r\n    \"CantBuild\",\r\n    \"CantCook\",\r\n    \"CantDig\",\r\n    \"Hemophobia\",\r\n    \"MedicalAid\",\r\n    \"ScaredyCat\",\r\n    \"MouthBreather\",\r\n    \"CalorieBurner\",\r\n    \"SmallBladder\",\r\n    \"Anemic\",\r\n    \"SlowLearner\",\r\n    \"NoodleArms\",\r\n    \"InteriorDecorator\",\r\n    \"Regeneration\",\r\n    \"DeeperDiversLungs\",\r\n    \"SunnyDisposition\",\r\n    \"RockCrusher\",\r\n    \"Uncultured\",\r\n    \"WeakImmuneSystem\",\r\n    \"IrritableBowel\",\r\n    \"Flatulence\",\r\n    \"Snorer\",\r\n    \"Narcolepsy\",\r\n    \"Twinkletoes\",\r\n    \"Greasemonkey\",\r\n    \"MoleHands\",\r\n    \"FastLearner\",\r\n    \"DiversLung\",\r\n    \"StrongArm\",\r\n    \"IronGut\",\r\n    \"StrongImmuneSystem\",\r\n    \"BedsideManner\",\r\n    \"Caring\",\r\n    \"Aggressive\",\r\n    \"UglyCrier\",\r\n    \"BingeEater\",\r\n    \"StressVomiter\",\r\n    \"EarlyBird\",\r\n    \"NightOwl\",\r\n    \"Claustrophobic\",\r\n    \"PrefersWarmer\",\r\n    \"PrefersColder\",\r\n    \"SensitiveFeet\",\r\n    \"Fashionable\",\r\n    \"Climacophobic\",\r\n    \"SolitarySleeper\",\r\n    \"Workaholic\"\r\n];\r\nexport default TRAITS;","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { MenuItem, Intent } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\nimport { MultiSelect, ItemRenderer, IItemRendererProps } from \"@blueprintjs/select\";\r\nconst TraitMultiSelect = MultiSelect.ofType<string>();\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\nimport TRAITS from \"./traits\";\r\nimport { AITraitsBehavior } from \"oni-save-parser\";\r\n\r\nexport interface DuplicantTraitsProps {\r\n    duplicant: GameObjectModel;\r\n};\r\n\r\n\r\ntype Props = DuplicantTraitsProps;\r\n@observer\r\nclass DuplicantTraits extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n\r\n        const traitsBehavior = duplicant.getBehavior(AITraitsBehavior);\r\n        if (!traitsBehavior) return <div>Error: Game object lacks a AITraitsBehavior.</div>;\r\n        const traits = traitsBehavior.templateData.TraitIds;\r\n\r\n        return (\r\n            <div className={`fill-parent ui-duplicant-traits`}>\r\n                <TraitMultiSelect\r\n                    className=\"fill-parent-width\"\r\n                    items={TRAITS}\r\n                    selectedItems={traits}\r\n                    onItemSelect={this._onTagSelected}\r\n                    itemPredicate={this._filterItem}\r\n                    itemRenderer={this._renderItem}\r\n                    tagRenderer={tag => tag}\r\n                    tagInputProps={{ onRemove: this._onTagRemoved }}\r\n                    noResults={<MenuItem disabled={true} text=\"No results.\" />}\r\n                    popoverProps={{ minimal: true }}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    @action.bound\r\n    private _onTagSelected(tag: string) {\r\n        const { duplicant } = this.props;\r\n        const traitsBehavior = duplicant.getBehavior(AITraitsBehavior);\r\n        if (!traitsBehavior) return;\r\n        const traits = traitsBehavior.templateData.TraitIds;\r\n\r\n        if (traits.indexOf(tag) !== -1) {\r\n            return;\r\n        }\r\n\r\n        traits.push(tag);\r\n    }\r\n\r\n    @autobind()\r\n    private _onTagRemoved(tag: string) {\r\n        const { duplicant } = this.props;\r\n        const traitsBehavior = duplicant.getBehavior(AITraitsBehavior);\r\n        if (!traitsBehavior) return;\r\n        const traits = traitsBehavior.templateData.TraitIds;\r\n\r\n        const index = traits.indexOf(tag);\r\n        if (index === -1) return;\r\n\r\n        traits.splice(index, 1);\r\n    }\r\n\r\n    private _filterItem(query: string, trait: string) {\r\n        return trait.toLowerCase().indexOf(query.toLowerCase()) !== -1;\r\n    }\r\n\r\n    @autobind()\r\n    private _renderItem(trait: string, itemProps: IItemRendererProps) {\r\n        const {\r\n            modifiers,\r\n            handleClick\r\n        } = itemProps;\r\n\r\n        if (!modifiers.matchesPredicate) {\r\n            return null;\r\n        }\r\n\r\n        let isSelected = false;\r\n        \r\n        // TODO: Ensure that mobx is caching this stuff, as this is called for every item.\r\n        const traitsBehavior = this.props.duplicant.getBehavior(AITraitsBehavior);\r\n        if (traitsBehavior) {\r\n            const traits = traitsBehavior.templateData.TraitIds;\r\n            isSelected = traits.indexOf(trait) !== -1;\r\n        }\r\n\r\n        return (\r\n            <MenuItem\r\n                active={modifiers.active}\r\n                icon={isSelected ? IconNames.TICK : IconNames.BLANK}\r\n                key={trait}\r\n                onClick={handleClick}\r\n                text={trait}\r\n                shouldDismissPopover={false}\r\n            />\r\n        );\r\n    };\r\n\r\n}\r\nexport default DuplicantTraits;\r\n","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { NumericInput } from \"@blueprintjs/core\";\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\nimport { AIAttributeLevelsBehavior } from \"oni-save-parser\";\r\n\r\nexport interface DuplicantSkillsProps {\r\n    duplicant: GameObjectModel;\r\n};\r\n\r\n\r\ntype Props = DuplicantSkillsProps;\r\n@observer\r\nclass DuplicantSkills extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n\r\n        const skillsBehavior = duplicant.getBehavior(AIAttributeLevelsBehavior);\r\n        if (!skillsBehavior) return <div>Error: Game object lacks a AIAttributeLevelsBehavior behavior.</div>;\r\n        const skills = skillsBehavior.templateData.saveLoadLevels;\r\n\r\n        const rows = skills.map(x => \r\n            <DuplicantSkillRow\r\n                key={x.attributeId}\r\n                id={x.attributeId}\r\n                level={x.level}\r\n                experience={x.experience}\r\n                onChangeLevel={this._onChangeLevel}\r\n                onChangeExperience={this._onChangeExperience}\r\n        />);\r\n\r\n        return (\r\n            <div className={`ui-duplicant-skills fill-parent container-scroll`}>\r\n                <table className=\"pt-html-table pt-html-table-striped\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Skill</th>\r\n                            <th>Level</th>\r\n                            <th>Experience</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {rows}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    @action.bound\r\n    private _onChangeLevel(id: string, level: number) {\r\n        const { duplicant } = this.props;\r\n        const skillsBehavior = duplicant.getBehavior(AIAttributeLevelsBehavior);\r\n        if (!skillsBehavior) return;\r\n        const skills = skillsBehavior.templateData.saveLoadLevels;\r\n        const skill = skills.find(x => x.attributeId === id);\r\n        if (!skill) return;\r\n        skill.level = level;\r\n    }\r\n\r\n    @action.bound\r\n    private _onChangeExperience(id: string, experience: number) {\r\n        const { duplicant } = this.props;\r\n        const skillsBehavior = duplicant.getBehavior(AIAttributeLevelsBehavior);\r\n        if (!skillsBehavior) return;\r\n        const skills = skillsBehavior.templateData.saveLoadLevels;\r\n        const skill = skills.find(x => x.attributeId === id);\r\n        if (!skill) return;\r\n        skill.experience = experience;\r\n    }\r\n}\r\nexport default DuplicantSkills;\r\n\r\n\r\ninterface DuplicantSkillRowProps {\r\n    id: string;\r\n    level: number;\r\n    experience: number;\r\n    onChangeLevel(id: string, level: number): void;\r\n    onChangeExperience(id: string, level: number): void;\r\n}\r\n\r\nclass DuplicantSkillRow extends React.Component<DuplicantSkillRowProps> {\r\n    render() {\r\n        const {\r\n            id,\r\n            level,\r\n            experience\r\n        } = this.props;\r\n\r\n        return (\r\n            <tr>\r\n                <td>{id}</td>\r\n                <td><NumericInput\r\n                    value={level}\r\n                    clampValueOnBlur={true}\r\n                    min={0}\r\n                    onValueChange={this._onLevelChange}\r\n                /></td>\r\n                <td><NumericInput\r\n                    value={experience}\r\n                    clampValueOnBlur={true}\r\n                    min={0}\r\n                    onValueChange={this._onExperienceChange}\r\n                /></td>\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onLevelChange(value: number) {\r\n        const {\r\n            id,\r\n            onChangeLevel\r\n        } = this.props;\r\n\r\n        value = Math.round(value);\r\n        if (value < 0 || isNaN(value)) {\r\n            value = 0;\r\n        }\r\n        \r\n        onChangeLevel(id, value);\r\n    }\r\n\r\n    @autobind()\r\n    private _onExperienceChange(value: number) {\r\n        const {\r\n            id,\r\n            onChangeExperience\r\n        } = this.props;\r\n\r\n        if (value < 0 || isNaN(value)) {\r\n            value = 0;\r\n        }\r\n\r\n        onChangeExperience(id, value);\r\n    }\r\n}\r\n","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { getAccessoryOfType, getIndexOfAccessoryType } from \"oni-save-parser\";\r\n\r\nimport { Button, MenuItem } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\nimport { Select, IItemRendererProps } from \"@blueprintjs/select\";\r\nconst StringSelect = Select.ofType<string>();\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\n\r\nimport { \r\n    ACCESSORIZER_EYE_GUIDS,\r\n    ACCESSORIZER_HAIR_GUIDS,\r\n    ACCESSORIZER_HEAD_GUIDS,\r\n    ACCESSORIZER_MOUTH_GUIDS,\r\n    ACCESSORIZER_BODY_GUIDS,\r\n    AccessorizerBehavior\r\n} from \"oni-save-parser\";\r\nimport { action } from \"mobx\";\r\n\r\n\r\nexport interface DuplicantAccessoryPageProps {\r\n    duplicant: GameObjectModel;\r\n};\r\n\r\ntype Props = DuplicantAccessoryPageProps;\r\n@observer\r\nclass DuplicantAccessoryPage extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n        const accessorizer = duplicant.getBehavior(AccessorizerBehavior);\r\n        if (!accessorizer) return <div>Error: No AccessorizerBehavior found</div>;\r\n        const accessories = accessorizer.templateData.accessories;\r\n\r\n        const eyesAccessory = getAccessoryOfType(accessories, \"eyes\");\r\n        const headAccessory = getAccessoryOfType(accessories, \"headshape\");\r\n        const hairAccessory = getAccessoryOfType(accessories, \"hair\");\r\n        const mouthAccessory = getAccessoryOfType(accessories, \"mouth\");\r\n        const bodyAccessory = getAccessoryOfType(accessories, \"body\");\r\n\r\n        const eyes = eyesAccessory ? eyesAccessory.guid.Guid : \"[Error: Accessory Not Found]\";\r\n        const head = headAccessory ? headAccessory.guid.Guid : \"[Error: Accessory Not Found]\";\r\n        const hair = hairAccessory ? hairAccessory.guid.Guid : \"[Error: Accessory Not Found]\";\r\n        const mouth = mouthAccessory ? mouthAccessory.guid.Guid : \"[Error: Accessory Not Found]\";\r\n        const body = bodyAccessory ? bodyAccessory.guid.Guid : \"[Error: Accessory Not Found]\";\r\n\r\n        return (\r\n            <div className={`ui-duplicant-accessories fill-parent layout-vertical container-scroll`}>\r\n                <AppearanceGroup name=\"Eyes\" value={eyes} accessories={ACCESSORIZER_EYE_GUIDS} onSet={this._setEyes}/>\r\n                <AppearanceGroup name=\"Head\" value={head} accessories={ACCESSORIZER_HEAD_GUIDS} onSet={this._setHead}/>\r\n                <AppearanceGroup name=\"Hair\" value={hair} accessories={ACCESSORIZER_HAIR_GUIDS} onSet={this._setHair}/>\r\n                <AppearanceGroup name=\"Mouth\" value={mouth} accessories={ACCESSORIZER_MOUTH_GUIDS} onSet={this._setMouth}/>\r\n                <AppearanceGroup name=\"Body\" value={body} accessories={ACCESSORIZER_BODY_GUIDS} onSet={this._setBody}/>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @action.bound\r\n    private _setEyes(value: string) {\r\n        const { duplicant } = this.props;\r\n        const accessorizer = duplicant.getBehavior(AccessorizerBehavior);\r\n        if (!accessorizer) return;\r\n        const accessories = accessorizer.templateData.accessories;\r\n        const index = getIndexOfAccessoryType(accessories, \"eyes\");\r\n        if (index == -1) return;\r\n        accessories[index].guid.Guid = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setHead(value: string) {\r\n        const { duplicant } = this.props;\r\n        const accessorizer = duplicant.getBehavior(AccessorizerBehavior);\r\n        if (!accessorizer) return;\r\n        const accessories = accessorizer.templateData.accessories;\r\n        const index = getIndexOfAccessoryType(accessories, \"headshape\");\r\n        if (index == -1) return;\r\n        accessories[index].guid.Guid = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setHair(value: string) {\r\n        const { duplicant } = this.props;\r\n        const accessorizer = duplicant.getBehavior(AccessorizerBehavior);\r\n        if (!accessorizer) return;\r\n        const accessories = accessorizer.templateData.accessories;\r\n        const index = getIndexOfAccessoryType(accessories, \"hair\");\r\n        if (index == -1) return;\r\n        accessories[index].guid.Guid = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setMouth(value: string) {\r\n        const { duplicant } = this.props;\r\n        const accessorizer = duplicant.getBehavior(AccessorizerBehavior);\r\n        if (!accessorizer) return;\r\n        const accessories = accessorizer.templateData.accessories;\r\n        const index = getIndexOfAccessoryType(accessories, \"mouth\");\r\n        if (index == -1) return;\r\n        accessories[index].guid.Guid = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _setBody(value: string) {\r\n        const { duplicant } = this.props;\r\n        const accessorizer = duplicant.getBehavior(AccessorizerBehavior);\r\n        if (!accessorizer) return;\r\n        const accessories = accessorizer.templateData.accessories;\r\n        const index = getIndexOfAccessoryType(accessories, \"body\");\r\n        if (index == -1) return;\r\n        accessories[index].guid.Guid = value;\r\n    }\r\n}\r\nexport default DuplicantAccessoryPage;\r\n\r\n\r\ninterface AppearanceGroupProps {\r\n    name: string;\r\n    accessories: string[];\r\n    value: string | null;\r\n    onSet(accessoryID: string): void\r\n}\r\nclass AppearanceGroup extends React.Component<AppearanceGroupProps> {\r\n    render() {\r\n        const {\r\n            name,\r\n            accessories,\r\n            value\r\n        } = this.props;\r\n        return (\r\n            <div className=\"pt-form-group pt-inline\">\r\n            <label className=\"pt-label\">\r\n                {name}\r\n            </label>\r\n            <div className=\"pt-form-content\">\r\n                <StringSelect\r\n                    items={accessories}\r\n                    itemRenderer={this._renderItem}\r\n                    onItemSelect={this._onSet}\r\n                    filterable={false}\r\n                    resetOnClose={true}\r\n                    resetOnSelect={true}\r\n                    popoverProps={{ minimal: true }}\r\n                >\r\n                    <Button rightIcon=\"caret-down\" text={value || \"[Accessory not Found]\"} />\r\n                </StringSelect>\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _renderItem(accessoryID: string, itemProps: IItemRendererProps) {\r\n        const {\r\n            modifiers,\r\n            handleClick\r\n        } = itemProps;\r\n\r\n        if (!modifiers.matchesPredicate) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <MenuItem\r\n                active={modifiers.active}\r\n                key={accessoryID}\r\n                onClick={handleClick}\r\n                text={accessoryID}\r\n            />\r\n        );\r\n    };\r\n\r\n    @autobind()\r\n    private _onSet(accessoryID: string) {\r\n        const { onSet } = this.props;\r\n        onSet(accessoryID);\r\n    }\r\n}\r\n","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { HEALTH_STATE_NAMES, MINION_IDENTITY_GENDERS, MinionGender, HealthBehavior, MinionIdentityBehavior } from \"oni-save-parser\";\r\n\r\nimport { Button, MenuItem, NumericInput } from \"@blueprintjs/core\";\r\nimport { Select, IItemRendererProps } from \"@blueprintjs/select\";\r\n\r\nconst GenderSelect = Select.ofType<MinionGender>();\r\nconst StringSelect = Select.ofType<string>();\r\nconst NumberSelect = Select.ofType<number>();\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\n\r\nexport interface DuplicantGeneralProps {\r\n    duplicant: GameObjectModel;\r\n};\r\n\r\n\r\n// We only care about > 0\r\nconst MIN_SCALE = Number.EPSILON;\r\n\r\ntype Props = DuplicantGeneralProps;\r\n@observer\r\nclass DuplicantGeneralPage extends React.Component<Props> {\r\n    render() {\r\n        const { duplicant } = this.props;\r\n\r\n        const scaleX = duplicant.scale.x;\r\n        const scaleY = duplicant.scale.y;\r\n\r\n        const healthBehavior = duplicant.getBehavior(HealthBehavior);\r\n        if (!healthBehavior) return <div>Error: HealthBehavior not found</div>;\r\n        const healthState = healthBehavior.templateData.State;\r\n\r\n        const identityBehavior = duplicant.getBehavior(MinionIdentityBehavior);\r\n        if (!identityBehavior) return <div>Error: MinionIdentityBehavior not found</div>;\r\n        const {\r\n            gender,\r\n            voiceIdx\r\n        } = identityBehavior.templateData;\r\n\r\n        let healthStateStr: string;\r\n        if (healthState != null && healthState >= 0 && healthState < HEALTH_STATE_NAMES.length) {\r\n            healthStateStr = HEALTH_STATE_NAMES[healthState];\r\n        }\r\n        else {\r\n            healthStateStr = `<Unknown Health State ${healthState}>`;\r\n        }\r\n\r\n        return (\r\n            <div className=\"fill-parent\">\r\n                <div className=\"pt-form-group pt-inline\">\r\n                    <label className=\"pt-label\">\r\n                        Gender\r\n                    </label>\r\n                    <div className=\"pt-form-content\">\r\n                        <GenderSelect\r\n                            // TODO: Export from oni-save-parser\r\n                            items={MINION_IDENTITY_GENDERS}\r\n                            itemRenderer={this._renderItem}\r\n                            onItemSelect={this._onGenderSelected}\r\n                            filterable={false}\r\n                            resetOnClose={true}\r\n                            resetOnSelect={true}\r\n                            popoverProps={{ minimal: true }}\r\n                        >\r\n                            <Button rightIcon=\"caret-down\" text={gender || \"MALE\"} />\r\n                        </GenderSelect>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group pt-inline\">\r\n                    <label className=\"pt-label\">\r\n                        Voice\r\n                    </label>\r\n                    <div className=\"pt-form-content\">\r\n                        <NumberSelect\r\n                            // TODO: get from oni-save-parser\r\n                            items={[0, 1, 2, 3, 4]}\r\n                            itemRenderer={this._renderItem}\r\n                            onItemSelect={this._onVoiceSelected}\r\n                            filterable={false}\r\n                            resetOnClose={true}\r\n                            resetOnSelect={true}\r\n                            popoverProps={{ minimal: true }}\r\n                        >\r\n                            <Button rightIcon=\"caret-down\" text={`Voice ${voiceIdx || 0}`} />\r\n                        </NumberSelect>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group pt-inline\">\r\n                    <label className=\"pt-label\">\r\n                        Scale\r\n                    </label>\r\n                    <div className=\"pt-form-content\">\r\n                        <div className=\"pt-input-group\">\r\n                            <span>Horizontal</span>\r\n                            <NumericInput min={MIN_SCALE} clampValueOnBlur={true} value={scaleX} onValueChange={this._onScaleX} />\r\n                        </div>\r\n                        <div className=\"pt-input-group\">\r\n                            <span>Vertical</span>\r\n                            <NumericInput min={MIN_SCALE} clampValueOnBlur={true} value={scaleY} onValueChange={this._onScaleY} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-form-group pt-inline\">\r\n                    <label className=\"pt-label\">\r\n                        Health State\r\n                    </label>\r\n                    <div className=\"pt-form-content\">\r\n                        <StringSelect\r\n                            items={HEALTH_STATE_NAMES}\r\n                            itemRenderer={this._renderItem}\r\n                            onItemSelect={this._onHealthStateSelected}\r\n                            filterable={false}\r\n                            resetOnClose={true}\r\n                            resetOnSelect={true}\r\n                            popoverProps={{ minimal: true }}\r\n                        >\r\n                            <Button rightIcon=\"caret-down\" text={healthStateStr} />\r\n                        </StringSelect>\r\n                        <div className=\"pt-form-helper-text\">The duplicant's current overall health condition.</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _renderItem(effect: string | number, itemProps: IItemRendererProps) {\r\n        const {\r\n            modifiers,\r\n            handleClick\r\n        } = itemProps;\r\n\r\n        if (!modifiers.matchesPredicate) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <MenuItem\r\n                active={modifiers.active}\r\n                key={effect}\r\n                onClick={handleClick}\r\n                text={effect}\r\n            />\r\n        );\r\n    };\r\n\r\n    @action.bound\r\n    private _onHealthStateSelected(healthState: string) {\r\n        const { duplicant } = this.props;\r\n\r\n        const healthBehavior = duplicant.getBehavior(HealthBehavior);\r\n        if (!healthBehavior) return;\r\n\r\n        // Need to get the enum value of the display text.\r\n        const stateIndex = HEALTH_STATE_NAMES.indexOf(healthState);\r\n        if (stateIndex === -1) {\r\n            return;\r\n        }\r\n\r\n        healthBehavior.templateData.State = stateIndex;\r\n    }\r\n\r\n    @action.bound\r\n    private _onGenderSelected(gender: MinionGender) {\r\n        const { duplicant } = this.props;\r\n        const identityBehavior = duplicant.getBehavior(MinionIdentityBehavior);\r\n        if (!identityBehavior) return;\r\n        identityBehavior.templateData.gender = gender;\r\n        identityBehavior.templateData.genderStringKey = gender;\r\n    }\r\n\r\n    @action.bound\r\n    private _onVoiceSelected(voiceIdx: number) {\r\n        const { duplicant } = this.props;\r\n        const identityBehavior = duplicant.getBehavior(MinionIdentityBehavior);\r\n        if (!identityBehavior) return;\r\n        identityBehavior.templateData.voiceIdx = voiceIdx;\r\n    }\r\n\r\n    @action.bound\r\n    private _onScaleX(value: number) {\r\n        const { duplicant } = this.props;\r\n\r\n        // Negative numbers dont render; probably because sprite normal faces\r\n        //  away from game camera.\r\n        if (value === 0 || isNaN(value)) {\r\n            value = 1;\r\n        }\r\n\r\n        duplicant.scale.x = value;\r\n    }\r\n\r\n    @action.bound\r\n    private _onScaleY(value: number) {\r\n        const { duplicant } = this.props;\r\n\r\n        // Negative numbers dont render; probably because sprite normal faces\r\n        //  away from game camera.\r\n        if (value === 0 || isNaN(value)) {\r\n            value = 1;\r\n        }\r\n\r\n        duplicant.scale.y = value;\r\n    }\r\n}\r\nexport default DuplicantGeneralPage;\r\n","\r\nimport * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { autobind } from \"core-decorators\";\r\nimport { MinionIdentityBehavior } from \"oni-save-parser\";\r\n\r\nimport {\r\n    EditableText,\r\n    Tabs,\r\n    Tab,\r\n    NonIdealState\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\nimport { error, FAILURE_TYPE } from \"@/logging\";\r\n\r\n\r\nexport interface DuplicantEditorProps {\r\n    className?: string;\r\n    duplicant: GameObjectModel;\r\n};\r\n\r\n\r\nimport GeneralPage from \"../../pages/General\";\r\nimport AppearancePage from \"../../pages/Appearance\";\r\nimport SkillsPage from \"../../pages/Skills\";\r\nimport TraitsPage from \"../../pages/Traits\";\r\nimport JobsPage from \"../../pages/Jobs\";\r\nimport EffectsPage from \"../../pages/Effects\";\r\n\r\n\r\ntype Props = DuplicantEditorProps;\r\ninterface State {\r\n    rename: string | null;\r\n}\r\nclass DuplicantEditor extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            rename: null\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            className,\r\n            duplicant,\r\n        } = this.props;\r\n\r\n        const {\r\n            rename\r\n        } = this.state;\r\n\r\n        const identityBehavior = duplicant.getBehavior(MinionIdentityBehavior);\r\n\r\n        if (!identityBehavior) {\r\n            error(\"Duplicant identity behavior missing\", FAILURE_TYPE.MISSING_BEHAVIOR);\r\n            return (\r\n                <NonIdealState visual={IconNames.ERROR}>\r\n                    Duplicant has no identity behavior.\r\n                </NonIdealState>\r\n            )\r\n        }\r\n        \r\n        const name = rename || identityBehavior.templateData.name;\r\n        \r\n        return (\r\n            <div className={`ui-duplicant-editor layout-vertical ${className}`}>\r\n                <div className=\"layout-item\">\r\n                    <h1 className=\"ui-title\">\r\n                        <EditableText\r\n                            value={name}\r\n                            onChange={this._onNameChange}\r\n                            onConfirm={this._onRename}\r\n                        />\r\n                    </h1> <span className=\"pt-text-muted\">(click to edit name)</span>\r\n                </div>\r\n                <div className=\"layout-item-fill\">\r\n                    <Tabs id=\"DuplicantEditCategories\" className=\"ui-category-tabs fill-parent layout-vertical\" renderActiveTabPanelOnly={true}>\r\n                        <Tab className=\"layout-item-fill\" id=\"general\" title=\"General\" panel={<GeneralPage duplicant={duplicant} />} />\r\n                        <Tab className=\"layout-item-fill\" id=\"appearance\" title=\"Appearance\" panel={<AppearancePage duplicant={duplicant} />} />\r\n                        <Tab className=\"layout-item-fill\" id=\"skills\" title=\"Skills\" panel={<SkillsPage duplicant={duplicant}/>} />\r\n                        <Tab className=\"layout-item-fill\" id=\"traits\" title=\"Traits\" panel={<TraitsPage duplicant={duplicant}/>} />\r\n                        <Tab className=\"layout-item-fill\" id=\"jobs\" title=\"Jobs\" panel={<JobsPage duplicant={duplicant}/>} />\r\n                        <Tab className=\"layout-item-fill\" id=\"effects\" title=\"Effects\" panel={<EffectsPage duplicant={duplicant}/>} />\r\n                    </Tabs>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onNameChange(str: string) {\r\n        this.setState(s => ({\r\n            ...s,\r\n            rename: str\r\n        }));\r\n    }\r\n\r\n    @action.bound\r\n    private _onRename() {\r\n        const { duplicant } = this.props;\r\n        const name = this.state.rename;\r\n        if (!name || name === \"\") return;\r\n        const identityBehavior = duplicant.getBehavior(MinionIdentityBehavior);\r\n        if (!identityBehavior) return;\r\n\r\n        identityBehavior.templateData.name = name;\r\n        this.setState(s => ({\r\n            ...s,\r\n            rename: null\r\n        }));\r\n    }\r\n}\r\nexport default DuplicantEditor;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\\n */\\n.ui-duplicant-list {\\n  background-color: #bfccd6;\\n  height: 340px; }\\n  .ui-duplicant-list .ui-duplicant-portrait {\\n    margin: 10px;\\n    cursor: pointer; }\\n  .ui-duplicant-list .ui-duplicant-portrait.pt-active {\\n    background-color: #f29d49; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ui-duplicant-portrait {\\n  width: 150px;\\n  height: 150px; }\\n  .ui-duplicant-portrait .ui-duplicant-name {\\n    text-align: center; }\\n  .ui-duplicant-portrait .ui-duplicant-role {\\n    text-align: center; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\nimport { Card } from \"@blueprintjs/core\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { error, FAILURE_TYPE } from \"@/logging\";\r\nimport { MinionIdentityBehavior, MinionResumeBehavior } from \"oni-save-parser\";\r\n\r\nimport \"./style.scss\";\r\n\r\n\r\nexport interface DuplicantPortraitProps {\r\n    className?: string;\r\n    duplicant: GameObjectModel;\r\n    onClick?(duplicant: GameObjectModel): void;\r\n}\r\n\r\n\r\ntype Props = DuplicantPortraitProps;\r\n@observer\r\nclass DuplicantPortrait extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            className,\r\n            duplicant\r\n        } = this.props;\r\n\r\n        const identity = duplicant.getBehavior(MinionIdentityBehavior);\r\n        const resume = duplicant.getBehavior(MinionResumeBehavior);\r\n\r\n        let outerClassName = `ui-duplicant-portrait ${className}`;\r\n\r\n        let name: string;\r\n        let role: string;\r\n\r\n        if (identity) {\r\n            name = identity.templateData.name;\r\n        }\r\n        else {\r\n            error(\"Duplicant not found or identity behavior missing.\", FAILURE_TYPE.MISSING_BEHAVIOR);\r\n            name = \"[IDENTITY MISSING]\";\r\n        }\r\n\r\n        if (resume && resume.templateData.currentRole) {\r\n            role = resume.templateData.currentRole;\r\n        }\r\n        else {\r\n            error(\"resume behavior missing.\", FAILURE_TYPE.MISSING_BEHAVIOR);\r\n            role = \"[RESUME MISSING]\";\r\n        }\r\n\r\n        return (\r\n            <Card className={outerClassName} interactive={true} onClick={this._onClick}>\r\n                <h5 className=\"ui-duplicant-name\">{name}</h5>\r\n                {/* TODO render a picture.  Plenty of data in identity to do so.  Also see Accessorizer */}\r\n                <div className=\"ui-duplicant-role\">{role}</div>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onClick() {\r\n        const {\r\n            duplicant,\r\n            onClick\r\n        } = this.props;\r\n        if (onClick) onClick(duplicant);\r\n    }\r\n}\r\nexport default DuplicantPortrait;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { GameObjectModel } from \"@/services/save-editor\";\r\n\r\nimport DuplicantPortrait from \"../DuplicantPortrait\";\r\n\r\nimport \"./style.scss\";\r\n\r\nexport interface DuplicantsListProps {\r\n    className?: string;\r\n    duplicants: GameObjectModel[];\r\n    selectedDuplicant?: number | GameObjectModel | null;\r\n    onDuplicantClick?(duplicant: GameObjectModel): void;\r\n}\r\n\r\ntype Props = DuplicantsListProps;\r\n@observer\r\nclass DuplicantsList extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            className,\r\n            duplicants\r\n        } = this.props;\r\n\r\n        let selectedDuplicant = this.props.selectedDuplicant;\r\n        if (typeof selectedDuplicant === \"number\") {\r\n            selectedDuplicant = duplicants.find(x => x.kPrefabID === selectedDuplicant);\r\n        }\r\n\r\n        const elements = duplicants.map(x => <DuplicantPortrait key={x.kPrefabID} className={x === selectedDuplicant ? \"pt-active\" : \"\"} duplicant={x} onClick={this._onDuplicantClick} />);\r\n\r\n        return (\r\n            <div className={`${className || ''} ui-duplicant-list`}>\r\n                <div className={`fill-parent layout-horizontal layout-wrap container-scroll`}>\r\n                    {elements}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onDuplicantClick(duplicant: GameObjectModel) {\r\n        const {\r\n            onDuplicantClick\r\n        } = this.props;\r\n\r\n        if (onDuplicantClick) {\r\n            onDuplicantClick(duplicant);\r\n        }\r\n    }\r\n}\r\nexport default DuplicantsList;\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { NonIdealState } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport { SaveEditorProps, withSaveEditor, GameObjectModel } from \"@/services/save-editor\";\r\n\r\n\r\nimport DuplicantsList from \"./components/DuplicantsList\";\r\nimport DuplicantEditor from \"./components/DuplicantEditor\";\r\n\r\n\r\ntype Props = SaveEditorProps;\r\ninterface State {\r\n    selectedDuplicant: GameObjectModel | null;\r\n}\r\nclass DuplicantsPage extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            selectedDuplicant: null\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            selectedDuplicant\r\n        } = this.state;\r\n        const {\r\n            saveEditor\r\n        } = this.props;\r\n\r\n        const duplicants = saveEditor.getGameObjects(\"Minion\");\r\n\r\n        let content: React.ReactFragment;\r\n        if (selectedDuplicant != null) {\r\n            content = <DuplicantEditor className=\"fill-parent\" duplicant={selectedDuplicant}/>\r\n        }\r\n        else {\r\n            content = (\r\n                <NonIdealState visual={IconNames.MUGSHOT}>\r\n                    Select a duplicant to edit\r\n                </NonIdealState>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"ui-page ui-page-duplicants fill-parent layout-vertical\">\r\n                <DuplicantsList className=\"layout-item\" duplicants={duplicants} selectedDuplicant={selectedDuplicant} onDuplicantClick={this._onDuplicantSelected} />\r\n                <div className=\"layout-item-fill\">\r\n                    {content}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onDuplicantSelected(duplicant: GameObjectModel) {\r\n        this.setState(s => ({\r\n            ...s,\r\n            selectedDuplicant: duplicant\r\n        }));\r\n    }\r\n}\r\n\r\nexport default withSaveEditor(DuplicantsPage);\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n\r\nexport { pageGraph } from \"./page-graph\";","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ui-page-general {\\n  padding: 15px; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import * as React from \"react\";\r\nimport { action } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { NumericInput } from \"@blueprintjs/core\";\r\nimport { GameObjectBehavior } from \"oni-save-parser\";\r\n\r\nimport {\r\n  SaveEditorProps,\r\n  withSaveEditor,\r\n  GameObjectBehaviorModel\r\n} from \"@/services/save-editor\";\r\n\r\nimport \"./style.scss\";\r\n\r\ntype Props = SaveEditorProps;\r\nclass GeneralPage extends React.Component<Props> {\r\n  render() {\r\n    const { saveEditor } = this.props;\r\n\r\n    const clockBehavior = this._getClockBehavior();\r\n    if (!clockBehavior)\r\n      return (\r\n        <div>Error: No GameClock behavior present in SaveGame object.</div>\r\n      );\r\n    const cycle = clockBehavior.templateData.cycle;\r\n\r\n    const immigrationBehavior = this._getImmigrationBehavior();\r\n    if (!immigrationBehavior)\r\n      return (\r\n        <div>Error: No Immigration behavior present in SaveGame object.</div>\r\n      );\r\n    const {\r\n      timeBeforeSpawn,\r\n      bImmigrantAvailable\r\n    } = immigrationBehavior.templateData;\r\n\r\n    return (\r\n      <div className=\"ui-page ui-page-general fill-parent layout-vertical\">\r\n        <div className=\"pt-form-group\">\r\n          <label className=\"pt-label\">\r\n            <h5>World Time</h5>\r\n          </label>\r\n          <div className=\"pt-form-content\">\r\n            <div className=\"pt-input-group\">\r\n              <span>Cycles</span>\r\n              <NumericInput\r\n                min={0}\r\n                value={cycle}\r\n                onValueChange={this._onCycleChange}\r\n                clampValueOnBlur={true}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"pt-form-group\">\r\n          <label className=\"pt-label\">\r\n            <h5>Duplicant Spawner</h5>\r\n          </label>\r\n          <div className=\"pt-form-content\">\r\n            <div className=\"pt-input-group\">\r\n              <span>Next Spawn</span>\r\n              <NumericInput\r\n                min={0}\r\n                clampValueOnBlur={true}\r\n                value={timeBeforeSpawn}\r\n                onValueChange={this._nextSpawnChange}\r\n              />\r\n            </div>\r\n            <div className=\"pt-input-group\">\r\n              <label className=\"pt-control pt-checkbox\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={bImmigrantAvailable}\r\n                  onChange={this._spawnReadyChange}\r\n                />\r\n                <span className=\"pt-control-indicator\" />\r\n                Spawn Ready\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  @action.bound\r\n  private _onCycleChange(cycle: number) {\r\n    const behavior = this._getClockBehavior();\r\n    if (!behavior) return;\r\n    behavior.templateData.cycle = cycle;\r\n  }\r\n\r\n  @action.bound\r\n  private _nextSpawnChange(time: number) {\r\n    const behavior = this._getImmigrationBehavior();\r\n    if (!behavior) return;\r\n    behavior.templateData.timeBeforeSpawn = time;\r\n  }\r\n\r\n  @action.bound\r\n  private _spawnReadyChange(change: React.ChangeEvent<HTMLInputElement>) {\r\n    const behavior = this._getImmigrationBehavior();\r\n    if (!behavior) return;\r\n    behavior.templateData.bImmigrantAvailable = change.target.checked;\r\n  }\r\n\r\n  private _getClockBehavior():\r\n    | GameObjectBehaviorModel<GameClockBehavior>\r\n    | undefined {\r\n    const { saveEditor } = this.props;\r\n    const saveGame = saveEditor.getGameObjects(\"SaveGame\")[0];\r\n    if (!saveGame) return undefined;\r\n\r\n    return saveGame.getBehavior(\"GameClock\");\r\n  }\r\n\r\n  private _getImmigrationBehavior():\r\n    | GameObjectBehaviorModel<ImmigrationBehavior>\r\n    | undefined {\r\n    const { saveEditor } = this.props;\r\n    const saveGame = saveEditor.getGameObjects(\"SaveGame\")[0];\r\n    if (!saveGame) return undefined;\r\n\r\n    return saveGame.getBehavior(\"Immigration\");\r\n  }\r\n}\r\n\r\nexport default withSaveEditor(GeneralPage);\r\n\r\n// TODO: move to oni-save-parser\r\ninterface GameClockBehavior extends GameObjectBehavior {\r\n  name: \"GameClock\";\r\n  templateData: {\r\n    cycle: number;\r\n  };\r\n}\r\ninterface ImmigrationBehavior extends GameObjectBehavior {\r\n  name: \"Immigration\";\r\n  templateData: {\r\n    timeBeforeSpawn: number;\r\n    bImmigrantAvailable: boolean;\r\n  };\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport { SiteGraph } from \"@/site-graph\";\r\n\r\nimport General from \"./pages/General\";\r\nimport Duplicants, { pageGraph as duplicantsPageGraph } from \"./pages/Duplicants\";\r\nimport Geysers from \"./pages/Geysers\";\r\n\r\n\r\nexport const pageGraph: SiteGraph = [\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/general\",\r\n        name: \"General\",\r\n        component: General\r\n    },\r\n    {\r\n        // TODO: Update components to take params\r\n        type: \"page\",\r\n        path: \"/editor/duplicants\", // \"/editor/duplicants/:prefabId\",\r\n        name: \"Duplicants\",\r\n        component: Duplicants,\r\n        //children: duplicantsPageGraph\r\n    },\r\n    {\r\n        type: \"page\",\r\n        path: \"/editor/geysers\",\r\n        name: \"Geysers\",\r\n        component: Geysers\r\n    }\r\n];\r\n","\r\nimport * as React from \"react\";\r\n\r\nimport {\r\n    NonIdealState,\r\n    Text\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\n\r\nexport interface ErrorPageProps {\r\n    error: Error;\r\n}\r\ntype Props = ErrorPageProps;\r\nclass ErrorPage extends React.Component<Props> {\r\n    render() {\r\n        let {\r\n            error\r\n        } = this.props;\r\n\r\n        if (!error) {\r\n            error = new Error(\"Well, this is weird... The Error page loaded, but there is no error.\");\r\n            error.stack = \"I really don't know what to do about this...\"\r\n        }\r\n\r\n        return (\r\n            <NonIdealState visual={IconNames.ERROR} description=\"An Error Occurred\">\r\n                <Text>{error.message}</Text>\r\n                <div>\r\n                    <code>{error.stack}</code>\r\n                </div>\r\n            </NonIdealState>\r\n        );\r\n    }\r\n}\r\nexport default ErrorPage;","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport * as React from \"react\";\r\n\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport {\r\n    NonIdealState,\r\n    Spinner,\r\n    Text\r\n} from \"@blueprintjs/core\";\r\n\r\nimport { \r\n    SaveEditorProps,\r\n    withSaveEditor\r\n} from \"@/services/save-editor\";\r\n\r\n@observer\r\nclass LoadingSaveFile extends React.Component<SaveEditorProps> {\r\n    render() {\r\n        const currentStep = this.props.saveEditor.saveLoadParseStep;\r\n        return (\r\n            <NonIdealState>\r\n                <Text>Loading File</Text>\r\n                <div>\r\n                    <Spinner large={true}/>\r\n                </div>\r\n                <Text>{currentStep}</Text>\r\n            </NonIdealState>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withSaveEditor(LoadingSaveFile);\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport {\r\n    NonIdealState,\r\n    Button,\r\n    Intent\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\n\r\nimport { SaveEditorProps, withSaveEditor } from \"@/services/save-editor\";\r\n\r\n\r\nconst saveDescription = \"Oxygen Not Included saves can be found in your documents folder under\";\r\n// TODO: Show correct path based on user's OS.\r\nconst savePath = \"Klei/OxygenNotIncluded/save_files\";\r\n\r\ntype Props = SaveEditorProps;\r\n@observer\r\nclass NoSaveLoadedPageComponent extends React.Component<Props> {\r\n    private _input: HTMLInputElement | null = null;\r\n    \r\n    render() {\r\n        return (\r\n            <NonIdealState\r\n                visual={IconNames.FLOPPY_DISK}\r\n                action={\r\n                    <Button intent={Intent.PRIMARY} onClick={this._onLoadClick}>Load a .sav file</Button>\r\n                }\r\n                description=\"No save has been loaded.\"\r\n            >\r\n                <div>{saveDescription} <code>{savePath}</code></div>\r\n                <input\r\n                    ref={el => this._input = el}\r\n                    style={{display: \"none\"}}\r\n                    className=\"pt-button pt-intent-primary\"\r\n                    type=\"file\"\r\n                    accept=\".sav\"\r\n                    onChange={this._onLoadFile}\r\n                />\r\n            </NonIdealState>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onLoadClick() {\r\n        if (!this._input) return;\r\n        this._input.click();\r\n    }\r\n\r\n    @autobind()\r\n    private _onLoadFile(change: React.ChangeEvent<HTMLInputElement>) {\r\n        const files = change.target.files;\r\n        if (!files || files.length === 0) return;\r\n        this.props.saveEditor.load(files[0]);\r\n    }\r\n}\r\nexport default withSaveEditor(NoSaveLoadedPageComponent);\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;","import * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport { Card, Elevation, Menu, MenuDivider } from \"@blueprintjs/core\";\r\n\r\nimport { withSaveEditor, SaveEditorProps } from \"@/services/save-editor\";\r\n\r\nimport NoSaveLoadedPage from \"./components/NoSaveLoaded\";\r\nimport LoadingSaveFilePage from \"./components/LoadingSaveFile\";\r\n\r\nimport ErrorPage from \"../Error\";\r\n\r\ntype Props = SaveEditorProps;\r\n@observer\r\nclass SaveEditorPageComponent extends React.Component<Props> {\r\n  render() {\r\n    const {\r\n      saveEditor: { loadError, isSaveLoading, isSaveLoaded },\r\n      children\r\n    } = this.props;\r\n\r\n    if (loadError) {\r\n      // Show error screen\r\n      return <ErrorPage error={loadError} />;\r\n    } else if (isSaveLoading) {\r\n      return <LoadingSaveFilePage />;\r\n    } else if (!isSaveLoaded) {\r\n      return <NoSaveLoadedPage />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"ui-page ui-page-saveeditor fill-parent\">{children}</div>\r\n    );\r\n  }\r\n}\r\nexport default withSaveEditor(SaveEditorPageComponent);\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n\r\nexport { pageGraph } from \"./page-graph\";\r\n","\r\nimport { SitePage } from \"@/site-graph\";\r\n\r\nimport App from \"../components/App\";\r\nimport SaveEditor, { pageGraph as saveEditorPages } from \"../pages/SaveEditor\";\r\nimport ChangeLog from \"../pages/Changelog\";\r\n\r\nconst siteGraph: SitePage = {\r\n    type: \"page\",\r\n    name: \"Duplicity\",\r\n    path: \"/\",\r\n    component: App,\r\n    children: [\r\n        {\r\n            // Save Editor\r\n            type: \"page\",\r\n            path: \"/editor\",\r\n            name: \"Save Editor\",\r\n            component: SaveEditor,\r\n            navMenuCollapse: true,\r\n            children: saveEditorPages\r\n        },\r\n        {\r\n            type: \"page\",\r\n            path: \"/changelog\",\r\n            name: \"Duplicity Changelog\",\r\n            component: ChangeLog\r\n        }\r\n    ]\r\n};\r\n\r\nexport default siteGraph;\r\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ui-page-404 .ui-title {\\n  font-size: 20pt; }\\n\\n.ui-page-404 .ui-title-secondary {\\n  font-size: 12pt; }\\n\\n.ui-page-404 .ui-body {\\n  margin-top: 8px; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\nimport * as React from \"react\";\r\n\r\nimport {\r\n    NonIdealState,\r\n    Text\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport \"./style.scss\";\r\n\r\nclass DuplicantsPage extends React.Component {\r\n    render() {\r\n        return (\r\n            <NonIdealState className=\"ui-page ui-page-404\" visual={IconNames.ERROR}>\r\n                <div>\r\n                    <div className=\"ui-title\">I don't know how you got here...</div>\r\n                    <div className=\"ui-title-secondary\">But weasels were probably involved.</div>\r\n                </div>\r\n                <div className=\"ui-body\">\r\n                    <div>No idea what this page is supposed to be, sorry.</div>\r\n                    <div>Try choosing something else to edit.</div>\r\n                </div>\r\n            </NonIdealState>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DuplicantsPage","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","import * as React from \"react\";\r\nimport {\r\n  Switch,\r\n  Route,\r\n  RouteComponentProps,\r\n  withRouter\r\n} from \"react-router-dom\";\r\n\r\nimport Page404 from \"../../pages/404\";\r\n\r\nimport { SiteGraph, SitePage, SiteGraphEntry, SitePath } from \"../interfaces\";\r\n\r\nexport interface SiteSwitchProps {\r\n  siteGraph: SiteGraph;\r\n}\r\n\r\ntype Props = SiteSwitchProps & RouteComponentProps<any>;\r\nclass SiteSwitch extends React.Component<Props> {\r\n  render() {\r\n    const { siteGraph, children } = this.props;\r\n    const routes = this._renderRoutes(siteGraph);\r\n    return (\r\n      <Switch>\r\n        {routes}\r\n        {children}\r\n        <Route component={Page404} />\r\n      </Switch>\r\n    );\r\n  }\r\n\r\n  private _renderRoutes(entries: SiteGraphEntry[]): React.ReactChild[] {\r\n    return collectRouteEntries(entries).map(x => {\r\n      switch (x.type) {\r\n        case \"page\":\r\n          return this._renderPage(x);\r\n        case \"path\":\r\n          return this._renderPath(x);\r\n      }\r\n    });\r\n  }\r\n\r\n  private _renderPage(page: SitePage): React.ReactChild {\r\n    let children: React.ReactChild | undefined = undefined;\r\n    if (page.children) {\r\n      children = <SiteSwitchWithRouter siteGraph={page.children} />;\r\n    }\r\n    return (\r\n      <Route\r\n        key={page.path}\r\n        exact={!children}\r\n        path={page.path}\r\n        render={props => <page.component {...props} children={children} />}\r\n      />\r\n    );\r\n  }\r\n\r\n  private _renderPath(path: SitePath): React.ReactChild {\r\n    // TODO: Good place to support index path.\r\n    //  If index enabled, first item is <Redirect exact path={path.path} to={path.indexPath}/>\r\n    return (\r\n      <React.Fragment key={path.path}>\r\n        {this._renderRoutes(path.children)}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nfunction collectRouteEntries(graph: SiteGraph): (SitePage | SitePath)[] {\r\n  const elements: (SitePage | SitePath)[] = [];\r\n  for (let entry of graph) {\r\n    switch (entry.type) {\r\n      case \"page\":\r\n      case \"path\":\r\n        elements.push(entry);\r\n        break;\r\n      case \"group\":\r\n        elements.push(...collectRouteEntries(entry.children));\r\n    }\r\n  }\r\n  return elements;\r\n}\r\n\r\nconst SiteSwitchWithRouter = withRouter(SiteSwitch);\r\nexport default SiteSwitchWithRouter;\r\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"abb3a72bfa86ee111fc2.worker.js\");\n};","import { GameObjectBehaviorModel } from \"./interfaces\";\r\nimport { GameObjectBehavior } from \"oni-save-parser\";\r\nimport { observable, toJS } from \"mobx\";\r\n\r\nexport class GameObjectBehaviorModelImpl implements GameObjectBehaviorModel {\r\n  get name(): string {\r\n    return this._behavior.name;\r\n  }\r\n\r\n  @observable.deep templateData: any | null;\r\n\r\n  constructor(private _behavior: GameObjectBehavior) {\r\n    this.templateData = _behavior.templateData || null;\r\n  }\r\n\r\n  syncChanges() {\r\n    this._behavior.templateData = toJS(this.templateData, {\r\n      exportMapsAsObjects: false\r\n    });\r\n  }\r\n}\r\n","\r\nimport { observable, toJS } from \"mobx\";\r\n// import { createTransformer } from \"mobx-utils\";\r\n\r\nimport {\r\n    GameObject,\r\n    Vector3,\r\n    KPrefabIDBehavior,\r\n    BehaviorName,\r\n    GameObjectBehavior\r\n} from \"oni-save-parser\";\r\n\r\nimport { GameObjectModel, GameObjectBehaviorModel } from \"./interfaces\";\r\n\r\nimport { GameObjectBehaviorModelImpl } from \"./game-object-behavior\";\r\n\r\nexport class GameObjectModelImpl implements GameObjectModel {\r\n    readonly type: string;\r\n\r\n    readonly kPrefabID: number;\r\n\r\n    @observable.deep\r\n    position: Vector3;\r\n\r\n    @observable.deep\r\n    scale: Vector3;\r\n\r\n    private _gameObject: GameObject;\r\n\r\n    private _behaviors = new Map<string, GameObjectBehaviorModelImpl[]>();\r\n\r\n    constructor(type: string, gameObject: GameObject) {\r\n        this.type = type;\r\n        this._gameObject = gameObject;\r\n\r\n        this.position = gameObject.position;\r\n        this.scale = gameObject.scale;\r\n\r\n        for (let behavior of gameObject.behaviors) {\r\n            let array = this._behaviors.get(behavior.name);\r\n            if (!array) {\r\n                array = [];\r\n                this._behaviors.set(behavior.name, array);\r\n            }\r\n            array.push(new GameObjectBehaviorModelImpl(behavior));\r\n        }\r\n\r\n        const idBehavior = this.getBehavior(KPrefabIDBehavior);\r\n        if (idBehavior) {\r\n            this.kPrefabID = idBehavior.templateData.InstanceID;\r\n        }\r\n        else {\r\n            this.kPrefabID = NaN;\r\n        }\r\n    }\r\n\r\n    // TODO: Look at why this is generating new objects every time.  Might be because the source object isnt observable?\r\n    /*\r\n    getBehavior: GameObjectModel[\"getBehavior\"] = createTransformer((behaviorName: string) => {\r\n        const behavior = this._gameObject.behaviors.find(x => x.name === behaviorName);\r\n        if (!behavior) return undefined;\r\n        return new GameObjectBehaviorModelImpl(behavior);\r\n    });\r\n    */\r\n    getBehavior<TBehavior extends GameObjectBehavior>(behaviorName: BehaviorName<TBehavior>): GameObjectBehaviorModel<TBehavior> | undefined {\r\n        const entries = this._behaviors.get(behaviorName);\r\n        if (entries) return entries[0] as any;\r\n        return undefined;\r\n    }\r\n\r\n    /*\r\n    getAllBehaviors: GameObjectModel[\"getAllBehaviors\"] = createTransformer((behaviorName: string) => {\r\n        return this._gameObject.behaviors.filter(x => x.name === behaviorName).map(x => new GameObjectBehaviorModelImpl(x));\r\n    });\r\n    */\r\n\r\n    getAllBehaviors<TBehavior extends GameObjectBehavior>(behaviorName: BehaviorName<TBehavior>): GameObjectBehaviorModel<TBehavior>[] {\r\n        return this._behaviors.get(behaviorName) || [] as any;\r\n    }\r\n\r\n    syncChanges() {\r\n        // Sigh...\r\n        this._gameObject.position.x = this.position.x;\r\n        this._gameObject.position.y = this.position.y;\r\n        this._gameObject.position.z = this.position.z;\r\n\r\n        this._gameObject.scale.x = this.scale.x;\r\n        this._gameObject.scale.y = this.scale.y;\r\n        this._gameObject.scale.z = this.scale.z;\r\n\r\n        for (let [_, values] of this._behaviors) {\r\n            values.forEach(x => x.syncChanges());\r\n        }\r\n    }\r\n}\r\n","\r\nimport * as React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { Route, Redirect, Switch, RouteComponentProps, withRouter } from \"react-router\";\r\n\r\nimport {\r\n    Dialog,\r\n    Spinner,\r\n    NonIdealState\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport DevTools from \"mobx-react-devtools\";\r\n\r\nimport { SaveEditorProps, withSaveEditor } from \"@/services/save-editor\";\r\n\r\nimport SiteSwitch from \"@/site-graph/components/SiteSwitch\";\r\nimport siteRoot from \"@/site-graph/root\";\r\n\r\nimport AppNavBar from \"../AppNavBar\";\r\nimport AppNavMenu from \"../AppNavMenu\";\r\nimport SavingDialog from \"../SavingDialog\";\r\n\r\n\r\ntype Props = SaveEditorProps & RouteComponentProps<any>;\r\n@observer\r\nclass AppComponent extends React.Component<Props> {\r\n    private _input: HTMLInputElement | null = null;\r\n\r\n    render() {\r\n        const {\r\n            saveEditor: {\r\n                isSaveSaving,\r\n                saveName\r\n            }\r\n        } = this.props;\r\n\r\n        return (\r\n            <div className=\"ui-app-root pt-app pt-dark fill-parent layout-vertical\">\r\n                <AppNavBar className=\"layout-item\" />\r\n                <div className=\"layout-item-fill layout-horizontal\">\r\n                    <AppNavMenu className=\"layout-item\" siteGraph={siteRoot.children!} />\r\n                    <div className=\"layout-item-fill\">\r\n                        <SiteSwitch siteGraph={siteRoot.children!}>\r\n                            { /* TODO: Use an index path concept for site graph. */}\r\n                            <Redirect exact from=\"/\" to=\"/editor\" />\r\n                        </SiteSwitch>\r\n                    </div>\r\n                    {process.env.NODE_ENV === \"development\" ? <DevTools /> : undefined}\r\n                </div>\r\n                <Dialog isOpen={isSaveSaving} title=\"Saving File\" icon={IconNames.SAVED} isCloseButtonShown={false}>\r\n                    <SavingDialog />\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n// Need withRouter to force update.  Yes, we need one on either side of ../App.tsx\r\nexport default withRouter(withSaveEditor(AppComponent));\r\n","\r\nimport * as React from \"react\";\r\n\r\nimport { hot } from \"react-hot-loader\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport App from \"./components/App\";\r\n\r\n// react-router wants to wrap every element we have in a new element.  Because composability!\r\n//  without wrapping this in a <Route/> from the outside, the PureComponent hot will not see\r\n//  any changes, and the broken context system is ignored.\r\n//  Every other library out their uses an external context store similar to the new react context\r\n//  pattern, but router just blames everyone else for honoring shouldComponentUpdate and says wontfix.\r\n// Might be better off removing route altogether and staying a SPA.\r\nexport default withRouter(hot(module)(App) as any);\r\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"html, body, #root {\\n  height: 100%;\\n  width: 100%; }\\n\\nbody {\\n  margin: 0;\\n  padding: 0; }\\n\\n.fill-parent, .fill-parent-width, .fill-parent-height {\\n  /* Fill parent to our outsides.*/\\n  box-sizing: border-box; }\\n\\n.fill-parent, .fill-parent-width {\\n  width: 100%; }\\n\\n.fill-parent, .fill-parent-height {\\n  height: 100%; }\\n\\n.layout-wrap {\\n  flex-wrap: wrap; }\\n\\n/*\\r\\n============================================================================\\r\\nHorizontal and Vertical Layouts\\r\\n============================================================================\\r\\n*/\\n/* Container for items that can fill up the available space, and optionally be constrained by it. */\\n.layout-vertical {\\n  display: flex;\\n  flex-direction: column; }\\n\\n.layout-horizontal {\\n  display: flex;\\n  flex-direction: row; }\\n\\n.layout-item, .layout-item-fill {\\n  box-sizing: border-box; }\\n\\n.layout-vertical > div, .layout-horizontal > div, .layout-vertical > .layout-item, .layout-horizontal > .layout-item {\\n  flex: none; }\\n\\n.layout-vertical > .layout-item-fill, .layout-horizontal > .layout-item-fill {\\n  flex: 1 1 auto; }\\n\\n.layout-vertical > .layout-item-constrain, .layout-horizontal > .layout-item-constrain {\\n  flex: 0 1 auto; }\\n\\n.layout-vertical > .layout-item-fill, .layout-vertical > .layout-item-constrain {\\n  /* Flex sets min-height to auto, we need to allow it to shrink down */\\n  min-height: 0;\\n  /*\\r\\n    Maintain some sort of inner css specified (vs actual?) value for height, so that \\r\\n    child elements can use height percentages and fill their parent (us)\\r\\n    */\\n  height: 100%; }\\n\\n.layout-horizontal > .layout-item-fill, .layout-horizontal > .layout-item-constrain {\\n  min-width: 0;\\n  width: 100%; }\\n\\n/*\\r\\n============================================================================\\r\\nContent Containers\\r\\n============================================================================\\r\\n*/\\n.container-scroll {\\n  overflow: auto; }\\n\\n/*\\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\\n */\\n.ui-app-root {\\n  background-color: #182026; }\\n\\n.ui-page-duplicants .ui-duplicant-editor {\\n  box-sizing: border-box;\\n  padding: 5px; }\\n  .ui-page-duplicants .ui-duplicant-editor .ui-title {\\n    display: inline-block;\\n    width: auto; }\\n\\n.ui-page-duplicants .ui-duplicant-skills .pt-html-table {\\n  width: 100%;\\n  max-height: 100%; }\\n\\n.ui-page-duplicants .ui-duplicant-effects .pt-html-table {\\n  width: 100%;\\n  max-height: 100%; }\\n\\n.pt-multi-select-popover .pt-menu, .pt-select-popover .pt-menu {\\n  max-width: 400px;\\n  max-height: 300px;\\n  overflow: auto; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./root.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./root.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./root.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\n import \"@blueprintjs/core/lib/css/blueprint.css\";\r\n import \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\r\n\r\nimport \"./root.scss\";\r\n","\r\nimport * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport { Provider } from \"mobx-react\";\r\n\r\nimport { HashRouter } from \"react-router-dom\";\r\n\r\nimport \"./css\";\r\nimport App from \"./app\";\r\nimport { createStores } from \"./store\";\r\n\r\nconst rootEl = document.getElementById(\"root\");\r\n\r\nReactDOM.render(\r\n    <Provider {...createStores()}>\r\n        <HashRouter>\r\n            <App />\r\n        </HashRouter>\r\n    </Provider>,\r\n    rootEl\r\n);\r\n"],"sourceRoot":""}