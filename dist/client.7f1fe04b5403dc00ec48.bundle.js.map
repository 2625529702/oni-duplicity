{"version":3,"sources":["webpack:///./src/pages/SaveEditor/actions/receive-onisave.ts","webpack:///./src/theme.ts","webpack:///./src/store/index.ts","webpack:///./src/pages/SaveEditor/selectors/save-editor-state.ts","webpack:///./src/pages/SaveEditor/selectors/oni-save-selector.ts","webpack:///./src/pages/SaveEditor/actions/select-path.ts","webpack:///./src/pages/SaveEditor/selectors/selected-path.ts","webpack:///./src/pages/SaveEditor/components/SaveStructureLink/index.ts","webpack:///./src/pages/SaveEditor/utils/extract-object-name.ts","webpack:///./src/components/Flex/index.ts","webpack:///./src/pages/SaveEditor/actions/save-onisave.ts","webpack:///./src/pages/SaveEditor/actions/load-onisave.ts","webpack:///./src/services/save-serializer/worker-instance.ts","webpack:///./src/services/save-serializer/sagas/index.ts","webpack:///./src/pages/SaveEditor/actions/modify-onisave.ts","webpack:///./src/pages/SaveEditor/actions/dismiss-error.ts","webpack:///./src/store/state.ts","webpack:///./src/App/components/AppContainer.tsx","webpack:///./src/pages/SaveEditor/components/SelectedObjectEditor/events.ts","webpack:///./src/pages/SaveEditor/components/SelectedObjectEditor/derived-state.ts","webpack:///./src/pages/SaveEditor/components/SelectedObjectEditor/components/EditorField.tsx","webpack:///./src/pages/SaveEditor/components/SelectedPathBreadcrumb/derived-state.ts","webpack:///./src/pages/SaveEditor/components/SelectedPathBreadcrumb/SelectedPathBreadcrumb.tsx","webpack:///./src/pages/SaveEditor/components/SelectedPathBreadcrumb/index.ts","webpack:///./src/pages/SaveEditor/components/SaveStructureLink/events.ts","webpack:///./src/pages/SaveEditor/components/SaveStructureLink/SaveStructureLink.tsx","webpack:///./src/pages/SaveEditor/components/SelectedObjectEditor/components/Container.tsx","webpack:///./src/pages/SaveEditor/components/SelectedObjectEditor/SelectedObjectEditor.tsx","webpack:///./src/pages/SaveEditor/components/SelectedObjectEditor/index.ts","webpack:///./src/pages/SaveEditor/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemContent.tsx","webpack:///./src/pages/SaveEditor/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemHeader/components/ItemText.tsx","webpack:///./src/pages/SaveEditor/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemHeader/components/Expander.tsx","webpack:///./src/pages/SaveEditor/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemHeader/SaveStructureItemHeader.tsx","webpack:///./src/pages/SaveEditor/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemHeader/index.ts","webpack:///./src/pages/SaveEditor/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemContainer.tsx","webpack:///./src/pages/SaveEditor/components/SaveStructureTree/components/SaveStructureItem/SaveStructureItem.tsx","webpack:///./src/pages/SaveEditor/components/SaveStructureTree/components/SaveStructureItem/index.ts","webpack:///./src/pages/SaveEditor/components/SaveStructureTree/components/SaveStructureContainer.tsx","webpack:///./src/pages/SaveEditor/components/SaveStructureTree/SaveStructure.tsx","webpack:///./src/pages/SaveEditor/components/SaveStructureTree/index.ts","webpack:///./src/pages/SaveEditor/components/ContentContainer.tsx","webpack:///./src/components/ResizePanel/components/ResizeHandleVisual.tsx","webpack:///./src/components/ResizePanel/components/ResizeHandle.tsx","webpack:///./src/components/ResizePanel/ResizePanel.tsx","webpack:///./src/components/ResizePanel/index.ts","webpack:///./src/pages/SaveEditor/components/SidebarContainer.tsx","webpack:///./src/pages/SaveEditor/components/SaveEditorContainer.tsx","webpack:///./src/pages/SaveEditor/events.ts","webpack:///./src/pages/SaveEditor/selectors/loading-state-selector.ts","webpack:///./src/pages/SaveEditor/selectors/error-selector.ts","webpack:///./src/pages/SaveEditor/derived-state.ts","webpack:///./src/components/Flex/FlexItem.tsx","webpack:///./src/components/Flex/FlexContainer.tsx","webpack:///./src/pages/SaveEditor/SaveEditor.tsx","webpack:///./src/pages/SaveEditor/index.ts","webpack:///./src/App/App.tsx","webpack:///./src/App/index.ts","webpack:///./src/store/devtool-sanitizer.ts","webpack:///./src/pages/SaveEditor/saga/save-onisave.ts","webpack:///./src/services/save-serializer/sagas/write-savegame.ts","webpack:///./src/services/save-serializer/save-serializer.worker.ts","webpack:///./src/services/save-serializer/worker-messages.ts","webpack:///./src/services/save-serializer/sagas/read-savegame.ts","webpack:///./src/pages/SaveEditor/saga/load-onisave.ts","webpack:///./src/pages/SaveEditor/saga/index.ts","webpack:///./src/store/saga.ts","webpack:///./src/pages/SaveEditor/reducer/select-path.ts","webpack:///./src/pages/SaveEditor/reducer/receive-onisave.ts","webpack:///./src/pages/SaveEditor/reducer/modify-onisave.ts","webpack:///./src/pages/SaveEditor/reducer/dismiss-error.ts","webpack:///./src/pages/SaveEditor/reducer/index.ts","webpack:///./src/store/reducer.ts","webpack:///./src/store/store.ts","webpack:///./src/pages/SaveEditor/state/index.ts","webpack:///./src/root.tsx","webpack:///./src/style.css","webpack:///./src/style.css?7528","webpack:///./src/index.tsx"],"names":["exports","ACTION_RECEIVE_ONISAVE_BEGIN","receiveOniSaveBegin","operation","clearExisting","type","payload","ACTION_RECEIVE_ONISAVE_ERROR","receiveOniSaveError","error","ACTION_RECEIVE_ONISAVE_SUCCESS","receiveOniSaveSuccess","oniSave","colors","bgApp","bgPanel","bgSeparator","space","theme","getTheme","props","default","__export","__webpack_require__","saveEditorStateSelector","state","pages","saveEditor","save_editor_state_1","__importDefault","oniSaveSelector","ACTION_SELECT_PATH","selectPath","path","selectedPathSelector","selectedPath","SaveStructureLink_1","lodash_es_1","extractObjectName","obj","Array","isArray","length","isObject","name","undefined","String","FlexContainer_1","FlexItem_1","Container","Item","FlexContainer","FlexItem","ACTION_ONISAVE_SAVE","saveOniSave","fileName","ACTION_ONISAVE_LOAD","loadOniSave","file","worker_messages_1","save_serializer_worker_1","worker","parseSave","data","promise","Promise","accept","reject","unhook","onerror","onmessage","message","saveGame","jsonToError","postMessage","writeSave","ACTION_ONISAVE_MODIFY","modifyOniSave","value","ACTION_DISMISS_ERROR","dismissError","state_1","defaultAppState","Object","freeze","defaultSaveEditorPageState","styled_components_1","theme_1","AppContainer","div","mapDispatchToProps","onModify","reselect_1","oni_save_selector_1","selected_path_1","structuredSelectors","selectedValue","createSelector","get","mapStateToProps","createStructuredSelector","React","__importStar","core_decorators_1","EditorField","Component","[object Object]","this","createElement","onChange","_onChange","JSON","stringify","e","propKey","target","parse","_a","key","code","eval","__decorate","autobind","structuredSelector","react_redux_1","derived_state_1","SelectedPathBreadcrumb","elements","pathPart","push","pop","connect","SelectedPathBreadcrumb_1","onClick","events_1","SaveStructureLink","children","Link","_onClick","span","extract_object_name_1","Container_1","EditorField_1","SelectedObjectEditor","super","fields","keys","map","_renderFieldRow","isEditableValue","_onFieldChange","objectName","primitiveTypes","val","valType","indexOf","SelectedObjectEditor_1","SaveStructureItemContent","ItemText","Expander","className","expanded","width","height","viewBox","d","fill","Expander_1","ItemText_1","SaveStructureItemHeader","expandable","header","onExpandToggle","SaveStructureItemHeader_1","SaveStructureItemContainer","string_natural_compare_1","SaveStructureItemContainer_1","SaveStructureItemContent_1","SaveStructureItem","isExpanded","title","propValue","expandableKeys","filter","valueKey","sort","valueElement","valueTitle","onSelected","_onChildSelected","_onExpandToggle","setState","SaveStructureItem_1","SaveStructureContainer","SaveStructureContainer_1","SaveStructure","_onSavePropSelected","slice","SaveStructure_1","ContentContainer","ResizeHandleVisual","react_draggable_1","ResizeHandleVisual_1","ResizeHandle","_onDrag","bind","DraggableCore","onDrag","onResize","deltaX","Flex_1","ResizeHandle_1","ResizePanel","defaultWidth","direction","style","_onResize","delta","s","ResizePanel_1","SidebarResizePanel","SidebarInnerContainer","SidebarContainer","SaveEditorContainer","save_game_json_1","dismiss_error_1","load_onisave_1","save_onisave_1","select_path_1","receive_onisave_1","onDismissError","onLoad","onLoadTestData","onSave","onSelectPath","loadingStateSelector","loadingState","errorSelector","error_selector_1","loading_state_selector_1","stateSelectors","styled_system_1","grow","shrink","react_modal_1","SaveEditorContainer_1","SidebarContainer_1","ContentContainer_1","SaveStructureTree_1","SaveEditor","_input","isOpen","contentLabel","onRequestClose","stack","ref","el","display","_onLoadFile","_onLoadFileClick","_onSaveFileClick","_onPathSelected","click","files","withExtension","ext","endsWith","SaveEditor_1","AppContainer_1","App","App_1","actionSanitizer","action","assign","sanitizeSave","stateSanitizer","save","world","streamed","effects_1","sagas_1","file_saver_1","saveEditorSaga","takeEvery","handleOniSaveLoad","saveName","select","blob","put","call","writeSaveGame","saveAs","worker_instance_1","Blob","module","Worker","p","parseSaveSuccess","parseSaveError","errorToJson","writeSaveSuccess","Error","writeSaveError","readSaveGame","readFile","reader","FileReader","onload","result","readAsArrayBuffer","fork","saga_1","rootSaga","immer_1","store_1","selectPathReducer","draft","receiveOniSaveReducer","saveEditorState","modify_onisave_1","modifyOniSaveReducer","set","dismissErrorReducer","reduce_reducers_1","reducers","reducer_1","reducer","redux_1","redux_saga_1","devtool_sanitizer_1","createStore","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","sagaMiddleware","store","applyMiddleware","run","react_hot_loader_1","Root","ThemeProvider","Provider","hot","i","content","options","hmr","transform","insertInto","locals","ReactDOM","root_1","rootEl","document","getElementById","setAppElement","render"],"mappings":"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","file":"client.7f1fe04b5403dc00ec48.bundle.js","sourcesContent":["import { SaveGame } from \"../../../../node_modules/oni-save-parser\";\r\n\r\nexport const ACTION_RECEIVE_ONISAVE_BEGIN =\r\n  \"@/pages/SaveEditor/onisave/receive:begin\";\r\nexport const receiveOniSaveBegin = (\r\n  operation: \"loading\" | \"saving\",\r\n  clearExisting?: boolean\r\n) => ({\r\n  type: ACTION_RECEIVE_ONISAVE_BEGIN as typeof ACTION_RECEIVE_ONISAVE_BEGIN,\r\n  payload: { operation, clearExisting }\r\n});\r\nexport type ReceiveOniSaveBeginAction = ReturnType<typeof receiveOniSaveBegin>;\r\n\r\nexport const ACTION_RECEIVE_ONISAVE_ERROR =\r\n  \"@/pages/SaveEditor/onisave/receive:error\";\r\nexport const receiveOniSaveError = (error: Error) => ({\r\n  type: ACTION_RECEIVE_ONISAVE_ERROR as typeof ACTION_RECEIVE_ONISAVE_ERROR,\r\n  payload: error\r\n});\r\nexport type ReceiveOniSaveErrorAction = ReturnType<typeof receiveOniSaveError>;\r\n\r\nexport const ACTION_RECEIVE_ONISAVE_SUCCESS =\r\n  \"@/pages/SaveEditor/onisave/receive:success\";\r\nexport const receiveOniSaveSuccess = (oniSave: SaveGame) => ({\r\n  type: ACTION_RECEIVE_ONISAVE_SUCCESS as typeof ACTION_RECEIVE_ONISAVE_SUCCESS,\r\n  payload: oniSave\r\n});\r\nexport type ReceiveOniSaveSuccessAction = ReturnType<\r\n  typeof receiveOniSaveSuccess\r\n>;\r\n\r\nexport type ReceiveOniSaveAction =\r\n  | ReceiveOniSaveBeginAction\r\n  | ReceiveOniSaveErrorAction\r\n  | ReceiveOniSaveSuccessAction;\r\n","const colors = {\r\n  bgApp: \"white\",\r\n  bgPanel: \"white\",\r\n  bgSeparator: \"lightgrey\"\r\n};\r\n\r\nconst space = [0, 4];\r\n\r\nconst theme = {\r\n  colors,\r\n  space\r\n};\r\n\r\nexport type Theme = typeof theme;\r\nexport default theme;\r\n\r\nexport function getTheme(props: any): Theme {\r\n  return props.theme || theme;\r\n}\r\n","export * from \"./state\";\r\nexport * from \"./store\";\r\n","import { AppState } from \"@/store\";\r\n\r\nconst saveEditorStateSelector = (state: AppState) => state.pages.saveEditor;\r\nexport default saveEditorStateSelector;\r\n","import { AppState } from \"@/store\";\r\n\r\nimport saveEditorStateSelector from \"./save-editor-state\";\r\n\r\nconst oniSaveSelector = (state: AppState) =>\r\n  saveEditorStateSelector(state).oniSave;\r\nexport default oniSaveSelector;\r\n","export const ACTION_SELECT_PATH = \"@/pages/SaveEditor/select-path\";\r\nexport const selectPath = (path: string[]) => ({\r\n  type: ACTION_SELECT_PATH as typeof ACTION_SELECT_PATH,\r\n  payload: path\r\n});\r\nexport type SelectPathAction = ReturnType<typeof selectPath>;\r\n","import { AppState } from \"@/store\";\r\n\r\nconst selectedPathSelector = (state: AppState) =>\r\n  state.pages.saveEditor.selectedPath;\r\nexport default selectedPathSelector;\r\n","export * from \"./props\";\r\nimport SaveStructureLink from \"./SaveStructureLink\";\r\nexport default SaveStructureLink;\r\n","import { isObject } from \"lodash-es\";\r\n\r\nexport default function extractObjectName(obj: any) {\r\n  if (Array.isArray(obj) && obj.length === 2 && typeof obj[0] === \"string\") {\r\n    // A tuple.  Probably.\r\n    return obj[0];\r\n  }\r\n\r\n  if (isObject(obj)) {\r\n    // A behavior.  With any luck.\r\n    return obj.name || obj.type || undefined;\r\n  }\r\n\r\n  return String(obj);\r\n}\r\n","import _FlexContainer from \"./FlexContainer\";\r\nimport _FlexItem from \"./FlexItem\";\r\n\r\nexport default {\r\n  Container: _FlexContainer,\r\n  Item: _FlexItem\r\n};\r\n\r\nexport const FlexContainer = _FlexContainer;\r\n\r\nexport { FlexItemProps } from \"./FlexItem\";\r\nexport const FlexItem = _FlexItem;\r\n","export const ACTION_ONISAVE_SAVE = \"@/pages/SaveEditor/onisave/save\";\r\nexport const saveOniSave = (fileName: string) => ({\r\n  type: ACTION_ONISAVE_SAVE as typeof ACTION_ONISAVE_SAVE,\r\n  payload: fileName\r\n});\r\nexport type SaveOniSaveAction = ReturnType<typeof saveOniSave>;\r\n","export const ACTION_ONISAVE_LOAD = \"@/pages/SaveEditor/onisave/load\";\r\nexport const loadOniSave = (file: File) => ({\r\n  type: ACTION_ONISAVE_LOAD as typeof ACTION_ONISAVE_LOAD,\r\n  payload: file\r\n});\r\nexport type LoadOniSaveAction = ReturnType<typeof loadOniSave>;\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nimport {\r\n  SaveEditorResultEvent,\r\n  parseSave as parseSaveCommand,\r\n  writeSave as writeSaveCommand,\r\n  jsonToError\r\n} from \"./worker-messages\";\r\n\r\nimport SaveLoadWorker from \"worker-loader!./save-serializer.worker\";\r\n\r\nconst worker = new SaveLoadWorker();\r\n\r\nexport function parseSave(data: ArrayBuffer): Promise<SaveGame> {\r\n  const promise = new Promise<SaveGame>((accept, reject) => {\r\n    const unhook = () => {\r\n      worker.onerror = null;\r\n      worker.onmessage = null;\r\n    };\r\n\r\n    worker.onerror = error => reject(error);\r\n    worker.onmessage = (message: SaveEditorResultEvent) => {\r\n      const { data } = message;\r\n      switch (data.type) {\r\n        case \"parse-save:success\":\r\n          unhook();\r\n          accept(data.saveGame);\r\n          break;\r\n        case \"parse-save:error\":\r\n          unhook();\r\n          reject(jsonToError(data.error));\r\n      }\r\n    };\r\n  });\r\n\r\n  worker.postMessage(parseSaveCommand(data));\r\n\r\n  return promise;\r\n}\r\n\r\nexport function writeSave(saveGame: SaveGame): Promise<ArrayBuffer> {\r\n  const promise = new Promise<ArrayBuffer>((accept, reject) => {\r\n    const unhook = () => {\r\n      worker.onerror = null;\r\n      worker.onmessage = null;\r\n    };\r\n\r\n    worker.onerror = error => reject(error);\r\n    worker.onmessage = (message: SaveEditorResultEvent) => {\r\n      const { data } = message;\r\n      switch (data.type) {\r\n        case \"write-save:success\":\r\n          unhook();\r\n          accept(data.data);\r\n          break;\r\n        case \"write-save:error\":\r\n          unhook();\r\n          reject(jsonToError(data.error));\r\n      }\r\n    };\r\n  });\r\n\r\n  worker.postMessage(writeSaveCommand(saveGame));\r\n\r\n  return promise;\r\n}\r\n","export * from \"./read-savegame\";\r\nexport * from \"./write-savegame\";\r\n","export const ACTION_ONISAVE_MODIFY = \"@/pages/SaveEditor/oni-save/modify\";\r\nexport const modifyOniSave = (path: string[], value: any) => ({\r\n  type: ACTION_ONISAVE_MODIFY as typeof ACTION_ONISAVE_MODIFY,\r\n  payload: { path, value }\r\n});\r\nexport type ModifyOniSaveAction = ReturnType<typeof modifyOniSave>;\r\n","export const ACTION_DISMISS_ERROR = \"@/pages/SaveEditor/dismiss-error\";\r\nexport const dismissError = () => ({\r\n  type: ACTION_DISMISS_ERROR as typeof ACTION_DISMISS_ERROR\r\n});\r\nexport type DismissErrorAction = ReturnType<typeof dismissError>;\r\n","import {\r\n  SaveEditorPageState,\r\n  defaultSaveEditorPageState\r\n} from \"@/pages/SaveEditor/state\";\r\n\r\nexport interface AppState {\r\n  pages: {\r\n    saveEditor: SaveEditorPageState;\r\n  };\r\n}\r\nexport const defaultAppState: AppState = Object.freeze({\r\n  pages: {\r\n    saveEditor: defaultSaveEditorPageState\r\n  }\r\n});\r\n","import styled from \"styled-components\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst AppContainer = styled.div`\r\n  background: ${props => getTheme(props).colors.bgApp};\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\nexport default AppContainer;\r\n","import { modifyOniSave } from \"@/pages/SaveEditor/actions/modify-onisave\";\r\n\r\nconst mapDispatchToProps = {\r\n  onModify: modifyOniSave\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import { createSelector, createStructuredSelector } from \"reselect\";\r\n\r\nimport { get } from \"lodash-es\";\r\n\r\nimport { AppState } from \"@/store\";\r\n\r\nimport oniSave from \"@/pages/SaveEditor/selectors/oni-save-selector\";\r\nimport selectedPath from \"@/pages/SaveEditor/selectors/selected-path\";\r\n\r\nconst structuredSelectors = {\r\n  selectedPath,\r\n  selectedValue: createSelector(\r\n    selectedPath,\r\n    oniSave,\r\n    (selectedPath, oniSave) => {\r\n      return selectedPath.length > 0 ? get(oniSave, selectedPath) : oniSave;\r\n    }\r\n  )\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelectors>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelectors\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"React\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nexport interface EditorFieldProps {\r\n  propKey: string;\r\n  value: any;\r\n  onChange(propKey: string, value: any): void;\r\n}\r\nexport default class EditorField extends React.Component<EditorFieldProps> {\r\n  render() {\r\n    const { value } = this.props;\r\n    return (\r\n      <input\r\n        type=\"text\"\r\n        onChange={this._onChange}\r\n        value={JSON.stringify(value)}\r\n      />\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const { propKey, onChange } = this.props;\r\n    const value = e.target.value;\r\n    try {\r\n      const parsedValue = JSON.parse(value);\r\n      onChange(propKey, parsedValue);\r\n    } catch {}\r\n  }\r\n}\r\n","import { createStructuredSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/store\";\r\n\r\nimport selectedPath from \"@/pages/SaveEditor/selectors/selected-path\";\r\n\r\nconst structuredSelector = {\r\n  selectedPath\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nexport default createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport SaveStructureLink from \"@/pages/SaveEditor/components/SaveStructureLink\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\ntype Props = StateProps;\r\nclass SelectedPathBreadcrumb extends React.Component<Props> {\r\n  render() {\r\n    const { selectedPath } = this.props;\r\n\r\n    let path: string[] = [];\r\n    let elements: React.ReactChild[] = [];\r\n    for (const pathPart of selectedPath) {\r\n      // Create a new path at each juncture so that the data is not mutated.\r\n      path = [...path, pathPart];\r\n      elements.push(\r\n        <SaveStructureLink path={path}>{pathPart}</SaveStructureLink>\r\n      );\r\n      elements.push(\".\");\r\n    }\r\n    if (elements.length > 0) {\r\n      // Remove final seperator dot.\r\n      elements.pop();\r\n    }\r\n\r\n    return <span>{elements}</span>;\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(SelectedPathBreadcrumb);\r\n","import SelectedPathBreadcrumb from \"./SelectedPathBreadcrumb\";\r\nexport default SelectedPathBreadcrumb;\r\n","import { selectPath } from \"@/pages/SaveEditor/actions/select-path\";\r\n\r\nconst mapDispatchToProps = {\r\n  onClick: selectPath\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { SaveStructureLinkProps } from \"./props\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\ntype Props = SaveStructureLinkProps & DispatchProps;\r\nclass SaveStructureLink extends React.Component<Props> {\r\n  render() {\r\n    const { children } = this.props;\r\n    return <Link onClick={this._onClick}>{children}</Link>;\r\n  }\r\n\r\n  @autobind()\r\n  private _onClick() {\r\n    const { path, onClick } = this.props;\r\n    onClick(path);\r\n  }\r\n}\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(SaveStructureLink);\r\n\r\nconst Link = styled.span`\r\n  color: blue;\r\n  text-decoration: underline;\r\n  cursor: pointer;\r\n`;\r\n","import styled from \"styled-components\";\r\n\r\nconst Container = styled.div``;\r\nexport default Container;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport extractObjectName from \"@/pages/SaveEditor/utils/extract-object-name\";\r\n\r\nimport SelectedObjectEditorContainer from \"./components/Container\";\r\n\r\nimport SaveStructureLink from \"@/pages/SaveEditor/components/SaveStructureLink\";\r\nimport SelectPathBreadcrumb from \"@/pages/SaveEditor/components/SelectedPathBreadcrumb\";\r\n\r\nimport EditorField from \"./components/EditorField\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\ntype Props = StateProps & DispatchProps;\r\nclass SelectedObjectEditor extends React.Component<Props> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const { selectedValue } = this.props;\r\n\r\n    const fields = Object.keys(selectedValue).map(key =>\r\n      this._renderFieldRow(key)\r\n    );\r\n\r\n    return (\r\n      <SelectedObjectEditorContainer>\r\n        <SelectPathBreadcrumb />\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Value</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{fields}</tbody>\r\n        </table>\r\n      </SelectedObjectEditorContainer>\r\n    );\r\n  }\r\n\r\n  private _renderFieldRow(key: string) {\r\n    const { selectedValue } = this.props;\r\n    const value = selectedValue[key];\r\n    if (isEditableValue(value)) {\r\n      return (\r\n        <tr key={key}>\r\n          <td>{key}</td>\r\n          <td>\r\n            <EditorField\r\n              propKey={key}\r\n              value={value}\r\n              onChange={this._onFieldChange}\r\n            />\r\n          </td>\r\n        </tr>\r\n      );\r\n    } else if (value != null) {\r\n      const { selectedPath } = this.props;\r\n      let objectName = extractObjectName(value);\r\n      if (objectName == null) {\r\n        if (value == null) {\r\n          objectName = \"[null]\";\r\n        } else {\r\n          objectName = Array.isArray(value) ? \"[array]\" : `[${typeof value}]`;\r\n        }\r\n      }\r\n      return (\r\n        <tr key={key}>\r\n          <td>{key}</td>\r\n          <td>\r\n            <SaveStructureLink path={[...selectedPath, key]}>\r\n              {objectName}\r\n            </SaveStructureLink>\r\n          </td>\r\n        </tr>\r\n      );\r\n    } else {\r\n      return (\r\n        <tr key={key}>\r\n          <td>{key}</td>\r\n          <td>[null]</td>\r\n        </tr>\r\n      );\r\n    }\r\n  }\r\n\r\n  @autobind()\r\n  private _onFieldChange(key: string, value: any) {\r\n    const { selectedPath, onModify } = this.props;\r\n    onModify([...selectedPath, key], value);\r\n  }\r\n}\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(SelectedObjectEditor);\r\n\r\nconst primitiveTypes = [\"string\", \"number\", \"boolean\"];\r\nfunction isEditableValue(val: any) {\r\n  const valType = typeof val;\r\n  return primitiveTypes.indexOf(valType) !== -1;\r\n}\r\n","import SelectedObjectEditor from \"./SelectedObjectEditor\";\r\nexport default SelectedObjectEditor;\r\n","import styled from \"styled-components\";\r\n\r\nconst SaveStructureItemContent = styled.div`\r\n  padding-left: 15px;\r\n`;\r\nexport default SaveStructureItemContent;\r\n","import styled from \"styled-components\";\r\n\r\nconst ItemText = styled.span`\r\n  margin-left: 2px;\r\n`;\r\nexport default ItemText;\r\n","import * as React from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst ICON_SIZE = 10;\r\nconst ICON_EXPANDED = \"M 0 .25 L .5 .75 L 1 .25 z\";\r\nconst ICON_COLLAPSED = \"M .5 0 L 1 .5 L .5 1 z\";\r\n\r\nexport interface ExpanderProps {\r\n  expanded: boolean;\r\n  onClick?(): void;\r\n}\r\nconst Expander: React.SFC<ExpanderProps & { className?: string }> = ({\r\n  className,\r\n  expanded,\r\n  onClick\r\n}) => (\r\n  <svg\r\n    className={className}\r\n    width={ICON_SIZE}\r\n    height={ICON_SIZE}\r\n    viewBox={`0 0 1 1`}\r\n    onClick={onClick}\r\n  >\r\n    <path d={expanded ? ICON_EXPANDED : ICON_COLLAPSED} fill=\"black\" />\r\n  </svg>\r\n);\r\nexport default Expander;\r\n","import * as React from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport Expander from \"./components/Expander\";\r\nimport ItemText from \"./components/ItemText\";\r\n\r\nexport interface SaveStructureItemHeaderProps {\r\n  expandable: boolean;\r\n  expanded: boolean;\r\n  header: string;\r\n  onClick(): void;\r\n  onExpandToggle(): void;\r\n}\r\n\r\nconst SaveStructureItemHeader: React.SFC<\r\n  SaveStructureItemHeaderProps & { className?: string }\r\n> = ({ className, expandable, expanded, header, onClick, onExpandToggle }) => (\r\n  <span className={className}>\r\n    {expandable && (\r\n      <Expander\r\n        expanded={expanded}\r\n        onClick={expandable ? onExpandToggle : undefined}\r\n      />\r\n    )}\r\n    <ItemText onClick={onClick}>{header}</ItemText>\r\n  </span>\r\n);\r\nexport default styled(SaveStructureItemHeader)`\r\n  cursor: pointer;\r\n`;\r\n","import SaveStructureItemHeader from \"./SaveStructureItemHeader\";\r\nexport default SaveStructureItemHeader;\r\n","import * as React from \"react\";\r\n\r\nconst SaveStructureItemContainer: React.SFC = ({ children }) => (\r\n  <div>{children}</div>\r\n);\r\nexport default SaveStructureItemContainer;\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\nimport { isObject } from \"lodash-es\";\r\n\r\nimport naturalCompare from \"string-natural-compare\";\r\n\r\nimport extractObjectName from \"@/pages/SaveEditor/utils/extract-object-name\";\r\n\r\nimport SaveStructureItemContainer from \"./components/SaveStructureItemContainer\";\r\nimport SaveStructureItemHeader from \"./components/SaveStructureItemHeader\";\r\nimport SaveStructureItemContent from \"./components/SaveStructureItemContent\";\r\n\r\nexport interface SaveStructureItemProps {\r\n  title?: string;\r\n  propKey: string;\r\n  propValue: any;\r\n  onSelected(path: string[]): void;\r\n}\r\ninterface State {\r\n  isExpanded: boolean;\r\n}\r\n\r\ntype Props = SaveStructureItemProps;\r\nexport default class SaveStructureItem extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      isExpanded: false\r\n    };\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    const { title, propKey, propValue } = this.props;\r\n    const { isExpanded } = this.state;\r\n\r\n    let expandableKeys: string[] = [];\r\n    if (isObject(propValue)) {\r\n      expandableKeys = Object.keys(propValue)\r\n        .filter(valueKey => isObject(propValue[valueKey]))\r\n        .sort(naturalCompare);\r\n    }\r\n\r\n    const expandable = expandableKeys.length > 0;\r\n\r\n    let valueElement: React.ReactNode | null = null;\r\n    if (expandable && isExpanded) {\r\n      const isArray = Array.isArray(propValue);\r\n      valueElement = expandableKeys.map(valueKey => {\r\n        const value = propValue[valueKey];\r\n        let valueTitle = extractObjectName(value);\r\n        if (isArray) {\r\n          if (valueTitle) {\r\n            valueTitle = `${valueKey}: ${valueTitle}`;\r\n          } else {\r\n            valueTitle = valueKey;\r\n          }\r\n        }\r\n        return (\r\n          <SaveStructureItem\r\n            key={valueKey}\r\n            title={valueTitle}\r\n            propKey={valueKey}\r\n            propValue={value}\r\n            onSelected={this._onChildSelected}\r\n          />\r\n        );\r\n      });\r\n    }\r\n\r\n    return (\r\n      <SaveStructureItemContainer>\r\n        <SaveStructureItemHeader\r\n          expandable={expandable}\r\n          expanded={isExpanded}\r\n          header={title || propKey}\r\n          onClick={this._onClick}\r\n          onExpandToggle={this._onExpandToggle}\r\n        />\r\n        <SaveStructureItemContent>{valueElement}</SaveStructureItemContent>\r\n      </SaveStructureItemContainer>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onClick() {\r\n    const { propKey, onSelected } = this.props;\r\n    this.setState({\r\n      isExpanded: true\r\n    });\r\n    onSelected([propKey]);\r\n  }\r\n\r\n  @autobind()\r\n  private _onExpandToggle() {\r\n    this.setState({\r\n      isExpanded: !this.state.isExpanded\r\n    });\r\n  }\r\n\r\n  @autobind()\r\n  private _onChildSelected(path: string[]) {\r\n    const { propKey, onSelected } = this.props;\r\n    onSelected([propKey, ...path]);\r\n  }\r\n}\r\n","import SaveStructureItem from \"./SaveStructureItem\";\r\nexport default SaveStructureItem;\r\n","import styled from \"styled-components\";\r\n\r\nconst SaveStructureContainer = styled.div`\r\n  width: 200px;\r\n`;\r\nexport default SaveStructureContainer;\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport SaveStructureContainer from \"./components/SaveStructureContainer\";\r\nimport SaveStructureItem from \"./components/SaveStructureItem\";\r\n\r\nexport interface SaveStructureProps {\r\n  saveGame: SaveGame;\r\n  onSelected(path: string[]): void;\r\n}\r\ntype Props = SaveStructureProps;\r\nexport default class SaveStructure extends React.Component<Props> {\r\n  render() {\r\n    const { saveGame } = this.props;\r\n    return (\r\n      <SaveStructureContainer>\r\n        <SaveStructureItem\r\n          propKey=\"SaveGame\"\r\n          propValue={saveGame}\r\n          onSelected={this._onSavePropSelected}\r\n        />\r\n      </SaveStructureContainer>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onSavePropSelected(path: string[]) {\r\n    const { onSelected } = this.props;\r\n    onSelected(path.slice(1));\r\n  }\r\n}\r\n","import SaveStructure from \"./SaveStructure\";\r\nexport default SaveStructure;\r\n","import styled from \"styled-components\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst ContentContainer = styled.div`\r\n  padding: ${props => getTheme(props).space[1]}px;\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n  overflow: auto;\r\n`;\r\nexport default ContentContainer;\r\n","import styled from \"styled-components\";\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst ResizeHandleVisual = styled.div`\r\n  width: 2px;\r\n  height: 100%;\r\n  background: ${props => getTheme(props).colors.bgSeparator};\r\n  flex: none;\r\n  cursor: ew-resize;\r\n`;\r\nexport default ResizeHandleVisual;\r\n","import * as React from \"react\";\r\n\r\nimport { DraggableCore, DraggableData } from \"react-draggable\";\r\n\r\nimport ResizeHandleVisual from \"./ResizeHandleVisual\";\r\n\r\nexport interface ResizeHandleProps {\r\n  onResize(delta: number): void;\r\n}\r\n\r\ntype Props = ResizeHandleProps;\r\nclass ResizeHandle extends React.Component<Props> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this._onDrag = this._onDrag.bind(this);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <DraggableCore onDrag={this._onDrag}>\r\n        <ResizeHandleVisual />\r\n      </DraggableCore>\r\n    );\r\n  }\r\n\r\n  private _onDrag(e: MouseEvent, d: DraggableData) {\r\n    const { onResize } = this.props;\r\n    onResize(d.deltaX);\r\n  }\r\n}\r\nexport default ResizeHandle;\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Flex from \"@/components/Flex\";\r\n\r\nimport ResizeHandle from \"./components/ResizeHandle\";\r\n\r\nexport interface ResizePanelProps {\r\n  className?: string;\r\n  defaultWidth?: number;\r\n}\r\ninterface State {\r\n  width: number;\r\n}\r\ntype Props = ResizePanelProps;\r\nexport default class ResizePanel extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      width: props.defaultWidth || 300\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { className, children } = this.props;\r\n    const { width } = this.state;\r\n    // TODO: too many wrapping divs.\r\n    //  Provide a way to apply flex to an existing item.\r\n    return (\r\n      <Flex.Container className={className} direction=\"row\">\r\n        <Flex.Item style={{ width }} height=\"100%\">\r\n          {children}\r\n        </Flex.Item>\r\n        <Flex.Item>\r\n          <ResizeHandle onResize={this._onResize} />\r\n        </Flex.Item>\r\n      </Flex.Container>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onResize(delta: number) {\r\n    this.setState(s => ({\r\n      width: s.width + delta\r\n    }));\r\n  }\r\n}\r\n","import ResizePanel from \"./ResizePanel\";\r\nexport default ResizePanel;\r\n","import * as React from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport ResizePanel from \"@/components/ResizePanel\";\r\n\r\nconst SidebarResizePanel = styled(ResizePanel)`\r\n  height: 100%;\r\n`;\r\n\r\nconst SidebarInnerContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: auto;\r\n`;\r\n\r\nconst SidebarContainer: React.SFC = ({ children }) => (\r\n  <SidebarResizePanel>\r\n    <SidebarInnerContainer>{children}</SidebarInnerContainer>\r\n  </SidebarResizePanel>\r\n);\r\nexport default styled(SidebarContainer)`\r\n  height: 100%;\r\n`;\r\n","import styled from \"styled-components\";\r\n\r\nconst SaveEditorContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\nexport default SaveEditorContainer;\r\n","import testData from \"@/__mocks__/save-game.json\";\r\n\r\nimport { dismissError } from \"./actions/dismiss-error\";\r\nimport { loadOniSave } from \"./actions/load-onisave\";\r\nimport { saveOniSave } from \"./actions/save-onisave\";\r\nimport { selectPath } from \"./actions/select-path\";\r\n\r\nimport { receiveOniSaveSuccess } from \"./actions/receive-onisave\";\r\n\r\nconst mapDispatchToProps = {\r\n  onDismissError: dismissError,\r\n  onLoad: loadOniSave,\r\n  onLoadTestData: () => receiveOniSaveSuccess(testData),\r\n  onSave: saveOniSave,\r\n  onSelectPath: selectPath\r\n};\r\nexport default mapDispatchToProps;\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\n","import { AppState } from \"@/store\";\r\n\r\nimport saveEditorStateSelector from \"./save-editor-state\";\r\n\r\nconst loadingStateSelector = (state: AppState) =>\r\n  saveEditorStateSelector(state).loadingState;\r\nexport default loadingStateSelector;\r\n","import { AppState } from \"@/store\";\r\n\r\nimport saveEditorStateSelector from \"./save-editor-state\";\r\n\r\nconst errorSelector = (state: AppState) => saveEditorStateSelector(state).error;\r\nexport default errorSelector;\r\n","import { createStructuredSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/store\";\r\n\r\nimport error from \"./selectors/error-selector\";\r\nimport loadingState from \"./selectors/loading-state-selector\";\r\nimport oniSave from \"./selectors/oni-save-selector\";\r\n\r\nconst stateSelectors = {\r\n  loadingState,\r\n  oniSave,\r\n  error\r\n};\r\nexport type StateProps = StructuredStateProps<typeof stateSelectors>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  stateSelectors\r\n);\r\nexport default mapStateToProps;\r\n","import styled from \"styled-components\";\r\nimport { HeightProps, WidthProps, height, width } from \"styled-system\";\r\n\r\nexport interface FlexItemProps extends WidthProps, HeightProps {\r\n  grow?: boolean;\r\n  shrink?: boolean;\r\n}\r\n\r\nconst FlexItem = styled<FlexItemProps, \"div\">(\"div\")`\r\n  flex-grow: ${props => (props.grow ? 1 : 0)};\r\n  flex-shrink: ${props => (props.shrink ? 1 : 0)};\r\n  flex-basis: auto;\r\n  box-sizing: border-box;\r\n  ${height};\r\n  ${width};\r\n`;\r\nexport default FlexItem;\r\n","import styled, { Styles } from \"styled-components\";\r\nimport { HeightProps, WidthProps, height, width } from \"styled-system\";\r\n\r\nexport interface FlexContainerProps extends HeightProps, WidthProps {\r\n  direction: \"row\" | \"column\";\r\n}\r\nconst FlexContainer = styled<FlexContainerProps, \"div\">(\"div\")`\r\n  display: flex;\r\n  flex-direction: ${props => props.direction};\r\n  ${height};\r\n  ${width};\r\n`;\r\nexport default FlexContainer;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Modal from \"react-modal\";\r\n\r\nimport Flex from \"@/components/Flex\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\nimport SaveEditorContainer from \"./components/SaveEditorContainer\";\r\nimport SidebarContainer from \"./components/SidebarContainer\";\r\nimport ContentContainer from \"./components/ContentContainer\";\r\n\r\nimport SaveStructureTree from \"./components/SaveStructureTree\";\r\nimport SelectedObjectEditor from \"./components/SelectedObjectEditor\";\r\n\r\ntype Props = StateProps & DispatchProps;\r\nclass SaveEditor extends React.Component<Props> {\r\n  private _input: HTMLElement | null = null;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      selectedPath: null\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      error,\r\n      oniSave,\r\n      loadingState,\r\n      onDismissError,\r\n      onLoadTestData\r\n    } = this.props;\r\n\r\n    switch (loadingState) {\r\n      case \"loading\":\r\n        return (\r\n          <Modal isOpen={true} contentLabel=\"Loading\">\r\n            <p>Loading File</p>\r\n          </Modal>\r\n        );\r\n      case \"saving\":\r\n        return (\r\n          <Modal isOpen={true} contentLabel=\"Saving\">\r\n            <p>Saving File</p>\r\n          </Modal>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n      return (\r\n        <Modal isOpen={true} onRequestClose={onDismissError}>\r\n          <Flex.Container direction=\"column\" width=\"100%\" height=\"100%\">\r\n            <Flex.Item grow>\r\n              <h2>Error</h2>\r\n              <code>{error.stack || error.message || String(error)}</code>\r\n            </Flex.Item>\r\n            <Flex.Item>\r\n              <button onClick={onDismissError}>Close</button>\r\n            </Flex.Item>\r\n          </Flex.Container>\r\n        </Modal>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <SaveEditorContainer>\r\n        <Flex.Container direction=\"column\" width=\"100%\" height=\"100%\">\r\n          <Flex.Item>\r\n            <input\r\n              ref={el => (this._input = el)}\r\n              style={{ display: \"none\" }}\r\n              type=\"file\"\r\n              accept=\".sav\"\r\n              onChange={this._onLoadFile}\r\n            />\r\n            <button onClick={this._onLoadFileClick}>Load File</button>\r\n            <button onClick={onLoadTestData}>Load Test Data</button>\r\n            {oniSave && (\r\n              <button onClick={this._onSaveFileClick}>Save File</button>\r\n            )}\r\n          </Flex.Item>\r\n          {oniSave && (\r\n            <Flex.Container direction=\"row\" width=\"100%\" height=\"100%\">\r\n              <Flex.Item>\r\n                <SidebarContainer>\r\n                  <SaveStructureTree\r\n                    saveGame={oniSave}\r\n                    onSelected={this._onPathSelected}\r\n                  />\r\n                </SidebarContainer>\r\n              </Flex.Item>\r\n              <Flex.Item grow shrink>\r\n                <ContentContainer>\r\n                  <SelectedObjectEditor />\r\n                </ContentContainer>\r\n              </Flex.Item>\r\n            </Flex.Container>\r\n          )}\r\n        </Flex.Container>\r\n      </SaveEditorContainer>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onPathSelected(path: string[]) {\r\n    const { onSelectPath } = this.props;\r\n    onSelectPath(path);\r\n  }\r\n\r\n  @autobind()\r\n  private _onLoadFileClick() {\r\n    if (!this._input) {\r\n      return;\r\n    }\r\n    this._input.click();\r\n  }\r\n\r\n  @autobind()\r\n  private _onLoadFile(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const files = e.target.files;\r\n    if (!files || files.length === 0) {\r\n      return;\r\n    }\r\n    const file = files[0];\r\n\r\n    const { onLoad } = this.props;\r\n    onLoad(file);\r\n  }\r\n\r\n  @autobind()\r\n  private _onSaveFileClick() {\r\n    const { onSave } = this.props;\r\n    const fileName = withExtension(\"my-file\", \".sav\");\r\n    onSave(fileName);\r\n  }\r\n}\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(SaveEditor);\r\n\r\nfunction withExtension(name: string, ext: string): string {\r\n  if (name.endsWith(ext)) return name;\r\n  return name + ext;\r\n}\r\n","import SaveEditor from \"./SaveEditor\";\r\nexport default SaveEditor;\r\n","import * as React from \"react\";\r\n\r\nimport SaveEditor from \"@/pages/SaveEditor\";\r\n\r\nimport AppContainer from \"./components/AppContainer\";\r\n\r\nconst App: React.SFC = () => (\r\n  <AppContainer>\r\n    <SaveEditor />\r\n  </AppContainer>\r\n);\r\nexport default App;\r\n","import App from \"./App\";\r\nexport default App;\r\n","import { AnyAction } from \"redux\";\r\nimport { AppState } from \"./state\";\r\nimport { ACTION_RECEIVE_ONISAVE_SUCCESS } from \"@/pages/SaveEditor/actions/receive-onisave\";\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nexport function actionSanitizer(action: AnyAction): AnyAction {\r\n  if (action.type === ACTION_RECEIVE_ONISAVE_SUCCESS) {\r\n    return {\r\n      ...action,\r\n      payload: sanitizeSave(action.payload)\r\n    };\r\n  }\r\n  return action;\r\n}\r\n\r\nexport function stateSanitizer(state: AppState): any {\r\n  return {\r\n    ...state,\r\n    pages: {\r\n      ...state.pages,\r\n      saveEditor: {\r\n        ...state.pages.saveEditor,\r\n        oniSave: state.pages.saveEditor.oniSave\r\n          ? sanitizeSave(state.pages.saveEditor.oniSave)\r\n          : null\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nfunction sanitizeSave(save: SaveGame): any {\r\n  return {\r\n    ...save,\r\n    world: {\r\n      ...save.world,\r\n      streamed: \"~snip~\"\r\n    }\r\n  };\r\n}\r\n","import { call, put, select, takeEvery } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { writeSaveGame } from \"@/services/save-serializer/sagas\";\r\n\r\nimport { saveAs } from \"file-saver\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_SAVE,\r\n  SaveOniSaveAction\r\n} from \"../actions/save-onisave\";\r\n\r\nimport {\r\n  receiveOniSaveBegin,\r\n  receiveOniSaveError,\r\n  receiveOniSaveSuccess\r\n} from \"../actions/receive-onisave\";\r\n\r\nimport oniSaveSelector from \"../selectors/oni-save-selector\";\r\n\r\nexport default function* saveEditorSaga() {\r\n  yield takeEvery(ACTION_ONISAVE_SAVE, handleOniSaveLoad);\r\n}\r\n\r\nfunction* handleOniSaveLoad(action: SaveOniSaveAction) {\r\n  const saveName = action.payload;\r\n\r\n  const save: SaveGame | null = yield select(oniSaveSelector);\r\n  if (!save) {\r\n    return;\r\n  }\r\n\r\n  yield put(receiveOniSaveBegin(\"saving\"));\r\n  let blob: Blob;\r\n  try {\r\n    blob = yield call(writeSaveGame, save);\r\n  } catch (error) {\r\n    yield put(receiveOniSaveError(error));\r\n    return;\r\n  }\r\n\r\n  saveAs(blob, saveName);\r\n\r\n  yield put(receiveOniSaveSuccess(save));\r\n}\r\n","import { call } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { writeSave } from \"../worker-instance\";\r\n\r\nexport function* writeSaveGame(saveGame: SaveGame) {\r\n  const data: ArrayBuffer = yield call(writeSave, saveGame);\r\n  const blob = new Blob([data]);\r\n  return blob;\r\n}\r\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"597f9de5fbc85dd5888a.worker.js\");\n};","import { SaveGame } from \"oni-save-parser\";\r\n\r\nconst COMMAND_PARSE_SAVE = \"parse-save\";\r\nexport const parseSave = (data: ArrayBuffer) => ({\r\n  type: COMMAND_PARSE_SAVE as typeof COMMAND_PARSE_SAVE,\r\n  data\r\n});\r\nexport type ParseSaveCommand = ReturnType<typeof parseSave>;\r\n\r\nconst RESULT_SAVE_SUCCESS = \"parse-save:success\";\r\nexport const parseSaveSuccess = (saveGame: SaveGame) => ({\r\n  type: RESULT_SAVE_SUCCESS as typeof RESULT_SAVE_SUCCESS,\r\n  saveGame\r\n});\r\nexport type ParseSaveSuccessResult = ReturnType<typeof parseSaveSuccess>;\r\n\r\nconst RESULT_SAVE_ERROR = \"parse-save:error\";\r\nexport const parseSaveError = (error: Error) => ({\r\n  type: RESULT_SAVE_ERROR as typeof RESULT_SAVE_ERROR,\r\n  error: errorToJson(error)\r\n});\r\nexport type ParseSaveErrorResult = ReturnType<typeof parseSaveError>;\r\n\r\nexport type ParseSaveResult = ParseSaveSuccessResult | ParseSaveErrorResult;\r\n\r\nconst COMMAND_WRITE_SAVE = \"write-save\";\r\nexport const writeSave = (saveGame: SaveGame) => ({\r\n  type: COMMAND_WRITE_SAVE as typeof COMMAND_WRITE_SAVE,\r\n  saveGame\r\n});\r\nexport type WriteSaveCommand = ReturnType<typeof writeSave>;\r\n\r\nconst RESULT_WRITE_SUCCESS = \"write-save:success\";\r\nexport const writeSaveSuccess = (data: ArrayBuffer) => ({\r\n  type: RESULT_WRITE_SUCCESS as typeof RESULT_WRITE_SUCCESS,\r\n  data\r\n});\r\nexport type WriteSaveSuccessResult = ReturnType<typeof writeSaveSuccess>;\r\n\r\nconst RESULT_WRITE_ERROR = \"write-save:error\";\r\nexport const writeSaveError = (error: Error) => ({\r\n  type: RESULT_WRITE_ERROR as typeof RESULT_WRITE_ERROR,\r\n  error: errorToJson(error)\r\n});\r\nexport type WriteSaveErrorResult = ReturnType<typeof writeSaveError>;\r\n\r\nexport type WriteSaveResult = WriteSaveSuccessResult | WriteSaveErrorResult;\r\n\r\nexport type SaveEditorCommand = ParseSaveCommand | WriteSaveCommand;\r\nexport type SaveEditorResult = ParseSaveResult | WriteSaveResult;\r\n\r\nexport interface SaveEditorCommandEvent extends MessageEvent {\r\n  data: SaveEditorCommand;\r\n}\r\n\r\nexport interface SaveEditorResultEvent extends MessageEvent {\r\n  data: SaveEditorResult;\r\n}\r\n\r\nexport interface ErrorJson {\r\n  name: string;\r\n  message: string;\r\n  stack?: string;\r\n}\r\nexport function errorToJson(e: Error): ErrorJson {\r\n  return {\r\n    name: e.name,\r\n    message: e.message,\r\n    stack: e.stack\r\n  };\r\n}\r\nexport function jsonToError(obj: ErrorJson): Error {\r\n  const e = new Error(obj.message);\r\n  e.name = obj.name;\r\n  e.stack = obj.stack;\r\n  return e;\r\n}\r\n","import { call } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { parseSave } from \"../worker-instance\";\r\n\r\nexport function* readSaveGame(file: File) {\r\n  const data: ArrayBuffer = yield call(readFile, file);\r\n  const saveGame: SaveGame = yield call(parseSave, data);\r\n  return saveGame;\r\n}\r\n\r\nfunction readFile(file: File): Promise<ArrayBuffer> {\r\n  const reader = new FileReader();\r\n  return new Promise<ArrayBuffer>((accept, reject) => {\r\n    reader.onload = () => {\r\n      accept(reader.result);\r\n    };\r\n    reader.onerror = () => {\r\n      reject(reader.error);\r\n    };\r\n    reader.readAsArrayBuffer(file);\r\n  });\r\n}\r\n","import { call, put, takeEvery } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { readSaveGame } from \"@/services/save-serializer/sagas\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_LOAD,\r\n  LoadOniSaveAction\r\n} from \"../actions/load-onisave\";\r\n\r\nimport {\r\n  receiveOniSaveBegin,\r\n  receiveOniSaveError,\r\n  receiveOniSaveSuccess\r\n} from \"../actions/receive-onisave\";\r\n\r\nexport default function* saveEditorSaga() {\r\n  yield takeEvery(ACTION_ONISAVE_LOAD, handleOniSaveLoad);\r\n}\r\n\r\nfunction* handleOniSaveLoad(action: LoadOniSaveAction) {\r\n  const file = action.payload;\r\n\r\n  yield put(receiveOniSaveBegin(\"loading\", true));\r\n  let save: SaveGame;\r\n  try {\r\n    save = yield call(readSaveGame, file);\r\n  } catch (error) {\r\n    yield put(receiveOniSaveError(error));\r\n    return;\r\n  }\r\n  yield put(receiveOniSaveSuccess(save));\r\n}\r\n","import { fork } from \"redux-saga/effects\";\r\n\r\nimport loadOniSaveSaga from \"./load-onisave\";\r\nimport saveOniSaveSaga from \"./save-onisave\";\r\n\r\nexport default function* saveEditorSaga() {\r\n  yield fork(loadOniSaveSaga);\r\n  yield fork(saveOniSaveSaga);\r\n}\r\n","import { fork } from \"redux-saga/effects\";\r\n\r\nimport saveEditorSaga from \"@/pages/SaveEditor/saga\";\r\n\r\nexport default function* rootSaga() {\r\n  yield fork(saveEditorSaga);\r\n}\r\n","import produce from \"immer\";\r\n\r\nimport { AppState, defaultAppState } from \"@/store\";\r\n\r\nimport { ACTION_SELECT_PATH, SelectPathAction } from \"../actions/select-path\";\r\n\r\nexport default function selectPathReducer(\r\n  state: AppState = defaultAppState,\r\n  action: SelectPathAction\r\n): AppState {\r\n  if (action.type !== ACTION_SELECT_PATH) {\r\n    return state;\r\n  }\r\n\r\n  return produce(state, draft => {\r\n    draft.pages.saveEditor.selectedPath = action.payload;\r\n  });\r\n}\r\n","import { AppState, defaultAppState } from \"@/store\";\r\n\r\nimport {\r\n  ReceiveOniSaveAction,\r\n  ACTION_RECEIVE_ONISAVE_BEGIN,\r\n  ACTION_RECEIVE_ONISAVE_ERROR,\r\n  ACTION_RECEIVE_ONISAVE_SUCCESS\r\n} from \"../actions/receive-onisave\";\r\n\r\nexport default function receiveOniSaveReducer(\r\n  state: AppState = defaultAppState,\r\n  action: ReceiveOniSaveAction\r\n): AppState {\r\n  let saveEditorState = state.pages.saveEditor;\r\n  switch (action.type) {\r\n    case ACTION_RECEIVE_ONISAVE_BEGIN:\r\n      saveEditorState = {\r\n        ...saveEditorState,\r\n        error: null,\r\n        loadingState: action.payload.operation,\r\n        oniSave: action.payload.clearExisting ? null : saveEditorState.oniSave\r\n      };\r\n      break;\r\n    case ACTION_RECEIVE_ONISAVE_ERROR:\r\n      saveEditorState = {\r\n        ...saveEditorState,\r\n        loadingState: \"idle\",\r\n        error: action.payload\r\n      };\r\n      break;\r\n    case ACTION_RECEIVE_ONISAVE_SUCCESS:\r\n      saveEditorState = {\r\n        ...saveEditorState,\r\n        loadingState: \"ready\",\r\n        error: null,\r\n        oniSave: action.payload\r\n      };\r\n  }\r\n\r\n  if (saveEditorState === state.pages.saveEditor) {\r\n    return state;\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    pages: {\r\n      ...state.pages,\r\n      saveEditor: saveEditorState\r\n    }\r\n  };\r\n}\r\n","import produce from \"immer\";\r\n\r\nimport { set } from \"lodash-es\";\r\n\r\nimport { AppState } from \"@/store\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_MODIFY,\r\n  ModifyOniSaveAction\r\n} from \"../actions/modify-onisave\";\r\n\r\nexport default function modifyOniSaveReducer(\r\n  state: AppState,\r\n  action: ModifyOniSaveAction\r\n): AppState {\r\n  if (action.type !== ACTION_ONISAVE_MODIFY) {\r\n    return state;\r\n  }\r\n\r\n  const { loadingState, oniSave } = state.pages.saveEditor;\r\n  if (loadingState !== \"ready\" || !oniSave) {\r\n    return state;\r\n  }\r\n\r\n  const { path, value } = action.payload;\r\n  return produce(state, draft => {\r\n    set(draft.pages.saveEditor.oniSave!, path, value);\r\n  });\r\n}\r\n","import produce from \"immer\";\r\n\r\nimport { AppState, defaultAppState } from \"@/store\";\r\n\r\nimport {\r\n  ACTION_DISMISS_ERROR,\r\n  DismissErrorAction\r\n} from \"../actions/dismiss-error\";\r\n\r\nexport default function dismissErrorReducer(\r\n  state: AppState = defaultAppState,\r\n  action: DismissErrorAction\r\n): AppState {\r\n  if (action.type !== ACTION_DISMISS_ERROR) {\r\n    return state;\r\n  }\r\n\r\n  return produce(state, draft => {\r\n    draft.pages.saveEditor.error = null;\r\n  });\r\n}\r\n","import reduceReducers from \"reduce-reducers\";\r\n\r\nimport dismissErrorReducer from \"./dismiss-error\";\r\nimport modifyOniSave from \"./modify-onisave\";\r\nimport receiveOniSaveReducer from \"./receive-onisave\";\r\nimport selectPathReducer from \"./select-path\";\r\n\r\nconst reducers = [\r\n  dismissErrorReducer,\r\n  modifyOniSave,\r\n  receiveOniSaveReducer,\r\n  selectPathReducer\r\n];\r\n\r\n// @ts-ignore: We need to tell the reducers thay may receive a non-matching item.\r\n//  I have not been able to craft a type that describes this though.\r\nexport default reduceReducers(...reducers);\r\n","import { Action } from \"redux\";\r\n\r\nimport { AppState, defaultAppState } from \"@/store/state\";\r\n\r\nimport saveEditorReducer from \"@/pages/SaveEditor/reducer\";\r\n\r\nexport default function reducer(\r\n  state: AppState = defaultAppState,\r\n  action: Action\r\n) {\r\n  // Just one reducer right now.\r\n  //  Should use reduce-reducers when more are needed.\r\n  return saveEditorReducer(state, action as any);\r\n}\r\n","import {\r\n  compose,\r\n  createStore as createReduxStore,\r\n  applyMiddleware\r\n} from \"redux\";\r\n\r\nimport createSagaMiddleware from \"redux-saga\";\r\n\r\nimport reducer from \"./reducer\";\r\nimport rootSaga from \"./saga\";\r\n\r\nimport { actionSanitizer, stateSanitizer } from \"./devtool-sanitizer\";\r\n\r\nexport function createStore() {\r\n  const composeEnhancers =\r\n    (window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ &&\r\n      window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n        actionSanitizer,\r\n        stateSanitizer\r\n      })) ||\r\n    compose;\r\n\r\n  const sagaMiddleware = createSagaMiddleware();\r\n\r\n  const store = createReduxStore(\r\n    reducer,\r\n    composeEnhancers(applyMiddleware(sagaMiddleware))\r\n  );\r\n  sagaMiddleware.run(rootSaga);\r\n  return store;\r\n}\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nexport interface SaveEditorPageState {\r\n  loadingState: \"idle\" | \"loading\" | \"saving\" | \"ready\";\r\n  error: Error | null;\r\n  oniSave: SaveGame | null;\r\n  selectedPath: string[];\r\n}\r\nexport const defaultSaveEditorPageState: Readonly<SaveEditorPageState> = {\r\n  loadingState: \"idle\" as \"idle\",\r\n  error: null,\r\n  oniSave: null,\r\n  selectedPath: []\r\n};\r\nObject.freeze(defaultSaveEditorPageState);\r\n","import * as React from \"react\";\r\nimport { hot } from \"react-hot-loader\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport { ThemeProvider } from \"styled-components\";\r\n\r\nimport { createStore } from \"./store\";\r\nimport theme from \"./theme\";\r\n\r\nimport App from \"./App\";\r\n\r\nconst Root: React.SFC = () => (\r\n  <ThemeProvider theme={theme}>\r\n    <Provider store={createStore()}>\r\n      <App />\r\n    </Provider>\r\n  </ThemeProvider>\r\n);\r\n\r\nexport default hot(module)(Root);\r\n","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"html,\\r\\nbody,\\r\\n#root {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  margin: 0;\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../node_modules/css-loader/index.js!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./style.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\n\r\nimport Modal from \"react-modal\";\r\n\r\nimport \"./style.css\";\r\n\r\nimport Root from \"./root\";\r\n\r\nconst rootEl = document.getElementById(\"root\");\r\nif (rootEl) {\r\n  Modal.setAppElement(rootEl);\r\n  ReactDOM.render(<Root />, rootEl);\r\n}\r\n"],"sourceRoot":""}