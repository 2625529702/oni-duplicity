{"version":3,"sources":["webpack:///./src/state/utils.ts","webpack:///./src/services/save-editor/duplicants/selectors.ts","webpack:///./src/services/save-editor/behaviors.ts","webpack:///./src/logging/index.ts","webpack:///./src/services/save-editor/state.ts","webpack:///./src/services/save-editor/duplicants/actions.ts","webpack:///./src/services/save-editor/savefile/actions.ts","webpack:///./src/services/save-editor/selectors.ts","webpack:///./src/state/saga.ts","webpack:///./src/action-utils.ts","webpack:///./src/services/save-editor/savefile/selectors.ts","webpack:///./src/services/save-editor/savefile/save-loader.worker.ts","webpack:///./src/services/save-editor/savefile/saga.ts","webpack:///./src/services/save-editor/saga.ts","webpack:///./src/services/save-editor/duplicants/reducer.ts","webpack:///./src/services/save-editor/savefile/reducer.ts","webpack:///./src/services/save-editor/reducer.ts","webpack:///./src/state/reducer.ts","webpack:///./src/state/store.ts","webpack:///./src/pages/SaveEditor/pages/404/component.tsx","webpack:///./src/pages/SaveEditor/pages/404/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/pages/Traits/traits.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/pages/Traits/dispatch.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/pages/Traits/selectors.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/pages/Traits/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/pages/Traits/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/pages/Skills/dispatch.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/pages/Skills/selectors.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/pages/Skills/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/pages/Skills/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/pages/Appearance/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/pages/Appearance/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/dispatch.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/selectors.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantEditor/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantsList/selectors.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantPortrait/selectors.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantPortrait/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantPortrait/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantsList/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/components/DuplicantsList/index.ts","webpack:///./src/pages/SaveEditor/pages/Duplicants/component.tsx","webpack:///./src/pages/SaveEditor/pages/Duplicants/index.ts","webpack:///./src/components/ActiveAwareLink/component.tsx","webpack:///./src/components/ActiveAwareLink/index.ts","webpack:///./src/pages/SaveEditor/component.tsx","webpack:///./src/pages/SaveEditor/index.ts","webpack:///./src/pages/LoadingSaveFile/component.tsx","webpack:///./src/pages/LoadingSaveFile/index.ts","webpack:///./src/pages/NoSaveLoaded/dispatch.ts","webpack:///./src/pages/NoSaveLoaded/selectors.ts","webpack:///./src/pages/NoSaveLoaded/component.tsx","webpack:///./src/pages/NoSaveLoaded/index.ts","webpack:///./src/pages/error/dispatch.ts","webpack:///./src/pages/error/selectors.ts","webpack:///./src/pages/error/component.tsx","webpack:///./src/pages/error/index.ts","webpack:///./src/components/App/dispatch.ts","webpack:///./src/components/App/selectors.ts","webpack:///./src/components/App/component.tsx","webpack:///./src/components/App/index.ts","webpack:///./src/app.tsx","webpack:///./src/css/root.scss","webpack:///./src/css/root.scss?3097","webpack:///./src/css/index.ts","webpack:///./src/index.tsx"],"names":["reselect_1","__webpack_require__","createStructuredSelector","selectors","selectorCreator","exports","selectors_1","behaviors_1","makeGetDuplicantByID","propKey","createSelector","duplicantsMap","_","props","id","Object","prototype","hasOwnProperty","call","makeGetDuplicantSkillsByID","makeGetBehaviorByName","AIAttributeLevelsBehavior","levelBehavior","parsedData","saveLoadLevels","makeGetDuplicantTraitsByID","AITraitsBehavior","traitsBehavior","TraitIds","duplicants","makeGetGameObjectsByType","duplicantsIDs","ids","duplicant","idBehavior","getBehavior","KPrefabIDBehavior","push","InstanceID","dups","gameObject","name","behaviors","find","x","MinionIdentityBehavior","MinionResumeBehavior","AIEffectsBehavior","HealthBehavior","failureType","ACTION_INVALID","SAVEFILE_CORRUPT","STATE_CORRUPT","MISSING_BEHAVIOR","warning","message","console","warn","error","freeze","seal","FAILURE_TYPE","defaultSaveEditorState","fileName","isLoading","isSaving","loadError","saveGame","normalizedIDs","saveEditorStateKey","action_utils_1","ACTION_DUPLICANT_RENAME","renameDuplicant","createAction","ACTION_DUPLICANT_SKILL_SET_LEVEL","setDuplicantSkillLevel","ACTION_DUPLICANT_SKILL_SET_EXPERIENCE","setDuplicantSkillExperience","ACTION_DUPLICANT_TRAITS_SET","setDuplicantTraits","ACTION_SAVEFILE_LOAD","loadSavefile","ACTION_SAVEFILE_SAVE","saveSavefile","ACTION_SAVEFILE_SAVE_START","saveSavefileStarted","ACTION_SAVEFILE_SAVE_END","saveSavefileEnded","ACTION_SAVEFILE_RECEIVED","savefileReceived","saveEditor","state","type","gameObjects","gameObjectSelector","behaviorName","body","redux_saga_1","__importDefault","effects_1","saga_1","sagaMiddleware","default","runSaga","run","fork","redux_actions_1","payloadCreator","isSaveChosen","Boolean","saveFileName","isSaveLoaded","isSaveLoading","isSaveSaving","isSaveEnabled","module","Worker","p","file_saver_1","actions_1","save_loader_worker_1","logging_1","worker","loadSaveFile","action","file","payload","reader","FileReader","loadGamePromise","Promise","accept","reject","onload","result","onerror","readAsArrayBuffer","then","buffer","e","onmessage","data","cmd","command","postMessage","put","err","log","select","saveDataPromise","save","saveData","blob","Blob","saveAs","handleSaveOrLoad","take","default_1","state_1","duplicantsReducer","_action","duplicantID","modifyBehavior","behavior","gameObjectIndex","assign","skillId","level","levels","skillIndex","findIndex","attributeId","slice","experience","traitIDs","prefabID","modifier","location","index","behaviorIndex","newBehavior","[object Object]","saveFileReducer","prefabType","prefabs","i","length","isNaN","reducer_1","reducer_2","reducers","saveEditorReducer","reducer","redux_1","combineReducers","middleware","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","React","__importStar","core_1","icons_1","DuplicantsPage","Component","createElement","NonIdealState","className","visual","IconNames","ERROR","component_1","TRAITS","mapDispatchToProps","dispatch","bindActionCreators","setTraits","utils_1","mapStateToProps","traits","react_redux_1","core_decorators_1","select_1","dispatch_1","traits_1","TraitMultiSelect","MultiSelect","ofType","DuplicantTraits","this","items","selectedItems","onItemSelect","_onTagSelected","itemPredicate","_filterItem","itemRenderer","_renderItem","tagRenderer","tag","tagInputProps","onRemove","_onTagRemoved","noResults","MenuItem","disabled","text","popoverProps","minimal","indexOf","concat","newTraits","splice","query","trait","toLowerCase","itemProps","modifiers","handleClick","matchesPredicate","isSelected","active","icon","TICK","BLANK","key","onClick","shouldDismissPopover","__decorate","autobind","connect","setLevel","setExperience","skills","DuplicantSkills","rows","map","DuplicantSkillRow","onChangeLevel","_onChangeLevel","onChangeExperience","_onChangeExperience","super","editLevel","editExperience","NumericInput","value","clampValueOnBlur","min","onValueChange","_onLevelChange","_onExperienceChange","Math","round","DuplicantGeneralPage","editingName","nextProps","selectors_2","identityBehavior","Appearance_1","Skills_1","Traits_1","DuplicantEditor","rename","EditableText","onChange","_onNameChange","onConfirm","_onRename","Tabs","renderActiveTabPanelOnly","Tab","title","panel","str","setState","s","resumeBehavior","DuplicantPortrait","role","outerClassName","currentRole","Card","interactive","_onClick","DuplicantPortrait_1","DuplicantsList","selectedDuplicantID","elements","_onDuplicantClick","onDuplicantClick","DuplicantsList_1","DuplicantEditor_1","content","MUGSHOT","_onDuplicantSelected","react_router_1","react_router_dom_1","ActiveAwareLink","_a","to","children","exact","staticContext","other","__rest","pathName","pathname","match","startsWith","toString","Link","event","preventDefault","withRouter","ActiveAwareLink_1","Duplicants_1","_404_1","SaveEditorPageComponent","Switch","Redirect","from","Route","path","component","LoadingSaveFilePageComponent","Text","Spinner","large","saveDescription","savePath","NoSaveLoadedPageComponent","_input","FLOPPY_DISK","Button","intent","Intent","PRIMARY","_onLoadClick","description","ref","el","style","display","_onLoadFile","click","change","files","target","ErrorPageComponent","Error","stack","error_1","NoSaveLoaded_1","LoadingSaveFile_1","SaveEditor_1","AppComponent","rootComponent","requireExactPath","Navbar","NavbarGroup","NavbarHeading","ellipsize","align","Alignment","RIGHT","_onSaveClick","Dialog","isOpen","SAVED","isCloseButtonShown","react_hot_loader_1","App_1","hot","options","hmr","transform","insertInto","undefined","locals","ReactDOM","app_1","store_1","rootEl","document","getElementById","render","Provider","HashRouter"],"mappings":"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","file":"client.3116ed5cd1d8e5e8d0ef.bundle.js","sourcesContent":["\r\nimport { Dispatch as TypedDispatch } from \"react-redux\";\r\n\r\nimport { Selector, createStructuredSelector as createSS, createSelector, ParametricSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"./state\";\r\n\r\nexport type Dispatch = TypedDispatch<AppState>;\r\n\r\nexport function createStructuredSelector<StateProps>(selectors: {[K in keyof StateProps]: Selector<AppState, StateProps[K]>}, selectorCreator?: typeof createSelector): Selector<AppState, StateProps>;\r\nexport function createStructuredSelector<Props, StateProps>(selectors: {[K in keyof StateProps]: ParametricSelector<AppState, Props, StateProps[K]>}, selectorCreator?: typeof createSelector): ParametricSelector<AppState, Props, StateProps>;\r\nexport function createStructuredSelector<StateProps>(selectors: any, selectorCreator?: typeof createSelector): Selector<AppState, StateProps> {\r\n    return createSS(selectors, selectorCreator);\r\n}\r\n","\r\nimport { GameObject } from \"oni-save-parser\";\r\nimport { createSelector, ParametricSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"../../../state\";\r\n\r\nimport { makeGetGameObjectsByType, makeGetBehaviorByName } from \"../selectors\";\r\n\r\nimport {\r\n    getBehavior,\r\n    KPrefabIDBehavior,\r\n    AIAttributeLevelsBehavior,\r\n    AttributeLevel,\r\n    AITraitsBehavior\r\n} from \"../behaviors\";\r\n\r\n\r\nexport const duplicants = makeGetGameObjectsByType(\"Minion\");\r\nexport const duplicantsIDs = createSelector(\r\n    duplicants,\r\n    duplicants => {\r\n        const ids: number[] = [];\r\n        for (let duplicant of duplicants) {\r\n            const idBehavior = getBehavior(duplicant, KPrefabIDBehavior);\r\n            if (idBehavior && idBehavior.parsedData) {\r\n                ids.push(idBehavior.parsedData.InstanceID);\r\n            }\r\n        }\r\n        return ids;\r\n    }\r\n);\r\n\r\nexport const duplicantsMap = createSelector(\r\n    duplicants,\r\n    duplicants => {\r\n        const dups: {[key: number]: GameObject} = {};\r\n        for (let duplicant of duplicants) {\r\n            const idBehavior = getBehavior(duplicant, KPrefabIDBehavior);\r\n            if (idBehavior && idBehavior.parsedData) {\r\n                dups[idBehavior.parsedData.InstanceID] = duplicant;\r\n            }\r\n        }\r\n        return dups;\r\n    }\r\n)\r\n\r\nexport function makeGetDuplicantByID<Props>(propKey: keyof Props): ParametricSelector<AppState, Props, GameObject | null> {\r\n    return createSelector(\r\n        duplicantsMap,\r\n        // We know the type of Props, but we need to have TS validate it as a string somehow...\r\n        (_: AppState, props: any) => props[propKey],\r\n        (duplicantsMap, id) => {\r\n            if (!Object.prototype.hasOwnProperty.call(duplicantsMap, id)) {\r\n                return null;\r\n            }\r\n            return duplicantsMap[id];\r\n        }\r\n    );\r\n};\r\n\r\nexport function makeGetDuplicantSkillsByID<Props>(propKey: keyof Props): ParametricSelector<AppState, Props, AttributeLevel[]> {\r\n    return createSelector(\r\n        makeGetBehaviorByName(makeGetDuplicantByID(propKey), AIAttributeLevelsBehavior),\r\n        levelBehavior => levelBehavior ? levelBehavior.parsedData.saveLoadLevels : []\r\n    );\r\n}\r\n\r\nexport function makeGetDuplicantTraitsByID<Props>(propKey: keyof Props): ParametricSelector<AppState, Props, string[]> {\r\n    return createSelector(\r\n        makeGetBehaviorByName(makeGetDuplicantByID(propKey), AITraitsBehavior),\r\n        traitsBehavior => traitsBehavior ? traitsBehavior.parsedData.TraitIds : []\r\n    );\r\n}","\r\nimport {\r\n    GameObject,\r\n    GameObjectBehavior\r\n} from \"oni-save-parser\";\r\n\r\nexport type BehaviorName<T extends GameObjectBehavior> = string & { __behaviorTypeMetadata?: T & never};\r\n\r\n\r\nexport const KPrefabIDBehavior: BehaviorName<KPrefabIDBehavior> = \"KPrefabID\";\r\nexport interface KPrefabIDBehavior extends GameObjectBehavior {\r\n    name: \"KPrefabID\";\r\n    parsedData: {\r\n        InstanceID: number;\r\n    };\r\n}\r\n\r\n\r\nexport const MinionIdentityBehavior: BehaviorName<MinionIdentityBehavior> = \"MinionIdentity\";\r\nexport interface MinionIdentityBehavior extends GameObjectBehavior {\r\n    name: \"MinionIdentity\";\r\n    parsedData: {\r\n        arrivalTime: number;\r\n        bodyShape: any;\r\n        gender: \"MALE\" | \"FEMALE\";\r\n        genderStringKey: \"MALE\" | \"FEMALE\";\r\n        name: string;\r\n        nameStringKey: string;\r\n    };\r\n}\r\n\r\n\r\nexport const MinionResumeBehavior: BehaviorName<MinionResumeBehavior> = \"MinionResume\";\r\nexport interface MinionResumeBehavior extends GameObjectBehavior {\r\n    name: \"MinionResume\";\r\n    parsedData: {\r\n        ExperienceByRoleID: [string, number][];\r\n        MasteryByRoleID: [string, boolean][];\r\n        AptitudeByRoleGroup: [{hash: number}, number][];\r\n        currentRole: string;\r\n        targetRole: string;\r\n    };\r\n}\r\n\r\n\r\nexport const AIAttributeLevelsBehavior: BehaviorName<AIAttributeLevelsBehavior> = \"Klei.AI.AttributeLevels\";\r\nexport interface AIAttributeLevelsBehavior extends GameObjectBehavior {\r\n    name: \"Klei.AI.AttributeLevels\";\r\n    parsedData: {\r\n        saveLoadLevels: AttributeLevel[];\r\n    };\r\n}\r\nexport interface AttributeLevel {\r\n    attributeId: string;\r\n    experience: number;\r\n    level: number;\r\n}\r\n\r\n\r\nexport const AITraitsBehavior: BehaviorName<AITraitsBehavior> = \"Klei.AI.Traits\";\r\nexport interface AITraitsBehavior extends GameObjectBehavior {\r\n    name: \"Klei.AI.Traits\";\r\n    parsedData: {\r\n        TraitIds: string[];\r\n    };\r\n}\r\n\r\n\r\nexport const AIEffectsBehavior: BehaviorName<AIEffectsBehavior> = \"Klei.AI.Effects\";\r\nexport interface AIEffectsBehavior extends GameObjectBehavior {\r\n    name: \"Klei.AI.Effects\";\r\n    parsedData: {\r\n        saveLoadEffects: EffectInstance[]\r\n    }\r\n}\r\nexport interface EffectInstance {\r\n    id: string;\r\n    timeRemaining: number;\r\n}\r\n\r\n\r\nexport const HealthBehavior: BehaviorName<HealthBehavior> = \"Health\";\r\nexport interface HealthBehavior extends GameObjectBehavior {\r\n    name: \"Health\";\r\n    parsedData: {\r\n        CanBeIncapacitated: boolean;\r\n        State: number;\r\n    };\r\n}\r\n\r\n\r\nexport type KnownBehavior = \r\n    KPrefabIDBehavior\r\n    | MinionIdentityBehavior\r\n    | MinionResumeBehavior\r\n    | AIAttributeLevelsBehavior\r\n    | AITraitsBehavior\r\n    | HealthBehavior;\r\nexport type KnownBehaviorName = KnownBehavior[\"name\"]\r\n\r\nexport function getBehavior<T extends GameObjectBehavior>(gameObject: GameObject, name: BehaviorName<T>): T | undefined {\r\n    return gameObject.behaviors.find(x => x.name === name) as T | undefined;\r\n}","\r\nconst failureType = {\r\n    ACTION_INVALID: \"action-invalid\" as \"action-invalid\",\r\n    SAVEFILE_CORRUPT: \"savefile-corrupt\" as \"savefile-corrupt\",\r\n    STATE_CORRUPT: \"state-corrupt\" as \"state-corrupt\",\r\n    MISSING_BEHAVIOR: \"missing-behavior\" as \"missing-behavior\"\r\n};\r\nObject.freeze(failureType);\r\nObject.seal(failureType);\r\n\r\nexport type FailureType = (typeof failureType)[keyof typeof failureType];\r\nexport const FAILURE_TYPE: Readonly<typeof failureType> = failureType;\r\n\r\n\r\nexport function warning(message: string, failureType?: FailureType) {\r\n    // TODO: Log to user console.\r\n    console.warn(`(${failureType}):`, message);\r\n}\r\n\r\nexport function error(message: string, failureType?: FailureType) {\r\n    // TODO: Log to user console.\r\n    console.error(`(${failureType}):`, message);\r\n}","\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nexport interface SaveEditorState {\r\n    fileName: string | null;\r\n    isLoading: boolean;\r\n    isSaving: boolean;\r\n    loadError: Error | null;\r\n    saveGame: SaveGame | null;\r\n\r\n    // A sparse array keyed by prefab ID, specifying the type and index (in the typed game object array) of the game object.\r\n    normalizedIDs: NormalizedID[]\r\n}\r\nexport interface NormalizedID {\r\n    type: string;\r\n    index: number;\r\n}\r\n\r\n\r\nexport const defaultSaveEditorState: SaveEditorState = {\r\n    fileName: null,\r\n    isLoading: false,\r\n    isSaving: false,\r\n    loadError: null,\r\n    saveGame: null,\r\n\r\n    normalizedIDs: []\r\n};\r\n\r\nexport const saveEditorStateKey = \"saveEditor\";\r\n","\r\nimport { createAction } from \"../../../action-utils\";\r\n\r\nexport const ACTION_DUPLICANT_RENAME = \"@save-editor/duplicants/rename\";\r\nexport const renameDuplicant = createAction(ACTION_DUPLICANT_RENAME, (x: {duplicantID: number, name: string}) => x);\r\nexport type RenameDuplicantAction = ReturnType<typeof renameDuplicant>;\r\n\r\nexport const ACTION_DUPLICANT_SKILL_SET_LEVEL = \"@save-editor/duplicants/skills/set-level\";\r\nexport const setDuplicantSkillLevel = createAction(ACTION_DUPLICANT_SKILL_SET_LEVEL, (x: {duplicantID: number, skillId: string, level: number}) => x);\r\nexport type SetDuplicantSkillLevelAction = ReturnType<typeof setDuplicantSkillLevel>;\r\n\r\nexport const ACTION_DUPLICANT_SKILL_SET_EXPERIENCE = \"@save-editor/duplicants/skills/set-experience\";\r\nexport const setDuplicantSkillExperience = createAction(ACTION_DUPLICANT_SKILL_SET_EXPERIENCE, (x: {duplicantID: number, skillId: string, experience: number}) => x);\r\nexport type SetDuplicantSkillExperienceAction = ReturnType<typeof setDuplicantSkillExperience>;\r\n\r\nexport const ACTION_DUPLICANT_TRAITS_SET = \"@save-editor/duplicants/traits/set\";\r\nexport const setDuplicantTraits = createAction(ACTION_DUPLICANT_TRAITS_SET, (x: {duplicantID: number, traitIDs: string[]}) => x);\r\nexport type SetDuplicantTraitsAction = ReturnType<typeof setDuplicantTraits>;\r\n\r\nexport type DuplicantActions =\r\n    RenameDuplicantAction\r\n    | SetDuplicantSkillLevelAction\r\n    | SetDuplicantSkillExperienceAction\r\n    | SetDuplicantTraitsAction;\r\n","\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { createAction } from \"../../../action-utils\";\r\n\r\nexport const ACTION_SAVEFILE_LOAD = \"@save-editor/savefile/load\";\r\nexport const loadSavefile = createAction(ACTION_SAVEFILE_LOAD, (x: {file: File}) => x);\r\nexport type LoadSavefileAction = ReturnType<typeof loadSavefile>;\r\n\r\nexport const ACTION_SAVEFILE_SAVE = \"@save-editor/savefile/save\";\r\nexport const saveSavefile = createAction(ACTION_SAVEFILE_SAVE, (x: {fileName?: string}) => x);\r\nexport type SaveSavefileAction = ReturnType<typeof saveSavefile>;\r\n\r\nexport const ACTION_SAVEFILE_SAVE_START = \"@save-editor/savefile/save/start\";\r\nexport const saveSavefileStarted = createAction(ACTION_SAVEFILE_SAVE_START, () => {});\r\nexport type SaveSavefileStartedAction = ReturnType<typeof saveSavefileStarted>;\r\n\r\nexport const ACTION_SAVEFILE_SAVE_END = \"@save-editor/savefile/save/end\";\r\nexport const saveSavefileEnded = createAction(ACTION_SAVEFILE_SAVE_END, () => {});\r\nexport type SaveSavefileEndedAction = ReturnType<typeof saveSavefileEnded>;\r\n\r\n\r\nexport const ACTION_SAVEFILE_RECEIVED = \"@save-editor/savefile/received\";\r\nexport const savefileReceived = createAction(ACTION_SAVEFILE_RECEIVED, (x: {saveGame: SaveGame}) => x);\r\nexport type SavefileReceivedAction = ReturnType<typeof savefileReceived>;\r\n\r\nexport type SavefileActions = LoadSavefileAction | SaveSavefileAction | SaveSavefileStartedAction | SaveSavefileEndedAction | SavefileReceivedAction;\r\n","\r\nimport { Selector, createSelector, ParametricSelector } from \"reselect\";\r\nimport { GameObject, GameObjectBehavior } from \"oni-save-parser\";\r\n\r\nimport { AppState } from \"../../state\";\r\n\r\nimport { BehaviorName, getBehavior, MinionIdentityBehavior, KPrefabIDBehavior } from \"./behaviors\";\r\n\r\n\r\nexport const saveEditor = (state: AppState) => state.saveEditor;\r\n\r\n// TODO: Lots of data can be precalculated here, but then we have to update\r\n//  it when the game objects are modified.\r\n// May want to investigate normalizing the save file then de-normalizing it\r\n//  to save.  This is blocked currently by needing a very deeply nested value (KPrefabID) as the\r\n//  ID to the game object.\r\n\r\nconst saveGame = createSelector(saveEditor, saveEditor => saveEditor.saveGame);\r\n\r\nexport const gameObjects = createSelector(saveGame, saveGame => saveGame ? saveGame.body.gameObjects : null);\r\n\r\nexport function makeGetGameObjectsByType(type: string): Selector<AppState, GameObject[]> {\r\n    return createSelector(\r\n        gameObjects,\r\n        gameObjects => gameObjects ? gameObjects[type] || [] : []\r\n    );\r\n}\r\n\r\n// We can handle parametric or non-parametric input selectors.  We do not use the parameter, but createSelector will pass the params as required.\r\nexport function makeGetBehaviorByName<T extends GameObjectBehavior>(gameObjectSelector: Selector<AppState, GameObject | null>, behaviorName: BehaviorName<T>): Selector<AppState, T | null>;\r\nexport function makeGetBehaviorByName<Props, T extends GameObjectBehavior>(gameObjectSelector: ParametricSelector<AppState, Props, GameObject | null>, behaviorName: BehaviorName<T>): ParametricSelector<AppState, Props, T | null>;\r\nexport function makeGetBehaviorByName<T extends GameObjectBehavior>(\r\n    gameObjectSelector: (Selector<AppState, GameObject | null> | ParametricSelector<AppState, any, GameObject | null>),\r\n    behaviorName: BehaviorName<T>\r\n): ParametricSelector<AppState, any, T | null> {\r\n    return createSelector(\r\n        gameObjectSelector,\r\n        (gameObject) => (gameObject && gameObject.behaviors.find(x => x.name === behaviorName) as T) || null\r\n    );\r\n}","\r\nimport createSagaMiddleware from \"redux-saga\";\r\nimport { fork } from \"redux-saga/effects\"\r\n\r\nimport saveEditorSaga from \"../services/save-editor/saga\";\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\nexport default sagaMiddleware;\r\n\r\nexport function runSaga() {\r\n    sagaMiddleware.run(function*() {\r\n        yield fork(saveEditorSaga);\r\n    });\r\n}","\r\nimport { createAction as createReduxAction } from \"redux-actions\";\r\n\r\n// We can do this better than the Action type of redux-actions:\r\n//  - Create a discriminated union on explicit 'type' types for use in reducers.\r\n//  - inferr the action typedef and payload shape using TS 2.8's ReturnType / infer keyword.\r\n// This gets us very close, but hides the parameter names for our payload creator.\r\n//  To get around this, we just use one argument that contains the payload.  This\r\n//  lets us expose the names as well as the types, at the cost of having to pass in data\r\n//  in object form.\r\n\r\n\r\nexport interface NamedAction<TName extends string, TPayload> {\r\n    type: TName;\r\n    payload: TPayload;\r\n}\r\n\r\n\r\nexport function createAction<TName extends string, TPayload, T1>(name: TName, payloadCreator: (arg1: T1) => TPayload): (arg1: T1) => NamedAction<TName, TPayload>;\r\nexport function createAction<TName extends string, TPayload>(name: TName, payloadCreator: (...args: any[]) => TPayload): (...args: any[]) => NamedAction<TName, TPayload> {\r\n    return createReduxAction(name, payloadCreator) as any;\r\n}\r\n","\r\nimport { createSelector } from \"reselect\";\r\n\r\nimport { saveEditor } from \"../selectors\";\r\n\r\nexport const isSaveChosen = createSelector(saveEditor, saveEditor => Boolean(saveEditor.fileName != null));\r\nexport const saveFileName = createSelector(saveEditor, saveEditor => saveEditor.fileName);\r\nexport const isSaveLoaded = createSelector(saveEditor, saveEditor => Boolean(saveEditor.fileName != null && !saveEditor.isLoading));\r\nexport const isSaveLoading = createSelector(saveEditor, saveEditor => saveEditor.isLoading);\r\nexport const isSaveSaving = createSelector(saveEditor, saveEditor => saveEditor.isSaving);\r\nexport const isSaveEnabled = createSelector(saveEditor, saveEditor => Boolean(saveEditor.fileName && saveEditor.isLoading == false));\r\nexport const loadError = createSelector(saveEditor, saveEditor => saveEditor.loadError);\r\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"a61662d4a376aa214495.worker.js\");\n};","\r\nimport { take, fork, call, put, select } from \"redux-saga/effects\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\n\r\nimport {\r\n    ACTION_SAVEFILE_LOAD,\r\n    ACTION_SAVEFILE_SAVE,\r\n    LoadSavefileAction,\r\n    SaveSavefileAction,\r\n    savefileReceived,\r\n    saveSavefileStarted,\r\n    saveSavefileEnded\r\n} from \"./actions\";\r\n\r\nimport SaveLoadWorker from \"worker-loader!./save-loader.worker\";\r\nimport { LoadCommandData, SaveCommandData } from \"./save-loader.worker\";\r\nimport { Action } from \"redux\";\r\nimport { AppState } from \"../../../state\";\r\nimport { error } from \"../../../logging\";\r\n\r\n\r\nconst worker = new SaveLoadWorker();\r\n\r\nfunction* loadSaveFile(action: LoadSavefileAction) {\r\n    const {\r\n        file\r\n    } = action.payload;\r\n\r\n    const reader = new FileReader();\r\n    const loadGamePromise = new Promise<File>((accept, reject) => {\r\n        reader.onload = () => {\r\n            accept(reader.result);\r\n        };\r\n        reader.onerror = () => {\r\n            reject(reader.error);\r\n        };\r\n        reader.readAsArrayBuffer(file);\r\n    }).then(buffer => {\r\n        return new Promise((accept, reject) => {\r\n            worker.onerror = (e: ErrorEvent) => { reject(e.error) };\r\n            worker.onmessage = (e: MessageEvent) => {\r\n                const {\r\n                    saveGame,\r\n                    error\r\n                } = e.data;\r\n                if (error) reject(error);\r\n                else accept(saveGame);\r\n            };\r\n\r\n            const cmd: LoadCommandData = {\r\n                command: \"load\",\r\n                buffer: reader.result\r\n            };\r\n            worker.postMessage(cmd);\r\n        });\r\n    });\r\n\r\n    try {\r\n        const saveGame: SaveGame = yield call(() => loadGamePromise);\r\n        yield put(savefileReceived({ saveGame }));\r\n    }\r\n    catch (err) {\r\n        // TODO: either send with savefileReceived error key, or make a new action for this.\r\n        console.log(err);\r\n    }\r\n}\r\n\r\nfunction* saveSavefile(action: SaveSavefileAction) {\r\n    const {\r\n        fileName\r\n    } = action.payload;\r\n\r\n    const state: AppState = yield select();\r\n\r\n    const saveGame = state.saveEditor.saveGame;\r\n    if (!saveGame) {\r\n        return;\r\n    }\r\n\r\n    yield put(saveSavefileStarted({}));\r\n\r\n    try {\r\n        const saveDataPromise = new Promise<ArrayBuffer>((accept, reject) => {\r\n            worker.onerror = (e: ErrorEvent) => { reject(e.error) };\r\n            worker.onmessage = (e: MessageEvent) => {\r\n                const {\r\n                    buffer,\r\n                    error\r\n                } = e.data;\r\n                if (error) reject(error);\r\n                else accept(buffer);\r\n            };\r\n\r\n            const cmd: SaveCommandData = {\r\n                command: \"save\",\r\n                save: saveGame\r\n            };\r\n            worker.postMessage(cmd);\r\n        });\r\n\r\n        const saveData: ArrayBuffer = yield call(() => saveDataPromise);\r\n        const blob = new Blob([saveData]);\r\n\r\n        saveAs(blob, fileName || state.saveEditor.fileName || \"my-file.sav\");\r\n    }\r\n    catch (e) {\r\n        error(\"Failed to save file: \" + e.message);\r\n    }\r\n\r\n    yield put(saveSavefileEnded({}));\r\n}\r\n\r\nfunction* handleSaveOrLoad() {\r\n    // Take a save or load, then block until we complete.\r\n    //  This will effectively ignore save/load calls happening while we are working.\r\n    while (true) {\r\n        const action: LoadSavefileAction | SaveSavefileAction = yield take([ACTION_SAVEFILE_LOAD, ACTION_SAVEFILE_SAVE]);\r\n        switch (action.type) {\r\n            case ACTION_SAVEFILE_LOAD:\r\n                yield call<LoadSavefileAction>(loadSaveFile, action);\r\n                continue;\r\n            case ACTION_SAVEFILE_SAVE:\r\n                yield call<SaveSavefileAction>(saveSavefile, action);\r\n                continue;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default function* () {\r\n    yield fork(handleSaveOrLoad);\r\n}\r\n","\r\nimport { fork } from \"redux-saga/effects\";\r\n\r\nimport saveFileSaga from \"./savefile/saga\";\r\n\r\nexport default function* () {\r\n    yield fork(saveFileSaga);\r\n}","\r\nimport { AnyAction } from \"redux\";\r\nimport { GameObjectBehavior } from \"oni-save-parser\";\r\n\r\nimport { error, FAILURE_TYPE } from \"../../../logging\";\r\n\r\nimport { SaveEditorState, defaultSaveEditorState } from \"../state\";\r\n\r\nimport {\r\n    MinionIdentityBehavior,\r\n    AIAttributeLevelsBehavior,\r\n    BehaviorName,\r\n    AITraitsBehavior\r\n} from \"../behaviors\";\r\n\r\nimport {\r\n    ACTION_DUPLICANT_RENAME,\r\n    ACTION_DUPLICANT_SKILL_SET_LEVEL,\r\n    ACTION_DUPLICANT_SKILL_SET_EXPERIENCE,\r\n    ACTION_DUPLICANT_TRAITS_SET,\r\n    DuplicantActions\r\n} from \"./actions\";\r\nimport { Behavior } from \"popper.js\";\r\n\r\n\r\nexport default function duplicantsReducer(state: SaveEditorState = defaultSaveEditorState, _action: AnyAction) {\r\n    const action = _action as DuplicantActions;\r\n    switch(action.type) {\r\n        case ACTION_DUPLICANT_RENAME: {\r\n            const {\r\n                duplicantID,\r\n                name\r\n            } = action.payload;\r\n\r\n            return modifyBehavior(\r\n                state,\r\n                action,\r\n                duplicantID,\r\n                MinionIdentityBehavior,\r\n                (behavior, gameObjectIndex) => {\r\n                    const newBehavior: MinionIdentityBehavior = {\r\n                        ...behavior,\r\n                        parsedData: {\r\n                            ...behavior.parsedData,\r\n                            name\r\n                        }\r\n                    };\r\n                    return newBehavior;\r\n                }\r\n            );\r\n        }\r\n        case ACTION_DUPLICANT_SKILL_SET_LEVEL: {\r\n            const {\r\n                duplicantID,\r\n                skillId,\r\n                level\r\n            } = action.payload;\r\n\r\n            return modifyBehavior(\r\n                state,\r\n                action,\r\n                duplicantID,\r\n                AIAttributeLevelsBehavior,\r\n                (behavior, gameObjectIndex) => {\r\n                    const levels = behavior.parsedData.saveLoadLevels;\r\n\r\n                    const skillIndex = levels.findIndex(x => x.attributeId === skillId);\r\n                    if (skillIndex === -1) {\r\n                        error(`Action \"${action.type}\" prefabID ${duplicantID} prefab \"Minion\":${gameObjectIndex} behavior \"${AIAttributeLevelsBehavior}\" does not have skill ID ${skillId}.`, FAILURE_TYPE.SAVEFILE_CORRUPT);\r\n                        return behavior;\r\n                    }\r\n        \r\n                    const newBehavior: AIAttributeLevelsBehavior = {\r\n                        ...behavior,\r\n                        parsedData: {\r\n                            saveLoadLevels: [\r\n                                ...levels.slice(0, skillIndex),\r\n                                {\r\n                                    ...levels[skillIndex],\r\n                                    level: level\r\n                                },\r\n                                ...levels.slice(skillIndex + 1)\r\n                            ]\r\n                        }\r\n                    }\r\n\r\n                    return newBehavior;\r\n                }\r\n            );\r\n        }\r\n        case ACTION_DUPLICANT_SKILL_SET_EXPERIENCE: {\r\n            const {\r\n                duplicantID,\r\n                skillId,\r\n                experience\r\n            } = action.payload;\r\n\r\n            return modifyBehavior(\r\n                state,\r\n                action,\r\n                duplicantID,\r\n                AIAttributeLevelsBehavior,\r\n                (behavior, gameObjectIndex) => {\r\n                    const levels = behavior.parsedData.saveLoadLevels;\r\n\r\n                    const skillIndex = levels.findIndex(x => x.attributeId === skillId);\r\n                    if (skillIndex === -1) {\r\n                        error(`Action \"${action.type}\" prefabID ${duplicantID} prefab \"Minion\":${gameObjectIndex} behavior \"${AIAttributeLevelsBehavior}\" does not have skill ID ${skillId}.`, FAILURE_TYPE.SAVEFILE_CORRUPT);\r\n                        return behavior;\r\n                    }\r\n        \r\n                    const newBehavior: AIAttributeLevelsBehavior = {\r\n                        ...behavior,\r\n                        parsedData: {\r\n                            saveLoadLevels: [\r\n                                ...levels.slice(0, skillIndex),\r\n                                {\r\n                                    ...levels[skillIndex],\r\n                                    experience\r\n                                },\r\n                                ...levels.slice(skillIndex + 1)\r\n                            ]\r\n                        }\r\n                    }\r\n\r\n                    return newBehavior;\r\n                }\r\n            );\r\n        }\r\n        case ACTION_DUPLICANT_TRAITS_SET: {\r\n            const {\r\n                duplicantID,\r\n                traitIDs\r\n            } = action.payload;\r\n\r\n            return modifyBehavior(\r\n                state,\r\n                action,\r\n                duplicantID,\r\n                AITraitsBehavior,\r\n                (behavior, gameObjectIndex) => {\r\n                    const newBehavior: AITraitsBehavior = {\r\n                        ...behavior,\r\n                        parsedData: {\r\n                            ...behavior.parsedData,\r\n                            TraitIds: traitIDs\r\n                        }\r\n                    };\r\n                    return newBehavior;\r\n                }\r\n            );\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction modifyBehavior<T extends GameObjectBehavior>(\r\n    state: SaveEditorState,\r\n    action: AnyAction,\r\n    prefabID: number,\r\n    behaviorName: BehaviorName<T>,\r\n    modifier: (behavior: T, gameObjectIndex: number) => T\r\n): SaveEditorState {\r\n    const saveGame = state.saveGame;\r\n    if (!saveGame) {\r\n        error(`Action \"${action.type}\" called before a save game is available.`, FAILURE_TYPE.ACTION_INVALID);\r\n        return state;\r\n    }\r\n\r\n    const location = state.normalizedIDs[prefabID];\r\n    if (!location) {\r\n        error(`Action \"${action.type}\" requested prefabID ${prefabID}, which is not in the normalized ID table.`, FAILURE_TYPE.ACTION_INVALID);\r\n        return state;\r\n    }\r\n\r\n    const {\r\n        type,\r\n        index\r\n    } = location;\r\n\r\n    if (type !== \"Minion\") {\r\n        error(`Action \"${action.type}\" requested prefabID ${prefabID}, which is not a duplicant.`, FAILURE_TYPE.ACTION_INVALID);\r\n        return state;\r\n    }\r\n\r\n    const gameObject = saveGame.body.gameObjects[type][index];\r\n    if (!gameObject) {\r\n        error(`Action \"${action.type}\" prefabID ${prefabID} mapped to prefab \"${type}\":${index}, which does not exist.`, FAILURE_TYPE.STATE_CORRUPT);\r\n        return state;\r\n    }\r\n\r\n    const behaviorIndex = gameObject.behaviors.findIndex(x => x.name === behaviorName);\r\n    if (behaviorIndex === -1) {\r\n        error(`Action \"${action.type}\" prefabID ${prefabID} prefab \"${type}\":${index} does not have behavior \"${behaviorName}\".`, FAILURE_TYPE.SAVEFILE_CORRUPT);\r\n        return state;\r\n    }\r\n    const behavior = gameObject.behaviors[behaviorIndex] as T;\r\n\r\n    const newBehavior = modifier(behavior, index);\r\n\r\n    // Aarrrgggh, normalize!\r\n    return {\r\n        ...state,\r\n        saveGame: {\r\n            ...saveGame,\r\n            body: {\r\n                ...saveGame.body,\r\n                gameObjects: {\r\n                    ...saveGame.body.gameObjects,\r\n                    [type]: [\r\n                        ...saveGame.body.gameObjects[type].slice(0, index),\r\n                        {\r\n                            ...gameObject,\r\n                            behaviors: [\r\n                                ...gameObject.behaviors.slice(0, behaviorIndex),\r\n                                newBehavior,\r\n                                ...gameObject.behaviors.slice(behaviorIndex + 1)\r\n\r\n                            ]\r\n                        },\r\n                        ...saveGame.body.gameObjects[type].slice(index + 1)\r\n                    ]\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","\r\nimport { AnyAction } from \"redux\";\r\nimport uuidV4 from \"uuid/v4\";\r\n\r\nimport { SaveEditorState, defaultSaveEditorState, NormalizedID } from \"../state\";\r\n\r\nimport {\r\n    SavefileActions,\r\n    ACTION_SAVEFILE_LOAD,\r\n    ACTION_SAVEFILE_RECEIVED,\r\n    ACTION_SAVEFILE_SAVE_START,\r\n    ACTION_SAVEFILE_SAVE_END\r\n} from \"./actions\";\r\n\r\nimport { getBehavior, KPrefabIDBehavior } from \"./../behaviors\";\r\nimport { warning, error, FAILURE_TYPE } from \"../../../logging\";\r\n\r\n\r\nexport default function saveFileReducer(state: SaveEditorState = defaultSaveEditorState, _action: AnyAction): SaveEditorState {\r\n    const action = _action as SavefileActions;\r\n    switch (action.type) {\r\n        case ACTION_SAVEFILE_LOAD: {\r\n            const {\r\n                file\r\n            } = action.payload;\r\n\r\n            // Also ignored in saga.\r\n            if (state.isSaving) return state;\r\n\r\n            return {\r\n                ...defaultSaveEditorState,\r\n                fileName: file.name,\r\n                isLoading: true\r\n            }\r\n        }\r\n        case ACTION_SAVEFILE_RECEIVED: {\r\n            const {\r\n                saveGame\r\n            } = action.payload;\r\n\r\n            // Build a normalization cache of game object PrefabIDs to the\r\n            //  type and array index of the object.\r\n            // We can save a lot of work by precaching this information,\r\n            //  and we (currently) do not create / delete / reorder any objects.\r\n            const normalizedIDs: NormalizedID[] = [];\r\n            for (let prefabType in saveGame.body.gameObjects) {\r\n                const prefabs = saveGame.body.gameObjects[prefabType];\r\n                for (let i = 0; i < prefabs.length; i++) {\r\n                    const idBehavior = getBehavior(prefabs[i], KPrefabIDBehavior);\r\n                    if (!idBehavior) {\r\n                        warning(`GameObject at \"${prefabs}\":${i} has no behavior \"${KPrefabIDBehavior}\".`, FAILURE_TYPE.MISSING_BEHAVIOR);\r\n                        continue;\r\n                    }\r\n                    if (!idBehavior.parsedData || isNaN(idBehavior.parsedData.InstanceID)) {\r\n                        error(`GameObject at \"${prefabType}\":${i} has invalid data in behavior \"${KPrefabIDBehavior}\".`, FAILURE_TYPE.SAVEFILE_CORRUPT);\r\n                        continue;\r\n                    }\r\n\r\n                    normalizedIDs[idBehavior.parsedData.InstanceID] = {\r\n                        type: prefabType,\r\n                        index: i\r\n                    };\r\n                }\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                saveGame: action.payload.saveGame,\r\n                normalizedIDs\r\n            };\r\n        }\r\n        case ACTION_SAVEFILE_SAVE_START:\r\n            return {\r\n                ...state,\r\n                isSaving: true\r\n            }\r\n        case ACTION_SAVEFILE_SAVE_END:\r\n            return {\r\n                ...state,\r\n                isSaving: false\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","\r\nimport { AnyAction } from \"redux\";\r\nimport { SaveEditorState, defaultSaveEditorState } from \"./state\";\r\n\r\nimport saveFileReducer from \"./savefile/reducer\";\r\nimport duplicantsReducer from \"./duplicants/reducer\";\r\n\r\n/**\r\n * Flat list of reducers to run against SaveEditorState\r\n * Reducers run in-order.\r\n * \r\n * We do not split into sub-states using combineReducers, since\r\n * these need access to all of the state at this level.\r\n * \r\n * These should be broken into sub-states when we are more normalized.\r\n */\r\nconst reducers = [\r\n    saveFileReducer,\r\n    duplicantsReducer\r\n];\r\n\r\nexport default function saveEditorReducer(state: SaveEditorState = defaultSaveEditorState, action: AnyAction): SaveEditorState {\r\n    for (let reducer of reducers) {\r\n        state = reducer(state, action);\r\n    }\r\n    return state;\r\n}\r\n","\r\nimport { combineReducers } from \"redux\";\r\n\r\nimport saveEditorReducer from \"../services/save-editor/reducer\";\r\nimport { saveEditorStateKey } from \"../services/save-editor/state\";\r\n\r\nconst reducer = combineReducers({\r\n    // TODO: Find a way to satisfy typings with discriminated union actions and combineReducers\r\n    [saveEditorStateKey]: saveEditorReducer as any\r\n});\r\n\r\nexport default reducer;","\r\nimport { applyMiddleware, compose, createStore } from \"redux\";\r\n\r\nimport reducer from \"./reducer\";\r\nimport { AppState, defaultState } from \"./state\";\r\n\r\nimport sagaMiddleware from \"./saga\";\r\n\r\nconst middleware = [\r\n    sagaMiddleware\r\n];\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducer, composeEnhancers(\r\n    applyMiddleware(...middleware)\r\n));\r\n\r\nexport default store;\r\n","\r\nimport * as React from \"react\";\r\n\r\nimport {\r\n    NonIdealState,\r\n    Text\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nclass DuplicantsPage extends React.Component {\r\n    render() {\r\n        return (\r\n            <NonIdealState className=\"ui-page ui-page-404\" visual={IconNames.ERROR}>\r\n                <div>\r\n                    <div className=\"ui-title\">I don't know how you got here...</div>\r\n                    <div className=\"ui-title-secondary\">But weasels were probably involved.</div>\r\n                </div>\r\n                <div className=\"ui-body\">\r\n                    <div>No idea what this page is supposed to be, sorry.</div>\r\n                    <div>Try choosing something else to edit.</div>\r\n                </div>\r\n            </NonIdealState>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DuplicantsPage","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nconst TRAITS: string[] = [\r\n    \"None\",\r\n    \"Stinky\",\r\n    \"Ellie\",\r\n    \"Joshua\",\r\n    \"Liam\",\r\n    \"CantResearch\",\r\n    \"CantBuild\",\r\n    \"CantCook\",\r\n    \"CantDig\",\r\n    \"Hemophobia\",\r\n    \"MedicalAid\",\r\n    \"ScaredyCat\",\r\n    \"MouthBreather\",\r\n    \"CalorieBurner\",\r\n    \"SmallBladder\",\r\n    \"Anemic\",\r\n    \"SlowLearner\",\r\n    \"NoodleArms\",\r\n    \"InteriorDecorator\",\r\n    \"Regeneration\",\r\n    \"DeeperDiversLungs\",\r\n    \"SunnyDisposition\",\r\n    \"RockCrusher\",\r\n    \"Uncultured\",\r\n    \"WeakImmuneSystem\",\r\n    \"IrritableBowel\",\r\n    \"Flatulence\",\r\n    \"Snorer\",\r\n    \"Narcolepsy\",\r\n    \"Twinkletoes\",\r\n    \"Greasemonkey\",\r\n    \"MoleHands\",\r\n    \"FastLearner\",\r\n    \"DiversLung\",\r\n    \"StrongArm\",\r\n    \"IronGut\",\r\n    \"StrongImmuneSystem\",\r\n    \"BedsideManner\",\r\n    \"Caring\",\r\n    \"Aggressive\",\r\n    \"UglyCrier\",\r\n    \"BingeEater\",\r\n    \"StressVomiter\",\r\n    \"EarlyBird\",\r\n    \"NightOwl\",\r\n    \"Claustrophobic\",\r\n    \"PrefersWarmer\",\r\n    \"PrefersColder\",\r\n    \"SensitiveFeet\",\r\n    \"Fashionable\",\r\n    \"Climacophobic\",\r\n    \"SolitarySleeper\",\r\n    \"Workaholic\"\r\n];\r\nexport default TRAITS;","\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nimport { Dispatch } from \"../../../../../../../../state/utils\";\r\n\r\nimport { setDuplicantTraits } from \"../../../../../../../../services/save-editor/duplicants/actions\";\r\n\r\nexport interface DispatchProps {\r\n    setTraits: typeof setDuplicantTraits\r\n}\r\n\r\nexport default function mapDispatchToProps(dispatch: Dispatch): DispatchProps {\r\n    return bindActionCreators({\r\n        setTraits: setDuplicantTraits\r\n    }, dispatch);\r\n}","\r\nimport { createStructuredSelector } from \"../../../../../../../../state/utils\";\r\n\r\nimport { makeGetDuplicantTraitsByID } from \"../../../../../../../../services/save-editor/duplicants/selectors\";\r\n\r\nimport Props from \"./props\";\r\n\r\nexport interface StateProps {\r\n    traits: string[];\r\n}\r\n\r\nconst mapStateToProps = () => createStructuredSelector<Props, StateProps>({\r\n    traits: makeGetDuplicantTraitsByID<Props>(\"duplicantID\")\r\n});\r\nexport default mapStateToProps;\r\n","\r\nimport * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { MenuItem, Intent } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\nimport { MultiSelect, ItemRenderer, IItemRendererProps } from \"@blueprintjs/select\";\r\n\r\nimport DuplicantTraitsProps from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./selectors\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./dispatch\";\r\n\r\nimport TRAITS from \"./traits\";\r\n\r\n\r\nconst TraitMultiSelect = MultiSelect.ofType<string>();\r\n\r\ntype Props = DuplicantTraitsProps & StateProps & DispatchProps;\r\nclass DuplicantTraits extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            className,\r\n            traits\r\n        } = this.props;\r\n\r\n\r\n        return (\r\n            <div className={`fill-parent ${className}`}>\r\n                <TraitMultiSelect\r\n                    items={TRAITS}\r\n                    selectedItems={traits}\r\n                    onItemSelect={this._onTagSelected}\r\n                    itemPredicate={this._filterItem}\r\n                    itemRenderer={this._renderItem}\r\n                    tagRenderer={tag => tag}\r\n                    tagInputProps={{ onRemove: this._onTagRemoved }}\r\n                    noResults={<MenuItem disabled={true} text=\"No results.\" />}\r\n                    popoverProps={{ minimal: true }}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    @autobind()\r\n    private _onTagSelected(tag: string) {\r\n        const {\r\n            duplicantID,\r\n            traits,\r\n            setTraits\r\n        } = this.props;\r\n\r\n        if (traits.indexOf(tag) !== -1) {\r\n            return;\r\n        }\r\n\r\n        setTraits({ duplicantID, traitIDs: traits.concat(tag) });\r\n    }\r\n\r\n    @autobind()\r\n    private _onTagRemoved(tag: string) {\r\n        const {\r\n            duplicantID,\r\n            traits,\r\n            setTraits\r\n        } = this.props;\r\n\r\n        const index = traits.indexOf(tag);\r\n        if (index === -1) {\r\n            return;\r\n        }\r\n\r\n        const newTraits = traits.slice();\r\n        newTraits.splice(index, 1);\r\n\r\n        setTraits({ duplicantID, traitIDs: newTraits });\r\n    }\r\n\r\n    private _filterItem(query: string, trait: string) {\r\n        return trait.toLowerCase().indexOf(query.toLowerCase()) !== -1;\r\n    }\r\n\r\n    @autobind()\r\n    private _renderItem(trait: string, itemProps: IItemRendererProps) {\r\n        const {\r\n            modifiers,\r\n            handleClick\r\n        } = itemProps;\r\n\r\n        if (!modifiers.matchesPredicate) {\r\n            return null;\r\n        }\r\n\r\n        const {\r\n            traits\r\n        } = this.props;\r\n\r\n        const isSelected = traits.indexOf(trait) !== -1;\r\n\r\n        return (\r\n            <MenuItem\r\n                active={modifiers.active}\r\n                icon={isSelected ? IconNames.TICK : IconNames.BLANK}\r\n                key={trait}\r\n                onClick={handleClick}\r\n                text={trait}\r\n                shouldDismissPopover={false}\r\n            />\r\n        );\r\n    };\r\n\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DuplicantTraits);\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nimport { Dispatch } from \"../../../../../../../../state/utils\";\r\n\r\nimport { setDuplicantSkillLevel, setDuplicantSkillExperience } from \"../../../../../../../../services/save-editor/duplicants/actions\";\r\n\r\nexport interface DispatchProps {\r\n    setLevel: typeof setDuplicantSkillLevel;\r\n    setExperience: typeof setDuplicantSkillExperience;\r\n}\r\n\r\nexport default function mapDispatchToProps(dispatch: Dispatch): DispatchProps {\r\n    return bindActionCreators({\r\n        setLevel: setDuplicantSkillLevel,\r\n        setExperience: setDuplicantSkillExperience\r\n    }, dispatch);\r\n}","\r\nimport { createStructuredSelector } from \"../../../../../../../../state/utils\";\r\n\r\nimport { AttributeLevel } from \"../../../../../../../../services/save-editor/behaviors\";\r\nimport { makeGetDuplicantSkillsByID } from \"../../../../../../../../services/save-editor/duplicants/selectors\";\r\n\r\nimport Props from \"./props\";\r\n\r\nexport interface StateProps {\r\n    skills: AttributeLevel[];\r\n}\r\n\r\nconst mapStateToProps = () => createStructuredSelector<Props, StateProps>({\r\n    skills: makeGetDuplicantSkillsByID<Props>(\"duplicantID\")\r\n});\r\nexport default mapStateToProps;\r\n","\r\nimport * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { NumericInput } from \"@blueprintjs/core\";\r\n\r\nimport DuplicantSkillsProps from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./selectors\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./dispatch\";\r\n\r\n\r\ntype Props = DuplicantSkillsProps & StateProps & DispatchProps;\r\nclass DuplicantSkills extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            className,\r\n            skills\r\n        } = this.props;\r\n\r\n        const rows = skills.map(x => \r\n            <DuplicantSkillRow\r\n                key={x.attributeId}\r\n                id={x.attributeId}\r\n                level={x.level}\r\n                experience={x.experience}\r\n                onChangeLevel={this._onChangeLevel}\r\n                onChangeExperience={this._onChangeExperience}\r\n        />);\r\n\r\n        return (\r\n            <div className={`fill-parent container-scroll ${className}`}>\r\n                <table className=\"fill-parent pt-html-table pt-html-table-striped\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Skill</th>\r\n                            <th>Level</th>\r\n                            <th>Experience</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {rows}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    @autobind()\r\n    private _onChangeLevel(id: string, level: number) {\r\n        const {\r\n            duplicantID,\r\n            setLevel\r\n        } = this.props;\r\n        setLevel({duplicantID: duplicantID, skillId: id, level});\r\n    }\r\n\r\n    @autobind()\r\n    private _onChangeExperience(id: string, experience: number) {\r\n        const {\r\n            duplicantID,\r\n            setExperience\r\n        } = this.props;\r\n        setExperience({duplicantID: duplicantID, skillId: id, experience});\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DuplicantSkills);\r\n\r\n\r\ninterface DuplicantSkillRowProps {\r\n    id: string;\r\n    level: number;\r\n    experience: number;\r\n    onChangeLevel(id: string, level: number): void;\r\n    onChangeExperience(id: string, level: number): void;\r\n}\r\n\r\nclass DuplicantSkillRow extends React.Component<DuplicantSkillRowProps> {\r\n    constructor(props: DuplicantSkillRowProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            editLevel: null,\r\n            editExperience: null\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            id,\r\n            level,\r\n            experience\r\n        } = this.props;\r\n\r\n        return (\r\n            <tr>\r\n                <td>{id}</td>\r\n                <td><NumericInput\r\n                    value={level}\r\n                    clampValueOnBlur={true}\r\n                    min={0}\r\n                    onValueChange={this._onLevelChange}\r\n                /></td>\r\n                <td><NumericInput\r\n                    value={experience}\r\n                    clampValueOnBlur={true}\r\n                    min={0}\r\n                    onValueChange={this._onExperienceChange}\r\n                /></td>\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onLevelChange(value: number) {\r\n        value = Math.round(value);\r\n        if (value < 0 || isNaN(value)) value = 0;\r\n        this.props.onChangeLevel(this.props.id, value);\r\n    }\r\n\r\n    @autobind()\r\n    private _onExperienceChange(value: number) {\r\n        if (value < 0 || isNaN(value)) value = 0;\r\n        this.props.onChangeExperience(this.props.id, value);\r\n    }\r\n}\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\n\r\n\r\nimport DuplicantGeneralPageProps from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./selectors\";\r\n\r\n\r\ntype Props = {}\r\ninterface State {\r\n    editingName: string | null;\r\n}\r\nclass DuplicantGeneralPage extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            editingName: null\r\n        };\r\n    }\r\n    \r\n    componentWillUpdate(nextProps: Props) {\r\n        \r\n    }\r\n\r\n    render() {\r\n        const {\r\n            editingName\r\n        } = this.state;\r\n\r\n        return (\r\n            <div className=\"fill-parent\">\r\n                Appearance (TODO)\r\n            </div>\r\n        );\r\n    }\r\n\r\n    \r\n}\r\nexport default DuplicantGeneralPage;","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nimport { Dispatch } from \"../../../../../../state/utils\";\r\n\r\nimport { renameDuplicant } from \"../../../../../../services/save-editor/duplicants/actions\";\r\n\r\nexport interface DispatchProps {\r\n    renameDuplicant: typeof renameDuplicant;\r\n}\r\n\r\nexport default function mapDispatchToProps(dispatch: Dispatch): DispatchProps {\r\n    return bindActionCreators({\r\n        renameDuplicant\r\n    }, dispatch);\r\n}","\r\nimport { createStructuredSelector } from \"../../../../../../state/utils\";\r\n\r\nimport { MinionIdentityBehavior } from \"../../../../../../services/save-editor/behaviors\";\r\nimport { makeGetBehaviorByName } from \"../../../../../../services/save-editor/selectors\";\r\nimport { makeGetDuplicantByID } from \"../../../../../../services/save-editor/duplicants/selectors\";\r\n\r\nimport Props from \"./props\";\r\n\r\nexport interface StateProps {\r\n    identityBehavior: MinionIdentityBehavior | null;\r\n}\r\n\r\nconst mapStateToProps = () => createStructuredSelector<Props, StateProps>({\r\n    identityBehavior: makeGetBehaviorByName(makeGetDuplicantByID<Props>(\"duplicantID\"), MinionIdentityBehavior)\r\n});\r\nexport default mapStateToProps;\r\n","\r\nimport * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport {\r\n    EditableText,\r\n    Tabs,\r\n    Tab,\r\n    NonIdealState\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport { error, FAILURE_TYPE } from \"../../../../../../logging\";\r\n\r\n\r\nimport DuplicantEditorProps from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./selectors\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./dispatch\";\r\n\r\n\r\nimport AppearancePage from \"./pages/Appearance\";\r\nimport SkillsPage from \"./pages/Skills\";\r\nimport TraitsPage from \"./pages/Traits\";\r\n\r\n\r\ntype Props = DuplicantEditorProps & StateProps & DispatchProps;\r\ninterface State {\r\n    rename: string | null;\r\n}\r\nclass DuplicantEditor extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            rename: null\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            className,\r\n            duplicantID,\r\n            identityBehavior\r\n        } = this.props;\r\n\r\n        const {\r\n            rename\r\n        } = this.state;\r\n\r\n        if (!identityBehavior) {\r\n            error(\"Duplicant identity behavior missing\", FAILURE_TYPE.MISSING_BEHAVIOR);\r\n            return (\r\n                <NonIdealState visual={IconNames.ERROR}>\r\n                    Duplicant has no identity behavior.\r\n                </NonIdealState>\r\n            )\r\n        }\r\n        \r\n        const name = rename || identityBehavior.parsedData.name;\r\n        \r\n        return (\r\n            <div className={`ui-duplicant-editor layout-vertical ${className}`}>\r\n                <div className=\"layout-item\">\r\n                    <h1 className=\"ui-title\">\r\n                        <EditableText\r\n                            value={name}\r\n                            onChange={this._onNameChange}\r\n                            onConfirm={this._onRename}\r\n                        />\r\n                    </h1> <span className=\"pt-text-muted\">(click to edit)</span>\r\n                </div>\r\n                <div className=\"layout-item-fill\">\r\n                    <Tabs id=\"DuplicantEditCategories\" className=\"ui-category-tabs fill-parent layout-vertical\" renderActiveTabPanelOnly={true}>\r\n                        <Tab className=\"layout-item-fill\" id=\"appearance\" title=\"Appearance\" panel={<AppearancePage />} />\r\n                        <Tab className=\"layout-item-fill\" id=\"skills\" title=\"Skills\" panel={<SkillsPage duplicantID={duplicantID}/>} />\r\n                        <Tab className=\"layout-item-fill\" id=\"traits\" title=\"Traits\" panel={<TraitsPage duplicantID={duplicantID}/>} />\r\n                    </Tabs>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onNameChange(str: string) {\r\n        this.setState(s => ({\r\n            ...s,\r\n            rename: str\r\n        }));\r\n    }\r\n\r\n    @autobind()\r\n    private _onRename() {\r\n        const name = this.state.rename;\r\n        if (!name) return;\r\n        this.props.renameDuplicant({duplicantID: this.props.duplicantID, name});\r\n        this.setState(s => ({\r\n            ...s,\r\n            rename: null\r\n        }));\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DuplicantEditor);","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport { GameObject } from \"oni-save-parser\";\r\n\r\nimport { createStructuredSelector } from \"../../../../../../state/utils\";\r\n\r\nimport { duplicantsIDs } from \"../../../../../../services/save-editor/duplicants/selectors\";\r\n\r\nexport interface StateProps {\r\n    duplicantsIDs: number[];\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector<StateProps>({\r\n    duplicantsIDs\r\n});\r\nexport default mapStateToProps;\r\n","\r\nimport { createSelector } from \"reselect\";\r\nimport { createStructuredSelector } from \"../../../../../../state/utils\";\r\n\r\nimport { MinionIdentityBehavior, MinionResumeBehavior } from \"../../../../../../services/save-editor/behaviors\";\r\nimport { makeGetBehaviorByName } from \"../../../../../../services/save-editor/selectors\";\r\nimport { makeGetDuplicantByID } from \"../../../../../../services/save-editor/duplicants/selectors\";\r\n\r\nimport Props from \"./props\";\r\n\r\nexport interface StateProps {\r\n    identityBehavior: MinionIdentityBehavior | null;\r\n    resumeBehavior: MinionResumeBehavior | null;\r\n}\r\n\r\nconst mapStateToProps = () => {\r\n    const duplicant = makeGetDuplicantByID<Props>(\"duplicantID\");\r\n    return createStructuredSelector<Props, StateProps>({\r\n        identityBehavior: makeGetBehaviorByName(duplicant, MinionIdentityBehavior),\r\n        resumeBehavior: makeGetBehaviorByName(duplicant, MinionResumeBehavior)\r\n    })\r\n};\r\nexport default mapStateToProps;\r\n","\r\nimport * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { GameObject } from \"oni-save-parser\";\r\n\r\nimport { Card } from \"@blueprintjs/core\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { error, FAILURE_TYPE } from \"../../../../../../logging\";\r\n\r\n\r\n\r\nimport DuplicantPortraitProps from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./selectors\";\r\n\r\n\r\ntype Props = DuplicantPortraitProps & StateProps;\r\nclass DuplicantPortrait extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            className,\r\n            identityBehavior,\r\n            resumeBehavior\r\n        } = this.props;\r\n\r\n        let outerClassName = `ui-duplicant-portrait ${className}`;\r\n\r\n        let name: string;\r\n        let role: string;\r\n\r\n        if (identityBehavior) {\r\n            name = identityBehavior.parsedData.name;\r\n        }\r\n        else {\r\n            error(\"Duplicant not found or identity behavior missing.\", FAILURE_TYPE.MISSING_BEHAVIOR);\r\n            name = \"[IDENTITY MISSING]\";\r\n        }\r\n\r\n        if (resumeBehavior) {\r\n            role = resumeBehavior.parsedData.currentRole\r\n        }\r\n        else {\r\n            error(\"resume behavior missing.\", FAILURE_TYPE.MISSING_BEHAVIOR);\r\n            role = \"[RESUME MISSING]\";\r\n        }\r\n\r\n        return (\r\n            <Card className={outerClassName} interactive={true} onClick={this._onClick}>\r\n                <h5 className=\"ui-duplicant-name\">{name}</h5>\r\n                {/* TODO render a picture.  Plenty of data in identity to do so.  Also see Accessorizer */}\r\n                <div className=\"ui-duplicant-role\">{role}</div>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onClick() {\r\n        const {\r\n            duplicantID,\r\n            onClick\r\n        } = this.props;\r\n        if (onClick) onClick(duplicantID);\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(DuplicantPortrait);","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport DuplicantPortrait from \"../DuplicantPortrait\";\r\n\r\n\r\nimport mapStateToProps, { StateProps } from \"./selectors\";\r\n\r\n\r\nexport interface DuplicantsListProps {\r\n    className?: string;\r\n    selectedDuplicantID?: number | null;\r\n    onDuplicantClick?(duplicantID: number): void;\r\n}\r\n\r\ntype Props = DuplicantsListProps & StateProps;\r\nclass DuplicantsList extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            className,\r\n            duplicantsIDs,\r\n            selectedDuplicantID\r\n        } = this.props;\r\n\r\n        const elements = duplicantsIDs.map(x => <DuplicantPortrait key={x} className={x === selectedDuplicantID ? \"pt-active\" : \"\"} duplicantID={x} onClick={this._onDuplicantClick} />);\r\n\r\n        return (\r\n            <div className={`${className || ''} ui-duplicant-list`}>\r\n                <div className={`fill-parent layout-horizontal layout-wrap container-scroll`}>\r\n                    {elements}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onDuplicantClick(duplicantID: number) {\r\n        const {\r\n            onDuplicantClick\r\n        } = this.props;\r\n\r\n        if (onDuplicantClick) {\r\n            onDuplicantClick(duplicantID);\r\n        }\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(DuplicantsList);","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { NonIdealState } from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\n\r\nimport DuplicantsList from \"./components/DuplicantsList\";\r\nimport DuplicantEditor from \"./components/DuplicantEditor\";\r\n\r\n\r\ntype Props = {};\r\ninterface State {\r\n    selectedDuplicantID: number | null;\r\n}\r\nclass DuplicantsPage extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            selectedDuplicantID: null\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            selectedDuplicantID\r\n        } = this.state;\r\n\r\n        let content: React.ReactFragment;\r\n        if (selectedDuplicantID != null) {\r\n            content = <DuplicantEditor className=\"fill-parent\" duplicantID={selectedDuplicantID}/>\r\n        }\r\n        else {\r\n            content = (\r\n                <NonIdealState visual={IconNames.MUGSHOT}>\r\n                    Select a duplicant to edit\r\n                </NonIdealState>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"ui-page ui-page-duplicants fill-parent layout-vertical\">\r\n                <DuplicantsList className=\"layout-item\" selectedDuplicantID={selectedDuplicantID} onDuplicantClick={this._onDuplicantSelected} />\r\n                <div className=\"layout-item-fill\">\r\n                    {content}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onDuplicantSelected(duplicantID: number) {\r\n        this.setState(s => ({\r\n            ...s,\r\n            selectedDuplicantID: duplicantID\r\n        }));\r\n    }\r\n}\r\n\r\nexport default DuplicantsPage\r\n\r\n","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport * as React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { Link, LinkProps } from \"react-router-dom\"\r\nimport { autobind } from \"core-decorators\";\r\n\r\nexport interface ActiveAwareLinkProps extends LinkProps {\r\n    exact?: boolean;\r\n}\r\ntype Props = ActiveAwareLinkProps & RouteComponentProps<{}>;\r\nclass ActiveAwareLink extends React.Component<Props> {\r\n    render() {\r\n        const {\r\n            to,\r\n            location,\r\n            children,\r\n            onClick,\r\n            className,\r\n            exact,\r\n\r\n            // Need to strip this out of passed props\r\n            staticContext,\r\n            ...other\r\n        } = this.props\r\n        const pathName = location.pathname;\r\n        let match: boolean;\r\n        \r\n        if (exact) match = to === pathName;\r\n        else match = pathName.startsWith(to.toString());\r\n\r\n        if (match) {\r\n            return <span className={`pt-menu-item pt-active pt-intent-primary ${className || ''}`}>{children}</span>;\r\n        }\r\n\r\n        return <Link to={to} className={`pt-menu-item ${className || ''}`} {...other} onClick={this._onClick}>{children}</Link>;\r\n    }\r\n\r\n    @autobind()\r\n    private _onClick(event: React.MouseEvent<HTMLAnchorElement>) {\r\n        const {\r\n            exact,\r\n            location,\r\n            to,\r\n            onClick\r\n        } = this.props;\r\n        const pathName = location.pathname;\r\n\r\n        let match: boolean;\r\n        if (exact) match = to === pathName;\r\n        else match = pathName.startsWith(to.toString());\r\n\r\n        if (match) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if (onClick) {\r\n            onClick(event);\r\n        }\r\n    }\r\n}\r\nexport default withRouter(ActiveAwareLink);","\r\nimport Component from \"./component\";\r\nexport default Component;\r\n","\r\nimport * as React from \"react\";\r\nimport { RouteComponentProps, Switch, Route, Redirect, withRouter } from \"react-router\";\r\n\r\nimport {\r\n    Card,\r\n    Elevation,\r\n    Menu\r\n} from \"@blueprintjs/core\";\r\n\r\nimport ActiveAwareLink from \"../../components/ActiveAwareLink\";\r\n\r\nimport DuplicantsPage from \"./pages/Duplicants\";\r\nimport Error404Page from \"./pages/404\";\r\n\r\n\r\nclass SaveEditorPageComponent extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className=\"ui-page ui-page-saveeditor fill-parent layout-horizontal\">\r\n                <div className=\"ui-nav-menu layout-item\">\r\n                    <ActiveAwareLink to=\"/duplicants\" >Duplicants</ActiveAwareLink>\r\n                    <ActiveAwareLink to=\"/404\" >Not Duplicants</ActiveAwareLink>\r\n                </div>\r\n                <div className=\"layout-item-fill\">\r\n                    <Switch>\r\n                        <Redirect exact from=\"/\" to=\"/duplicants\" />\r\n                        <Route path=\"/duplicants\" component={DuplicantsPage} />\r\n                        <Route exact path=\"/404\" component={Error404Page} />\r\n                        <Redirect to=\"/404\" />\r\n                    </Switch>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SaveEditorPageComponent;","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport * as React from \"react\";\r\n\r\nimport {\r\n    NonIdealState,\r\n    Spinner,\r\n    Text\r\n} from \"@blueprintjs/core\";\r\n\r\nexport default class LoadingSaveFilePageComponent extends React.Component {\r\n    render() {\r\n        return (\r\n            <NonIdealState>\r\n                <Text>Loading File</Text>\r\n                <div>\r\n                    <Spinner large={true}/>\r\n                </div>\r\n                <Text>TODO progress here</Text>\r\n            </NonIdealState>\r\n        );\r\n    }\r\n}","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nimport { Dispatch } from \"../../state/utils\";\r\n\r\nimport { loadSavefile } from \"../../services/save-editor/savefile/actions\";\r\n\r\nexport interface DispatchProps {\r\n    loadSavefile: typeof loadSavefile;\r\n}\r\n\r\nexport default function mapDispatchToProps(dispatch: Dispatch): DispatchProps {\r\n    return bindActionCreators({\r\n        loadSavefile\r\n    }, dispatch);\r\n}","\r\nexport interface StateProps {\r\n\r\n}\r\n\r\nexport default function(): StateProps {\r\n    return {};\r\n}\r\n","\r\nimport * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n    NonIdealState,\r\n    Button,\r\n    Intent\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./selectors\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./dispatch\";\r\n\r\n\r\nconst saveDescription = \"Oxygen Not Included saves can be found in your documents folder under\";\r\n\r\n// TODO: Show correct path based on user's OS.\r\nconst savePath = \"Klei/OxygenNotIncluded/save_files\";\r\n\r\ntype Props = StateProps & DispatchProps;\r\nclass NoSaveLoadedPageComponent extends React.Component<Props> {\r\n    private _input: HTMLInputElement | null = null;\r\n    \r\n    render() {\r\n        const {\r\n            loadSavefile\r\n        } = this.props;\r\n        return (\r\n            <NonIdealState\r\n                visual={IconNames.FLOPPY_DISK}\r\n                action={\r\n                    <Button intent={Intent.PRIMARY} onClick={this._onLoadClick}>Load a .sav file</Button>\r\n                }\r\n                description=\"No save has been loaded.\"\r\n            >\r\n                <div>{saveDescription} <code>{savePath}</code></div>\r\n                <input\r\n                    ref={el => this._input = el}\r\n                    style={{display: \"none\"}}\r\n                    className=\"pt-button pt-intent-primary\"\r\n                    type=\"file\"\r\n                    accept=\".sav\"\r\n                    onChange={this._onLoadFile}\r\n                />\r\n            </NonIdealState>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onLoadClick() {\r\n        if (!this._input) return;\r\n        this._input.click();\r\n    }\r\n\r\n    @autobind()\r\n    private _onLoadFile(change: React.ChangeEvent<HTMLInputElement>) {\r\n        const files = change.target.files;\r\n        if (!files || files.length === 0) return;\r\n        this.props.loadSavefile({file: files[0]});\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NoSaveLoadedPageComponent);","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport { Dispatch } from \"../../state/utils\";\r\n\r\nexport interface DispatchProps { }\r\n\r\nexport default function mapDispatchToProps(dispatch: Dispatch): DispatchProps {\r\n    return {}\r\n}","\r\nimport { createStructuredSelector } from \"../../state/utils\";\r\n\r\nimport {\r\n    loadError\r\n} from \"../../services/save-editor/savefile/selectors\";\r\n\r\n\r\nexport interface StateProps {\r\n    loadError: Error | null;\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector<StateProps>({\r\n    loadError\r\n});\r\nexport default mapStateToProps;\r\n","\r\nimport * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n    NonIdealState,\r\n    Text\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./selectors\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./dispatch\";\r\n\r\n\r\ntype Props = StateProps & DispatchProps;\r\nclass ErrorPageComponent extends React.Component<Props> {\r\n    render() {\r\n        let {\r\n            loadError\r\n        } = this.props;\r\n\r\n        if (!loadError) {\r\n            loadError = new Error(\"Well, this is weird... The Error page loaded, but there is no error.\");\r\n            loadError.stack = \"I really don't know what to do about this...\"\r\n        }\r\n\r\n        return (\r\n            <NonIdealState visual={IconNames.ERROR} description=\"An Error Occurred\">\r\n                <Text>{loadError.message}</Text>\r\n                <div>\r\n                    <code>{loadError.stack}</code>\r\n                </div>\r\n            </NonIdealState>\r\n        );\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ErrorPageComponent);","\r\nimport Component from \"./component\";\r\nexport default Component;","\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nimport { Dispatch } from \"../../state/utils\";\r\n\r\nimport { saveSavefile } from \"../../services/save-editor/savefile/actions\";\r\n\r\nexport interface DispatchProps {\r\n    saveSavefile: typeof saveSavefile;\r\n}\r\n\r\nexport default function mapDispatchToProps(dispatch: Dispatch): DispatchProps {\r\n    return bindActionCreators({\r\n        saveSavefile\r\n    }, dispatch);\r\n}","\r\nimport { createStructuredSelector } from \"../../state/utils\";\r\n\r\nimport {\r\n    saveFileName,\r\n    isSaveChosen,\r\n    isSaveLoading,\r\n    isSaveSaving,\r\n    isSaveEnabled,\r\n    loadError\r\n} from \"../../services/save-editor/savefile/selectors\";\r\n\r\n\r\nexport interface StateProps {\r\n    saveFileName: string | null;\r\n    isSaveChosen: boolean;\r\n    isSaveLoading: boolean;\r\n    isSaveSaving: boolean;\r\n    isSaveEnabled: boolean;\r\n    loadError: Error | null;\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector<StateProps>({\r\n    saveFileName,\r\n    isSaveChosen,\r\n    isSaveLoading,\r\n    isSaveSaving,\r\n    isSaveEnabled,\r\n    loadError\r\n});\r\nexport default mapStateToProps;\r\n\r\n// Was pretty sure this used to work, once upon a time.\r\n//export type StateProps = typeof mapStateToProps;\r\n","\r\nimport * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Route, Redirect, Switch, withRouter } from \"react-router\";\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport {\r\n    Navbar,\r\n    NavbarGroup,\r\n    NavbarHeading,\r\n    Text,\r\n    Dialog,\r\n    Button,\r\n    Alignment,\r\n    Spinner,\r\n    NonIdealState\r\n} from \"@blueprintjs/core\";\r\nimport { IconNames } from \"@blueprintjs/icons\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./selectors\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./dispatch\";\r\n\r\nimport ErrorPage from \"../../pages/error\";\r\nimport NoSaveLoadedPage from \"../../pages/NoSaveLoaded\";\r\nimport LoadingSaveFilePage from \"../../pages/LoadingSaveFile\";\r\nimport SaveEditorPage from \"../../pages/SaveEditor\";\r\n\r\ntype OwnProps = StateProps & DispatchProps;\r\nclass AppComponent extends React.Component<OwnProps> {\r\n    render() {\r\n        const {\r\n            saveFileName,\r\n            isSaveEnabled,\r\n            isSaveChosen,\r\n            isSaveLoading,\r\n            isSaveSaving,\r\n            loadError\r\n        } = this.props;\r\n\r\n        let rootComponent: React.ComponentType;\r\n        let requireExactPath = true;\r\n\r\n        if (loadError) {\r\n            // Show error screen\r\n            rootComponent = ErrorPage;\r\n        }\r\n        else if (!isSaveChosen) {\r\n            // Show file chooser.\r\n            rootComponent = NoSaveLoadedPage\r\n        }\r\n        else if (isSaveLoading) {\r\n            // Show loading screen.\r\n            rootComponent = LoadingSaveFilePage;\r\n        }\r\n        else {\r\n            // Show editor\r\n            rootComponent = SaveEditorPage;\r\n            requireExactPath = false;\r\n        }\r\n\r\n        return (\r\n            <div className=\"fill-parent layout-vertical pt-dark ui-app-root\">\r\n                <Navbar className=\"layout-item ui-app-navbar\">\r\n                    <NavbarGroup>\r\n                        <NavbarHeading>ONI Save Editor</NavbarHeading>\r\n                        <Text ellipsize={true}>{saveFileName || \"\"}</Text>\r\n                    </NavbarGroup>\r\n                    <NavbarGroup align={Alignment.RIGHT}>\r\n                        <Button icon={IconNames.FLOPPY_DISK} disabled={!isSaveEnabled} onClick={this._onSaveClick}>Save</Button>\r\n                    </NavbarGroup>\r\n                </Navbar>\r\n                <div className=\"layout-item-fill\">\r\n                    <Switch>\r\n                        <Route exact={requireExactPath} path=\"/\" component={rootComponent}/>\r\n                        <Redirect to=\"/\"/>\r\n                    </Switch>\r\n                </div>\r\n                <Dialog isOpen={isSaveSaving} title=\"Saving File\" icon={IconNames.SAVED} isCloseButtonShown={false}>\r\n                    <NonIdealState>\r\n                        <div>\r\n                            <Spinner large={true}/>\r\n                        </div>\r\n                        <div>\r\n                            Saving <code>{saveFileName}</code>\r\n                        </div>\r\n                    </NonIdealState>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    @autobind()\r\n    private _onSaveClick() {\r\n        this.props.saveSavefile({});\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AppComponent);","\r\nimport Component from \"./component\";\r\nexport default Component;","\nimport * as React from \"react\";\n\nimport { hot } from \"react-hot-loader\";\nimport { withRouter } from \"react-router\";\n\nimport App from \"./components/App\";\n\n// react-router wants to wrap every element we have in a new element.  Because composability!\n//  without wrapping this in a <Route/> from the outside, the PureComponent hot will not see\n//  any changes, and the broken context system is ignored.\n//  Every other library out their uses an external context store similar to the new react context\n//  pattern, but router just blames everyone else for honoring shouldComponentUpdate and says wontfix.\n// Might be better off removing route altogether and staying a SPA.\nexport default withRouter(hot(module)(App) as any);\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"html, body, #root {\\n  height: 100%;\\n  width: 100%; }\\n\\nbody {\\n  margin: 0;\\n  padding: 0; }\\n\\n.fill-parent, .fill-parent-width, .fill-parent-height {\\n  /* Fill parent to our outsides.*/\\n  box-sizing: border-box; }\\n\\n.fill-parent, .fill-parent-width {\\n  width: 100%; }\\n\\n.fill-parent, .fill-parent-height {\\n  height: 100%; }\\n\\n.layout-wrap {\\n  flex-wrap: wrap; }\\n\\n/*\\r\\n============================================================================\\r\\nHorizontal and Vertical Layouts\\r\\n============================================================================\\r\\n*/\\n/* Container for items that can fill up the available space, and optionally be constrained by it. */\\n.layout-vertical {\\n  display: flex;\\n  flex-direction: column; }\\n\\n.layout-horizontal {\\n  display: flex;\\n  flex-direction: row; }\\n\\n.layout-item, .layout-item-fill {\\n  box-sizing: border-box; }\\n\\n.layout-vertical > div, .layout-horizontal > div, .layout-vertical > .layout-item, .layout-horizontal > .layout-item {\\n  flex: none; }\\n\\n.layout-vertical > .layout-item-fill, .layout-horizontal > .layout-item-fill {\\n  flex: 1 1 auto; }\\n\\n.layout-vertical > .layout-item-constrain, .layout-horizontal > .layout-item-constrain {\\n  flex: 0 1 auto; }\\n\\n.layout-vertical > .layout-item-fill, .layout-vertical > .layout-item-constrain {\\n  /* Flex sets min-height to auto, we need to allow it to shrink down */\\n  min-height: 0;\\n  /*\\r\\n    Maintain some sort of inner css specified (vs actual?) value for height, so that \\r\\n    child elements can use height percentages and fill their parent (us)\\r\\n    */\\n  height: 100%; }\\n\\n.layout-horizontal > .layout-item-fill, .layout-horizontal > .layout-item-constrain {\\n  min-width: 0;\\n  width: 100%; }\\n\\n/*\\r\\n============================================================================\\r\\nContent Containers\\r\\n============================================================================\\r\\n*/\\n.container-scroll {\\n  overflow: auto; }\\n\\n/*\\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\\n */\\n.ui-app-root {\\n  background-color: #182026; }\\n\\n.pt-navbar.ui-app-navbar {\\n  background-color: #2965cc; }\\n\\n.ui-page.ui-page-404 .ui-title {\\n  font-size: 20pt; }\\n\\n.ui-page.ui-page-404 .ui-title-secondary {\\n  font-size: 12pt; }\\n\\n.ui-page.ui-page-404 .ui-body {\\n  margin-top: 8px; }\\n\\n.ui-page.ui-page-saveeditor .ui-nav-menu {\\n  padding: 15px;\\n  background-color: #394b59; }\\n\\n.ui-page.ui-page-duplicants .ui-duplicant-list {\\n  background-color: #bfccd6;\\n  height: 340px; }\\n  .ui-page.ui-page-duplicants .ui-duplicant-list .ui-duplicant-portrait {\\n    width: 150px;\\n    height: 150px;\\n    margin: 10px;\\n    cursor: pointer; }\\n    .ui-page.ui-page-duplicants .ui-duplicant-list .ui-duplicant-portrait .ui-duplicant-name {\\n      text-align: center; }\\n    .ui-page.ui-page-duplicants .ui-duplicant-list .ui-duplicant-portrait .ui-duplicant-role {\\n      text-align: center; }\\n  .ui-page.ui-page-duplicants .ui-duplicant-list .ui-duplicant-portrait.pt-active {\\n    background-color: #f29d49; }\\n\\n.ui-page.ui-page-duplicants .ui-duplicant-editor {\\n  box-sizing: border-box;\\n  padding: 5px; }\\n  .ui-page.ui-page-duplicants .ui-duplicant-editor .ui-title {\\n    display: inline-block;\\n    width: auto; }\\n\\n.pt-multi-select-popover .pt-menu {\\n  max-width: 400px;\\n  max-height: 300px;\\n  overflow: auto; }\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./root.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./root.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./root.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\n import \"@blueprintjs/core/lib/css/blueprint.css\";\r\n import \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\r\n\r\nimport \"./root.scss\";\r\n","\r\nimport * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\n\r\nimport { Provider } from \"react-redux\";\r\nimport { HashRouter } from \"react-router-dom\";\r\n\r\nimport \"./css\";\r\n\r\n\r\nimport App from \"./app\";\r\n\r\nimport store from \"./state/store\";\r\n\r\nimport { runSaga } from \"./state/saga\";\r\nrunSaga();\r\n\r\n\r\nconst rootEl = document.getElementById(\"root\");\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <HashRouter>\r\n            <App />\r\n        </HashRouter>\r\n    </Provider>,\r\n    rootEl\r\n);\r\n"],"sourceRoot":""}