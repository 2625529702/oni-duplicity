{"version":3,"sources":["webpack:///./src/theme/index.ts","webpack:///./src/components/Text.tsx","webpack:///./src/selectors/oni-save-selector.ts","webpack:///./src/selectors/selected-path-selector.ts","webpack:///./src/components/SaveStructureLink/index.ts","webpack:///./src/services/save-structure/index.ts","webpack:///./src/actions/receive-onisave.ts","webpack:///./src/components/Input.tsx","webpack:///./src/pages/SaveEditor/components/fields/connect-field/index.ts","webpack:///./src/theme/theme.ts","webpack:///./src/state/index.ts","webpack:///./src/components/Portrait/index.ts","webpack:///./src/pages/SaveEditor/components/editors/components/EditorHeader.ts","webpack:///./src/pages/SaveEditor/components/editors/components/EditorContainer.ts","webpack:///./src/keys.ts","webpack:///./src/services/save-structure/structure/root.ts","webpack:///./src/component-utils.ts","webpack:///./src/actions/select-path.ts","webpack:///./src/actions/modify-onisave.ts","webpack:///./src/pages/SaveEditor/components/fields/NumericField.tsx","webpack:///./src/services/save-structure/structure/gameObjects/default.ts","webpack:///./src/components/Flex/index.ts","webpack:///./src/theme/intent-color.ts","webpack:///./src/theme/text.ts","webpack:///./src/actions/save-onisave.ts","webpack:///./src/actions/load-onisave.ts","webpack:///./src/services/save-serializer/worker-instance.ts","webpack:///./src/services/save-serializer/sagas/index.ts","webpack:///./src/actions/set-editmode.ts","webpack:///./src/actions/dismiss-error.ts","webpack:///./src/App/components/NavBar/components/NavBarTitleText.ts","webpack:///./src/App/components/NavBar/components/NavBarGroup.tsx","webpack:///./src/App/components/NavBar/components/NavBarContainer.tsx","webpack:///./src/App/components/NavBar/events.ts","webpack:///./src/components/Button.ts","webpack:///./src/App/components/NavBar/NavBar.tsx","webpack:///./src/App/components/NavBar/index.ts","webpack:///./src/App/components/AppContent.tsx","webpack:///./src/App/components/AppContainer.tsx","webpack:///./src/components/Separator.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemContent.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemHeader/components/ItemText.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemHeader/components/Expander.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemHeader/SaveStructureItemHeader.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemHeader/index.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/components/SaveStructureItemContainer.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/events.ts","webpack:///./src/selectors/edit-mode-selector.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/derived-state.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/SaveStructureItem.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureItem/index.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/components/SaveStructureTreeContainer.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/SaveStructureTree.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SaveStructureTree/index.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/EditorModeSelector/events.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/EditorModeSelector/EditorModeSelector.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/components/EditorModeSelector/index.ts","webpack:///./src/components/Panel.ts","webpack:///./src/pages/SaveEditor/components/Sidebar/components/SidebarContainer.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/Sidebar.tsx","webpack:///./src/pages/SaveEditor/components/Sidebar/index.ts","webpack:///./src/pages/SaveEditor/components/EditorContainer.ts","webpack:///./src/pages/SaveEditor/components/ContentContainer.tsx","webpack:///./src/pages/SaveEditor/components/SaveEditorContainer.tsx","webpack:///./src/pages/SaveEditor/components/fields/TextField.tsx","webpack:///./src/pages/SaveEditor/components/fields/BooleanField.tsx","webpack:///./src/pages/SaveEditor/components/fields/from-typeinfo.tsx","webpack:///./src/pages/SaveEditor/components/editors/TemplateObjectEditor/components/TemplateObjectEditorContainer.ts","webpack:///./src/pages/SaveEditor/components/editors/TemplateObjectEditor/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/TemplateObjectEditor/TemplateObjectEditor.tsx","webpack:///./src/pages/SaveEditor/components/editors/TemplateObjectEditor/index.ts","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/components/DuplicantsListContent.ts","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/components/DuplicantsListContainer.ts","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/components/DuplicantPortrait/derived-state.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/components/DuplicantPortrait/DuplicantPortrait.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/components/DuplicantPortrait/index.ts","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/DuplicantsList.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/DuplicantsList/index.ts","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/SaveGameTitle.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/components/SaveRootEditorContainer.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/derived-state.ts","webpack:///./src/components/InfoText.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/SaveRootEditor.tsx","webpack:///./src/pages/SaveEditor/components/editors/SaveRootEditor/index.ts","webpack:///./src/pages/SaveEditor/components/editors/GameObjectList/components/GameObjectListContent.tsx","webpack:///./src/pages/SaveEditor/components/editors/GameObjectList/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/GameObjectList/GameObjectList.tsx","webpack:///./src/pages/SaveEditor/components/editors/GameObjectList/index.ts","webpack:///./src/pages/SaveEditor/components/editors/GameObjectGroupList/components/GameObjectGroupListContent.tsx","webpack:///./src/components/Portrait/PortraitFooter.ts","webpack:///./src/components/Portrait/PortraitHeader.ts","webpack:///./src/components/Portrait/Portrait.ts","webpack:///./src/pages/SaveEditor/components/editors/GameObjectGroupList/derived-state.tsx","webpack:///./src/pages/SaveEditor/components/editors/GameObjectGroupList/GameObjectGroupList.tsx","webpack:///./src/pages/SaveEditor/components/editors/GameObjectGroupList/index.ts","webpack:///./src/math.ts","webpack:///./src/components/EditableText/components/EditableTextInput.tsx","webpack:///./src/components/EditableText/EditableText.tsx","webpack:///./src/components/EditableText/index.ts","webpack:///./src/pages/SaveEditor/components/fields/connect-field/events.ts","webpack:///./src/pages/SaveEditor/components/fields/connect-field/derived-state.tsx","webpack:///./src/pages/SaveEditor/components/fields/EditableTextField.tsx","webpack:///./src/components/FormGroup.ts","webpack:///./src/pages/SaveEditor/components/editors/DuplicantEditor/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/DuplicantEditor/DuplicantEditor.tsx","webpack:///./src/pages/SaveEditor/components/editors/DuplicantEditor/index.ts","webpack:///./src/pages/SaveEditor/components/editors/DefaultObjectEditor/events.ts","webpack:///./src/selectors/selected-value-selector.ts","webpack:///./src/pages/SaveEditor/components/editors/DefaultObjectEditor/derived-state.ts","webpack:///./src/pages/SaveEditor/components/editors/DefaultObjectEditor/components/EditorField.tsx","webpack:///./src/pages/SaveEditor/components/editors/DefaultObjectEditor/components/Container.tsx","webpack:///./src/pages/SaveEditor/components/editors/DefaultObjectEditor/DefaultObjectEditor.tsx","webpack:///./src/pages/SaveEditor/components/editors/DefaultObjectEditor/index.ts","webpack:///./src/pages/SaveEditor/components/editors/index.ts","webpack:///./src/components/ResizePanel/components/ResizeHandleVisual.tsx","webpack:///./src/components/ResizePanel/components/ResizeHandle.tsx","webpack:///./src/components/ResizePanel/ResizePanel.tsx","webpack:///./src/components/ResizePanel/index.ts","webpack:///./src/components/SelectedPathBreadcrumb/components/BreadcrumbContainer.ts","webpack:///./src/components/SaveStructureLink/events.ts","webpack:///./src/components/SaveStructureLink/SaveStructureLink.tsx","webpack:///./src/selectors/selected-path-breadcrumb-selector.ts","webpack:///./src/components/SelectedPathBreadcrumb/derived-state.ts","webpack:///./src/components/SelectedPathBreadcrumb/SelectedPathBreadcrumb.tsx","webpack:///./src/components/SelectedPathBreadcrumb/index.ts","webpack:///./src/services/save-structure/structure/utils.ts","webpack:///./src/services/save-structure/structure/gameObjects/behaviors/default.ts","webpack:///./src/services/save-structure/structure/matchers.ts","webpack:///./src/services/save-structure/structure/gameObjects/minion.ts","webpack:///./src/services/save-structure/structure/gameObjects/index.ts","webpack:///./src/services/save-structure/structure/index.ts","webpack:///./src/services/save-structure/utils.ts","webpack:///./src/pages/SaveEditor/derived-state.ts","webpack:///./src/pages/SaveEditor/SaveEditor.tsx","webpack:///./src/pages/SaveEditor/index.ts","webpack:///./src/pages/Saving/Saving.tsx","webpack:///./src/pages/Saving/index.ts","webpack:///./src/pages/Loading/Loading.tsx","webpack:///./src/pages/Loading/index.ts","webpack:///./src/components/Flex/FlexItem.tsx","webpack:///./src/components/Box.ts","webpack:///./src/components/Flex/FlexContainer.tsx","webpack:///./src/pages/Error/Error.tsx","webpack:///./src/pages/Error/index.ts","webpack:///./src/pages/NoSave/NoSave.tsx","webpack:///./src/pages/NoSave/index.ts","webpack:///./src/App/events.ts","webpack:///./src/selectors/loading-state-selector.ts","webpack:///./src/selectors/error-selector.ts","webpack:///./src/App/derived-state.ts","webpack:///./src/App/App.tsx","webpack:///./src/App/index.ts","webpack:///./src/theme/intent-fill.ts","webpack:///./src/theme/link.ts","webpack:///./src/store/devtool-sanitizer.ts","webpack:///./src/saga/save-onisave.ts","webpack:///./src/services/save-serializer/sagas/write-savegame.ts","webpack:///./src/services/save-serializer/save-serializer.worker.ts","webpack:///./src/services/save-serializer/worker-messages.ts","webpack:///./src/services/save-serializer/sagas/read-savegame.ts","webpack:///./src/saga/load-onisave.ts","webpack:///./src/saga/index.ts","webpack:///./src/reducer/set-editmode.ts","webpack:///./src/reducer/select-path.ts","webpack:///./src/reducer/receive-onisave.ts","webpack:///./src/reducer/modify-onisave.ts","webpack:///./src/reducer/dismiss-error.ts","webpack:///./src/reducer/index.ts","webpack:///./src/store/store.ts","webpack:///./src/store/index.ts","webpack:///./src/root.tsx","webpack:///./src/style.css","webpack:///./src/style.css?7528","webpack:///./src/index.tsx"],"names":["theme_1","__importDefault","__webpack_require__","exports","default","__export","styled_components_1","component_utils_1","Text","withConfig","displayName","text","attachSubComponents","Label","withComponent","oniSaveSelector","state","oniSave","selectedPathSelector","selectedPath","SaveStructureLink_1","ACTION_RECEIVE_ONISAVE_BEGIN","receiveOniSaveBegin","operation","clearExisting","type","payload","ACTION_RECEIVE_ONISAVE_ERROR","receiveOniSaveError","error","ACTION_RECEIVE_ONISAVE_SUCCESS","receiveOniSaveSuccess","Input","input","props","getTheme","colors","bg","panel","borders","intent","secondary","primary","dangerous","react_redux_1","derived_state_1","events_1","connectEditorField","connect","Intent","intentColors","hint","textIntentColors","backgroundColors","navbar","separator","textIntent","space","fontSizes","radii","theme","defaultAppState","loadingState","editMode","Object","freeze","Portrait_1","Text_1","EditorHeader","extend","EditorContainer","div","Keys","Enter","Esc","gameObjects_1","defaultAdvancedField","$advanced","saveStructure","$editor","$uiPathName","obj","header","gameInfo","baseName","templates","world","settings","version","gameObjects","gameData","$editorProps","templateName","gasConduitFlow","liquidConduitFlow","simActiveRegionMin","simActiveRegionMax","fallingWater","unstableGround","worldDetail","customGameSettings","lodash_es_1","component","subComponents","c","forEach","key","ACTION_SELECT_PATH","selectPath","path","ACTION_ONISAVE_MODIFY","modifyOniSave","value","React","__importStar","core_decorators_1","keys_1","math_1","Input_1","connect_field_1","NumericField","Component","[object Object]","super","this","editValue","isValid","minValue","maxValue","currentValue","createElement","min","max","undefined","onChange","_onValueChange","onKeyPress","_onInputKeyPress","onBlur","_onInputBlur","e","target","valueAsNumber","clampValue","_clamp","setCustomValidity","setState","_commitEdit","onCommit","precision","clamp","Math","code","eval","__decorate","autobind","oni_save_parser_1","default_1","defaultGameObject","idBehavior","getBehavior","KPrefabIDBehavior","templateData","InstanceID","position","x","toFixed","y","gameObject","behaviors","map","_","i","*","defaultBehavior","defaultGameObjectGroup","FlexContainer_1","FlexItem_1","Container","Item","FlexContainer","FlexItem","intentColor","css","intent_color_1","wordWrap","wordBreak","ACTION_ONISAVE_SAVE","saveOniSave","fileName","ACTION_ONISAVE_LOAD","loadOniSave","file","worker_messages_1","save_serializer_worker_1","worker","parseSave","data","promise","Promise","accept","reject","unhook","onerror","onmessage","message","saveGame","jsonToError","postMessage","writeSave","ACTION_SET_EDITMODE","setEditMode","ACTION_DISMISS_ERROR","dismissError","NavBarTitleText","span","NavBarGroup","NavBarContainer","save_game_json_1","load_onisave_1","save_onisave_1","receive_onisave_1","mapDispatchToProps","onLoad","onLoadTestData","onSave","Button","intentFill","Button_1","NavBarContainer_1","NavBarGroup_1","NavBarTitleText_1","NavBar","_input","ref","el","style","display","_onLoadFileInput","onClick","_onLoadFileClick","Primary","_onSaveFileClick","click","files","length","withExtension","name","ext","endsWith","NavBar_1","AppContainer","styled_system_1","Separator","width","SaveStructureItemContent","ItemText","Expander","className","expanded","height","viewBox","d","fill","Expander_1","ItemText_1","SaveStructureItemHeaderContainer","SaveStructureItemHeader","expandable","onExpandToggle","innerRef","SaveStructureItemHeader_1","SaveStructureItemContainer","editModeSelector","re_reselect_1","save_structure_1","oni_save_selector_1","selected_path_selector_1","edit_mode_selector_1","cacheKeyGenerator","saveItemPath","join","itemPathSelector","title","getSaveItemTitle","selectionStatus","itemPath","every","childPaths","getSaveItemChildPaths","mapStateToProps","SaveStructureItemContainer_1","SaveStructureItemContent_1","SaveStructureItemComponent","_ref","createRef","isExpanded","_scrollIntoView","oldProps","isExpandable","titleIntent","Default","Secondary","valueElement","childPath","SaveStructureItem","_onClick","_onExpandToggle","current","SaveStructureItem_1","SaveStructureTreeContainer","SaveStructureTreeContainer_1","SaveStructureTree","SaveStructureTree_1","EditorModeSelector","htmlFor","id","_onAdvancedModeChange","checked","EditorModeSelector_1","Panel","Panel_1","SidebarContainer","SidebarContainer_1","Sidebar","Sidebar_1","ContentContainer","SaveEditorContainer","TextField","minLength","maxLength","validation","_validate","BooleanField","BooleanField_1","NumericField_1","TextField_1","getFieldElementClass","typeInfo","getTypeCode","info","SerializationTypeCode","Array","Dangerous","Boolean","assign","Byte","Colour","Dictionary","Double","Enumeration","HashSet","Int16","Int32","Int64","List","Pair","SByte","Single","String","UInt16","UInt32","UInt64","UserDefined","Vector2","Vector2I","Vector3","handleUnknownType","Error","TemplateObjectEditorContainer","reselect_1","template","createSelector","find","structuredSelector","createStructuredSelector","H4","TD","TemplateObjectEditorContainer_1","from_typeinfo_1","TemplateObjectEditor","fieldRows","fields","FieldEditor","TemplateObjectEditor_1","DuplicantsListContent","DuplicantsListContainer","gameObjectIndex","generateCacheKey","duplicants","duplicantIdentity","identBehavior","MinionIdentityBehavior","gameSave","groupIndex","findIndex","ident","gender","genderStringKey","arrivalCycle","arrivalTime","DuplicantPortrait","Header","Footer","DuplicantPortrait_1","duplicantsSetPath","index","duplicantIndexes","minionSet","range","DuplicantsListContainer_1","DuplicantsListContent_1","DuplicantsList","duplicantPortraits","DuplicantsList_1","SaveGameTitle","SaveRootEditorContainer","InfoText","children","InfoText_1","SaveRootEditorContainer_1","SaveGameTitle_1","SaveRootEditor","_renderContent","Hint","numGameObjects","reduce","count","set","Fragment","numberOfCycles","numberOfDuplicants","SaveRootEditor_1","GroupListContent","gameObjectItems","group","get","EditorContainer_1","EditorHeader_1","GameObjectListContent_1","GameObjectList","portraits","GameObjectList_1","GameObjectGroupListContent","PortraitFooter","PortraitHeader","PortraitHeader_1","PortraitFooter_1","Portrait","gameObjectGroups","GameObjectGroupListContent_1","GameObjectGroupList","GameObjectGroupList_1","createClamp","clampArray","clampInt8","Int8Array","clampUInt8","Uint8Array","clampInt16","Int16Array","clampUInt16","Uint16Array","clampInt32","Int32Array","clampUInt32","Uint32Array","clampSingle","Float32Array","clampDouble","Float64Array","CLAMPS_BY_PRECISION","int8","uint8","int16","uint16","int32","uint32","single","double","clamper","EditableTextInput","EditableTextInput_1","EditableText","autoFocus","_onEditableChange","_onEditableKeyPress","onFocus","_onEditableFocus","_onEditableBlur","_onTextClick","_commit","_reset","select","EditableText_1","modify_onisave_1","dispatch","itemValue","Content","FormGroup","minionGameObjectPath","minionNamePath","behaviorIndex","FormGroup_1","EditableTextField_1","DuplicantEditor","DuplicantEditor_1","onModify","selectedValueSelector","getSaveItemEditValue","selected_value_selector_1","selectedValue","isPrimitive","keys","filter","structuredSelectors","primitiveTypes","val","valType","indexOf","EditorField","_onChange","JSON","stringify","propKey","parse","_a","Container_1","EditorField_1","TH","DefaultObjectEditor","fieldElements","field","_renderFieldRow","_onFieldChange","DefaultObjectEditor_1","editors","save-root","game-object-group-list","game-object-list","template-object","minion","getEditor","editorType","ResizeHandleVisual","react_draggable_1","ResizeHandleVisual_1","ResizeHandle","_onDrag","bind","DraggableCore","onDrag","onResize","deltaX","Flex_1","ResizeHandle_1","ResizePanel","defaultWidth","direction","_onResize","delta","s","ResizePanel_1","BreadcrumbContainer","SaveStructureLink","Link","link","selectedPathBreadcrumbSelector","getSaveItemBreadcrumb","selected_path_breadcrumb_selector_1","breadcrumb","BreadcrumbContainer_1","SelectedPathBreadcrumb","links","isFinal","push","SelectedPathBreadcrumb_1","root_1","getSaveStructureDef","saveGamePath","save","iter","walkSaveStructurePath","result","next","done","structure","def","subStructure","isObject","$variants","variant","$match","slice","behavior","extraData","gameObjectIs","matchers_1","minionGameObject","identityBehavior","minion_1","gameObjectGroupsStructure","$uiChildren","gameObjectsStructure","structure_1","nameSource","nameProducer","breadcrumbs","structurePath","defPath","collectChildPaths","getSaveItemEditor","getSaveItemEditorProps","propFactory","uiChildren","defKeys","collectAutoChildPaths","checkEditMode","advanced","advancedProducer","isImplicitChild","isArray","stateSelectors","editorProps","editors_1","SaveEditorContainer_1","ContentContainer_1","Separator_1","SaveEditor","ObjectEditor","SaveEditor_1","Saving","Saving_1","Loading","Loading_1","grow","shrink","Box","bgColor","Box_1","onDismiss","stack","Error_1","NoSave","NoSave_1","onDismissError","loadingStateSelector","errorSelector","error_selector_1","loading_state_selector_1","AppContainer_1","AppContent_1","App","element","App_1","text_1","actionSanitizer","action","sanitizeSave","stateSanitizer","streamed","effects_1","sagas_1","file_saver_1","saveEditorSaga","takeEvery","handleOniSaveLoad","saveName","blob","put","call","writeSaveGame","saveAs","worker_instance_1","Blob","module","Worker","p","parseSaveSuccess","parseSaveError","errorToJson","writeSaveSuccess","writeSaveError","readSaveGame","readFile","reader","FileReader","onload","readAsArrayBuffer","saga","fork","set_editmode_1","state_1","select_path_1","selectPathReducer","receiveOniSaveReducer","immer_1","modifyOniSaveReducer","draft","dismiss_error_1","dismissErrorReducer","reduce_reducers_1","reducers","redux_1","redux_saga_1","reducer_1","saga_1","devtool_sanitizer_1","createStore","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","sagaMiddleware","store","applyMiddleware","run","react_hot_loader_1","store_1","Root","Provider","ThemeProvider","hot","content","options","hmr","transform","insertInto","locals","ReactDOM","react_modal_1","rootEl","document","getElementById","setAppElement","render"],"mappings":"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","file":"client.75dd1623305a7cd7766c.bundle.js","sourcesContent":["import getTheme from \"./theme\";\r\nexport default getTheme;\r\n\r\nexport * from \"./theme\";\r\n\r\nexport * from \"./text\";\r\nexport * from \"./link\";\r\nexport * from \"./intent-color\";\r\nexport * from \"./intent-fill\";\r\n","import styled from \"styled-components\";\r\n\r\nimport { TextProps as ThemeTextProps, text } from \"@/theme\";\r\n\r\nimport { attachSubComponents } from \"@/component-utils\";\r\n\r\nexport type TextProps = ThemeTextProps;\r\nconst Text = styled<TextProps, \"span\">(\"span\")`\r\n  ${text};\r\n`;\r\nText.displayName = \"Text\";\r\nexport default attachSubComponents(Text, {\r\n  Label: Text.withComponent(\"label\") as StyledWithComponent<\"label\", TextProps>\r\n});\r\n","import { AppState } from \"@/state\";\r\n\r\nconst oniSaveSelector = (state: AppState) => state.oniSave;\r\nexport default oniSaveSelector;\r\n","import { AppState } from \"@/state\";\r\n\r\nconst selectedPathSelector = (state: AppState) => state.selectedPath;\r\nexport default selectedPathSelector;\r\n","export * from \"./props\";\r\nimport SaveStructureLink from \"./SaveStructureLink\";\r\nexport default SaveStructureLink;\r\n","export * from \"./utils\";\r\nexport * from \"./types\";\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nexport const ACTION_RECEIVE_ONISAVE_BEGIN =\r\n  \"@/pages/SaveEditor/onisave/receive:begin\";\r\nexport const receiveOniSaveBegin = (\r\n  operation: \"loading\" | \"saving\",\r\n  clearExisting?: boolean\r\n) => ({\r\n  type: ACTION_RECEIVE_ONISAVE_BEGIN as typeof ACTION_RECEIVE_ONISAVE_BEGIN,\r\n  payload: { operation, clearExisting }\r\n});\r\nexport type ReceiveOniSaveBeginAction = ReturnType<typeof receiveOniSaveBegin>;\r\n\r\nexport const ACTION_RECEIVE_ONISAVE_ERROR =\r\n  \"@/pages/SaveEditor/onisave/receive:error\";\r\nexport const receiveOniSaveError = (error: Error) => ({\r\n  type: ACTION_RECEIVE_ONISAVE_ERROR as typeof ACTION_RECEIVE_ONISAVE_ERROR,\r\n  payload: error\r\n});\r\nexport type ReceiveOniSaveErrorAction = ReturnType<typeof receiveOniSaveError>;\r\n\r\nexport const ACTION_RECEIVE_ONISAVE_SUCCESS =\r\n  \"@/pages/SaveEditor/onisave/receive:success\";\r\nexport const receiveOniSaveSuccess = (oniSave: SaveGame) => ({\r\n  type: ACTION_RECEIVE_ONISAVE_SUCCESS as typeof ACTION_RECEIVE_ONISAVE_SUCCESS,\r\n  payload: oniSave\r\n});\r\nexport type ReceiveOniSaveSuccessAction = ReturnType<\r\n  typeof receiveOniSaveSuccess\r\n>;\r\n\r\nexport type ReceiveOniSaveAction =\r\n  | ReceiveOniSaveBeginAction\r\n  | ReceiveOniSaveErrorAction\r\n  | ReceiveOniSaveSuccessAction;\r\n","import styled from \"styled-components\";\r\n\r\nimport { getTheme, text } from \"@/theme\";\r\n\r\nconst Input = styled.input`\r\n  ${text};\r\n  padding: 2px;\r\n  background-color: ${props => getTheme(props).colors.bg.panel};\r\n  border: ${props => getTheme(props).borders[1]};\r\n  border-color: ${props => getTheme(props).colors.intent.secondary};\r\n  &:focus {\r\n    border-color: ${props => getTheme(props).colors.intent.primary};\r\n    outline: none;\r\n  }\r\n  &:invalid {\r\n    border-color: ${props => getTheme(props).colors.intent.dangerous};\r\n  }\r\n`;\r\nInput.displayName = \"Input\";\r\nexport default Input;\r\n","import { connect } from \"react-redux\";\r\n\r\nexport * from \"./props\";\r\n\r\nimport { EditorFieldProps } from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\nimport { AppState } from \"@/state\";\r\n\r\nexport type InjectedProps = StateProps & DispatchProps;\r\n\r\nexport default function connectEditorField() {\r\n  return connect<StateProps, DispatchProps, EditorFieldProps, AppState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  );\r\n}\r\n","export enum Intent {\r\n  Primary = \"primary\",\r\n  Secondary = \"secondary\",\r\n  Default = \"default\",\r\n  Dangerous = \"dangerous\",\r\n  Hint = \"hint\"\r\n}\r\n\r\n// https://coolors.co/33658a-ffb238-86bbd8-f34213-758e4f\r\nconst intentColors: Record<Intent, string> = {\r\n  default: \"#86BBD8\",\r\n  primary: \"#FFB238\",\r\n  secondary: \"#658E27\",\r\n  dangerous: \"#F34213\",\r\n  hint: \"#86BBD8\"\r\n};\r\n\r\n/**\r\n * Colors to use when the background is an intent.\r\n */\r\nconst textIntentColors: Record<Intent, string> = {\r\n  default: \"black\",\r\n  primary: \"black\",\r\n  secondary: \"black\",\r\n  dangerous: \"white\",\r\n  hint: \"black\"\r\n};\r\n\r\n// https://coolors.co/313e50-3a435e-455561-5c6672-6c6f7f\r\nconst backgroundColors = {\r\n  default: \"#3A435E\",\r\n  navbar: \"#313E50\",\r\n  panel: \"#455561\",\r\n  separator: \"#6C6F7F\"\r\n};\r\n\r\nconst colors = {\r\n  text: intentColors.default,\r\n  intent: intentColors,\r\n  textIntent: textIntentColors,\r\n  bg: backgroundColors\r\n};\r\n\r\nconst space = [0, 4, 8];\r\n\r\nconst fontSizes = [12, 14, 16, 20, 24, 32, 48, 64, 96, 128];\r\n\r\n// border-radius\r\nconst radii = [0, 2, 4, 8];\r\n\r\nconst borders = [0, \"1px solid\", \"2px solid\"];\r\n\r\nconst theme = {\r\n  colors,\r\n  space,\r\n  fontSizes,\r\n  radii,\r\n  borders\r\n};\r\n\r\nexport type Theme = typeof theme;\r\nexport default theme;\r\n\r\nexport function getTheme(props: any): Theme {\r\n  return props.theme || theme;\r\n}\r\n","import { SaveGame } from \"oni-save-parser\";\r\nimport { EditMode } from \"@/services/save-structure\";\r\n\r\nexport type LoadingState = \"idle\" | \"loading\" | \"saving\" | \"ready\";\r\n\r\nexport interface AppState {\r\n  loadingState: LoadingState;\r\n  error: Error | null;\r\n  oniSave: SaveGame | null;\r\n  selectedPath: string[];\r\n  editMode: EditMode;\r\n}\r\nexport const defaultAppState: Readonly<AppState> = {\r\n  loadingState: \"idle\" as \"idle\",\r\n  error: null,\r\n  oniSave: null,\r\n  selectedPath: [],\r\n  editMode: \"normal\"\r\n};\r\nObject.freeze(defaultAppState);\r\n","import Portrait from \"./Portrait\";\r\nexport default Portrait;\r\n","import Text from \"@/components/Text\";\r\n\r\nconst EditorHeader = Text.withComponent(\"h2\").extend`\r\n  margin-top: 0;\r\n`;\r\nEditorHeader.displayName = \"EditorHeader\";\r\nexport default EditorHeader;\r\n","import styled from \"styled-components\";\r\n\r\nconst EditorContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\nEditorContainer.displayName = \"EditorContainer\";\r\nexport default EditorContainer;\r\n","const Keys = {\r\n  Enter: \"enter\",\r\n  Esc: \"escape\"\r\n};\r\n\r\nexport default Keys;\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nimport gameObjectsStructure from \"./gameObjects\";\r\nimport { SaveStructureDef } from \"./types\";\r\n\r\n// The default 'any' makes this useful for variables, but useless for asignment.\r\n//  This is because type 'any' includes all fields, and overrides our selective\r\n//  exclusion of $-prefix fields\r\nconst defaultAdvancedField: SaveStructureDef<{}> = { $advanced: true };\r\n\r\nconst saveStructure: SaveStructureDef<SaveGame> = {\r\n  $editor: \"save-root\",\r\n  $uiPathName: (obj: SaveGame) => obj.header.gameInfo.baseName || \"Save Game\",\r\n\r\n  /**\r\n   * Version info and precalculated values.\r\n   * Changing this stuff can confuse the game or display bad data\r\n   * for the loading screen.\r\n   */\r\n  header: defaultAdvancedField,\r\n\r\n  /**\r\n   * Data templates for the rest of the save.  Changing anything in here\r\n   * is guarenteed to result in a corrupt save.\r\n   */\r\n  templates: defaultAdvancedField,\r\n\r\n  /**\r\n   * World width and height, and opaque engine data we do not understand.\r\n   * Contents of the worldmap and state of the fluid/gas/electrical networks\r\n   * live in here.\r\n   */\r\n  world: defaultAdvancedField,\r\n\r\n  /**\r\n   * Settings for the master game object handler.\r\n   * None of these are related to user-settings, and changing them\r\n   * will most likely result in an immediately or eventually corrupt save.\r\n   */\r\n  settings: defaultAdvancedField,\r\n\r\n  /**\r\n   * Game version info.  Should mirror the same data\r\n   * stored in header.\r\n   * Should never be touched, as ONI makes decisions on how to load the file\r\n   * based on this.\r\n   */\r\n  version: defaultAdvancedField,\r\n\r\n  /**\r\n   * Game objects.  These are the interesting bits\r\n   */\r\n  gameObjects: gameObjectsStructure,\r\n\r\n  /**\r\n   * Another blob of generalized non-object-specific game data\r\n   */\r\n  gameData: {\r\n    $editor: \"template-object\",\r\n    $editorProps() {\r\n      return {\r\n        templateName: \"Game+GameSaveData\"\r\n      };\r\n    },\r\n\r\n    /**\r\n     * Presumably tracks the flow of material through the gas conduits.\r\n     * I am reasonably sure this also ties into native game data,\r\n     * and changing this will probably get the engine into an\r\n     * inconsistant state.\r\n     */\r\n    gasConduitFlow: defaultAdvancedField,\r\n\r\n    /**\r\n     * Presumably tracks the flow of material through the loquid conduits.\r\n     * I am reasonably sure this also ties into native game data,\r\n     * and changing this will probably get the engine into an\r\n     * inconsistant state.\r\n     */\r\n    liquidConduitFlow: defaultAdvancedField,\r\n\r\n    /**\r\n     * Probably deals with limiting the area of the map that the game is running logic for.\r\n     */\r\n    simActiveRegionMin: defaultAdvancedField,\r\n\r\n    /**\r\n     * Probably deals with limiting the area of the map that the game is running logic for.\r\n     */\r\n    simActiveRegionMax: defaultAdvancedField,\r\n\r\n    fallingWater: defaultAdvancedField,\r\n\r\n    unstableGround: defaultAdvancedField,\r\n\r\n    /**\r\n     * While this does contain (multiple) worldgen seeds,\r\n     *  all seeds are the same and reflect the definitivie chosen seed in customGameSettings.\r\n     * It also has a bunch of polygons indicating regions of the overworld.  Not sure what it represents,\r\n     *  might be biome regions.\r\n     */\r\n    worldDetail: defaultAdvancedField,\r\n\r\n    customGameSettings: defaultAdvancedField\r\n  }\r\n};\r\nexport default saveStructure;\r\n","import { forEach } from \"lodash-es\";\r\n\r\nexport function attachSubComponents<\r\n  TComponent extends React.ComponentType<any>,\r\n  TSubComponents extends Record<string, React.ComponentType<any>>\r\n>(\r\n  component: TComponent,\r\n  subComponents: TSubComponents\r\n): TComponent & TSubComponents {\r\n  const c = component as any;\r\n  forEach(subComponents, (component, key) => {\r\n    c[key] = component;\r\n  });\r\n  return c as any;\r\n}\r\n","export const ACTION_SELECT_PATH = \"@/pages/SaveEditor/select-path\";\r\nexport const selectPath = (path: string[]) => ({\r\n  type: ACTION_SELECT_PATH as typeof ACTION_SELECT_PATH,\r\n  payload: path\r\n});\r\nexport type SelectPathAction = ReturnType<typeof selectPath>;\r\n","export const ACTION_ONISAVE_MODIFY = \"@/pages/SaveEditor/oni-save/modify\";\r\nexport const modifyOniSave = (path: string[], value: any) => ({\r\n  type: ACTION_ONISAVE_MODIFY as typeof ACTION_ONISAVE_MODIFY,\r\n  payload: { path, value }\r\n});\r\nexport type ModifyOniSaveAction = ReturnType<typeof modifyOniSave>;\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Keys from \"@/keys\";\r\n\r\nimport { NumberPrecision, clamp } from \"@/math\";\r\n\r\nimport Input from \"@/components/Input\";\r\n\r\nimport connectEditorField, {\r\n  EditorFieldProps,\r\n  InjectedProps\r\n} from \"./connect-field\";\r\n\r\nexport interface NumericFieldProps extends EditorFieldProps {\r\n  minValue?: number;\r\n  maxValue?: number;\r\n  precision?: NumberPrecision;\r\n}\r\n\r\ntype Props = NumericFieldProps & InjectedProps;\r\ninterface State {\r\n  editValue: string | null;\r\n  isValid: boolean;\r\n}\r\nclass NumericField extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      editValue: null,\r\n      isValid: true\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { value, minValue, maxValue } = this.props;\r\n    const { editValue } = this.state;\r\n\r\n    const currentValue = editValue || value;\r\n    return (\r\n      <Input\r\n        type=\"number\"\r\n        min={minValue}\r\n        max={maxValue}\r\n        value={currentValue !== undefined ? currentValue : null}\r\n        onChange={this._onValueChange}\r\n        onKeyPress={this._onInputKeyPress}\r\n        onBlur={this._onInputBlur}\r\n      />\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onValueChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const value = e.target.valueAsNumber;\r\n    const clampValue = this._clamp(value);\r\n    const isValid = e.target.valueAsNumber === clampValue;\r\n    e.target.setCustomValidity(isValid ? \"\" : \"Value out of range\");\r\n    this.setState({\r\n      editValue: e.target.value,\r\n      isValid\r\n    });\r\n  }\r\n\r\n  @autobind()\r\n  private _onInputKeyPress(e: React.KeyboardEvent<HTMLInputElement>) {\r\n    if (e.key === Keys.Enter) {\r\n      this._commitEdit();\r\n    }\r\n  }\r\n\r\n  @autobind()\r\n  private _onInputBlur() {\r\n    this._commitEdit();\r\n  }\r\n\r\n  private _commitEdit() {\r\n    const { editValue, isValid } = this.state;\r\n    const { onCommit } = this.props;\r\n\r\n    this.setState({\r\n      editValue: null\r\n    });\r\n\r\n    if (!editValue || !isValid) {\r\n      return;\r\n    }\r\n\r\n    onCommit(editValue);\r\n  }\r\n\r\n  private _clamp(value: number): number {\r\n    const { precision = \"int32\", minValue, maxValue } = this.props;\r\n    value = clamp(precision, value);\r\n    if (maxValue != null) {\r\n      value = Math.min(value, maxValue);\r\n    }\r\n    if (minValue != null) {\r\n      value = Math.max(value, minValue);\r\n    }\r\n    return value;\r\n  }\r\n}\r\nexport default connectEditorField()(NumericField);\r\n","import {\r\n  GameObjectGroup,\r\n  GameObject,\r\n  getBehavior,\r\n  KPrefabIDBehavior\r\n} from \"oni-save-parser\";\r\n\r\nimport { SaveStructureDef } from \"../types\";\r\n\r\nimport { defaultBehavior } from \"./behaviors/default\";\r\n\r\nexport const defaultGameObject: SaveStructureDef<GameObject> = {\r\n  $uiPathName(obj: GameObject) {\r\n    const idBehavior = getBehavior(obj, KPrefabIDBehavior);\r\n    const id =\r\n      (idBehavior &&\r\n        idBehavior.templateData &&\r\n        idBehavior.templateData.InstanceID) ||\r\n      \"[malformed]\";\r\n    const pos = `(${obj.position.x.toFixed(0)}, ${obj.position.y.toFixed(0)})`;\r\n    return `#${id} ${pos}`;\r\n  },\r\n\r\n  $uiChildren(gameObject: GameObject) {\r\n    const { behaviors } = gameObject;\r\n    if (!behaviors) {\r\n      return [];\r\n    }\r\n\r\n    return behaviors.map((_, i) => [\"behaviors\", `${i}`]);\r\n  },\r\n\r\n  behaviors: {\r\n    \"*\": defaultBehavior\r\n  }\r\n};\r\n\r\nconst defaultGameObjectGroup: SaveStructureDef<GameObjectGroup> = {\r\n  $editor: \"game-object-list\",\r\n\r\n  gameObjects: {\r\n    $uiPathName: false,\r\n    \"*\": defaultGameObject\r\n  }\r\n};\r\nexport default defaultGameObjectGroup;\r\n","import _FlexContainer from \"./FlexContainer\";\r\nimport _FlexItem from \"./FlexItem\";\r\n\r\nexport default {\r\n  Container: _FlexContainer,\r\n  Item: _FlexItem\r\n};\r\n\r\nexport const FlexContainer = _FlexContainer;\r\n\r\nexport { FlexItemProps } from \"./FlexItem\";\r\nexport const FlexItem = _FlexItem;\r\n","import { css } from \"styled-components\";\r\nimport { Intent, getTheme } from \"./theme\";\r\n\r\nexport interface IntentColorProps {\r\n  intent?: Intent;\r\n}\r\n\r\nexport const intentColor = css<IntentColorProps>`\r\n  color: ${props => getTheme(props).colors.intent[props.intent || \"default\"]};\r\n`;\r\n","import * as CSS from \"csstype\";\r\nimport { css } from \"styled-components\";\r\n\r\nimport { IntentColorProps, intentColor } from \"./intent-color\";\r\n\r\nexport interface TextProps extends IntentColorProps {\r\n  wordWrap?: CSS.WordWrapProperty;\r\n  wordBreak?: CSS.WordBreakProperty;\r\n}\r\n\r\nexport const text = css<TextProps>`\r\n  ${intentColor};\r\n  word-wrap: ${props => props.wordWrap || \"inherit\"};\r\n  word-break: ${props => props.wordBreak || \"inherit\"};\r\n`;\r\n","export const ACTION_ONISAVE_SAVE = \"@/pages/SaveEditor/onisave/save\";\r\nexport const saveOniSave = (fileName: string) => ({\r\n  type: ACTION_ONISAVE_SAVE as typeof ACTION_ONISAVE_SAVE,\r\n  payload: fileName\r\n});\r\nexport type SaveOniSaveAction = ReturnType<typeof saveOniSave>;\r\n","export const ACTION_ONISAVE_LOAD = \"@/pages/SaveEditor/onisave/load\";\r\nexport const loadOniSave = (file: File) => ({\r\n  type: ACTION_ONISAVE_LOAD as typeof ACTION_ONISAVE_LOAD,\r\n  payload: file\r\n});\r\nexport type LoadOniSaveAction = ReturnType<typeof loadOniSave>;\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nimport {\r\n  SaveEditorResultEvent,\r\n  parseSave as parseSaveCommand,\r\n  writeSave as writeSaveCommand,\r\n  jsonToError\r\n} from \"./worker-messages\";\r\n\r\nimport SaveLoadWorker from \"worker-loader!./save-serializer.worker\";\r\n\r\nconst worker = new SaveLoadWorker();\r\n\r\nexport function parseSave(data: ArrayBuffer): Promise<SaveGame> {\r\n  const promise = new Promise<SaveGame>((accept, reject) => {\r\n    const unhook = () => {\r\n      worker.onerror = null;\r\n      worker.onmessage = null;\r\n    };\r\n\r\n    worker.onerror = error => reject(error);\r\n    worker.onmessage = (message: SaveEditorResultEvent) => {\r\n      const { data } = message;\r\n      switch (data.type) {\r\n        case \"parse-save:success\":\r\n          unhook();\r\n          accept(data.saveGame);\r\n          break;\r\n        case \"parse-save:error\":\r\n          unhook();\r\n          reject(jsonToError(data.error));\r\n      }\r\n    };\r\n  });\r\n\r\n  worker.postMessage(parseSaveCommand(data));\r\n\r\n  return promise;\r\n}\r\n\r\nexport function writeSave(saveGame: SaveGame): Promise<ArrayBuffer> {\r\n  const promise = new Promise<ArrayBuffer>((accept, reject) => {\r\n    const unhook = () => {\r\n      worker.onerror = null;\r\n      worker.onmessage = null;\r\n    };\r\n\r\n    worker.onerror = error => reject(error);\r\n    worker.onmessage = (message: SaveEditorResultEvent) => {\r\n      const { data } = message;\r\n      switch (data.type) {\r\n        case \"write-save:success\":\r\n          unhook();\r\n          accept(data.data);\r\n          break;\r\n        case \"write-save:error\":\r\n          unhook();\r\n          reject(jsonToError(data.error));\r\n      }\r\n    };\r\n  });\r\n\r\n  worker.postMessage(writeSaveCommand(saveGame));\r\n\r\n  return promise;\r\n}\r\n","export * from \"./read-savegame\";\r\nexport * from \"./write-savegame\";\r\n","import { EditMode } from \"@/services/save-structure\";\r\n\r\nexport const ACTION_SET_EDITMODE = \"@/pages/SaveEditor/set-editmode\";\r\nexport const setEditMode = (editMode: EditMode) => ({\r\n  type: ACTION_SET_EDITMODE as typeof ACTION_SET_EDITMODE,\r\n  payload: editMode\r\n});\r\nexport type SetEditModeAction = ReturnType<typeof setEditMode>;\r\n","export const ACTION_DISMISS_ERROR = \"@/pages/SaveEditor/dismiss-error\";\r\nexport const dismissError = () => ({\r\n  type: ACTION_DISMISS_ERROR as typeof ACTION_DISMISS_ERROR\r\n});\r\nexport type DismissErrorAction = ReturnType<typeof dismissError>;\r\n","import styled from \"styled-components\";\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst NavBarTitleText = styled.span`\r\n  font-size: 2em;\r\n  margin-left: 5px;\r\n  color: ${props => getTheme(props).colors.intent.primary};\r\n`;\r\nNavBarTitleText.displayName = \"NavBarTitleText\";\r\nexport default NavBarTitleText;\r\n","import styled from \"styled-components\";\r\n\r\nconst NavBarGroup = styled.div`\r\n  margin-left: auto;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  align-self: center;\r\n`;\r\nNavBarGroup.displayName = \"NavBarGroup\";\r\nexport default NavBarGroup;\r\n","import styled from \"styled-components\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst NavBarContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: \"row\";\r\n  width: 100%;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  box-sizing: border-box;\r\n  background-color: ${props => getTheme(props).colors.bg.navbar};\r\n`;\r\nNavBarContainer.displayName = \"NavBarContainer\";\r\nexport default NavBarContainer;\r\n","import testData from \"@/__mocks__/save-game.json\";\r\n\r\nimport { loadOniSave } from \"@/actions/load-onisave\";\r\nimport { saveOniSave } from \"@/actions/save-onisave\";\r\n\r\nimport { receiveOniSaveSuccess } from \"@/actions/receive-onisave\";\r\n\r\nconst mapDispatchToProps = {\r\n  onLoad: loadOniSave,\r\n  onLoadTestData: () => receiveOniSaveSuccess(testData),\r\n  onSave: saveOniSave\r\n};\r\nexport default mapDispatchToProps;\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\n","import * as React from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { Intent, getTheme, intentFill } from \"@/theme\";\r\n\r\nexport interface ButtonProps {\r\n  intent?: Intent;\r\n  onClick?(e: React.MouseEvent<HTMLDivElement>): void;\r\n}\r\n\r\nconst Button = styled<ButtonProps, \"button\">(\"button\")`\r\n  ${intentFill};\r\n  border: none;\r\n  border-radius: ${props => getTheme(props).radii[1]}px;\r\n  margin: ${props => getTheme(props).space[1]}px;\r\n  font-size: ${props => getTheme(props).fontSizes[1]}px;\r\n`;\r\nButton.displayName = \"Button\";\r\nexport default Button;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Button from \"@/components/Button\";\r\n\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\nimport NavBarContainer from \"./components/NavBarContainer\";\r\n\r\nimport NavBarGroup from \"./components/NavBarGroup\";\r\nimport NavBarTitleText from \"./components/NavBarTitleText\";\r\n\r\ntype Props = DispatchProps;\r\nclass NavBar extends React.Component<Props> {\r\n  private _input: HTMLElement | null = null;\r\n\r\n  render() {\r\n    const { onLoadTestData } = this.props;\r\n    return (\r\n      <NavBarContainer>\r\n        <NavBarTitleText>Duplicity</NavBarTitleText>\r\n        <NavBarGroup>\r\n          <input\r\n            ref={el => (this._input = el)}\r\n            style={{ display: \"none\" }}\r\n            type=\"file\"\r\n            accept=\".sav\"\r\n            onChange={this._onLoadFileInput}\r\n          />\r\n          <Button onClick={this._onLoadFileClick}>Load</Button>\r\n          <Button onClick={onLoadTestData}>Test</Button>\r\n          <Button intent={Intent.Primary} onClick={this._onSaveFileClick}>\r\n            Save\r\n          </Button>\r\n        </NavBarGroup>\r\n      </NavBarContainer>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onLoadFileClick() {\r\n    if (!this._input) {\r\n      return;\r\n    }\r\n    this._input.click();\r\n  }\r\n\r\n  @autobind()\r\n  private _onLoadFileInput(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const files = e.target.files;\r\n    if (!files || files.length === 0) {\r\n      return;\r\n    }\r\n    const file = files[0];\r\n\r\n    const { onLoad } = this.props;\r\n    onLoad(file);\r\n  }\r\n\r\n  @autobind()\r\n  private _onSaveFileClick() {\r\n    const { onSave } = this.props;\r\n    const fileName = withExtension(\"my-file\", \".sav\");\r\n    onSave(fileName);\r\n  }\r\n}\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(NavBar);\r\n\r\nfunction withExtension(name: string, ext: string): string {\r\n  if (name.endsWith(ext)) return name;\r\n  return name + ext;\r\n}\r\n","import NavBarContainer from \"./NavBar\";\r\nexport default NavBarContainer;\r\n","import styled from \"styled-components\";\r\n\r\nconst AppContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  flex: 1 1 auto;\r\n  overflow: auto;\r\n`;\r\nAppContainer.displayName = \"AppContainer\";\r\nexport default AppContainer;\r\n","import styled from \"styled-components\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst AppContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n  background-color: ${props => getTheme(props).colors.bg.default};\r\n`;\r\nAppContainer.displayName = \"AppContainer\";\r\nexport default AppContainer;\r\n","import styled from \"styled-components\";\r\n\r\nimport { WidthProps, SpaceProps, width, space } from \"styled-system\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nexport interface SeparatorProps extends WidthProps, SpaceProps {}\r\nconst Separator = styled<SeparatorProps, \"div\">(\"div\")`\r\n  border-bottom: 2px solid;\r\n  border-color: ${props => getTheme(props).colors.bg.separator};\r\n  ${width};\r\n  ${space};\r\n  height: 2px;\r\n`;\r\nSeparator.displayName = \"Separator\";\r\nexport default Separator;\r\n","import styled from \"styled-components\";\r\n\r\nconst SaveStructureItemContent = styled.div`\r\n  padding-left: 15px;\r\n`;\r\nexport default SaveStructureItemContent;\r\n","import { getTheme } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\n\r\nconst ItemText = Text.extend`\r\n  margin-left: ${props => getTheme(props).space[1]}px;\r\n`;\r\nexport default ItemText;\r\n","import * as React from \"react\";\r\n\r\nconst ICON_SIZE = 10;\r\nconst ICON_EXPANDED = \"M 0 .25 L .5 .75 L 1 .25 z\";\r\nconst ICON_COLLAPSED = \"M .5 0 L 1 .5 L .5 1 z\";\r\n\r\nexport interface ExpanderProps {\r\n  expanded: boolean;\r\n  onClick?(): void;\r\n}\r\nconst Expander: React.SFC<ExpanderProps & { className?: string }> = ({\r\n  className,\r\n  expanded,\r\n  onClick\r\n}) => (\r\n  <svg\r\n    className={className}\r\n    width={ICON_SIZE}\r\n    height={ICON_SIZE}\r\n    viewBox={`0 0 1 1`}\r\n    onClick={onClick}\r\n  >\r\n    <path d={expanded ? ICON_EXPANDED : ICON_COLLAPSED} fill=\"black\" />\r\n  </svg>\r\n);\r\nexport default Expander;\r\n","import * as React from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport Expander from \"./components/Expander\";\r\nimport ItemText from \"./components/ItemText\";\r\nimport { Intent } from \"@/theme\";\r\n\r\nexport interface SaveStructureItemHeaderProps {\r\n  expandable: boolean;\r\n  expanded: boolean;\r\n  header: string;\r\n  intent: Intent;\r\n  innerRef?: React.RefObject<HTMLDivElement>;\r\n  onClick(): void;\r\n  onExpandToggle(): void;\r\n}\r\n\r\nconst SaveStructureItemHeaderContainer = styled.span`\r\n  white-space: nowrap;\r\n  cursor: pointer;\r\n`;\r\nSaveStructureItemHeaderContainer.displayName = \"SaveStructureItemContainer\";\r\n\r\nconst SaveStructureItemHeader: React.SFC<\r\n  SaveStructureItemHeaderProps & { className?: string }\r\n> = ({\r\n  className,\r\n  expandable,\r\n  expanded,\r\n  header,\r\n  intent,\r\n  onClick,\r\n  onExpandToggle,\r\n  innerRef\r\n}) => (\r\n  <SaveStructureItemHeaderContainer innerRef={innerRef} className={className}>\r\n    {expandable && (\r\n      <Expander\r\n        expanded={expanded}\r\n        onClick={expandable ? onExpandToggle : undefined}\r\n      />\r\n    )}\r\n    <ItemText intent={intent} onClick={onClick}>\r\n      {header}\r\n    </ItemText>\r\n  </SaveStructureItemHeaderContainer>\r\n);\r\nSaveStructureItemHeader.displayName = \"SaveStructureItemHeader\";\r\nexport default SaveStructureItemHeader;\r\n","import SaveStructureItemHeader from \"./SaveStructureItemHeader\";\r\nexport default SaveStructureItemHeader;\r\n","import styled from \"styled-components\";\r\n\r\nconst SaveStructureItemContainer = styled.div``;\r\nSaveStructureItemContainer.displayName = \"SaveStructureItemContainer\";\r\nexport default SaveStructureItemContainer;\r\n","import { selectPath } from \"@/actions/select-path\";\r\n\r\nconst mapDispatchToProps = {\r\n  onClick: selectPath\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import { AppState } from \"@/state\";\r\n\r\nconst editModeSelector = (state: AppState) => state.editMode;\r\nexport default editModeSelector;\r\n","import { SaveGame } from \"oni-save-parser\";\r\nimport createCachedSelector from \"re-reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport {\r\n  getSaveItemTitle,\r\n  getSaveItemChildPaths,\r\n  EditMode\r\n} from \"@/services/save-structure\";\r\n\r\nimport oniSaveSelector from \"@/selectors/oni-save-selector\";\r\nimport selectedPathSelector from \"@/selectors/selected-path-selector\";\r\nimport editModeSelector from \"@/selectors/edit-mode-selector\";\r\n\r\nimport { SaveStructureItemProps } from \"./props\";\r\n\r\nconst cacheKeyGenerator = (_: AppState, props: SaveStructureItemProps) =>\r\n  props.saveItemPath.join(\".\");\r\n\r\nconst itemPathSelector = (_: AppState, props: SaveStructureItemProps) =>\r\n  props.saveItemPath;\r\n\r\nconst title = createCachedSelector<\r\n  AppState,\r\n  SaveStructureItemProps,\r\n  string[],\r\n  SaveGame | null,\r\n  string\r\n>(\r\n  itemPathSelector,\r\n  oniSaveSelector,\r\n  (path, saveGame) =>\r\n    saveGame ? getSaveItemTitle(path, saveGame) : \"[undefined]\"\r\n)(cacheKeyGenerator);\r\n\r\nconst selectionStatus = createCachedSelector<\r\n  AppState,\r\n  SaveStructureItemProps,\r\n  string[],\r\n  string[],\r\n  \"unselected\" | \"in-path\" | \"selected\"\r\n>(itemPathSelector, selectedPathSelector, (itemPath, selectedPath) => {\r\n  const isSelected = itemPath.every((x, i) => selectedPath[i] == x);\r\n  if (!isSelected) {\r\n    return \"unselected\";\r\n  }\r\n\r\n  if (itemPath.length === selectedPath.length) {\r\n    return \"selected\";\r\n  }\r\n\r\n  return \"in-path\";\r\n})(cacheKeyGenerator);\r\n\r\nconst childPaths = createCachedSelector<\r\n  AppState,\r\n  SaveStructureItemProps,\r\n  string[],\r\n  SaveGame | null,\r\n  EditMode,\r\n  string[][]\r\n>(\r\n  itemPathSelector,\r\n  oniSaveSelector,\r\n  editModeSelector,\r\n  (path, saveGame, editMode) =>\r\n    saveGame ? getSaveItemChildPaths(path, saveGame, editMode) : []\r\n)(cacheKeyGenerator);\r\n\r\nconst mapStateToProps = function(\r\n  state: AppState,\r\n  props: SaveStructureItemProps\r\n) {\r\n  // Do not use createStructuredSelector here, as that itself\r\n  //  creates a selector that will go nuts over our multi instance props.\r\n  const stateProps = {\r\n    title: title(state, props),\r\n    selectionStatus: selectionStatus(state, props),\r\n    childPaths: childPaths(state, props)\r\n  };\r\n\r\n  return stateProps;\r\n};\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport { SaveStructureItemProps } from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\nimport SaveStructureItemContainer from \"./components/SaveStructureItemContainer\";\r\nimport SaveStructureItemHeader from \"./components/SaveStructureItemHeader\";\r\nimport SaveStructureItemContent from \"./components/SaveStructureItemContent\";\r\n\r\ninterface State {\r\n  isExpanded: boolean;\r\n}\r\n\r\ntype Props = SaveStructureItemProps & StateProps & DispatchProps;\r\nclass SaveStructureItemComponent extends React.Component<Props, State> {\r\n  private _ref: React.RefObject<HTMLDivElement>;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this._ref = React.createRef();\r\n\r\n    this.state = {\r\n      isExpanded: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.selectionStatus === \"selected\") {\r\n      this._scrollIntoView();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(oldProps: Props) {\r\n    if (\r\n      oldProps.selectionStatus !== \"selected\" &&\r\n      this.props.selectionStatus === \"selected\"\r\n    ) {\r\n      this._scrollIntoView();\r\n    }\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    const { title, selectionStatus, childPaths } = this.props;\r\n    let { isExpanded } = this.state;\r\n\r\n    const isExpandable = childPaths.length > 0;\r\n\r\n    let titleIntent: Intent;\r\n    switch (selectionStatus) {\r\n      default:\r\n        titleIntent = Intent.Default;\r\n        break;\r\n      case \"in-path\":\r\n        titleIntent = Intent.Secondary;\r\n        isExpanded = isExpandable;\r\n        break;\r\n      case \"selected\":\r\n        titleIntent = Intent.Primary;\r\n        break;\r\n    }\r\n\r\n    let valueElement: React.ReactNode | null = null;\r\n    if (isExpandable && isExpanded) {\r\n      valueElement = childPaths.map(childPath => {\r\n        const key = childPath[childPath.length - 1];\r\n        return <SaveStructureItem key={key} saveItemPath={childPath} />;\r\n      });\r\n    }\r\n\r\n    return (\r\n      <SaveStructureItemContainer>\r\n        <SaveStructureItemHeader\r\n          innerRef={this._ref}\r\n          expandable={isExpandable}\r\n          expanded={isExpanded}\r\n          header={title}\r\n          intent={titleIntent}\r\n          onClick={this._onClick}\r\n          onExpandToggle={this._onExpandToggle}\r\n        />\r\n        <SaveStructureItemContent>{valueElement}</SaveStructureItemContent>\r\n      </SaveStructureItemContainer>\r\n    );\r\n  }\r\n\r\n  private _scrollIntoView() {\r\n    if (this._ref.current) {\r\n      const { childPaths } = this.props;\r\n      // Scrolls into view regardless.  Need to not scroll if already visible.\r\n      // this._ref.current.scrollIntoView();\r\n      if (childPaths.length > 0) {\r\n        this.setState({\r\n          isExpanded: true\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  @autobind()\r\n  private _onClick() {\r\n    const { saveItemPath, onClick } = this.props;\r\n    this.setState({\r\n      isExpanded: true\r\n    });\r\n    onClick(saveItemPath);\r\n  }\r\n\r\n  @autobind()\r\n  private _onExpandToggle() {\r\n    this.setState({\r\n      isExpanded: !this.state.isExpanded\r\n    });\r\n  }\r\n}\r\nconst SaveStructureItem = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(SaveStructureItemComponent);\r\nexport default SaveStructureItem;\r\n","import SaveStructureItem from \"./SaveStructureItem\";\r\nexport default SaveStructureItem;\r\nexport * from \"./props\";\r\n","import styled from \"styled-components\";\r\n\r\nconst SaveStructureTreeContainer = styled.div`\r\n  width: 100%;\r\n`;\r\nexport default SaveStructureTreeContainer;\r\n","import * as React from \"react\";\r\n\r\nimport SaveStructureTreeContainer from \"./components/SaveStructureTreeContainer\";\r\nimport SaveStructureItem from \"./components/SaveStructureItem\";\r\n\r\ntype Props = {};\r\nexport default class SaveStructureTree extends React.Component<Props> {\r\n  render() {\r\n    return (\r\n      <SaveStructureTreeContainer>\r\n        <SaveStructureItem saveItemPath={[]} />\r\n      </SaveStructureTreeContainer>\r\n    );\r\n  }\r\n}\r\n","import SaveStructureTree from \"./SaveStructureTree\";\r\nexport default SaveStructureTree;\r\n","import { setEditMode } from \"@/actions/set-editmode\";\r\n\r\nconst mapDispatchToProps = {\r\n  setEditMode\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport Input from \"@/components/Input\";\r\n\r\ntype Props = DispatchProps;\r\nclass EditorModeSelector extends React.Component<Props> {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Text.Label htmlFor=\"advanced_mode\" intent={Intent.Secondary}>\r\n          Advanced Mode\r\n        </Text.Label>\r\n        <Input\r\n          id=\"advanced_mode\"\r\n          type=\"checkbox\"\r\n          onChange={this._onAdvancedModeChange}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onAdvancedModeChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const { setEditMode } = this.props;\r\n    setEditMode(e.target.checked ? \"advanced\" : \"normal\");\r\n  }\r\n}\r\nexport default connect(\r\n  undefined,\r\n  mapDispatchToProps\r\n)(EditorModeSelector);\r\n","import EditorModeSelector from \"./EditorModeSelector\";\r\nexport default EditorModeSelector;\r\n","import styled from \"styled-components\";\r\nimport { WidthProps, HeightProps, width, height } from \"styled-system\";\r\nimport { getTheme } from \"@/theme\";\r\n\r\nexport type BoxProps = WidthProps & HeightProps;\r\n\r\nconst Panel = styled<BoxProps, \"div\">(\"div\")`\r\n  ${width};\r\n  ${height};\r\n  background-color: ${props => getTheme(props).colors.bg.panel};\r\n  overflow: auto;\r\n`;\r\nPanel.displayName = \"Panel\";\r\nexport default Panel;\r\n","import Panel from \"@/components/Panel\";\r\n\r\nconst SidebarContainer = Panel.extend`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n`;\r\nSidebarContainer.displayName = \"SidebarContainer\";\r\nexport default SidebarContainer;\r\n","import * as React from \"react\";\r\n\r\nimport SidebarContainer from \"./components/SidebarContainer\";\r\n\r\nimport EditorModeSelector from \"./components/EditorModeSelector\";\r\nimport SaveStructureTree from \"./components/SaveStructureTree\";\r\n\r\nconst Sidebar: React.SFC = () => (\r\n  <SidebarContainer>\r\n    <EditorModeSelector />\r\n    <SaveStructureTree />\r\n  </SidebarContainer>\r\n);\r\nSidebar.displayName = \"Sidebar\";\r\nexport default Sidebar;\r\n","import Sidebar from \"./Sidebar\";\r\nexport default Sidebar;\r\n","import styled from \"styled-components\";\r\n\r\nconst EditorContainer = styled.div`\r\n  flex: 1 1 auto;\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow: auto;\r\n`;\r\nEditorContainer.displayName = \"EditorContainer\";\r\nexport default EditorContainer;\r\n","import styled from \"styled-components\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst ContentContainer = styled.div`\r\n  padding: ${props => getTheme(props).space[1]}px;\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow: auto;\r\n  flex: 1 1 auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\nexport default ContentContainer;\r\n","import styled from \"styled-components\";\r\n\r\nconst SaveEditorContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\nexport default SaveEditorContainer;\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Keys from \"@/keys\";\r\n\r\nimport Input from \"@/components/Input\";\r\n\r\nimport connectEditorField, {\r\n  EditorFieldProps,\r\n  InjectedProps\r\n} from \"./connect-field\";\r\n\r\nexport interface TextFieldProps extends EditorFieldProps {\r\n  minLength?: number;\r\n  maxLength?: number;\r\n}\r\n\r\ntype Props = TextFieldProps & InjectedProps;\r\ninterface State {\r\n  editValue: string | null;\r\n  isValid: boolean;\r\n}\r\nclass TextField extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      editValue: null,\r\n      isValid: true\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { value, minLength, maxLength } = this.props;\r\n    const { editValue } = this.state;\r\n\r\n    const currentValue = editValue || value;\r\n    return (\r\n      <Input\r\n        type=\"text\"\r\n        minLength={minLength}\r\n        maxLength={maxLength}\r\n        value={currentValue !== undefined ? currentValue : null}\r\n        onChange={this._onValueChange}\r\n        onKeyPress={this._onInputKeyPress}\r\n        onBlur={this._onInputBlur}\r\n      />\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onValueChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const value = e.target.value;\r\n    const validation = this._validate(value);\r\n    const isValid = !validation;\r\n    e.target.setCustomValidity(validation || \"\");\r\n    this.setState({\r\n      editValue: e.target.value,\r\n      isValid\r\n    });\r\n  }\r\n\r\n  @autobind()\r\n  private _onInputKeyPress(e: React.KeyboardEvent<HTMLInputElement>) {\r\n    if (e.key === Keys.Enter) {\r\n      this._commitEdit();\r\n    }\r\n  }\r\n\r\n  @autobind()\r\n  private _onInputBlur() {\r\n    this._commitEdit();\r\n  }\r\n\r\n  private _commitEdit() {\r\n    const { editValue, isValid } = this.state;\r\n    const { onCommit } = this.props;\r\n\r\n    this.setState({\r\n      editValue: null\r\n    });\r\n\r\n    if (!editValue || !isValid) {\r\n      return;\r\n    }\r\n\r\n    onCommit(editValue);\r\n  }\r\n\r\n  private _validate(value: string): string | null {\r\n    const { minLength, maxLength } = this.props;\r\n    if (minLength != null && (!value || value.length < minLength)) {\r\n      return `Value must be at least ${minLength} characters.`;\r\n    }\r\n\r\n    if (maxLength != null && value.length > maxLength) {\r\n      return `Value must be less than ${maxLength} characters.`;\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\nexport default connectEditorField()(TextField);\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport connectEditorField, {\r\n  EditorFieldProps,\r\n  InjectedProps\r\n} from \"./connect-field\";\r\n\r\nimport Input from \"@/components/Input\";\r\n\r\nexport interface BooleanFieldProps extends EditorFieldProps {}\r\n\r\ntype Props = BooleanFieldProps & InjectedProps;\r\nclass BooleanField extends React.Component<Props> {\r\n  render() {\r\n    const { value } = this.props;\r\n    return (\r\n      <Input type=\"checkbox\" value={value} onChange={this._onValueChange} />\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onValueChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const value = e.target.checked;\r\n    const { onCommit } = this.props;\r\n    onCommit(value);\r\n  }\r\n}\r\nexport default connectEditorField()(BooleanField);\r\n","import * as React from \"react\";\r\n\r\nimport { TypeInfo, SerializationTypeCode, getTypeCode } from \"oni-save-parser\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\n\r\nimport { EditorFieldProps } from \"./connect-field\";\r\n\r\nimport BooleanField from \"./BooleanField\";\r\nimport NumericField from \"./NumericField\";\r\nimport TextField from \"./TextField\";\r\n\r\nexport default function getFieldElementClass(\r\n  typeInfo: TypeInfo\r\n): React.ComponentType<EditorFieldProps> {\r\n  const code = getTypeCode(typeInfo.info);\r\n  switch (code) {\r\n    case SerializationTypeCode.Array:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    case SerializationTypeCode.Boolean:\r\n      return (props: EditorFieldProps) => <BooleanField {...props} />;\r\n    case SerializationTypeCode.Byte:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} minValue={0} maxValue={0xff} />\r\n      );\r\n    case SerializationTypeCode.Colour:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    case SerializationTypeCode.Dictionary:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    case SerializationTypeCode.Double:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} precision=\"double\" />\r\n      );\r\n    case SerializationTypeCode.Enumeration:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    case SerializationTypeCode.HashSet:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    case SerializationTypeCode.Int16:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} precision=\"int16\" />\r\n      );\r\n    case SerializationTypeCode.Int32:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} precision=\"int32\" />\r\n      );\r\n    case SerializationTypeCode.Int64:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    case SerializationTypeCode.List:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    case SerializationTypeCode.Pair:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    case SerializationTypeCode.SByte:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} minValue={-128} maxValue={127} />\r\n      );\r\n    case SerializationTypeCode.Single:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} precision=\"single\" />\r\n      );\r\n    case SerializationTypeCode.String:\r\n      return (props: EditorFieldProps) => <TextField {...props} />;\r\n    case SerializationTypeCode.UInt16:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} precision=\"uint16\" />\r\n      );\r\n    case SerializationTypeCode.UInt32:\r\n      return (props: EditorFieldProps) => (\r\n        <NumericField {...props} precision=\"uint32\" />\r\n      );\r\n    case SerializationTypeCode.UInt64:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    case SerializationTypeCode.UserDefined:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    case SerializationTypeCode.Vector2:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    case SerializationTypeCode.Vector2I:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    case SerializationTypeCode.Vector3:\r\n      return () => <Text intent={Intent.Dangerous}>TODO {code}</Text>;\r\n    default:\r\n      return handleUnknownType(code);\r\n  }\r\n}\r\n\r\nfunction handleUnknownType(type: never): never {\r\n  throw new Error(`Type code \"${type}\" is unknown.`);\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nconst TemplateObjectEditorContainer = styled.div``;\r\nTemplateObjectEditorContainer.displayName = \"TemplateObjectEditorContainer\";\r\nexport default TemplateObjectEditorContainer;\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save-selector\";\r\nimport selectedPath from \"@/selectors/selected-path-selector\";\r\n\r\nimport { TemplateObjectEditorProps } from \"./props\";\r\n\r\nconst templateName = (_: AppState, props: TemplateObjectEditorProps) =>\r\n  props.templateName;\r\n\r\nconst template = createSelector(\r\n  oniSave,\r\n  templateName,\r\n  (oniSave, templateName) => {\r\n    if (!oniSave) {\r\n      return null;\r\n    }\r\n\r\n    return oniSave.templates.find(x => x.name === templateName) || null;\r\n  }\r\n);\r\n\r\nconst structuredSelector = {\r\n  template,\r\n  selectedPath\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<\r\n  AppState,\r\n  TemplateObjectEditorProps,\r\n  StateProps\r\n>(structuredSelector);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport { TemplateObjectEditorProps } from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport Text from \"@/components/Text\";\r\nconst H4 = Text.withComponent(\"h4\");\r\nconst TD = Text.withComponent(\"td\");\r\n\r\nimport TemplateObjectEditorContainer from \"./components/TemplateObjectEditorContainer\";\r\n\r\nimport getTypeInfoFieldComponent from \"../../fields/from-typeinfo\";\r\n\r\ntype Props = TemplateObjectEditorProps & StateProps;\r\nclass TemplateObjectEditor extends React.Component<Props> {\r\n  render() {\r\n    const { templateName, template, selectedPath } = this.props;\r\n\r\n    const fieldRows =\r\n      template &&\r\n      template.fields.map(x => {\r\n        const FieldEditor = getTypeInfoFieldComponent(x.type);\r\n        return (\r\n          <tr key={x.name}>\r\n            <TD>{x.name}</TD>\r\n            <td>\r\n              <FieldEditor path={[...selectedPath, x.name]} />\r\n            </td>\r\n          </tr>\r\n        );\r\n      });\r\n    return (\r\n      <TemplateObjectEditorContainer>\r\n        <H4 intent={Intent.Primary}>{templateName}</H4>\r\n        <table>\r\n          <tbody>{fieldRows}</tbody>\r\n        </table>\r\n      </TemplateObjectEditorContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(TemplateObjectEditor);\r\n","import TemplateObjectEditor from \"./TemplateObjectEditor\";\r\nexport default TemplateObjectEditor;\r\n","import styled from \"styled-components\";\r\n\r\nconst DuplicantsListContent = styled.div`\r\n  padding: 5px;\r\n  overflow-x: auto;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\nDuplicantsListContent.displayName = \"DuplicantsListContent\";\r\nexport default DuplicantsListContent;\r\n","import styled from \"styled-components\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst DuplicantsListContainer = styled.div`\r\n  width: 100%;\r\n  margin-top: 5px;\r\n  box-sizing: border-box;\r\n  padding: ${props => getTheme(props).space[1]}px;\r\n  border: ${props => getTheme(props).borders[2]};\r\n  border-color: ${props => getTheme(props).colors.bg.separator};\r\n`;\r\nDuplicantsListContainer.displayName = \"DuplicantsListContainer\";\r\nexport default DuplicantsListContainer;\r\n","import createCachedSelector from \"re-reselect\";\r\nimport { MinionIdentityBehavior, getBehavior } from \"oni-save-parser\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save-selector\";\r\n\r\nimport { DuplicantPortraitProps } from \"./props\";\r\n\r\nconst gameObjectIndex = (_: AppState, props: DuplicantPortraitProps) =>\r\n  props.gameObjectIndex;\r\n\r\nconst generateCacheKey = gameObjectIndex;\r\n\r\nconst gameObject = createCachedSelector(\r\n  oniSave,\r\n  gameObjectIndex,\r\n  (oniSave, gameObjectIndex) => {\r\n    if (!oniSave) {\r\n      return null;\r\n    }\r\n    const duplicants = oniSave.gameObjects.find(x => x.name === \"Minion\");\r\n    if (!duplicants) {\r\n      return null;\r\n    }\r\n\r\n    return duplicants.gameObjects[gameObjectIndex] || null;\r\n  }\r\n)(generateCacheKey);\r\n\r\nconst duplicantIdentity = createCachedSelector(gameObject, gameObject => {\r\n  if (!gameObject) {\r\n    return null;\r\n  }\r\n  const identBehavior = getBehavior(gameObject, MinionIdentityBehavior);\r\n  if (!identBehavior || !identBehavior.templateData) {\r\n    return null;\r\n  }\r\n  return identBehavior.templateData;\r\n})(generateCacheKey);\r\n\r\nconst path = (state: AppState, props: DuplicantPortraitProps) => {\r\n  const gameSave = oniSave(state);\r\n  if (!gameSave) {\r\n    return null;\r\n  }\r\n  const groupIndex = gameSave.gameObjects.findIndex(x => x.name === \"Minion\");\r\n  if (groupIndex === -1) {\r\n    return null;\r\n  }\r\n  const index = gameObjectIndex(state, props);\r\n  return [\"gameObjects\", `${groupIndex}`, \"gameObjects\", `${index}`];\r\n};\r\n\r\nconst name = (state: AppState, props: DuplicantPortraitProps) => {\r\n  const ident = duplicantIdentity(state, props);\r\n  return (ident && ident.name) || null;\r\n};\r\n\r\nconst gender = (state: AppState, props: DuplicantPortraitProps) => {\r\n  const ident = duplicantIdentity(state, props);\r\n  return (ident && ident.genderStringKey) || null;\r\n};\r\n\r\nconst arrivalCycle = (state: AppState, props: DuplicantPortraitProps) => {\r\n  const ident = duplicantIdentity(state, props);\r\n  return (ident && (ident.arrivalTime / 200).toFixed(1)) || null;\r\n};\r\n\r\nfunction mapStateToProps(state: AppState, props: DuplicantPortraitProps) {\r\n  return {\r\n    path: path(state, props),\r\n    name: name(state, props),\r\n    gender: gender(state, props),\r\n    arrivalCycle: arrivalCycle(state, props)\r\n  };\r\n}\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport { DuplicantPortraitProps } from \"./props\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport SaveStructureLink from \"@/components/SaveStructureLink\";\r\nimport Portrait from \"@/components/Portrait\";\r\n\r\ntype Props = DuplicantPortraitProps & StateProps;\r\nclass DuplicantPortrait extends React.Component<Props> {\r\n  render() {\r\n    const { path, name, gender, arrivalCycle } = this.props;\r\n    return (\r\n      <Portrait>\r\n        <Portrait.Header>\r\n          {path ? (\r\n            <SaveStructureLink intent={Intent.Primary} path={path}>\r\n              {name}\r\n            </SaveStructureLink>\r\n          ) : (\r\n            \"Invalid Object\"\r\n          )}\r\n        </Portrait.Header>\r\n        <Portrait.Footer>\r\n          <div>\r\n            <Text intent={Intent.Secondary}>{gender}</Text>\r\n          </div>\r\n          <div>\r\n            <Text intent={Intent.Secondary}>{arrivalCycle} cycles old</Text>\r\n          </div>\r\n        </Portrait.Footer>\r\n      </Portrait>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(DuplicantPortrait);\r\n","import DuplicantPortrait from \"./DuplicantPortrait\";\r\nexport default DuplicantPortrait;\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { range } from \"lodash-es\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save-selector\";\r\n\r\nconst duplicantsSetPath = createSelector(oniSave, oniSave => {\r\n  if (!oniSave) {\r\n    return null;\r\n  }\r\n  const index = oniSave.gameObjects.findIndex(x => x.name === \"Minion\");\r\n  if (index === -1) {\r\n    return null;\r\n  }\r\n  return [\"gameObjects\", `${index}`];\r\n});\r\n\r\nconst duplicantIndexes = createSelector(oniSave, oniSave => {\r\n  if (!oniSave) {\r\n    return [];\r\n  }\r\n  const minionSet = oniSave.gameObjects.find(x => x.name === \"Minion\");\r\n  if (!minionSet) {\r\n    return [];\r\n  }\r\n  return range(minionSet.gameObjects.length);\r\n});\r\n\r\nconst structuredSelector = {\r\n  duplicantsSetPath,\r\n  duplicantIndexes\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport SaveStructureLink from \"@/components/SaveStructureLink\";\r\n\r\nimport DuplicantPortrait from \"./components/DuplicantPortrait\";\r\nimport DuplicantsListContainer from \"./components/DuplicantsListContainer\";\r\nimport DuplicantsListContent from \"./components/DuplicantsListContent\";\r\n\r\ntype Props = StateProps;\r\nclass DuplicantsList extends React.Component<Props> {\r\n  render() {\r\n    const { duplicantsSetPath, duplicantIndexes } = this.props;\r\n    if (!duplicantsSetPath || !duplicantIndexes) {\r\n      return \"Malformed Data\";\r\n    }\r\n\r\n    const duplicantPortraits = duplicantIndexes.map(x => (\r\n      <DuplicantPortrait key={x} gameObjectIndex={x} />\r\n    ));\r\n\r\n    return (\r\n      <DuplicantsListContainer>\r\n        <SaveStructureLink intent={Intent.Primary} path={duplicantsSetPath}>\r\n          Duplicants\r\n        </SaveStructureLink>\r\n        <DuplicantsListContent>{duplicantPortraits}</DuplicantsListContent>\r\n      </DuplicantsListContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(DuplicantsList);\r\n","import DuplicantsList from \"./DuplicantsList\";\r\nexport default DuplicantsList;\r\n","import Text from \"@/components/Text\";\r\n\r\nconst SaveGameTitle = Text.withComponent(\"h3\").extend`\r\n  margin-top: 0;\r\n`;\r\nSaveGameTitle.displayName = \"SaveGameTitle\";\r\nexport default SaveGameTitle;\r\n","import styled from \"styled-components\";\r\n\r\nconst SaveRootEditorContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\nSaveRootEditorContainer.displayName = \"SaveRootEditorContainer\";\r\nexport default SaveRootEditorContainer;\r\n","import { createStructuredSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save-selector\";\r\n\r\nconst structuredSelector = {\r\n  oniSave\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\n\r\nimport Text from \"./Text\";\r\nimport { Intent } from \"@/theme\";\r\n\r\nexport interface InfoTextProps {\r\n  value: any;\r\n  pluralize?: boolean;\r\n}\r\n\r\nconst InfoText: React.SFC<InfoTextProps> = ({ value, children }) => (\r\n  <div>\r\n    <Text intent={Intent.Secondary}>{value}</Text> <Text>{children}</Text>\r\n  </div>\r\n);\r\nexport default InfoText;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport InfoText from \"@/components/InfoText\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport SaveRootEditorContainer from \"./components/SaveRootEditorContainer\";\r\n\r\nimport SaveGameTitle from \"./components/SaveGameTitle\";\r\nimport DuplicantsList from \"./components/DuplicantsList\";\r\n\r\ntype Props = StateProps;\r\nclass SaveRootEditor extends React.Component<Props> {\r\n  render() {\r\n    const { oniSave } = this.props;\r\n    return (\r\n      <SaveRootEditorContainer>\r\n        {oniSave ? (\r\n          this._renderContent()\r\n        ) : (\r\n          <Text intent={Intent.Hint}>No Save Loaded</Text>\r\n        )}\r\n      </SaveRootEditorContainer>\r\n    );\r\n  }\r\n\r\n  private _renderContent() {\r\n    const oniSave = this.props.oniSave!;\r\n    const numGameObjects = oniSave.gameObjects.reduce(\r\n      (count, set) => count + set.gameObjects.length,\r\n      0\r\n    );\r\n    return (\r\n      <React.Fragment>\r\n        <SaveGameTitle intent={Intent.Primary}>\r\n          {oniSave.header.gameInfo.baseName}\r\n        </SaveGameTitle>\r\n        <InfoText value={oniSave.header.gameInfo.numberOfCycles}>\r\n          cycles\r\n        </InfoText>\r\n        <InfoText value={oniSave.header.gameInfo.numberOfDuplicants}>\r\n          duplicants\r\n        </InfoText>\r\n        <InfoText value={numGameObjects}>game objects</InfoText>\r\n        <DuplicantsList />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(SaveRootEditor);\r\n","import SaveRootEditor from \"./SaveRootEditor\";\r\nexport default SaveRootEditor;\r\n","import styled from \"styled-components\";\r\n\r\nconst GroupListContent = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  justify-content: flex-start;\r\n  align-items: baseline;\r\n`;\r\nGroupListContent.displayName = \"GroupListContent\";\r\nexport default GroupListContent;\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { GameObjectGroup } from \"oni-save-parser\";\r\n\r\nimport { get } from \"lodash-es\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save-selector\";\r\nimport selectedPath from \"@/selectors/selected-path-selector\";\r\n\r\nimport { getSaveItemTitle } from \"@/services/save-structure\";\r\n\r\nexport interface GameObjectItem {\r\n  name: string;\r\n  path: string[];\r\n}\r\n\r\nconst gameObjectItems = createSelector(\r\n  oniSave,\r\n  selectedPath,\r\n  (oniSave, selectedPath) => {\r\n    if (!oniSave) {\r\n      return [];\r\n    }\r\n\r\n    const group: GameObjectGroup = get(oniSave, selectedPath);\r\n    if (!group) {\r\n      return [];\r\n    }\r\n\r\n    return group.gameObjects.map((x, i) => {\r\n      const path = [...selectedPath, \"gameObjects\", `${i}`];\r\n      const name = getSaveItemTitle(path, oniSave);\r\n      const item: GameObjectItem = {\r\n        name,\r\n        path\r\n      };\r\n      return item;\r\n    });\r\n  }\r\n);\r\n\r\nconst structuredSelector = {\r\n  gameObjectItems\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport Portrait from \"@/components/Portrait\";\r\nimport SaveStructureLink from \"@/components/SaveStructureLink\";\r\n\r\nimport EditorContainer from \"@/pages/SaveEditor/components/editors/components/EditorContainer\";\r\nimport EditorHeader from \"@/pages/SaveEditor/components/editors/components/EditorHeader\";\r\n\r\nimport GameObjectListContent from \"./components/GameObjectListContent\";\r\n\r\ntype Props = StateProps;\r\nclass GameObjectList extends React.Component<Props> {\r\n  render() {\r\n    const { gameObjectItems } = this.props;\r\n    const portraits = gameObjectItems.map(x => (\r\n      <Portrait key={x.name}>\r\n        <Portrait.Header wordBreak=\"break-all\">\r\n          <SaveStructureLink intent={Intent.Primary} path={x.path}>\r\n            {x.name}\r\n          </SaveStructureLink>\r\n        </Portrait.Header>\r\n      </Portrait>\r\n    ));\r\n    return (\r\n      <EditorContainer>\r\n        <EditorHeader>GameObjects</EditorHeader>\r\n        <GameObjectListContent>{portraits}</GameObjectListContent>\r\n      </EditorContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(GameObjectList);\r\n","import GameObjectList from \"./GameObjectList\";\r\nexport default GameObjectList;\r\n","import styled from \"styled-components\";\r\n\r\nconst GameObjectGroupListContent = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  justify-content: flex-start;\r\n  align-items: baseline;\r\n`;\r\nGameObjectGroupListContent.displayName = \"GameObjectGroupListContent\";\r\nexport default GameObjectGroupListContent;\r\n","import styled from \"styled-components\";\r\n\r\nimport { TextProps, text } from \"@/theme\";\r\n\r\nconst PortraitFooter = styled.div`\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  margin-top: 2px;\r\n  text-align: center;\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n`;\r\nPortraitFooter.displayName = \"PortraitFooter\";\r\nexport default PortraitFooter;\r\n","import styled from \"styled-components\";\r\n\r\nimport { TextProps, text } from \"@/theme\";\r\n\r\nexport interface PortraitHeaderProps extends TextProps {}\r\nconst PortraitHeader = styled<TextProps, \"h4\">(\"h4\")`\r\n  ${text};\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  margin-top: 0;\r\n  margin-bottom: 2px;\r\n  text-align: center;\r\n`;\r\nPortraitHeader.displayName = \"PortraitHeader\";\r\nexport default PortraitHeader;\r\n","import styled from \"styled-components\";\r\n\r\nimport { attachSubComponents } from \"@/component-utils\";\r\n\r\nimport { getTheme } from \"@/theme\";\r\n\r\nimport Header from \"./PortraitHeader\";\r\nimport Footer from \"./PortraitFooter\";\r\n\r\nconst Portrait = styled.div`\r\n  border-radius: ${props => getTheme(props).radii[1]}\r\n  background-color: ${props => getTheme(props).colors.bg.panel};\r\n  width: 150px;\r\n  height: 150px;\r\n  position: relative;\r\n  padding: 5px;\r\n  margin: 5px;\r\n  box-sizing: border-box;\r\n`;\r\nPortrait.displayName = \"Portrait\";\r\n\r\nexport default attachSubComponents(Portrait, {\r\n  Header,\r\n  Footer\r\n});\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save-selector\";\r\n\r\nexport interface GroupItem {\r\n  name: string;\r\n  count: number;\r\n  path: string[];\r\n}\r\n\r\nconst gameObjectGroups = createSelector(oniSave, oniSave => {\r\n  if (!oniSave) {\r\n    return [];\r\n  }\r\n\r\n  return oniSave.gameObjects.map((x, i) => {\r\n    const item: GroupItem = {\r\n      name: x.name,\r\n      count: x.gameObjects.length,\r\n      path: [\"gameObjects\", `${i}`]\r\n    };\r\n    return item;\r\n  });\r\n});\r\n\r\nconst structuredSelector = {\r\n  gameObjectGroups\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport Portrait from \"@/components/Portrait\";\r\nimport SaveStructureLink from \"@/components/SaveStructureLink\";\r\n\r\nimport EditorContainer from \"@/pages/SaveEditor/components/editors/components/EditorContainer\";\r\nimport EditorHeader from \"@/pages/SaveEditor/components/editors/components/EditorHeader\";\r\n\r\nimport GameObjectGroupListContent from \"./components/GameObjectGroupListContent\";\r\n\r\ntype Props = StateProps;\r\nclass GameObjectGroupList extends React.Component<Props> {\r\n  render() {\r\n    const { gameObjectGroups } = this.props;\r\n    const portraits = gameObjectGroups.map(x => (\r\n      <Portrait key={x.name}>\r\n        <Portrait.Header wordBreak=\"break-all\">\r\n          <SaveStructureLink intent={Intent.Primary} path={x.path}>\r\n            {x.name}\r\n          </SaveStructureLink>\r\n        </Portrait.Header>\r\n        <Portrait.Footer>\r\n          <Text intent={Intent.Secondary}>{x.count} items</Text>\r\n        </Portrait.Footer>\r\n      </Portrait>\r\n    ));\r\n    return (\r\n      <EditorContainer>\r\n        <EditorHeader>GameObject Types</EditorHeader>\r\n        <GameObjectGroupListContent>{portraits}</GameObjectGroupListContent>\r\n      </EditorContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(GameObjectGroupList);\r\n","import GameObjectGroupList from \"./GameObjectGroupList\";\r\nexport default GameObjectGroupList;\r\n","interface ConstrainedArrayConstructor {\r\n  new (length: number): {\r\n    [value: number]: number;\r\n  };\r\n}\r\n\r\nfunction createClamp(\r\n  type: ConstrainedArrayConstructor\r\n): (value: number) => number {\r\n  const clampArray = new type(1);\r\n  return (value: number) => {\r\n    clampArray[0] = value;\r\n    return clampArray[0];\r\n  };\r\n}\r\n\r\nexport type NumberPrecision =\r\n  | \"int8\"\r\n  | \"uint8\"\r\n  | \"int16\"\r\n  | \"uint16\"\r\n  | \"int32\"\r\n  | \"uint32\"\r\n  | \"single\"\r\n  | \"double\";\r\n\r\nexport const clampInt8 = createClamp(Int8Array);\r\nexport const clampUInt8 = createClamp(Uint8Array);\r\n\r\nexport const clampInt16 = createClamp(Int16Array);\r\nexport const clampUInt16 = createClamp(Uint16Array);\r\n\r\nexport const clampInt32 = createClamp(Int32Array);\r\nexport const clampUInt32 = createClamp(Uint32Array);\r\n\r\nexport const clampSingle = createClamp(Float32Array);\r\nexport const clampDouble = createClamp(Float64Array);\r\n\r\nconst CLAMPS_BY_PRECISION: Record<\r\n  NumberPrecision,\r\n  (value: number) => number\r\n> = {\r\n  int8: clampInt8,\r\n  uint8: clampUInt8,\r\n  int16: clampInt16,\r\n  uint16: clampUInt16,\r\n  int32: clampInt32,\r\n  uint32: clampUInt32,\r\n  single: clampSingle,\r\n  double: clampDouble\r\n};\r\n\r\nexport function clamp(precision: NumberPrecision, value: number): number {\r\n  const clamper = CLAMPS_BY_PRECISION[precision];\r\n  if (!clamper) {\r\n    throw new Error(`Unknown precision \"${precision}\".`);\r\n  }\r\n\r\n  return clamper(value);\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nimport { TextProps as ThemeTextProps, text } from \"@/theme\";\r\n\r\nexport type TextProps = ThemeTextProps;\r\nconst EditableTextInput = styled<TextProps, \"input\">(\"input\")`\r\n  ${text};\r\n  font-size: inherit;\r\n  background: none;\r\n  border: none;\r\n`;\r\nEditableTextInput.displayName = \"EditableTextInput\";\r\nexport default EditableTextInput;\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Keys from \"@/keys\";\r\n\r\nimport Text, { TextProps } from \"../Text\";\r\n\r\nimport EditableTextInput from \"./components/EditableTextInput\";\r\n\r\nexport interface EditableTextProps extends TextProps {\r\n  className?: string;\r\n  value: string;\r\n  minLength?: number;\r\n  maxLength?: number;\r\n  onCommit(value: string): void;\r\n}\r\ntype Props = EditableTextProps;\r\ninterface State {\r\n  editValue: string | null;\r\n}\r\nexport default class EditableText extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      editValue: null\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { className, value, intent } = this.props;\r\n    const { editValue } = this.state;\r\n\r\n    if (editValue !== null) {\r\n      return (\r\n        <EditableTextInput\r\n          className={className}\r\n          autoFocus\r\n          intent={intent}\r\n          value={editValue}\r\n          onChange={this._onEditableChange}\r\n          onKeyPress={this._onEditableKeyPress}\r\n          onFocus={this._onEditableFocus}\r\n          onBlur={this._onEditableBlur}\r\n        />\r\n      );\r\n    } else {\r\n      return (\r\n        <Text className={className} intent={intent} onClick={this._onTextClick}>\r\n          {value}\r\n        </Text>\r\n      );\r\n    }\r\n  }\r\n\r\n  @autobind()\r\n  private _onTextClick() {\r\n    const { value } = this.props;\r\n    this.setState({\r\n      editValue: value\r\n    });\r\n  }\r\n\r\n  @autobind()\r\n  private _onEditableChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    this.setState({\r\n      editValue: e.target.value\r\n    });\r\n  }\r\n\r\n  @autobind()\r\n  private _onEditableKeyPress(e: React.KeyboardEvent) {\r\n    switch (e.key) {\r\n      case Keys.Enter:\r\n        this._commit();\r\n        break;\r\n      case Keys.Esc:\r\n        this._reset();\r\n        break;\r\n    }\r\n  }\r\n\r\n  @autobind()\r\n  private _onEditableFocus(e: React.FocusEvent<HTMLInputElement>) {\r\n    e.target.select();\r\n  }\r\n\r\n  @autobind()\r\n  private _onEditableBlur() {\r\n    this._commit();\r\n  }\r\n\r\n  private _commit() {\r\n    const { editValue } = this.state;\r\n    const { onCommit } = this.props;\r\n\r\n    if (!editValue) {\r\n      return;\r\n    }\r\n\r\n    onCommit(editValue);\r\n\r\n    this._reset();\r\n  }\r\n\r\n  private _reset() {\r\n    this.setState({\r\n      editValue: null\r\n    });\r\n  }\r\n}\r\n","import EditableText from \"./EditableText\";\r\nexport default EditableText;\r\n","import { modifyOniSave } from \"@/actions/modify-onisave\";\r\n\r\nimport { EditorFieldProps } from \"./props\";\r\nimport { Dispatch } from \"redux\";\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch, props: EditorFieldProps) {\r\n  return {\r\n    onCommit(value: any) {\r\n      dispatch(modifyOniSave(props.path, value));\r\n    }\r\n  };\r\n}\r\nexport type DispatchProps = ReturnType<typeof mapDispatchToProps>;\r\nexport default mapDispatchToProps;\r\n","import createCachedSelector from \"re-reselect\";\r\n\r\nimport { get } from \"lodash-es\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport oniSave from \"@/selectors/oni-save-selector\";\r\n\r\nimport { EditorFieldProps } from \"./props\";\r\n\r\nconst itemPathSelector = (_: AppState, props: EditorFieldProps) => props.path;\r\n\r\nconst cacheKeyGenerator = (_: AppState, props: EditorFieldProps) =>\r\n  props.path.join(\".\");\r\n\r\nconst itemValue = createCachedSelector(\r\n  itemPathSelector,\r\n  oniSave,\r\n  (path, oniSave) => {\r\n    if (path.length === 0) {\r\n      return oniSave;\r\n    }\r\n    return get(oniSave, path);\r\n  }\r\n)(cacheKeyGenerator);\r\n\r\nfunction mapStateToProps(state: AppState, props: EditorFieldProps) {\r\n  return {\r\n    value: itemValue(state, props)\r\n  };\r\n}\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\nexport default mapStateToProps;\r\n","import connectEditorField from \"./connect-field\";\r\n\r\nimport EditableText from \"@/components/EditableText\";\r\n\r\nexport default connectEditorField()(EditableText);\r\n","import styled from \"styled-components\";\r\n\r\nimport { TextProps, text, getTheme } from \"@/theme\";\r\n\r\nimport { attachSubComponents } from \"@/component-utils\";\r\n\r\nexport type FormLabelProps = TextProps;\r\nconst Label = styled<FormLabelProps, \"label\">(\"label\")`\r\n  ${text};\r\n  margin-right: ${props => getTheme(props).space[1]}px;\r\n`;\r\nLabel.displayName = \"FormGroup.Label\";\r\n\r\nconst Content = styled.div``;\r\nContent.displayName = \"FormGroup.Content\";\r\n\r\nconst FormGroup = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-start;\r\n`;\r\nFormGroup.displayName = \"FormGroup\";\r\n\r\nexport default attachSubComponents(FormGroup, {\r\n  Label,\r\n  Content\r\n});\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\nimport { MinionIdentityBehavior, GameObject } from \"oni-save-parser\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport selectedPath from \"@/selectors/selected-path-selector\";\r\nimport oniSave from \"@/selectors/oni-save-selector\";\r\nimport { get } from \"lodash-es\";\r\n\r\nconst structuredSelector = {\r\n  selectedPath,\r\n  minionGameObjectPath: selectedPath,\r\n  minionNamePath: createSelector(selectedPath, oniSave, (path, oniSave) => {\r\n    const gameObject: GameObject = get(oniSave, path);\r\n    if (!gameObject) {\r\n      return null;\r\n    }\r\n    const behaviorIndex = gameObject.behaviors.findIndex(\r\n      x => x.name === MinionIdentityBehavior\r\n    );\r\n    if (behaviorIndex === -1) {\r\n      return null;\r\n    }\r\n    return [...path, \"behaviors\", `${behaviorIndex}`, \"templateData\", \"name\"];\r\n  })\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport FormGroup from \"@/components/FormGroup\";\r\n\r\nimport EditableTextField from \"@/pages/SaveEditor/components/fields/EditableTextField\";\r\nimport NumericField from \"@/pages/SaveEditor/components/fields/NumericField\";\r\n\r\nimport EditorContainer from \"../components/EditorContainer\";\r\nimport EditorHeader from \"../components/EditorHeader\";\r\n\r\ntype Props = StateProps;\r\nclass DuplicantEditor extends React.Component<Props> {\r\n  render() {\r\n    const { minionNamePath, minionGameObjectPath } = this.props;\r\n    if (!minionNamePath) {\r\n      return \"Error: Malformed data\";\r\n    }\r\n\r\n    return (\r\n      <EditorContainer>\r\n        <EditorHeader>\r\n          <Text>Name: </Text>\r\n          <EditableTextField intent={Intent.Primary} path={minionNamePath} />\r\n        </EditorHeader>\r\n        <FormGroup>\r\n          <FormGroup.Label>Position</FormGroup.Label>\r\n          <FormGroup.Content>\r\n            <FormGroup>\r\n              <FormGroup.Label>X</FormGroup.Label>\r\n              <FormGroup.Content>\r\n                <NumericField\r\n                  precision=\"single\"\r\n                  path={[...minionGameObjectPath, \"position\", \"x\"]}\r\n                />\r\n              </FormGroup.Content>\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <FormGroup.Label>Y</FormGroup.Label>\r\n              <FormGroup.Content>\r\n                <NumericField\r\n                  precision=\"single\"\r\n                  path={[...minionGameObjectPath, \"position\", \"y\"]}\r\n                />\r\n              </FormGroup.Content>\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <FormGroup.Label>Z</FormGroup.Label>\r\n              <FormGroup.Content>\r\n                <NumericField\r\n                  precision=\"single\"\r\n                  path={[...minionGameObjectPath, \"position\", \"z\"]}\r\n                />\r\n              </FormGroup.Content>\r\n            </FormGroup>\r\n          </FormGroup.Content>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <FormGroup.Label>Scale</FormGroup.Label>\r\n          <FormGroup.Content>\r\n            <FormGroup>\r\n              <FormGroup.Label>X</FormGroup.Label>\r\n              <FormGroup.Content>\r\n                <NumericField\r\n                  precision=\"single\"\r\n                  path={[...minionGameObjectPath, \"scale\", \"x\"]}\r\n                />\r\n              </FormGroup.Content>\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <FormGroup.Label>Y</FormGroup.Label>\r\n              <FormGroup.Content>\r\n                <NumericField\r\n                  precision=\"single\"\r\n                  path={[...minionGameObjectPath, \"scale\", \"y\"]}\r\n                />\r\n              </FormGroup.Content>\r\n            </FormGroup>\r\n          </FormGroup.Content>\r\n        </FormGroup>\r\n      </EditorContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(DuplicantEditor);\r\n","import DuplicantEditor from \"./DuplicantEditor\";\r\nexport default DuplicantEditor;\r\n","import { modifyOniSave } from \"@/actions/modify-onisave\";\r\n\r\nconst mapDispatchToProps = {\r\n  onModify: modifyOniSave\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import { createSelector } from \"reselect\";\r\n\r\nimport { getSaveItemEditValue } from \"@/services/save-structure\";\r\n\r\nimport selectedPath from \"./selected-path-selector\";\r\nimport oniSave from \"./oni-save-selector\";\r\n\r\nconst selectedValueSelector = createSelector(\r\n  oniSave,\r\n  selectedPath,\r\n  (saveGame, selectedPath) => {\r\n    if (!saveGame) {\r\n      return null;\r\n    }\r\n\r\n    if (selectedPath.length === 0) {\r\n      return saveGame;\r\n    }\r\n\r\n    return getSaveItemEditValue(selectedPath, saveGame);\r\n  }\r\n);\r\nexport default selectedValueSelector;\r\n","import { createSelector, createStructuredSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport selectedPath from \"@/selectors/selected-path-selector\";\r\nimport selectedValue from \"@/selectors/selected-value-selector\";\r\n\r\nexport interface FieldEditable {\r\n  title: string;\r\n  key: string;\r\n  value: any;\r\n}\r\nexport type FieldRow = FieldEditable;\r\n\r\nconst fields = createSelector(\r\n  selectedValue,\r\n  (selectedValue): FieldRow[] => {\r\n    if (!selectedValue) {\r\n      return [];\r\n    }\r\n\r\n    if (isPrimitive(selectedValue)) {\r\n      // Cannot edit things in a primitive.\r\n      return [];\r\n    }\r\n\r\n    return Object.keys(selectedValue)\r\n      .filter(key => isPrimitive(selectedValue[key]))\r\n      .map(key => {\r\n        const value = selectedValue[key];\r\n        const editable: FieldEditable = {\r\n          title: key,\r\n          key,\r\n          value\r\n        };\r\n        return editable;\r\n      });\r\n  }\r\n);\r\n\r\nconst structuredSelectors = {\r\n  selectedPath,\r\n  fields\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelectors>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelectors\r\n);\r\nexport default mapStateToProps;\r\n\r\nconst primitiveTypes = [\"string\", \"number\", \"boolean\"];\r\nfunction isPrimitive(val: any) {\r\n  const valType = typeof val;\r\n  return primitiveTypes.indexOf(valType) !== -1;\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nexport interface EditorFieldProps {\r\n  propKey: string;\r\n  value: any;\r\n  onChange(propKey: string, value: any): void;\r\n}\r\nexport default class EditorField extends React.Component<EditorFieldProps> {\r\n  render() {\r\n    const { value } = this.props;\r\n    return (\r\n      <input\r\n        type=\"text\"\r\n        onChange={this._onChange}\r\n        value={JSON.stringify(value)}\r\n      />\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const { propKey, onChange } = this.props;\r\n    const value = e.target.value;\r\n    try {\r\n      const parsedValue = JSON.parse(value);\r\n      onChange(propKey, parsedValue);\r\n    } catch {}\r\n  }\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nconst Container = styled.div``;\r\nexport default Container;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Text from \"@/components/Text\";\r\n\r\nimport SelectedObjectEditorContainer from \"./components/Container\";\r\n\r\nimport EditorField from \"./components/EditorField\";\r\n\r\nimport mapStateToProps, { StateProps, FieldRow } from \"./derived-state\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\nconst TH = Text.withComponent(\"th\");\r\nconst TD = Text.withComponent(\"td\");\r\n\r\ntype Props = StateProps & DispatchProps;\r\nclass DefaultObjectEditor extends React.Component<Props> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const { fields } = this.props;\r\n\r\n    const fieldElements = fields.map(field => this._renderFieldRow(field));\r\n\r\n    return (\r\n      <SelectedObjectEditorContainer>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <TH>Name</TH>\r\n              <TH>Value</TH>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{fieldElements}</tbody>\r\n        </table>\r\n      </SelectedObjectEditorContainer>\r\n    );\r\n  }\r\n\r\n  private _renderFieldRow(field: FieldRow) {\r\n    const { title, key, value } = field;\r\n    return (\r\n      <tr key={key}>\r\n        <TD>{title}</TD>\r\n        <TD>\r\n          <EditorField\r\n            propKey={key}\r\n            value={value}\r\n            onChange={this._onFieldChange}\r\n          />\r\n        </TD>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onFieldChange(key: string, value: any) {\r\n    const { selectedPath, onModify } = this.props;\r\n    onModify([...selectedPath, key], value);\r\n  }\r\n}\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(DefaultObjectEditor);\r\n","import DefaultObjectEditor from \"./DefaultObjectEditor\";\r\nexport default DefaultObjectEditor;\r\n","import DefaultObjectEditor from \"./DefaultObjectEditor\";\r\n\r\nimport DuplicantEditor from \"./DuplicantEditor\";\r\nimport GameObjectGroupList from \"./GameObjectGroupList\";\r\nimport GameObjectList from \"./GameObjectList\";\r\nimport SaveRootEditor from \"./SaveRootEditor\";\r\nimport TemplateObjectEditor from \"./TemplateObjectEditor\";\r\n\r\nconst editors: Record<string, React.ComponentClass<any>> = {\r\n  \"save-root\": SaveRootEditor,\r\n  \"game-object-group-list\": GameObjectGroupList,\r\n  \"game-object-list\": GameObjectList,\r\n  \"template-object\": TemplateObjectEditor,\r\n  minion: DuplicantEditor\r\n};\r\n\r\nexport function getEditor(\r\n  editorType: string | null\r\n): React.ComponentClass<any> {\r\n  if (!editorType) {\r\n    return DefaultObjectEditor;\r\n  }\r\n\r\n  return editors[editorType] || DefaultObjectEditor;\r\n}\r\n","import styled from \"styled-components\";\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst ResizeHandleVisual = styled.div`\r\n  width: 4px;\r\n  margin-left: 2px;\r\n  height: 100%;\r\n  background: ${props => getTheme(props).colors.bg.separator};\r\n  flex: none;\r\n  cursor: ew-resize;\r\n`;\r\nexport default ResizeHandleVisual;\r\n","import * as React from \"react\";\r\n\r\nimport { DraggableCore, DraggableData } from \"react-draggable\";\r\n\r\nimport ResizeHandleVisual from \"./ResizeHandleVisual\";\r\n\r\nexport interface ResizeHandleProps {\r\n  onResize(delta: number): void;\r\n}\r\n\r\ntype Props = ResizeHandleProps;\r\nclass ResizeHandle extends React.Component<Props> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this._onDrag = this._onDrag.bind(this);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <DraggableCore onDrag={this._onDrag}>\r\n        <ResizeHandleVisual />\r\n      </DraggableCore>\r\n    );\r\n  }\r\n\r\n  private _onDrag(e: MouseEvent, d: DraggableData) {\r\n    const { onResize } = this.props;\r\n    onResize(d.deltaX);\r\n  }\r\n}\r\nexport default ResizeHandle;\r\n","import * as React from \"react\";\r\n\r\nimport { HeightProps, height } from \"styled-system\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport Flex from \"@/components/Flex\";\r\n\r\nimport ResizeHandle from \"./components/ResizeHandle\";\r\nimport styled from \"styled-components\";\r\n\r\nexport interface ResizePanelProps extends HeightProps {\r\n  className?: string;\r\n  defaultWidth?: number;\r\n}\r\ninterface State {\r\n  width: number;\r\n}\r\ntype Props = ResizePanelProps;\r\nclass ResizePanel extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      width: props.defaultWidth || 300\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { className, children } = this.props;\r\n    const { width } = this.state;\r\n    // TODO: too many wrapping divs.\r\n    //  Provide a way to apply flex to an existing item.\r\n    return (\r\n      <Flex.Container className={className} direction=\"row\">\r\n        <Flex.Item style={{ width }}>{children}</Flex.Item>\r\n        <Flex.Item>\r\n          <ResizeHandle onResize={this._onResize} />\r\n        </Flex.Item>\r\n      </Flex.Container>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onResize(delta: number) {\r\n    this.setState(s => ({\r\n      width: s.width + delta\r\n    }));\r\n  }\r\n}\r\n\r\nexport default styled(ResizePanel)`\r\n  ${height};\r\n`;\r\n","import ResizePanel from \"./ResizePanel\";\r\nexport default ResizePanel;\r\n","import styled from \"styled-components\";\r\nimport { getTheme } from \"@/theme\";\r\n\r\nconst BreadcrumbContainer = styled.div`\r\n  margin-bottom: ${props => getTheme(props).space[1]}px;\r\n`;\r\nBreadcrumbContainer.displayName = \"BreadcrumbContainer\";\r\nexport default BreadcrumbContainer;\r\n","import { selectPath } from \"@/actions/select-path\";\r\n\r\nconst mapDispatchToProps = {\r\n  onClick: selectPath\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { autobind } from \"core-decorators\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { LinkProps, link } from \"@/theme\";\r\n\r\nimport { SaveStructureLinkProps } from \"./props\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\ntype Props = SaveStructureLinkProps & DispatchProps;\r\nclass SaveStructureLink extends React.Component<Props> {\r\n  render() {\r\n    const { intent, children } = this.props;\r\n    return (\r\n      <Link intent={intent} onClick={this._onClick}>\r\n        {children}\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  @autobind()\r\n  private _onClick() {\r\n    const { path, onClick } = this.props;\r\n    onClick(path);\r\n  }\r\n}\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(SaveStructureLink);\r\n\r\nconst Link = styled<LinkProps, \"span\">(\"span\")`\r\n  ${link};\r\n`;\r\n","import { createSelector } from \"reselect\";\r\n\r\nimport { getSaveItemBreadcrumb } from \"@/services/save-structure\";\r\n\r\nimport selectedPath from \"./selected-path-selector\";\r\nimport oniSave from \"./oni-save-selector\";\r\n\r\nconst selectedPathBreadcrumbSelector = createSelector(\r\n  selectedPath,\r\n  oniSave,\r\n  (selectedPath, oniSave) =>\r\n    oniSave ? getSaveItemBreadcrumb(selectedPath, oniSave) : []\r\n);\r\nexport default selectedPathBreadcrumbSelector;\r\n","import { createStructuredSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport breadcrumb from \"@/selectors/selected-path-breadcrumb-selector\";\r\n\r\nconst structuredSelector = {\r\n  breadcrumb\r\n};\r\nexport type StateProps = StructuredStateProps<typeof structuredSelector>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  structuredSelector\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\nimport SaveStructureLink from \"@/components/SaveStructureLink\";\r\n\r\nimport BreadcrumbContainer from \"./components/BreadcrumbContainer\";\r\n\r\ntype Props = StateProps;\r\nclass SelectedPathBreadcrumb extends React.Component<Props> {\r\n  render() {\r\n    const { breadcrumb } = this.props;\r\n    let links: React.ReactNode[] = [];\r\n    for (let i = 0; i < breadcrumb.length; i++) {\r\n      let isFinal = i + 1 === breadcrumb.length;\r\n      const x = breadcrumb[i];\r\n      const key = x.path.join(\".\");\r\n      links.push(\r\n        <SaveStructureLink\r\n          intent={isFinal ? Intent.Primary : Intent.Secondary}\r\n          key={key}\r\n          path={x.path}\r\n        >\r\n          {x.title}\r\n        </SaveStructureLink>\r\n      );\r\n      if (!isFinal) {\r\n        links.push(<Text key={`${key}:sep`}>{\" > \"}</Text>);\r\n      }\r\n    }\r\n    return <BreadcrumbContainer>{links}</BreadcrumbContainer>;\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(SelectedPathBreadcrumb);\r\n","import SelectedPathBreadcrumb from \"./SelectedPathBreadcrumb\";\r\nexport default SelectedPathBreadcrumb;\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { isObject } from \"lodash-es\";\r\n\r\nimport saveStructure from \"./root\";\r\nimport { SaveStructureDef } from \"./types\";\r\n\r\nexport function getSaveStructureDef(\r\n  saveGamePath: string[],\r\n  save: SaveGame\r\n): SaveStructureDef | null {\r\n  // TODO: Seems like there would be a builtin utility for this\r\n  const iter = walkSaveStructurePath(saveGamePath, save);\r\n  let result: IteratorResult<any>;\r\n  do {\r\n    result = iter.next();\r\n  } while (!result.done);\r\n  return result.value;\r\n}\r\n\r\n/**\r\n * Walks through a path of a save game, returning the save structure objects in order.\r\n * @param saveGamePath The path to walk the save structure tree to\r\n * @param saveGame The save game to walk.\r\n */\r\nexport function* walkSaveStructurePath(\r\n  saveGamePath: string[],\r\n  saveGame: SaveGame\r\n): IterableIterator<{ def: SaveStructureDef; path: string[] }> {\r\n  let structure: SaveStructureDef = saveStructure;\r\n  let value: any = saveGame;\r\n\r\n  yield {\r\n    def: saveStructure,\r\n    path: []\r\n  };\r\n\r\n  for (let i = 0; i < saveGamePath.length; i++) {\r\n    const key = saveGamePath[i];\r\n\r\n    let subStructure: SaveStructureDef | undefined;\r\n    if (isObject(structure)) {\r\n      subStructure =\r\n        Object.keys(structure).indexOf(key) !== -1\r\n          ? structure[key]\r\n          : structure[\"*\"];\r\n    }\r\n\r\n    if (!subStructure) {\r\n      return null;\r\n    }\r\n\r\n    // Pick the value before searching for variants.\r\n    value = value[key];\r\n\r\n    // Try to pick a variant if possible.\r\n    if (subStructure.$variants) {\r\n      const variant = subStructure.$variants.find(\r\n        x => !x.$match || x.$match(value)\r\n      );\r\n      if (variant) {\r\n        subStructure = {\r\n          ...subStructure,\r\n          ...variant\r\n        } as SaveStructureDef;\r\n      }\r\n    }\r\n\r\n    structure = subStructure;\r\n\r\n    yield {\r\n      def: structure,\r\n      path: saveGamePath.slice(0, i + 1)\r\n    };\r\n  }\r\n\r\n  return structure;\r\n}\r\n\r\n// export function getChildStructures(def: SaveStructureDef): SaveStructureDef[] {\r\n//   return Object.keys(def)\r\n//     .filter(x => x[0] !== \"$\")\r\n//     .map(x => def[x]) as SaveStructureDef[];\r\n// }\r\n","import { GameObjectBehavior, SaveGame } from \"oni-save-parser\";\r\n\r\nimport { get, forEach } from \"lodash-es\";\r\n\r\nimport { SaveStructureDef } from \"../../types\";\r\n\r\nexport const defaultBehavior: SaveStructureDef<GameObjectBehavior> = {\r\n  $uiPathName(behavior: GameObjectBehavior) {\r\n    return behavior.name;\r\n  },\r\n\r\n  $uiChildren(behavior: GameObjectBehavior) {\r\n    const children: string[][] = [];\r\n    if (\r\n      behavior.templateData &&\r\n      Object.keys(behavior.templateData).length > 0\r\n    ) {\r\n      // TODO: Enable when template editor is established on templateData '*' children (recursively).\r\n      // forEach(behavior.templateData, (_, key) => {\r\n      //   children.push([\"templateData\", key]);\r\n      // });\r\n      children.push([\"templateData\"]);\r\n    }\r\n    if (behavior.extraData) {\r\n      children.push([\"extraData\"]);\r\n    }\r\n    return children.length > 0 ? children : false;\r\n  },\r\n\r\n  $advanced(behavior: GameObjectBehavior) {\r\n    const { templateData, extraData } = behavior;\r\n    const hasTemplateData =\r\n      templateData && Object.keys(templateData).length > 0;\r\n    const hasExtraData = extraData != null;\r\n    const hasData = hasTemplateData || hasExtraData;\r\n    // We are only 'advanced' (hidden) if we do not have any data to show\r\n    return !hasData;\r\n  },\r\n\r\n  templateData: {\r\n    $editor: \"template-object\",\r\n    $uiPathName: false,\r\n\r\n    // TODO: Handle '*' with an object that gets the template editor\r\n    //  set up with the correct template path, and references itself\r\n    //  for its own '*' recursively.\r\n\r\n    $editorProps(_: any, path: string[], saveGame: SaveGame) {\r\n      // 'gameObjects', '1', 'gameObjects', '6', 'behaviors', '4'\r\n      // 6 items deep\r\n      const behavior = get(saveGame, path.slice(0, 6));\r\n      if (!behavior) {\r\n        return {};\r\n      }\r\n      return {\r\n        templateName: behavior.name\r\n      };\r\n    }\r\n  } as SaveStructureDef<{}>\r\n};\r\n","import { isObject } from \"lodash-es\";\r\n\r\nexport function gameObjectIs(type: string): (obj: any) => boolean {\r\n  return obj => isObject(obj) && obj.name === type;\r\n}\r\n","import {\r\n  GameObject,\r\n  MinionIdentityBehavior,\r\n  getBehavior,\r\n  GameObjectGroup\r\n} from \"oni-save-parser\";\r\n\r\nimport { SaveStructureDef } from \"@/services/save-structure/structure/types\";\r\n\r\nimport { gameObjectIs } from \"../matchers\";\r\n\r\nimport defaultGameObjectGroup, { defaultGameObject } from \"./default\";\r\n\r\nconst minionGameObject: SaveStructureDef<GameObjectGroup> = {\r\n  ...defaultGameObjectGroup,\r\n\r\n  // Only apply this rule to minion game object groups.\r\n  $match: gameObjectIs(\"Minion\"),\r\n\r\n  // gameObjects in a gameObject group is an array of GameObject\r\n  gameObjects: {\r\n    ...defaultGameObjectGroup.gameObjects,\r\n\r\n    \"*\": {\r\n      ...defaultGameObject,\r\n\r\n      $editor: \"minion\",\r\n\r\n      $uiPathName: (obj: GameObject) => {\r\n        const identityBehavior = getBehavior(obj, MinionIdentityBehavior);\r\n        const name =\r\n          (identityBehavior &&\r\n            identityBehavior.templateData &&\r\n            identityBehavior.templateData.name) ||\r\n          \"[malformed]\";\r\n        return name;\r\n      }\r\n    }\r\n  }\r\n};\r\nexport default minionGameObject;\r\n","import { GameObjectGroup, SaveGame } from \"oni-save-parser\";\r\n\r\nimport { SaveStructureDef } from \"../types\";\r\n\r\nimport minionGameObjectGroup from \"./minion\";\r\n\r\nimport defaultGameObjectGroup from \"./default\";\r\n\r\nconst gameObjectGroupsStructure: SaveStructureDef<GameObjectGroup> = {\r\n  $uiPathName(group: GameObjectGroup) {\r\n    return group.name;\r\n  },\r\n\r\n  $uiChildren(group: GameObjectGroup) {\r\n    return group.gameObjects.map((_, i) => [\"gameObjects\", `${i}`]);\r\n  },\r\n\r\n  // We want to handle each game object type uniquely,\r\n  //  but their uniqueness is keyed off the name of this group.\r\n  // To handle this, we provide variants that match off the group's name.\r\n  $variants: [minionGameObjectGroup, defaultGameObjectGroup]\r\n};\r\n\r\nconst gameObjectsStructure: SaveStructureDef<SaveGame[\"gameObjects\"]> = {\r\n  $editor: \"game-object-group-list\",\r\n\r\n  // gameObjects is an array, so we use the fallback key to\r\n  //  handle all items.\r\n  \"*\": gameObjectGroupsStructure\r\n};\r\nexport default gameObjectsStructure;\r\n","export * from \"./root\";\r\nexport * from \"./types\";\r\nexport * from \"./utils\";\r\n\r\nimport saveStructure from \"./root\";\r\nexport default saveStructure;\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { get, isObject } from \"lodash-es\";\r\n\r\nimport { EditMode, SaveItemBreadcrumb } from \"./types\";\r\n\r\nimport {\r\n  SaveStructureDef,\r\n  getSaveStructureDef,\r\n  walkSaveStructurePath\r\n} from \"./structure\";\r\n\r\nexport function getSaveItemTitle(path: string[], saveGame: SaveGame): string {\r\n  const def = getSaveStructureDef(path, saveGame);\r\n  let nameSource: string | false | undefined;\r\n  if (def) {\r\n    const nameProducer = def.$uiPathName;\r\n    if (typeof nameProducer === \"function\") {\r\n      const value = path.length > 0 ? get(saveGame, path) : saveGame;\r\n      nameSource = nameProducer(value);\r\n    } else if (typeof nameProducer === \"string\") {\r\n      nameSource = nameProducer;\r\n    }\r\n  }\r\n\r\n  // TODO: Object might opt out of a path entry with uiPathName: false\r\n  //  What do we do in this case?\r\n  //  For now, we just return the absolute path.\r\n  return nameSource || path[path.length - 1];\r\n}\r\n\r\nexport function getSaveItemBreadcrumb(\r\n  path: string[],\r\n  saveGame: SaveGame\r\n): SaveItemBreadcrumb[] {\r\n  const breadcrumbs: SaveItemBreadcrumb[] = [];\r\n  for (const structurePath of walkSaveStructurePath(path, saveGame)) {\r\n    const { def, path: defPath } = structurePath;\r\n    let title: string | false = false;\r\n    const nameProducer = def.$uiPathName;\r\n    if (typeof nameProducer === \"function\") {\r\n      const value = defPath.length > 0 ? get(saveGame, defPath) : saveGame;\r\n      title = nameProducer(value) || false;\r\n    } else if (typeof nameProducer === \"string\") {\r\n      title = nameProducer;\r\n    } else if (nameProducer === false) {\r\n      // Opting out of a path entry.\r\n      continue;\r\n    } else {\r\n      title = defPath[defPath.length - 1];\r\n    }\r\n\r\n    if (title) {\r\n      breadcrumbs.push({\r\n        title,\r\n        path: defPath\r\n      });\r\n    }\r\n  }\r\n\r\n  return breadcrumbs;\r\n}\r\n\r\nexport function getSaveItemEditValue(path: string[], saveGame: SaveGame) {\r\n  return path.length > 0 ? get(saveGame, path) : saveGame;\r\n}\r\n\r\nexport function getSaveItemChildPaths(\r\n  path: string[],\r\n  saveGame: SaveGame,\r\n  editMode: EditMode\r\n): string[][] {\r\n  const def = getSaveStructureDef(path, saveGame);\r\n  const childPaths = collectChildPaths(path, saveGame, def, editMode);\r\n  return childPaths;\r\n}\r\n\r\nexport function getSaveItemEditor(\r\n  path: string[],\r\n  saveGame: SaveGame\r\n): string | null {\r\n  const def = getSaveStructureDef(path, saveGame);\r\n  return (def && def.$editor) || null;\r\n}\r\n\r\nexport function getSaveItemEditorProps(\r\n  path: string[],\r\n  saveGame: SaveGame\r\n): Record<string, any> {\r\n  const def = getSaveStructureDef(path, saveGame);\r\n  if (!def || !def.$editor) {\r\n    return {};\r\n  }\r\n\r\n  const propFactory = def.$editorProps;\r\n  if (!propFactory) {\r\n    return {};\r\n  }\r\n\r\n  const value = path.length > 0 ? get(saveGame, path) : saveGame;\r\n  return propFactory(value, path, saveGame);\r\n}\r\n\r\n/**\r\n * Determine the child values for the given value.\r\n * @param saveGamePath The path to the value whose children to determine\r\n * @param oniSave The oni save game structure\r\n * @param def The definition of the value whose children to determine\r\n * @param editMode The current edit mode.\r\n * @returns A collection of absolute save game paths for the child values of this value.\r\n */\r\nfunction collectChildPaths(\r\n  saveGamePath: string[],\r\n  oniSave: SaveGame,\r\n  def: SaveStructureDef | null,\r\n  editMode: EditMode\r\n): string[][] {\r\n  let uiChildren = def ? def.$uiChildren : null;\r\n\r\n  const value = saveGamePath.length > 0 ? get(oniSave, saveGamePath) : oniSave;\r\n\r\n  if (typeof uiChildren === \"function\") {\r\n    uiChildren = uiChildren(value);\r\n  }\r\n\r\n  if (uiChildren === false) {\r\n    // Explicitly no children.\r\n    return [];\r\n  }\r\n\r\n  if (uiChildren == null && def) {\r\n    // TODO: Not sure if this is a good idea, trying it out.\r\n    // Explicit structure children are candidates for children.\r\n\r\n    // Only process def if it is not advanced, or we are in advanced mode.\r\n    // Determine the save structure keys we can work off of.\r\n    const defKeys: string[] = Object.keys(def).filter(x => x[0] !== \"$\");\r\n    if (defKeys.indexOf(\"*\") !== -1) {\r\n      // Def knows about all child keys.  Probably an array or map.\r\n      uiChildren = Object.keys(value).map(x => [x]);\r\n    } else if (defKeys.length > 0) {\r\n      // We have known child keys, offer them up.\r\n      uiChildren = defKeys.map(x => [x]);\r\n    }\r\n  }\r\n\r\n  // Failed to find any children, attempt to auto-determine them.\r\n  if (uiChildren == null) {\r\n    uiChildren = collectAutoChildPaths(saveGamePath, oniSave, editMode);\r\n  }\r\n\r\n  // Make the path absolute\r\n  uiChildren = uiChildren ? uiChildren.map(x => [...saveGamePath, ...x]) : [];\r\n\r\n  if (uiChildren) {\r\n    // Check for editMode visibility.\r\n    uiChildren = uiChildren.filter(path => {\r\n      const childValue = get(oniSave, path);\r\n      const childDef = getSaveStructureDef(path, oniSave);\r\n      return checkEditMode(childValue, childDef, editMode);\r\n    });\r\n  }\r\n\r\n  return uiChildren;\r\n}\r\n\r\nfunction checkEditMode(\r\n  value: any,\r\n  def: SaveStructureDef | null,\r\n  editMode: EditMode\r\n): boolean {\r\n  if (editMode === \"advanced\") {\r\n    return true;\r\n  }\r\n\r\n  // Unknown objects are implicitly advanced.\r\n  let advancedProducer = def ? def.$advanced : true;\r\n  let advanced: boolean;\r\n  if (typeof advancedProducer === \"boolean\") {\r\n    advanced = advancedProducer;\r\n  } else if (typeof advancedProducer === \"function\") {\r\n    advanced = advancedProducer(value);\r\n  } else {\r\n    advanced = false;\r\n  }\r\n\r\n  return !advanced;\r\n}\r\n\r\nfunction collectAutoChildPaths(\r\n  saveGamePath: string[],\r\n  oniSave: SaveGame,\r\n  editMode: EditMode\r\n): string[][] {\r\n  if (editMode !== \"advanced\") {\r\n    // Do not auto-determine anything when not in advanced mode.\r\n    return [];\r\n  }\r\n\r\n  const value = saveGamePath.length > 0 ? get(oniSave, saveGamePath) : oniSave;\r\n  let uiChildren: string[][] | null = null;\r\n  if (isObject(value)) {\r\n    // Target is an object, offer up all child objects.\r\n    uiChildren = Object.keys(value)\r\n      .filter(x => isImplicitChild(value[x]))\r\n      .map(x => [x]);\r\n  } else if (Array.isArray(value)) {\r\n    // Target is an array, offer up all array items.\r\n    uiChildren = value.filter(isImplicitChild).map((_, i) => [`${i}`]);\r\n  }\r\n\r\n  return uiChildren || [];\r\n}\r\n\r\nfunction isImplicitChild(value: any): boolean {\r\n  return isObject(value);\r\n}\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport {\r\n  getSaveItemEditor,\r\n  getSaveItemEditorProps\r\n} from \"@/services/save-structure\";\r\n\r\nimport oniSave from \"@/selectors/oni-save-selector\";\r\nimport selectedPath from \"@/selectors/selected-path-selector\";\r\n\r\nconst stateSelectors = {\r\n  editorType: createSelector(\r\n    oniSave,\r\n    selectedPath,\r\n    (oniSave, selectedPath) =>\r\n      (oniSave && getSaveItemEditor(selectedPath, oniSave)) || null\r\n  ),\r\n  editorProps: createSelector(\r\n    oniSave,\r\n    selectedPath,\r\n    (oniSave, selectedPath) =>\r\n      oniSave && getSaveItemEditorProps(selectedPath, oniSave)\r\n  )\r\n};\r\nexport type StateProps = StructuredStateProps<typeof stateSelectors>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  stateSelectors\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\n\r\nimport SelectedPathBreadcrumb from \"@/components/SelectedPathBreadcrumb\";\r\nimport ResizePanel from \"@/components/ResizePanel\";\r\n\r\nimport { getEditor } from \"./components/editors\";\r\n\r\nimport SaveEditorContainer from \"./components/SaveEditorContainer\";\r\nimport ContentContainer from \"./components/ContentContainer\";\r\nimport EditorContainer from \"./components/EditorContainer\";\r\n\r\nimport Sidebar from \"./components/Sidebar\";\r\nimport Separator from \"@/components/Separator\";\r\n\r\ntype Props = StateProps;\r\nclass SaveEditor extends React.Component<Props> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      selectedPath: null\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { editorType, editorProps } = this.props;\r\n\r\n    const ObjectEditor = getEditor(editorType);\r\n\r\n    return (\r\n      <SaveEditorContainer>\r\n        <ResizePanel>\r\n          <Sidebar />\r\n        </ResizePanel>\r\n        <ContentContainer>\r\n          <SelectedPathBreadcrumb />\r\n          <Separator width=\"100%\" />\r\n          <EditorContainer>\r\n            <ObjectEditor {...editorProps} />\r\n          </EditorContainer>\r\n        </ContentContainer>\r\n      </SaveEditorContainer>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(SaveEditor);\r\n","import SaveEditor from \"./SaveEditor\";\r\nexport default SaveEditor;\r\n","import * as React from \"react\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\n\r\nconst Saving: React.SFC = () => <Text intent={Intent.Primary}>Saving</Text>;\r\nSaving.displayName = \"Saving\";\r\nexport default Saving;\r\n","import Saving from \"./Saving\";\r\nexport default Saving;\r\n","import * as React from \"react\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\n\r\nconst Loading: React.SFC = () => <Text intent={Intent.Primary}>Loading</Text>;\r\nLoading.displayName = \"Loading\";\r\nexport default Loading;\r\n","import Loading from \"./Loading\";\r\nexport default Loading;\r\n","import styled from \"styled-components\";\r\nimport { HeightProps, WidthProps, height, width } from \"styled-system\";\r\n\r\nexport interface FlexItemProps extends WidthProps, HeightProps {\r\n  grow?: boolean;\r\n  shrink?: boolean;\r\n}\r\n\r\nconst FlexItem = styled<FlexItemProps, \"div\">(\"div\")`\r\n  flex-grow: ${props => (props.grow ? 1 : 0)};\r\n  flex-shrink: ${props => (props.shrink ? 1 : 0)};\r\n  flex-basis: auto;\r\n  box-sizing: border-box;\r\n  ${height};\r\n  ${width};\r\n`;\r\nFlexItem.displayName = \"FlexItem\";\r\nexport default FlexItem;\r\n","import styled from \"styled-components\";\r\nimport {\r\n  BgColorProps,\r\n  WidthProps,\r\n  HeightProps,\r\n  bgColor,\r\n  width,\r\n  height\r\n} from \"styled-system\";\r\n\r\nexport type BoxProps = BgColorProps & WidthProps & HeightProps;\r\n\r\nconst Box = styled<BoxProps, \"div\">(\"div\")`\r\n  ${bgColor}\r\n  ${width}\r\n  ${height}\r\n`;\r\nexport default Box;\r\n","import styled from \"styled-components\";\r\n\r\nimport Box, { BoxProps } from \"../Box\";\r\n\r\nexport interface FlexContainerProps extends BoxProps {\r\n  direction: \"row\" | \"column\";\r\n}\r\nconst FlexContainer = styled<FlexContainerProps, any>(Box)`\r\n  display: flex;\r\n  flex-direction: ${props => props.direction};\r\n  align-items: stretch;\r\n`;\r\nFlexContainer.displayName = \"FlexContainer\";\r\nexport default FlexContainer;\r\n","import * as React from \"react\";\r\n\r\nimport Flex from \"@/components/Flex\";\r\n\r\nexport interface ErrorProps {\r\n  error: Error;\r\n  onDismiss(): void;\r\n}\r\n\r\nconst Error: React.SFC<ErrorProps> = ({ error, onDismiss }) => (\r\n  <Flex.Container direction=\"column\" width=\"100%\" height=\"100%\">\r\n    <Flex.Item grow>\r\n      <h2>Error</h2>\r\n      <code>{error.stack || error.message || String(error)}</code>\r\n    </Flex.Item>\r\n    <Flex.Item>\r\n      <button onClick={onDismiss}>Close</button>\r\n    </Flex.Item>\r\n  </Flex.Container>\r\n);\r\nError.displayName = \"Error\";\r\nexport default Error;\r\n","import Error from \"./Error\";\r\nexport default Error;\r\n","import * as React from \"react\";\r\n\r\nimport { Intent } from \"@/theme\";\r\n\r\nimport Text from \"@/components/Text\";\r\n\r\nconst NoSave: React.SFC = () => (\r\n  <Text intent={Intent.Hint}>\r\n    Load a save using the controls on the upper left.\r\n  </Text>\r\n);\r\nNoSave.displayName = \"NoSave\";\r\nexport default NoSave;\r\n","import NoSave from \"./NoSave\";\r\nexport default NoSave;\r\n","import { dismissError } from \"@/actions/dismiss-error\";\r\n\r\nconst mapDispatchToProps = {\r\n  onDismissError: dismissError\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import { AppState } from \"@/state\";\r\n\r\nconst loadingStateSelector = (state: AppState) => state.loadingState;\r\nexport default loadingStateSelector;\r\n","import { AppState } from \"@/state\";\r\n\r\nconst errorSelector = (state: AppState) => state.error;\r\nexport default errorSelector;\r\n","import { createStructuredSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport error from \"@/selectors/error-selector\";\r\nimport loadingState from \"@/selectors/loading-state-selector\";\r\n\r\nconst stateSelectors = {\r\n  loadingState,\r\n  error\r\n};\r\nexport type StateProps = StructuredStateProps<typeof stateSelectors>;\r\nconst mapStateToProps = createStructuredSelector<AppState, StateProps>(\r\n  stateSelectors\r\n);\r\nexport default mapStateToProps;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./derived-state\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./events\";\r\n\r\nimport NoSave from \"@/pages/NoSave\";\r\nimport Error from \"@/pages/Error\";\r\nimport Loading from \"@/pages/Loading\";\r\nimport Saving from \"@/pages/Saving\";\r\nimport SaveEditor from \"@/pages/SaveEditor\";\r\n\r\nimport AppContainer from \"./components/AppContainer\";\r\nimport AppContent from \"./components/AppContent\";\r\nimport NavBarContainer from \"./components/NavBar\";\r\n\r\ntype Props = StateProps & DispatchProps;\r\nclass App extends React.Component<Props> {\r\n  render() {\r\n    const { error, loadingState, onDismissError } = this.props;\r\n\r\n    let element: JSX.Element;\r\n\r\n    if (error) {\r\n      element = <Error error={error} onDismiss={onDismissError} />;\r\n    } else {\r\n      switch (loadingState) {\r\n        case \"idle\":\r\n          element = <NoSave />;\r\n          break;\r\n        case \"loading\":\r\n          element = <Loading />;\r\n          break;\r\n        case \"saving\":\r\n          element = <Saving />;\r\n          break;\r\n        case \"ready\":\r\n          element = <SaveEditor />;\r\n          break;\r\n        default:\r\n          element = <div>???</div>;\r\n          break;\r\n      }\r\n    }\r\n\r\n    return (\r\n      <AppContainer>\r\n        <NavBarContainer />\r\n        <AppContent>{element}</AppContent>\r\n      </AppContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(App);\r\n","import App from \"./App\";\r\nexport default App;\r\n","import { css } from \"styled-components\";\r\n\r\nimport { Intent, getTheme } from \"./theme\";\r\n\r\nexport interface IntentFillProps {\r\n  intent?: Intent;\r\n}\r\n\r\nexport const intentFill = css<IntentFillProps>`\r\n  color: ${props =>\r\n    getTheme(props).colors.textIntent[props.intent || \"default\"]};\r\n  background-color: ${props =>\r\n    getTheme(props).colors.intent[props.intent || \"default\"]};\r\n`;\r\n","import { css } from \"styled-components\";\r\n\r\nimport { TextProps, text } from \"./text\";\r\n\r\nexport interface LinkProps extends TextProps {}\r\n\r\nexport const link = css<LinkProps>`\r\n  ${text};\r\n  text-decoration: underline;\r\n  cursor: pointer;\r\n`;\r\n","import { AnyAction } from \"redux\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { ACTION_RECEIVE_ONISAVE_SUCCESS } from \"@/actions/receive-onisave\";\r\nimport { AppState } from \"@/state\";\r\n\r\nexport function actionSanitizer(action: AnyAction): AnyAction {\r\n  if (action.type === ACTION_RECEIVE_ONISAVE_SUCCESS) {\r\n    return {\r\n      ...action,\r\n      payload: sanitizeSave(action.payload)\r\n    };\r\n  }\r\n  return action;\r\n}\r\n\r\nexport function stateSanitizer(state: AppState): any {\r\n  return {\r\n    ...state,\r\n    oniSave: state.oniSave ? sanitizeSave(state.oniSave) : null\r\n  };\r\n}\r\n\r\nfunction sanitizeSave(save: SaveGame): any {\r\n  return {\r\n    ...save,\r\n    world: {\r\n      ...save.world,\r\n      streamed: \"~snip~\"\r\n    }\r\n  };\r\n}\r\n","import { call, put, select, takeEvery } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { writeSaveGame } from \"@/services/save-serializer/sagas\";\r\n\r\nimport { saveAs } from \"file-saver\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_SAVE,\r\n  SaveOniSaveAction\r\n} from \"../actions/save-onisave\";\r\n\r\nimport {\r\n  receiveOniSaveBegin,\r\n  receiveOniSaveError,\r\n  receiveOniSaveSuccess\r\n} from \"../actions/receive-onisave\";\r\n\r\nimport oniSaveSelector from \"../selectors/oni-save-selector\";\r\n\r\nexport default function* saveEditorSaga() {\r\n  yield takeEvery(ACTION_ONISAVE_SAVE, handleOniSaveLoad);\r\n}\r\n\r\nfunction* handleOniSaveLoad(action: SaveOniSaveAction) {\r\n  const saveName = action.payload;\r\n\r\n  const save: SaveGame | null = yield select(oniSaveSelector);\r\n  if (!save) {\r\n    return;\r\n  }\r\n\r\n  yield put(receiveOniSaveBegin(\"saving\"));\r\n  let blob: Blob;\r\n  try {\r\n    blob = yield call(writeSaveGame, save);\r\n  } catch (error) {\r\n    yield put(receiveOniSaveError(error));\r\n    return;\r\n  }\r\n\r\n  saveAs(blob, saveName);\r\n\r\n  yield put(receiveOniSaveSuccess(save));\r\n}\r\n","import { call } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { writeSave } from \"../worker-instance\";\r\n\r\nexport function* writeSaveGame(saveGame: SaveGame) {\r\n  const data: ArrayBuffer = yield call(writeSave, saveGame);\r\n  const blob = new Blob([data]);\r\n  return blob;\r\n}\r\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"d9cefe6d11c33d1011d7.worker.js\");\n};","import { SaveGame } from \"oni-save-parser\";\r\n\r\nconst COMMAND_PARSE_SAVE = \"parse-save\";\r\nexport const parseSave = (data: ArrayBuffer) => ({\r\n  type: COMMAND_PARSE_SAVE as typeof COMMAND_PARSE_SAVE,\r\n  data\r\n});\r\nexport type ParseSaveCommand = ReturnType<typeof parseSave>;\r\n\r\nconst RESULT_SAVE_SUCCESS = \"parse-save:success\";\r\nexport const parseSaveSuccess = (saveGame: SaveGame) => ({\r\n  type: RESULT_SAVE_SUCCESS as typeof RESULT_SAVE_SUCCESS,\r\n  saveGame\r\n});\r\nexport type ParseSaveSuccessResult = ReturnType<typeof parseSaveSuccess>;\r\n\r\nconst RESULT_SAVE_ERROR = \"parse-save:error\";\r\nexport const parseSaveError = (error: Error) => ({\r\n  type: RESULT_SAVE_ERROR as typeof RESULT_SAVE_ERROR,\r\n  error: errorToJson(error)\r\n});\r\nexport type ParseSaveErrorResult = ReturnType<typeof parseSaveError>;\r\n\r\nexport type ParseSaveResult = ParseSaveSuccessResult | ParseSaveErrorResult;\r\n\r\nconst COMMAND_WRITE_SAVE = \"write-save\";\r\nexport const writeSave = (saveGame: SaveGame) => ({\r\n  type: COMMAND_WRITE_SAVE as typeof COMMAND_WRITE_SAVE,\r\n  saveGame\r\n});\r\nexport type WriteSaveCommand = ReturnType<typeof writeSave>;\r\n\r\nconst RESULT_WRITE_SUCCESS = \"write-save:success\";\r\nexport const writeSaveSuccess = (data: ArrayBuffer) => ({\r\n  type: RESULT_WRITE_SUCCESS as typeof RESULT_WRITE_SUCCESS,\r\n  data\r\n});\r\nexport type WriteSaveSuccessResult = ReturnType<typeof writeSaveSuccess>;\r\n\r\nconst RESULT_WRITE_ERROR = \"write-save:error\";\r\nexport const writeSaveError = (error: Error) => ({\r\n  type: RESULT_WRITE_ERROR as typeof RESULT_WRITE_ERROR,\r\n  error: errorToJson(error)\r\n});\r\nexport type WriteSaveErrorResult = ReturnType<typeof writeSaveError>;\r\n\r\nexport type WriteSaveResult = WriteSaveSuccessResult | WriteSaveErrorResult;\r\n\r\nexport type SaveEditorCommand = ParseSaveCommand | WriteSaveCommand;\r\nexport type SaveEditorResult = ParseSaveResult | WriteSaveResult;\r\n\r\nexport interface SaveEditorCommandEvent extends MessageEvent {\r\n  data: SaveEditorCommand;\r\n}\r\n\r\nexport interface SaveEditorResultEvent extends MessageEvent {\r\n  data: SaveEditorResult;\r\n}\r\n\r\nexport interface ErrorJson {\r\n  name: string;\r\n  message: string;\r\n  stack?: string;\r\n}\r\nexport function errorToJson(e: Error): ErrorJson {\r\n  return {\r\n    name: e.name,\r\n    message: e.message,\r\n    stack: e.stack\r\n  };\r\n}\r\nexport function jsonToError(obj: ErrorJson): Error {\r\n  const e = new Error(obj.message);\r\n  e.name = obj.name;\r\n  e.stack = obj.stack;\r\n  return e;\r\n}\r\n","import { call } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { parseSave } from \"../worker-instance\";\r\n\r\nexport function* readSaveGame(file: File) {\r\n  const data: ArrayBuffer = yield call(readFile, file);\r\n  const saveGame: SaveGame = yield call(parseSave, data);\r\n  return saveGame;\r\n}\r\n\r\nfunction readFile(file: File): Promise<ArrayBuffer> {\r\n  const reader = new FileReader();\r\n  return new Promise<ArrayBuffer>((accept, reject) => {\r\n    reader.onload = () => {\r\n      accept(reader.result);\r\n    };\r\n    reader.onerror = () => {\r\n      reject(reader.error);\r\n    };\r\n    reader.readAsArrayBuffer(file);\r\n  });\r\n}\r\n","import { call, put, takeEvery } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { readSaveGame } from \"@/services/save-serializer/sagas\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_LOAD,\r\n  LoadOniSaveAction\r\n} from \"../actions/load-onisave\";\r\n\r\nimport {\r\n  receiveOniSaveBegin,\r\n  receiveOniSaveError,\r\n  receiveOniSaveSuccess\r\n} from \"../actions/receive-onisave\";\r\n\r\nexport default function* saveEditorSaga() {\r\n  yield takeEvery(ACTION_ONISAVE_LOAD, handleOniSaveLoad);\r\n}\r\n\r\nfunction* handleOniSaveLoad(action: LoadOniSaveAction) {\r\n  const file = action.payload;\r\n\r\n  yield put(receiveOniSaveBegin(\"loading\", true));\r\n  let save: SaveGame;\r\n  try {\r\n    save = yield call(readSaveGame, file);\r\n  } catch (error) {\r\n    yield put(receiveOniSaveError(error));\r\n    return;\r\n  }\r\n  yield put(receiveOniSaveSuccess(save));\r\n}\r\n","import { fork } from \"redux-saga/effects\";\r\n\r\nimport loadOniSaveSaga from \"./load-onisave\";\r\nimport saveOniSaveSaga from \"./save-onisave\";\r\n\r\nexport default function* saga() {\r\n  yield fork(loadOniSaveSaga);\r\n  yield fork(saveOniSaveSaga);\r\n}\r\n","import { ACTION_SET_EDITMODE, SetEditModeAction } from \"@/actions/set-editmode\";\r\nimport { AppState, defaultAppState } from \"@/state\";\r\n\r\nexport default function setEditMode(\r\n  state: AppState = defaultAppState,\r\n  action: SetEditModeAction\r\n): AppState {\r\n  if (action.type !== ACTION_SET_EDITMODE) {\r\n    return state;\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    editMode: action.payload\r\n  };\r\n}\r\n","import { ACTION_SELECT_PATH, SelectPathAction } from \"@/actions/select-path\";\r\nimport { AppState, defaultAppState } from \"@/state\";\r\n\r\nexport default function selectPathReducer(\r\n  state: AppState = defaultAppState,\r\n  action: SelectPathAction\r\n): AppState {\r\n  if (action.type !== ACTION_SELECT_PATH) {\r\n    return state;\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    selectedPath: action.payload\r\n  };\r\n}\r\n","import {\r\n  ReceiveOniSaveAction,\r\n  ACTION_RECEIVE_ONISAVE_BEGIN,\r\n  ACTION_RECEIVE_ONISAVE_ERROR,\r\n  ACTION_RECEIVE_ONISAVE_SUCCESS\r\n} from \"../actions/receive-onisave\";\r\nimport { AppState, defaultAppState } from \"@/state\";\r\n\r\nexport default function receiveOniSaveReducer(\r\n  state: AppState = defaultAppState,\r\n  action: ReceiveOniSaveAction\r\n): AppState {\r\n  switch (action.type) {\r\n    case ACTION_RECEIVE_ONISAVE_BEGIN:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        loadingState: action.payload.operation,\r\n        oniSave: action.payload.clearExisting ? null : state.oniSave\r\n      };\r\n      break;\r\n    case ACTION_RECEIVE_ONISAVE_ERROR:\r\n      state = {\r\n        ...state,\r\n        loadingState: \"idle\",\r\n        error: action.payload\r\n      };\r\n      break;\r\n    case ACTION_RECEIVE_ONISAVE_SUCCESS:\r\n      state = {\r\n        ...state,\r\n        loadingState: \"ready\",\r\n        error: null,\r\n        oniSave: action.payload\r\n      };\r\n  }\r\n\r\n  return state;\r\n}\r\n","import produce from \"immer\";\r\n\r\nimport { set } from \"lodash-es\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_MODIFY,\r\n  ModifyOniSaveAction\r\n} from \"../actions/modify-onisave\";\r\n\r\nexport default function modifyOniSaveReducer(\r\n  state: AppState,\r\n  action: ModifyOniSaveAction\r\n): AppState {\r\n  if (action.type !== ACTION_ONISAVE_MODIFY) {\r\n    return state;\r\n  }\r\n\r\n  const { loadingState, oniSave } = state;\r\n  if (loadingState !== \"ready\" || !oniSave) {\r\n    return state;\r\n  }\r\n\r\n  const { path, value } = action.payload;\r\n\r\n  return produce(state, draft => {\r\n    set(draft.oniSave!, path, value);\r\n  });\r\n}\r\n","import { AppState, defaultAppState } from \"@/state\";\r\n\r\nimport {\r\n  ACTION_DISMISS_ERROR,\r\n  DismissErrorAction\r\n} from \"@/actions/dismiss-error\";\r\n\r\nexport default function dismissErrorReducer(\r\n  state: AppState = defaultAppState,\r\n  action: DismissErrorAction\r\n): AppState {\r\n  if (action.type !== ACTION_DISMISS_ERROR) {\r\n    return state;\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    error: null\r\n  };\r\n}\r\n","import reduceReducers from \"reduce-reducers\";\r\n\r\nimport dismissErrorReducer from \"./dismiss-error\";\r\nimport modifyOniSave from \"./modify-onisave\";\r\nimport receiveOniSaveReducer from \"./receive-onisave\";\r\nimport selectPathReducer from \"./select-path\";\r\nimport setEditModeReducer from \"./set-editmode\";\r\n\r\nconst reducers = [\r\n  dismissErrorReducer,\r\n  modifyOniSave,\r\n  receiveOniSaveReducer,\r\n  selectPathReducer,\r\n  setEditModeReducer\r\n];\r\n\r\n// @ts-ignore: We need to tell the reducers thay may receive a non-matching item.\r\n//  I have not been able to craft a type that describes this though.\r\nexport default reduceReducers(...reducers);\r\n","import {\r\n  compose,\r\n  createStore as createReduxStore,\r\n  applyMiddleware\r\n} from \"redux\";\r\n\r\nimport createSagaMiddleware from \"redux-saga\";\r\n\r\nimport reducer from \"@/reducer\";\r\nimport saga from \"@/saga\";\r\n\r\nimport { actionSanitizer, stateSanitizer } from \"./devtool-sanitizer\";\r\n\r\nexport function createStore() {\r\n  const composeEnhancers =\r\n    (window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ &&\r\n      window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n        actionSanitizer,\r\n        stateSanitizer\r\n      })) ||\r\n    compose;\r\n\r\n  const sagaMiddleware = createSagaMiddleware();\r\n\r\n  const store = createReduxStore(\r\n    reducer,\r\n    composeEnhancers(applyMiddleware(sagaMiddleware))\r\n  );\r\n  sagaMiddleware.run(saga);\r\n  return store;\r\n}\r\n","import { createStore } from \"./store\";\r\n\r\nconst store = createStore();\r\nexport default store;\r\n","import * as React from \"react\";\r\nimport { hot } from \"react-hot-loader\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport { ThemeProvider } from \"styled-components\";\r\n\r\nimport store from \"./store\";\r\nimport theme from \"./theme\";\r\n\r\nimport App from \"./App\";\r\n\r\nconst Root: React.SFC = () => (\r\n  <Provider store={store}>\r\n    <ThemeProvider theme={theme}>\r\n      <App />\r\n    </ThemeProvider>\r\n  </Provider>\r\n);\r\n\r\nexport default hot(module)(Root);\r\n","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"* {\\r\\n  font-family: \\\"Titillium Web\\\", sans-serif;\\r\\n}\\r\\n\\r\\nhtml,\\r\\nbody,\\r\\n#root {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  margin: 0;\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../node_modules/css-loader/index.js!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./style.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\n\r\nimport Modal from \"react-modal\";\r\n\r\nimport \"./style.css\";\r\n\r\nimport Root from \"./root\";\r\n\r\nconst rootEl = document.getElementById(\"root\");\r\nif (rootEl) {\r\n  Modal.setAppElement(rootEl);\r\n  ReactDOM.render(<Root />, rootEl);\r\n}\r\n"],"sourceRoot":""}